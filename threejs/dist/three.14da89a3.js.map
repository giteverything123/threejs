{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./js/three.js","webpack:///(webpack)/buildin/module.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","default","object","property","prototype","hasOwnProperty","p","s","e","iterator","constructor","v1","min","max","dot","matrix","quaternion","q","startP","startEnd","points","vector","x","y","z","diff","edge1","edge2","normal","v","box","p1","p2","sphere","v2","m1","radianToDegreesFactor","degreeToRadiansFactor","chars","uuid","rnd","v0","position","scale","q1","inverseMatrix","ray","vA","vB","vC","offsetMatrix","matrixPosition","indices","vertices","uvs","geometry","programIdCount","namespace","area","snip","orientation","velocity","positionPrev","translationObject","quaternionObject","scaleObject","translationWorld","quaternionWorld","scaleWorld","target","newVector","newQuat","interpolateCatmullRom","interpolate","lastFrame","currentFrame","radians","axis","pointMap","camera","setPoint","v3","vector2","THREE","REVISION","_typeof","Math","sign","MOUSE","LEFT","MIDDLE","RIGHT","CullFaceNone","CullFaceBack","CullFaceFront","CullFaceFrontBack","FrontFaceDirectionCW","FrontFaceDirectionCCW","BasicShadowMap","PCFShadowMap","PCFSoftShadowMap","FrontSide","BackSide","DoubleSide","NoShading","FlatShading","SmoothShading","NoColors","FaceColors","VertexColors","NoBlending","NormalBlending","AdditiveBlending","SubtractiveBlending","MultiplyBlending","CustomBlending","AddEquation","SubtractEquation","ReverseSubtractEquation","MinEquation","MaxEquation","ZeroFactor","OneFactor","SrcColorFactor","OneMinusSrcColorFactor","SrcAlphaFactor","OneMinusSrcAlphaFactor","DstAlphaFactor","OneMinusDstAlphaFactor","DstColorFactor","OneMinusDstColorFactor","SrcAlphaSaturateFactor","MultiplyOperation","MixOperation","AddOperation","UVMapping","CubeReflectionMapping","CubeRefractionMapping","SphericalReflectionMapping","SphericalRefractionMapping","RepeatWrapping","ClampToEdgeWrapping","MirroredRepeatWrapping","NearestFilter","NearestMipMapNearestFilter","NearestMipMapLinearFilter","LinearFilter","LinearMipMapNearestFilter","LinearMipMapLinearFilter","UnsignedByteType","ByteType","ShortType","UnsignedShortType","IntType","UnsignedIntType","FloatType","UnsignedShort4444Type","UnsignedShort5551Type","UnsignedShort565Type","AlphaFormat","RGBFormat","RGBAFormat","LuminanceFormat","LuminanceAlphaFormat","RGB_S3TC_DXT1_Format","RGBA_S3TC_DXT1_Format","RGBA_S3TC_DXT3_Format","RGBA_S3TC_DXT5_Format","RGB_PVRTC_4BPPV1_Format","RGB_PVRTC_2BPPV1_Format","RGBA_PVRTC_4BPPV1_Format","RGBA_PVRTC_2BPPV1_Format","Color","color","arguments","length","this","setRGB","set","g","b","copy","setHex","setStyle","hex","floor","setHSL","h","hue2rgb","style","test","exec","parseInt","ColorKeywords","copyGammaToLinear","copyLinearToGamma","sqrt","convertGammaToLinear","convertLinearToGamma","getHex","getHexString","toString","slice","getHSL","optionalTarget","hue","saturation","hsl","lightness","delta","getStyle","offsetHSL","add","addColors","color1","color2","addScalar","multiply","multiplyScalar","lerp","alpha","equals","fromArray","array","toArray","clone","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","Quaternion","w","_x","_y","_z","_w","onChangeCallback","setFromEuler","euler","update","Euler","Error","c1","cos","c2","c3","s1","sin","s2","s3","order","setFromAxisAngle","angle","halfAngle","setFromRotationMatrix","te","elements","m11","m12","m13","m21","m22","m23","m31","m32","m33","trace","setFromUnitVectors","vFrom","vTo","Vector3","abs","crossVectors","normalize","inverse","conjugate","lengthSq","console","warn","multiplyQuaternions","a","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","multiplyVector3","applyQuaternion","slerp","qb","cosHalfTheta","halfTheta","acos","sinHalfTheta","ratioA","ratioB","offset","onChange","callback","qa","qm","Vector2","setX","setY","setComponent","index","getComponent","addVectors","sub","subVectors","divide","divideScalar","scalar","invScalar","clamp","clampScalar","minVal","maxVal","ceil","round","roundToZero","negate","distanceTo","distanceToSquared","dx","dy","setLength","oldLength","setZ","multiplyVectors","applyEuler","error","applyAxisAngle","applyMatrix3","applyMatrix4","applyProjection","qx","qy","qz","qw","ix","iy","iz","iw","project","Matrix4","multiplyMatrices","projectionMatrix","getInverse","matrixWorld","unproject","transformDirection","lengthManhattan","cross","ax","ay","az","bx","by","bz","projectOnVector","projectOnPlane","planeNormal","reflect","angleTo","theta","dz","setEulerFromRotationMatrix","setEulerFromQuaternion","getPositionFromMatrix","setFromMatrixPosition","getScaleFromMatrix","setFromMatrixScale","getColumnFromMatrix","setFromMatrixColumn","sx","sy","sz","me","Vector4","setW","setAxisAngleFromQuaternion","setAxisAngleFromRotationMatrix","PI","xx","yy","zz","xy","xz","yz","_order","DefaultOrder","RotationOrders","asin","atan2","setFromQuaternion","sqx","sqy","sqz","sqw","reorder","newOrder","Line3","start","end","line","center","distanceSq","distance","at","result","closestPointToPointParameter","point","clampToLine","startEnd2","closestPointToPoint","Box2","Infinity","setFromPoints","makeEmpty","il","expandByPoint","setFromCenterAndSize","size","halfSize","empty","expandByVector","expandByScalar","containsPoint","containsBox","getParameter","isIntersectionBox","clampPoint","distanceToPoint","intersect","union","translate","Box3","setFromObject","scope","updateMatrixWorld","traverse","node","Geometry","BufferGeometry","attributes","positions","getBoundingSphere","Sphere","radius","Matrix3","Float32Array","n11","n12","n13","n21","n22","n23","n31","n32","n33","identity","multiplyVector3Array","applyToVector3Array","j","determinant","f","throwOnInvertible","det","msg","transpose","tmp","flattenToArrayOffset","getNormalMatrix","transposeIntoArray","n14","n24","n34","n41","n42","n43","n44","extractPosition","copyPosition","extractRotation","scaleX","scaleY","scaleZ","makeRotationFromEuler","ae","af","be","bf","ce","cf","de","df","ac","ad","bc","bd","setRotationFromQuaternion","makeRotationFromQuaternion","x2","y2","z2","wx","wy","wz","lookAt","eye","up","a11","a12","a13","a14","a21","a22","a23","a24","a31","a32","a33","a34","a41","a42","a43","a44","b11","b12","b13","b14","b21","b22","b23","b24","b31","b32","b33","b34","b41","b42","b43","b44","multiplyToArray","multiplyVector4","rotateAxis","crossVector","getPosition","setPosition","rotateX","rotateY","rotateZ","rotateByAxis","getMaxScaleOnAxis","scaleXSq","scaleYSq","scaleZSq","makeTranslation","makeRotationX","makeRotationY","makeRotationZ","makeRotationAxis","tx","ty","makeScale","compose","decompose","invSX","invSY","invSZ","makeFrustum","left","right","bottom","top","near","far","makePerspective","fov","aspect","ymax","degToRad","ymin","xmin","xmax","makeOrthographic","Ray","origin","direction","recast","directionDistance","distanceSqToSegment","optionalPointOnRay","optionalPointOnSegment","s0","sqrDist","extDet","segCenter","segDir","segExtent","a01","b0","b1","invDet","isIntersectionSphere","intersectSphere","tca","d2","radius2","thc","t0","t1","isIntersectionPlane","plane","distToPoint","distanceToPlane","denominator","constant","intersectPlane","intersectBox","tmin","tmax","tymin","tymax","tzmin","tzmax","invdirx","invdiry","invdirz","intersectTriangle","backfaceCulling","DdN","DdQxE2","DdE1xQ","QdN","matrix4","optionalCenter","maxRadiusSq","intersectsSphere","radiusSum","deltaLengthSq","getBoundingBox","Frustum","p0","p3","p4","p5","planes","Plane","frustum","setFromMatrix","me0","me1","me2","me3","me4","me5","me6","me7","me8","me9","me10","me11","me12","me13","me14","me15","setComponents","intersectsObject","boundingSphere","computeBoundingSphere","negRadius","intersectsBox","d1","setFromNormalAndCoplanarPoint","setFromCoplanarPoints","inverseNormalLength","distanceToSphere","projectPoint","orthoPoint","perpendicularMagnitude","isIntersectionLine","startSign","endSign","intersectLine","coplanarPoint","optionalNormalMatrix","normalMatrix","newNormal","newCoplanarPoint","generateUUID","split","Array","random","join","clampBottom","mapLinear","a1","a2","b2","smoothstep","smootherstep","random16","randInt","low","high","randFloat","randFloatSpread","range","degrees","radToDeg","isPowerOfTwo","Spline","intPoint","weight","w2","w3","pa","pb","pc","pd","t2","t3","initFromArray","getPoint","k","getControlPointsArray","coords","getLength","nSubDivisions","nSamples","oldIntPoint","oldPosition","tmpVec","chunkLengths","totalLength","chunks","total","reparametrizeByArcLength","samplingCoef","indexCurrent","indexNext","realDistance","sampling","newpoints","sl","push","Triangle","resultLengthSq","barycoordFromPoint","dot00","dot01","dot02","dot11","dot12","denom","invDenom","u","setFromPointsAndIndices","i0","i1","i2","triangle","midpoint","Clock","autoStart","startTime","oldTime","elapsedTime","running","self","performance","now","Date","stop","getElapsedTime","getDelta","newTime","EventDispatcher","apply","addEventListener","hasEventListener","removeEventListener","dispatchEvent","type","listener","_listeners","listeners","indexOf","listenerArray","splice","event","Raycaster","params","Sprite","Mesh","PointCloud","threshold","LOD","Line","descSort","intersectObject","raycaster","intersects","recursive","raycast","children","precision","linePrecision","sort","intersectObjects","objects","log","Object3D","Object3DIdCount","parent","DefaultUp","rotation","undefined","defineProperties","renderDepth","rotationAutoUpdate","matrixAutoUpdate","matrixWorldNeedsUpdate","visible","castShadow","receiveShadow","frustumCulled","userData","eulerOrder","useQuaternion","applyMatrix","setRotationFromAxisAngle","setRotationFromEuler","setRotationFromMatrix","rotateOnAxis","translateOnAxis","translateX","translateY","translateZ","localToWorld","worldToLocal","remove","getChildByName","getObjectByName","getObjectById","id","getWorldPosition","getWorldQuaternion","getWorldRotation","getWorldScale","getWorldDirection","traverseVisible","updateMatrix","force","toJSON","output","metadata","version","generator","geometries","parseGeometry","json","materials","parseMaterial","material","parseObject","data","JSON","stringify","PerspectiveCamera","OrthographicCamera","AmbientLight","DirectionalLight","intensity","PointLight","SpotLight","exponent","HemisphereLight","groundColor","parse","child","Projector","projectVector","unprojectVector","pickingRay","Face3","materialIndex","vertexNormals","vertexColors","vertexTangents","face","Face4","BufferAttribute","itemSize","needsUpdate","copyAt","index1","attribute","index2","setXY","setXYZ","setXYZW","Int8Attribute","Uint8Attribute","Uint8ClampedAttribute","Int16Attribute","Uint16Attribute","Int32Attribute","Uint32Attribute","Float32Attribute","Float64Attribute","GeometryIdCount","attributesKeys","drawcalls","offsets","boundingBox","addAttribute","keys","getAttribute","addDrawCall","count","indexOffset","fromGeometry","settings","faces","faceVertexUvs","hasFaceVertexUv","hasFaceVertexNormals","normals","colors","i3","na","nb","nc","fc","vca","vcb","vcc","uva","uvb","uvc","computeBoundingBox","bb","isNaN","computeFaceNormals","computeVertexNormals","pA","pB","pC","cb","ab","jl","normalizeNormals","computeTangents","uv","nVertices","tangent","tangents","tan1","tan2","x1","y1","z1","iA","iB","iC","uvA","uvB","uvC","sdir","tdir","tmp2","n2","handleVertex","computeOffsets","indexBufferSize","facesCount","sortedIndices","Uint16Array","indexPtr","vertexPtr","newVerticeMaps","faceVertices","Int32Array","vertexMap","revVertexMap","findex","vo","vid","new_offset","new_vid","reorderBuffers","merge","indexBuffer","indexMap","vertexCount","sortedAttributes","attr","sourceArray","attrArray","attrSize","sortedAttr","numItems","typeArray","sourceAttr","dispose","morphTargets","morphColors","morphNormals","skinWeights","skinIndices","lineDistances","hasTangents","dynamic","verticesNeedUpdate","elementsNeedUpdate","uvsNeedUpdate","normalsNeedUpdate","tangentsNeedUpdate","colorsNeedUpdate","lineDistancesNeedUpdate","groupsNeedUpdate","fromBufferGeometry","tempNormals","tempUVs","addFace","fl","areaWeighted","vl","computeMorphNormals","__originalFaceNormal","__originalVertexNormals","tmpGeo","faceNormals","dstNormalsFace","dstNormalsVertex","faceNormal","vertexIndex","context","ua","ub","uc","faceIndex","computeLineDistances","materialIndexOffset","vertexOffset","vertices1","vertices2","faces1","faces2","uvs1","uvs2","vertexCopy","faceCopy","faceVertexNormals","faceVertexColors","uvCopy","mergeVertices","verticesMap","unique","changes","pow","faceIndicesToRemove","idx","parameters","vertex","normalsHash","colorsHash","uvsHash","hasFaceNormal","hasFaceVertexNormal","hasFaceColor","hasFaceVertexColor","faceType","setBit","getUvIndex","getNormalIndex","getColorIndex","enabled","hash","Camera","matrixWorldInverse","CubeCamera","cubeResolution","cameraPX","cameraNX","cameraPY","cameraNY","cameraPZ","cameraNZ","renderTarget","WebGLRenderTargetCube","format","magFilter","minFilter","updateCubeMap","renderer","scene","generateMipmaps","activeCubeFace","render","zoom","updateProjectionMatrix","cx","cy","setLens","focalLength","frameHeight","atan","setViewOffset","fullWidth","fullHeight","width","height","Light","light","AreaLight","constantAttenuation","linearAttenuation","quadraticAttenuation","onlyShadow","shadowCameraNear","shadowCameraFar","shadowCameraLeft","shadowCameraRight","shadowCameraTop","shadowCameraBottom","shadowCameraVisible","shadowBias","shadowDarkness","shadowMapWidth","shadowMapHeight","shadowCascade","shadowCascadeOffset","shadowCascadeCount","shadowCascadeBias","shadowCascadeWidth","shadowCascadeHeight","shadowCascadeNearZ","shadowCascadeFarZ","shadowCascadeArray","shadowMap","shadowMapSize","shadowCamera","shadowMatrix","skyColor","shadowCameraFov","Cache","files","file","clear","Loader","showStatus","statusDomElement","addStatusElement","imageLoader","ImageLoader","onLoadStart","onLoadProgress","onLoadComplete","crossOrigin","document","createElement","fontSize","textAlign","background","padding","zIndex","innerHTML","updateProgress","progress","message","loaded","toFixed","extractUrlBase","url","parts","pop","initMaterials","texturePath","createMaterial","needsTangents","ShaderMaterial","nearest_pow2","LN2","create_texture","where","sourceFile","repeat","wrap","anisotropy","texture","fullPath","loader","Handlers","load","Texture","image","canvas","getContext","drawImage","wrapS","wrapT","wrapMap","mirror","rgb2hex","rgb","mtype","mpars","opacity","map","lightMap","normalMap","bumpMap","wireframe","shading","toLowerCase","blending","transparent","depthTest","depthWrite","flipSided","side","doubleSided","colorDiffuse","DbgColor","colorSpecular","specular","colorAmbient","ambient","colorEmissive","emissive","transparency","specularCoef","shininess","mapDiffuse","mapDiffuseRepeat","mapDiffuseOffset","mapDiffuseWrap","mapDiffuseAnisotropy","mapLight","mapLightRepeat","mapLightOffset","mapLightWrap","mapLightAnisotropy","mapBump","mapBumpRepeat","mapBumpOffset","mapBumpWrap","mapBumpAnisotropy","mapNormal","mapNormalRepeat","mapNormalOffset","mapNormalWrap","mapNormalAnisotropy","mapSpecular","mapSpecularRepeat","mapSpecularOffset","mapSpecularWrap","mapSpecularAnisotropy","mapAlpha","mapAlphaRepeat","mapAlphaOffset","mapAlphaWrap","mapAlphaAnisotropy","mapBumpScale","bumpScale","shader","ShaderLib","normalmap","uniforms","UniformsUtils","tNormal","mapNormalFactor","uNormalScale","tDiffuse","enableDiffuse","specularMap","tSpecular","enableSpecular","tAO","enableAO","diffuse","fragmentShader","vertexShader","lights","fog","DbgName","handlers","regex","XHRLoader","manager","cache","DefaultLoadingManager","onLoad","onProgress","onError","cached","request","XMLHttpRequest","open","response","itemEnd","responseType","send","itemStart","setResponseType","setCrossOrigin","src","JSONLoader","withCredentials","loadAjaxJSON","callbackProgress","xhr","onreadystatechange","readyState","DONE","status","responseText","LOADING","getResponseHeader","HEADERS_RECEIVED","isBitSet","fi","zLength","colorIndex","normalIndex","uvIndex","isQuad","hasMaterial","faceA","faceB","uvLayer","nUvLayers","influencesPerVertex","bones","animation","animations","dstVertices","srcVertices","cl","dstColors","srcColors","LoadingManager","BufferGeometryLoader","text","typedArray","MaterialLoader","ObjectLoader","parseGeometries","parseMaterials","geometryLoader","bufferGeometryLoader","PlaneGeometry","widthSegments","heightSegments","BoxGeometry","depth","depthSegments","CircleGeometry","segments","CylinderGeometry","radiusTop","radiusBottom","radialSegments","openEnded","SphereGeometry","phiStart","phiLength","thetaStart","thetaLength","IcosahedronGeometry","detail","TorusGeometry","tube","tubularSegments","arc","TorusKnotGeometry","heightScale","Scene","Group","TextureLoader","CompressedTextureLoader","_parser","images","CompressedTexture","loadTexture","buffer","texDatas","mipmaps","mipmapCount","isCubemap","Material","MaterialIdCount","blendSrc","blendDst","blendEquation","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","alphaTest","overdraw","setValues","values","newValue","currentValue","Number","MeshBasicMaterial","MeshLambertMaterial","MeshPhongMaterial","MeshNormalMaterial","MeshDepthMaterial","SpriteMaterial","LineBasicMaterial","linewidth","linecap","linejoin","LineDashedMaterial","dashSize","gapSize","alphaMap","envMap","combine","reflectivity","refractionRatio","wireframeLinewidth","wireframeLinecap","wireframeLinejoin","skinning","wrapAround","wrapRGB","metal","normalScale","MeshFaceMaterial","PointCloudMaterial","sizeAttenuation","ParticleBasicMaterial","ParticleSystemMaterial","defines","defaultAttributeValues","uv2","index0AttributeName","RawShaderMaterial","mapping","TextureIdCount","DEFAULT_IMAGE","DEFAULT_MAPPING","premultiplyAlpha","flipY","unpackAlignment","_needsUpdate","onUpdate","CubeTexture","DataTexture","VideoTexture","video","requestAnimationFrame","HAVE_ENOUGH_DATA","sortParticles","localThreshold","testPoint","rayPointDistance","intersectPoint","distanceToRay","oi","ol","pointCount","ParticleSystem","LineStrip","LinePieces","precisionSq","nbVertices","interSegment","interRay","step","updateMorphTargets","morphTargetBase","morphTargetForcedOrder","morphTargetInfluences","morphTargetDictionary","ml","getMorphTargetIndexByName","intersectionPoint","isFaceMaterial","objectMaterials","morphInfluences","tl","influence","targets","Bone","belongsToSkin","skin","Skeleton","boneInverses","useVertexTexture","identityMatrix","boneTextureWidth","boneTextureHeight","boneMatrices","boneTexture","calculateInverses","bl","pose","bone","SkinnedMesh","bindMode","bindMatrix","bindMatrixInverse","gbone","pos","rotq","scl","normalizeSkinWeights","skeleton","sw","MorphAnimMesh","duration","mirroredLoop","time","lastKeyframe","currentKeyframe","directionBackwards","setFrameRange","startKeyframe","endKeyframe","setDirectionForward","setDirectionBackward","parseAnimations","firstAnimation","pattern","match","label","setAnimationLabel","playAnimation","fps","updateAnimation","frameTime","keyframe","mix","interpolateTargets","influences","addLevel","getObjectForDistance","Particle","LensFlare","lensFlares","positionScreen","customUpdateCallback","updateLensFlares","flare","vecX","vecY","wantedRotation","overrideMaterial","autoUpdate","Fog","FogExp2","density","ShaderChunk","alphatest_fragment","lights_lambert_vertex","map_particle_pars_fragment","default_vertex","map_pars_fragment","skinnormal_vertex","logdepthbuf_pars_vertex","lightmap_pars_vertex","lights_phong_fragment","fog_pars_fragment","morphnormal_vertex","envmap_pars_fragment","logdepthbuf_fragment","normalmap_pars_fragment","lights_phong_pars_vertex","lightmap_pars_fragment","shadowmap_vertex","lights_phong_vertex","map_fragment","lightmap_vertex","map_particle_fragment","color_pars_fragment","color_vertex","skinning_vertex","envmap_pars_vertex","linear_to_gamma_fragment","color_pars_vertex","lights_lambert_pars_vertex","map_pars_vertex","envmap_fragment","specularmap_pars_fragment","logdepthbuf_vertex","morphtarget_pars_vertex","specularmap_fragment","fog_fragment","bumpmap_pars_fragment","defaultnormal_vertex","lights_phong_pars_fragment","skinbase_vertex","map_vertex","lightmap_fragment","shadowmap_pars_vertex","color_fragment","morphtarget_vertex","envmap_vertex","shadowmap_fragment","worldpos_vertex","shadowmap_pars_fragment","skinning_pars_vertex","logdepthbuf_pars_fragment","alphamap_fragment","alphamap_pars_fragment","merged","uniforms_src","uniforms_dst","parameter_src","UniformsLib","common","offsetRepeat","flipEnvMap","useRefract","bump","fogDensity","fogNear","fogFar","fogColor","ambientLightColor","directionalLightDirection","directionalLightColor","hemisphereLightDirection","hemisphereLightSkyColor","hemisphereLightGroundColor","pointLightColor","pointLightPosition","pointLightDistance","spotLightColor","spotLightPosition","spotLightDirection","spotLightDistance","spotLightAngleCos","spotLightExponent","particle","psColor","shadowmap","basic","lambert","phong","particle_basic","dashed","totalSize","mNear","mFar","enableReflection","enableDisplacement","tDisplacement","tCube","uDisplacementBias","uDisplacementScale","uOffset","uRepeat","cube","tFlip","depthRGBA","WebGLRenderer","_canvas","_context","_precision","_alpha","_depth","_stencil","stencil","_antialias","antialias","_premultipliedAlpha","premultipliedAlpha","_preserveDrawingBuffer","preserveDrawingBuffer","_logarithmicDepthBuffer","logarithmicDepthBuffer","_clearColor","_clearAlpha","_webglObjects","_webglObjectsImmediate","opaqueObjects","transparentObjects","sprites","domElement","devicePixelRatio","autoClear","autoClearColor","autoClearDepth","autoClearStencil","sortObjects","gammaInput","gammaOutput","shadowMapEnabled","shadowMapType","shadowMapCullFace","shadowMapDebug","shadowMapCascade","maxMorphTargets","maxMorphNormals","autoScaleCubemaps","info","memory","programs","textures","calls","_gl","_this","_programs","_currentProgram","_currentFramebuffer","_currentMaterialId","_currentGeometryGroupHash","_currentCamera","_usedTextureUnits","_oldDoubleSided","_oldFlipSided","_oldBlending","_oldBlendEquation","_oldBlendSrc","_oldBlendDst","_oldDepthTest","_oldDepthWrite","_oldPolygonOffset","_oldPolygonOffsetFactor","_oldPolygonOffsetUnits","_oldLineWidth","_viewportX","_viewportY","_viewportWidth","_viewportHeight","_currentWidth","_currentHeight","_newAttributes","Uint8Array","_enabledAttributes","_frustum","_projScreenMatrix","_projScreenMatrixPS","_vector3","_direction","_lightsNeedUpdate","_lights","directional","distances","spot","directions","anglesCos","exponents","hemi","skyColors","groundColors","getShaderPrecisionFormat","rangeMin","rangeMax","extensions","WebGLExtensions","clearColor","clearDepth","clearStencil","enable","DEPTH_TEST","depthFunc","LEQUAL","frontFace","CCW","cullFace","BACK","CULL_FACE","BLEND","FUNC_ADD","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","viewport","_maxTextures","MAX_TEXTURE_IMAGE_UNITS","_maxVertexTextures","MAX_VERTEX_TEXTURE_IMAGE_UNITS","_maxTextureSize","MAX_TEXTURE_SIZE","_maxCubemapSize","MAX_CUBE_MAP_TEXTURE_SIZE","_supportsVertexTextures","_supportsBoneTextures","_vertexShaderPrecisionHighpFloat","VERTEX_SHADER","HIGH_FLOAT","_vertexShaderPrecisionMediumpFloat","MEDIUM_FLOAT","_fragmentShaderPrecisionHighpFloat","LOW_FLOAT","FRAGMENT_SHADER","_fragmentShaderPrecisionMediumpFloat","getCompressedTextureFormats","formats","COMPRESSED_TEXTURE_FORMATS","highpAvailable","mediumpAvailable","shadowMapPlugin","ShadowMapPlugin","spritePlugin","SpritePlugin","lensFlarePlugin","LensFlarePlugin","createMeshBuffers","geometryGroup","__webglVertexBuffer","createBuffer","__webglNormalBuffer","__webglTangentBuffer","__webglColorBuffer","__webglUVBuffer","__webglUV2Buffer","__webglSkinIndicesBuffer","__webglSkinWeightsBuffer","__webglFaceBuffer","__webglLineBuffer","numMorphTargets","__webglMorphTargetsBuffers","numMorphNormals","__webglMorphNormalsBuffers","supportsVertexTextures","supportsFloatTextures","supportsStandardDerivatives","supportsCompressedTextureS3TC","supportsCompressedTexturePVRTC","supportsBlendMinMax","getMaxAnisotropy","extension","MAX_TEXTURE_MAX_ANISOTROPY_EXT","getPrecision","setSize","updateStyle","setViewport","setScissor","scissor","enableScissorTest","SCISSOR_TEST","disable","setClearColor","setClearColorHex","getClearColor","getClearAlpha","bits","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT","clearTarget","setRenderTarget","resetGLState","onObjectRemoved","ImmediateRenderObject","immediateRenderCallback","objlist","__webglInit","_modelViewMatrix","_normalMatrix","__webglActive","onGeometryDispose","deallocateGeometry","onTextureDispose","deallocateTexture","onRenderTargetDispose","deallocateRenderTarget","onMaterialDispose","deallocateMaterial","deleteBuffers","buffers","deleteBuffer","__webglCustomAttributesList","geometryGroupsList","geometryGroups","__webglTextureCube","deleteTexture","__webglTexture","deleteFramebuffer","__webglFramebuffer","deleteRenderbuffer","__webglRenderbuffer","program","programInfo","deleteProgram","usedTimes","newPrograms","initCustomAttributes","nvertices","__webglInitialized","createUniqueBuffers","belongsToAttribute","initMeshBuffers","faces3","ntris","nlines","getBufferMaterial","__vertexArray","__normalArray","__colorArray","__uvArray","__uv2Array","__tangentArray","__skinIndexArray","__skinWeightArray","UintArray","Uint32Array","__typeArray","__faceArray","__lineArray","__morphTargetsArrays","__morphNormalsArrays","__webglFaceCount","__webglLineCount","originalAttribute","__original","__inittedArrays","setMeshBuffers","hint","faceColor","n1","n3","sw1","sw2","sw3","si1","si2","si3","vn","uvi","uv2i","vk","vkl","vka","nka","chf","customAttribute","needsSmoothNormals","offset_uv","offset_uv2","offset_face","offset_normal","offset_tangent","offset_line","offset_color","offset_skin","offset_morphTarget","offset_custom","vertexArray","uvArray","uv2Array","normalArray","tangentArray","colorArray","skinIndexArray","skinWeightArray","morphTargetsArrays","morphNormalsArrays","customAttributes","faceArray","lineArray","dirtyVertices","dirtyElements","dirtyUvs","dirtyNormals","dirtyTangents","dirtyColors","dirtyMorphTargets","morphTargetsNeedUpdate","chunk_faces3","obj_faces","obj_uvs","obj_uvs2","obj_skinIndices","obj_skinWeights","bindBuffer","ARRAY_BUFFER","bufferData","ELEMENT_ARRAY_BUFFER","boundTo","pp","setupVertexAttributes","startIndex","geometryAttributes","programAttributes","programAttributesKeys","programAttribute","geometryAttribute","enableAttribute","vertexAttribPointer","FLOAT","vertexAttrib2fv","vertexAttrib3fv","disableUnusedAttributes","initAttributes","enableVertexAttribArray","disableVertexAttribArray","painterSortStable","reversePainterSortStable","numericalSort","renderObjects","renderList","useBlending","webglObject","setupMatrices","setBlending","setDepthTest","setDepthWrite","setPolygonOffset","setMaterialFaces","renderBufferDirect","renderBuffer","renderObjectsImmediate","materialType","renderImmediateObject","unrollImmediateBufferMaterial","globject","opaque","unrollBufferMaterial","renderBufferImmediate","hasPositions","hasNormals","hasUvs","__webglUvBuffer","hasColors","positionArray","DYNAMIC_DRAW","nx","ny","nz","nax","nbx","nay","nby","naz","nbz","drawArrays","TRIANGLES","setProgram","updateBuffers","wireframeBit","geometryHash","LINES","UNSIGNED_INT","UNSIGNED_SHORT","drawElements","POINTS","LINE_STRIP","setLineWidth","geometryGroupHash","numSupportedMorphTargets","__webglMorphTargetInfluences","activeInfluenceIndices","numSupportedMorphNormals","influenceIndex","uniform1fv","skinIndex","skinWeight","lineDistance","__webglLineDistanceBuffer","__webglParticleCount","forceClear","projectObject","initGeometryGroups","__lineDistanceArray","__sortArray","addBuffer","initObject","webglObjects","customAttributesDirty","bufferType","STATIC_DRAW","areCustomAttributesDirty","clearCustomAttributes","ca","cal","dl","lineDistanceArray","dirtyLineDistances","sortArray","updateObject","bindTexture","TEXTURE_CUBE_MAP","generateMipmap","TEXTURE_2D","geometryGroupCounter","usesFaceMaterial","groupHash","group","maxVerticesInGroup","hash_map","groups","groupsList","counter","shaderID","__webglShader","maxLightCount","dirLights","pointLights","spotLights","hemiLights","ll","maxShadows","maxBones","nVertexUniforms","MAX_VERTEX_UNIFORM_VECTORS","useFog","fogExp","maxDirLights","maxPointLights","maxSpotLights","maxHemiLights","code","pl","WebGLProgram","base","uniformsList","location","initMaterial","refreshProgram","refreshMaterial","refreshLights","p_uniforms","m_uniforms","useProgram","uniformMatrix4fv","uniform1f","logDepthBufFC","cameraPosition","uniform3f","viewMatrix","textureUnit","getTextureUnit","uniform1i","setTexture","boneGlobalMatrices","intensitySq","zlights","dirColors","dirPositions","pointColors","pointPositions","pointDistances","spotColors","spotPositions","spotDistances","spotDirections","spotAnglesCos","spotExponents","hemiSkyColors","hemiGroundColors","hemiPositions","dirLength","pointLength","spotLength","hemiLength","dirCount","spotCount","hemiCount","dirOffset","pointOffset","spotOffset","hemiOffset","setColorGamma","setColorLinear","markUniformsLightsNeedsUpdate","uvScaleMap","refreshUniformsLine","_shadowPass","uniform","uniform2f","uniform4f","uniform1iv","uniform3iv","uniform2fv","uniform3fv","uniform4fv","uniformMatrix3fv","_array","setCubeTexture","setCubeTextureDynamic","modelViewMatrix","modelMatrix","boolean","lineWidth","polygonoffset","factor","units","POLYGON_OFFSET_FILL","setTextureParameters","textureType","isImagePowerOfTwo","texParameteri","TEXTURE_WRAP_S","paramThreeToGL","TEXTURE_WRAP_T","TEXTURE_MAG_FILTER","TEXTURE_MIN_FILTER","CLAMP_TO_EDGE","filterFallback","__oldAnisotropy","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","clampToMaxSize","maxSize","slot","createTexture","activeTexture","TEXTURE0","pixelStorei","UNPACK_FLIP_Y_WEBGL","isCompressed","isDataTexture","cubeImage","glFormat","glType","mipmap","compressedTexImage2D","TEXTURE_CUBE_MAP_POSITIVE_X","texImage2D","setupFrameBuffer","framebuffer","textureTarget","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","COLOR_ATTACHMENT0","setupRenderBuffer","renderbuffer","bindRenderbuffer","RENDERBUFFER","depthBuffer","stencilBuffer","renderbufferStorage","DEPTH_COMPONENT16","framebufferRenderbuffer","DEPTH_ATTACHMENT","DEPTH_STENCIL","DEPTH_STENCIL_ATTACHMENT","RGBA4","NEAREST","LINEAR","REPEAT","MIRRORED_REPEAT","NEAREST_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_NEAREST","LINEAR_MIPMAP_LINEAR","UNSIGNED_BYTE","UNSIGNED_SHORT_4_4_4_4","UNSIGNED_SHORT_5_5_5_1","UNSIGNED_SHORT_5_6_5","BYTE","SHORT","INT","ALPHA","RGB","RGBA","LUMINANCE","LUMINANCE_ALPHA","FUNC_SUBTRACT","FUNC_REVERSE_SUBTRACT","ZERO","ONE","SRC_COLOR","ONE_MINUS_SRC_COLOR","DST_ALPHA","ONE_MINUS_DST_ALPHA","DST_COLOR","ONE_MINUS_DST_COLOR","SRC_ALPHA_SATURATE","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","MIN_EXT","MAX_EXT","setFaceCulling","frontFaceDirection","CW","FRONT","FRONT_AND_BACK","depthMask","blendEquationSeparate","blendFuncSeparate","uploadTexture","UNPACK_PREMULTIPLY_ALPHA_WEBGL","UNPACK_ALIGNMENT","vx","vy","isCube","isTargetPowerOfTwo","createFramebuffer","createRenderbuffer","shareDepthFrom","addPrePlugin","addPostPlugin","updateShadowMap","WebGLRenderTarget","options","gl","getExtension","shadowMapTypeDefine","prefix_vertex","prefix_fragment","customDefines","chunk","createProgram","glVertexShader","WebGLShader","glFragmentShader","attachShader","bindAttribLocation","linkProgram","getProgramParameter","LINK_STATUS","VALIDATE_STATUS","getError","getProgramInfoLog","deleteShader","identifiers","getUniformLocation","getAttribLocation","string","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","lines","flares","vertexBuffer","elementBuffer","hasVertexTexture","tempTexture","occlusionTexture","viewportWidth","viewportHeight","tempPosition","invAspect","halfViewportWidth","halfViewportHeight","screenPosition","screenPositionPixels","prefix","renderType","occlusionMap","init","TEXTURE1","copyTexImage2D","sprite","_renderer","_depthMaterial","_depthMaterialMorph","_depthMaterialSkin","_depthMaterialMorphSkin","_min","_max","_matrixPosition","_renderList","depthShader","depthUniforms","createVirtualLight","cascade","virtualLight","isVirtual","pointsWorld","pointsFrustum","nearZ","farZ","updateVirtualLight","updateShadowCamera","originalCamera","gyro","Gyroscope","shadowFilter","pars","objectMaterial","useMorphing","useSkinning","cameraHelper","CameraHelper","customDepthMaterial","clearAlpha","uvOffset","uvScale","fogType","fillStyle","fillRect","oldFogType","sceneFogType","GeometryUtils","geometry1","geometry2","ImageUtils","loadTextureCube","loadCompressedTexture","loadCompressedTextureCube","getNormalMap","subtract","getImageData","imageData","createImageData","ly","uy","lx","ux","num_points","putImageData","generateDataTexture","SceneUtils","createMultiMaterialObject","detach","attach","FontUtils","divisions","getFace","loadFace","family","familyName","cssFontWeight","cssFontStyle","drawText","resolution","String","fontPaths","path","Path","ret","extractGlyphPoints","paths","outline","cpx","cpy","cpx0","cpy0","cpx1","cpy1","cpx2","cpy2","laste","pts","glyph","glyphs","_cachedOutline","moveTo","lineTo","quadraticCurveTo","Shape","Utils","bezierCurveTo","b3","ha","generateShapes","curveSegments","font","shapes","toShapes","contour","verts","px","py","aX","aY","bX","bY","cX","cY","Triangulate","vertIndices","nv","_typeface_js","typeface_js","Audio","source","createBufferSource","gain","createGain","connect","destination","panner","createPanner","onload","decodeAudioData","setLoop","loop","setRefDistance","refDistance","setRolloffFactor","rolloffFactor","AudioListener","window","AudioContext","webkitAudioContext","setOrientation","setVelocity","Curve","getPointAt","getUtoTmapping","getPoints","getSpacedPoints","lengths","getLengths","__arcLengthDivisions","cacheArcLengths","current","last","sum","updateArcLengths","targetArcLength","arcLengths","comparison","lengthBefore","getTangent","pt1","getTangentAt","tangentQuadraticBezier","tangentCubicBezier","tangentSpline","getPointFunc","CurvePath","curves","bends","autoClose","curve","checkConnection","closePath","startPoint","endPoint","LineCurve","curveLengths","getCurveLengths","lens","cacheLengths","sums","maxX","maxY","maxZ","minX","minY","minZ","NEGATIVE_INFINITY","POSITIVE_INFINITY","createPointsGeometry","createGeometry","createSpacedPointsGeometry","addWrapPath","bendpath","getTransformedPoints","oldPts","getWrapPoints","getTransformedSpacedPoints","oldX","oldY","xNorm","bounds","pathPt","actions","fromPoints","PathActions","MOVE_TO","LINE_TO","QUADRATIC_CURVE_TO","BEZIER_CURVE_TO","CSPLINE_THRU","ARC","ELLIPSE","vectors","vlen","args","action","lastargs","x0","y0","aCPx","aCPy","QuadraticBezierCurve","aCP1x","aCP1y","aCP2x","aCP2y","CubicBezierCurve","splineThru","npts","SplineCurve","aRadius","aStartAngle","aEndAngle","aClockwise","absarc","absellipse","ellipse","xRadius","yRadius","EllipseCurve","lastPoint","closedPath","useSpacedPoints","item","spts","concat","spline","deltaAngle","tdivisions","isCCW","noHoles","toShapesNoHoles","inSubpaths","tmpPath","tmpShape","isPointInsidePolygon","inPt","inPolygon","polyLen","inside","edgeLowPt","edgeHighPt","edgeDx","edgeDy","perpEdge","subPaths","inActions","lastPath","solid","holesFirst","isClockWise","tmpPoints","tmpHoles","betterShapeHoles","newShapes","newShapeHoles","mainIdx","ambigious","toChange","sIdx","sLen","sho","hIdx","ho","hole_unassigned","s2Idx","froms","tos","hole","holes","extrude","ExtrudeGeometry","makeGeometry","ShapeGeometry","getPointsHoles","holesPts","getSpacedPointsHoles","extractAllPoints","shape","extractPoints","extractAllSpacedPoints","triangulateShape","point_in_segment_2D_colin","inSegPt1","inSegPt2","inOtherPt","intersect_segments_2D","inSeg1Pt1","inSeg1Pt2","inSeg2Pt1","inSeg2Pt2","inExcludeAdjacentSegs","seg1dx","seg1dy","seg2dx","seg2dy","seg1seg2dx","seg1seg2dy","limit","perpSeg1","perpSeg2","factorSeg1","seg1min","seg1max","seg1minVal","seg1maxVal","seg2min","seg2max","seg2minVal","seg2maxVal","seg1Pt","seg2Pt","isPointInsideAngle","inVertex","inLegFromPt","inLegToPt","legFromPtX","legFromPtY","legToPtX","legToPtY","otherPtX","otherPtY","from2toAngle","from2otherAngle","other2toAngle","allPointsMap","allpoints","hl","shapeWithoutHoles","isCutLineInsideAngles","inShapeIdx","inHoleIdx","lastShapeIdx","prevShapeIdx","nextShapeIdx","insideAngle","lastHoleIdx","prevHoleIdx","nextHoleIdx","intersectsShapeEdge","inShapePt","inHolePt","nextIdx","indepHoles","intersectsHoleEdge","ihIdx","chkHole","holeIndex","shapeIndex","shapePt","holePt","holeIdx","cutKey","tmpShape1","tmpShape2","tmpHole1","tmpHole2","failedCuts","minShapeIndex","h2","triangles","b2p0","b2p1","b2p2","b3p0","b3p1","b3p2","b3p3","point0","point1","point2","point3","ArcCurve","LineCurve3","QuadraticBezierCurve3","CubicBezierCurve3","SplineCurve3","ClosedSplineCurve3","AnimationHandler","CATMULLROM","CATMULLROM_FORWARD","initialized","hierarchy","rot","quat","usedMorphTargets","morphTargetName","morphTargetsInfluences","root","parseRecurseHierarchy","play","deltaTimeMS","resetBlendWeights","Animation","currentTime","timeScale","isPlaying","interpolationType","keyTypes","reset","animationCache","positionWeight","quaternionWeight","scaleWeight","prevKey","nextKey","originalMatrix","getNextKeyWith","prevXYZ","nextXYZ","proportionalWeight","getPrevKeyWith","currentPoint","forwardPoint","KeyFrameAnimation","isPaused","sids","obj","sid","next","endTime","original","hasTarget","MorphAnimation","mesh","frames","pause","interpolation","frame","width_half","height_half","depth_half","buildPlane","udir","vdir","gridX","gridY","gridX1","gridY1","segment_width","segment_height","uvd","centerUV","segment","CubeGeometry","heightHalf","verticesRow","uvsRow","tanTheta","v4","n4","uv1","uv3","uv4","addShapeList","addShape","extrudePts","splineTube","binormal","position2","ahole","amount","bevelThickness","bevelSize","bevelSegments","bevelEnabled","steps","extrudePath","extrudeByPath","extrudeMaterial","uvgen","UVGenerator","WorldUVGenerator","TubeGeometry","FrenetFrames","shapesOffset","shapePoints","reverse","scalePt2","pt","vec","bs","vert","flen","getBevelVec","inPrev","inNext","v_trans_x","v_trans_y","shrink_by","v_prev_x","v_prev_y","v_next_x","v_next_y","v_prev_lensq","colinear0","v_prev_len","v_next_len","ptPrevShift_x","ptPrevShift_y","sf","v_trans_lensq","direction_eq","contourMovements","oneHoleMovements","holesMovements","verticesMovements","binormals","sidewalls","layeroffset","slen1","slen2","f4","f3","generateTopUV","wallContour","stepIndex","stepsLength","contourIndex1","contourIndex2","generateSideWallUV","layer","indexA","indexB","indexC","indexD","LatheGeometry","inversePointLength","inverseSegments","phi","np","u0","u1","PlaneBufferGeometry","offset2","RingGeometry","innerRadius","outerRadius","thetaSegments","phiSegments","radiusStep","thetaSegment","TextGeometry","textShapes","grid","tang","bitan","getPos","ip","jp","in_q","in_p","cu","su","quOverP","cs","tz","closed","numpoints","pos2","smallest","mat","MAX_VALUE","PolyhedronGeometry","that","prepare","centroid","subdivide","azimuth","make","azi","correctUV","cols","aj","bj","rows","DodecahedronGeometry","OctahedronGeometry","TetrahedronGeometry","ParametricGeometry","func","slices","stacks","sliceCount","AxisHelper","ArrowHelper","lineGeometry","coneGeometry","dir","headLength","headWidth","cone","setDirection","setColor","BoxHelper","BoundingBoxHelper","hexFrustum","hexCone","hexCross","addLine","addPoint","DirectionalLightHelper","lightPlane","targetLine","EdgesHelper","edge","sortFunction","numEdges","vert1","vert2","face1","face2","FaceNormalsHelper","objectVertices","objectFaces","objectWorldMatrix","GridHelper","setColors","colorCenterLine","colorGrid","HemisphereLightHelper","sphereSize","arrowLength","domeSize","lightSphere","PointLightHelper","SkeletonHelper","getBoneList","boneList","matrixWorldInv","boneMatrix","SpotLightHelper","coneLength","coneWidth","VertexNormalsHelper","worldMatrix","VertexTangentsHelper","WireframeHelper","edges","numTris","renderCallback","MorphBlendMesh","animationsMap","animationsList","numFrames","endFrame","createAnimation","setAnimationWeight","startFrame","active","autoCreateAnimations","frameRanges","setAnimationDirectionForward","setAnimationDirectionBackward","setAnimationFPS","setAnimationDuration","setAnimationTime","getAnimationTime","getAnimationDuration","stopAnimation","webpackPolyfill","deprecate"],"mappings":"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MgpD,YAANzU,IACAv0C,GAAMgpD,YAAN2B,YAIDtW,cAECr0C,GAAMulD,YAAN6B,gBACApnD,GAAMulD,YAANQ,qBACA/lD,GAAMulD,YAANyB,mBACAhnD,GAAMulD,YAAN2B,kBACAlnD,GAAMulD,YAANiC,wBACAxnD,GAAMulD,YAANiD,qBACAxoD,GAAMulD,YAAN0C,sBACAjoD,GAAMulD,YAANO,wBAEA,gBAEC9lD,GAAMulD,YAANwC,WACA/nD,GAAMulD,YAANoB,gBACA3mD,GAAMulD,YAANuB,aACA9mD,GAAMulD,YAANuC,gBAED,sBAEC9nD,GAAMulD,YAANW,mBACAlmD,GAAMulD,YAANM,kBACA7lD,GAAMulD,YAANqC,qBAED,WAEC5nD,GAAMulD,YAAN4C,mBACAnoD,GAAMulD,YAANwB,gBACA/mD,GAAMulD,YAANI,eACA3lD,GAAMulD,YAANgC,mBAEAvnD,GAAMulD,YAAN+C,gBACAtoD,GAAMulD,YAAN6C,cACApoD,GAAMulD,YAANiB,iBAED,KAECl3B,KAAK,MAEP8kB,gBAEC,wBACA,yBAEAp0C,GAAMulD,YAANsB,oBACA7mD,GAAMulD,YAANK,kBACA5lD,GAAMulD,YAANoD,uBACA3oD,GAAMulD,YAANgB,uBACAvmD,GAAMulD,YAANY,qBACAnmD,GAAMulD,YAANU,kBACAjmD,GAAMulD,YAANgD,wBACAvoD,GAAMulD,YAAN+B,0BACAtnD,GAAMulD,YAANkD,0BAEA,gBAEA,6CAECzoD,GAAMulD,YAANa,qBACApmD,GAAMulD,YAANmB,aACA1mD,GAAMulD,YAANmD,kBACA1oD,GAAMulD,YAANC,mBACAxlD,GAAMulD,YAANkC,qBACAznD,GAAMulD,YAANyC,kBACAhoD,GAAMulD,YAAN2C,eACAloD,GAAMulD,YAAN8B,gBACArnD,GAAMulD,YAAN8C,mBAEAroD,GAAMulD,YAAN0B,yBAEAjnD,GAAMulD,YAANmC,aAED,KAECp4B,KAAK,OAIRu7B,SAECtX,SAAUvzC,GAAMwzC,cAAcvR,OAE7BjiC,GAAMgpD,YAANC,OACAjpD,GAAMgpD,YAANzU,IACAv0C,GAAMgpD,YAAN1U,OACAt0C,GAAMgpD,YAAN2B,WAGC7Z,SAAe9b,KAAM,IAAK36B,MAAO,IAAI2F,GAAMyF,MAAO,WAClDurC,UAAehc,KAAM,IAAK36B,MAAO,IAAI2F,GAAMyF,MAAO,IAClD83C,SAAevoB,KAAM,KAAM36B,MAAO,IAAI2F,GAAM0U,QAAS,EAAG,EAAG,OAK7D2/B,cAEC,kBAEA,4BAEA,sBAEA,6BAEA,SAEAr0C,GAAMulD,YAAN6B,gBACApnD,GAAMulD,YAANQ,qBACA/lD,GAAMulD,YAANyB,mBACAhnD,GAAMulD,YAAN4B,2BACAnnD,GAAMulD,YAAN2B,kBACAlnD,GAAMulD,YAANiC,wBACAxnD,GAAMulD,YAANiD,qBACAxoD,GAAMulD,YAAN0C,sBACAjoD,GAAMulD,YAANO,wBAEA,gBAEC9lD,GAAMulD,YAANwC,WACA/nD,GAAMulD,YAANoB,gBACA3mD,GAAMulD,YAANuB,aAEA9mD,GAAMulD,YAANW,mBACAlmD,GAAMulD,YAANuC,gBACA9nD,GAAMulD,YAANM,kBACA7lD,GAAMulD,YAANqC,qBAEA5nD,GAAMulD,YAAN4C,mBACAnoD,GAAMulD,YAANwB,gBACA/mD,GAAMulD,YAANI,eACA3lD,GAAMulD,YAANgC,mBAEAvnD,GAAMulD,YAAN+C,gBACAtoD,GAAMulD,YAAN6C,cACApoD,GAAMulD,YAANE,sBACAzlD,GAAMulD,YAANiB,iBAED,KAECl3B,KAAK,MAEP8kB,gBAEC,yBAEA,4BAEA,sBAEA,6BAEA,SAEAp0C,GAAMulD,YAANsB,oBACA7mD,GAAMulD,YAANK,kBACA5lD,GAAMulD,YAANoD,uBACA3oD,GAAMulD,YAANgB,uBACAvmD,GAAMulD,YAANY,qBACAnmD,GAAMulD,YAANU,kBACAjmD,GAAMulD,YAANgD,wBACAvoD,GAAMulD,YAAN+B,0BACAtnD,GAAMulD,YAANkD,0BAEA,gBAEA,iDAECzoD,GAAMulD,YAANa,qBACApmD,GAAMulD,YAANmB,aACA1mD,GAAMulD,YAANmD,kBACA1oD,GAAMulD,YAANC,mBACAxlD,GAAMulD,YAANkC,qBAED,wBAKA,4BACA,yCACA,WACA,wCAEA,UAEA,uCAEA,WAECznD,GAAMulD,YAANyC,kBACAhoD,GAAMulD,YAAN2C,eACAloD,GAAMulD,YAAN8B,gBACArnD,GAAMulD,YAAN8C,mBAEAroD,GAAMulD,YAAN0B,yBAEAjnD,GAAMulD,YAANmC,aAED,KAECp4B,KAAK,OAIRw7B,OAECvX,SAAUvzC,GAAMwzC,cAAcvR,OAE7BjiC,GAAMgpD,YAANC,OACAjpD,GAAMgpD,YAANK,KACArpD,GAAMgpD,YAAN1V,UACAtzC,GAAMgpD,YAANzU,IACAv0C,GAAMgpD,YAAN1U,OACAt0C,GAAMgpD,YAAN2B,WAGC7Z,SAAe9b,KAAM,IAAK36B,MAAO,IAAI2F,GAAMyF,MAAO,WAClDurC,UAAehc,KAAM,IAAK36B,MAAO,IAAI2F,GAAMyF,MAAO,IAClDmrC,UAAe5b,KAAM,IAAK36B,MAAO,IAAI2F,GAAMyF,MAAO,UAClD0rC,WAAenc,KAAM,IAAK36B,MAAO,IACjCkjD,SAAevoB,KAAM,KAAM36B,MAAO,IAAI2F,GAAM0U,QAAS,EAAG,EAAG,OAK7D2/B,cAEC,gBAEA,8BACA,wBAEAr0C,GAAMulD,YAAN6B,gBACApnD,GAAMulD,YAANQ,qBACA/lD,GAAMulD,YAANyB,mBACAhnD,GAAMulD,YAANe,yBACAtmD,GAAMulD,YAAN2B,kBACAlnD,GAAMulD,YAANiC,wBACAxnD,GAAMulD,YAANiD,qBACAxoD,GAAMulD,YAAN0C,sBACAjoD,GAAMulD,YAANO,wBAEA,gBAEC9lD,GAAMulD,YAANwC,WACA/nD,GAAMulD,YAANoB,gBACA3mD,GAAMulD,YAANuB,aAEA9mD,GAAMulD,YAANW,mBACAlmD,GAAMulD,YAANuC,gBACA9nD,GAAMulD,YAANM,kBACA7lD,GAAMulD,YAANqC,qBAED,8CAEC5nD,GAAMulD,YAAN4C,mBACAnoD,GAAMulD,YAANwB,gBACA/mD,GAAMulD,YAANI,eACA3lD,GAAMulD,YAANgC,mBAED,qCAECvnD,GAAMulD,YAAN+C,gBACAtoD,GAAMulD,YAAN6C,cACApoD,GAAMulD,YAANkB,oBACAzmD,GAAMulD,YAANiB,iBAED,KAECl3B,KAAK,MAEP8kB,gBAEC,gBAEA,wBACA,yBAEA,wBACA,yBACA,yBACA,2BAEAp0C,GAAMulD,YAANsB,oBACA7mD,GAAMulD,YAANK,kBACA5lD,GAAMulD,YAANoD,uBACA3oD,GAAMulD,YAANgB,uBACAvmD,GAAMulD,YAANY,qBACAnmD,GAAMulD,YAANU,kBACAjmD,GAAMulD,YAANsC,2BACA7nD,GAAMulD,YAANgD,wBACAvoD,GAAMulD,YAANoC,sBACA3nD,GAAMulD,YAANc,wBACArmD,GAAMulD,YAAN+B,0BACAtnD,GAAMulD,YAANkD,0BAEA,gBAEA,iDAECzoD,GAAMulD,YAANa,qBACApmD,GAAMulD,YAANmB,aACA1mD,GAAMulD,YAANmD,kBACA1oD,GAAMulD,YAANC,mBACAxlD,GAAMulD,YAANkC,qBAEAznD,GAAMulD,YAANS,sBAEAhmD,GAAMulD,YAANyC,kBACAhoD,GAAMulD,YAAN2C,eACAloD,GAAMulD,YAAN8B,gBACArnD,GAAMulD,YAAN8C,mBAEAroD,GAAMulD,YAAN0B,yBAEAjnD,GAAMulD,YAANmC,aAED,KAECp4B,KAAK,OAIRy7B,gBAECxX,SAAUvzC,GAAMwzC,cAAcvR,OAE7BjiC,GAAMgpD,YAANyB,SACAzqD,GAAMgpD,YAAN2B,YAIDtW,cAEC,sBACA,uBAEAr0C,GAAMulD,YAAN2B,kBACAlnD,GAAMulD,YAAN0C,sBACAjoD,GAAMulD,YAANO,wBAEA,gBAEC9lD,GAAMulD,YAANuB,aAED,+DAEA,+BACA,kEACA,UACA,2BACA,WAEA,iDAEC9mD,GAAMulD,YAANgC,mBACAvnD,GAAMulD,YAAN+C,gBACAtoD,GAAMulD,YAANiB,iBAED,KAECl3B,KAAK,MAEP8kB,gBAEC,wBACA,yBAEAp0C,GAAMulD,YAANsB,oBACA7mD,GAAMulD,YAANG,2BACA1lD,GAAMulD,YAANU,kBACAjmD,GAAMulD,YAANgD,wBACAvoD,GAAMul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","file":"three.14da89a3.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","// File:src/Three.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar THREE = { REVISION: '69' };\n\n// browserify support\n\nif ( typeof module === 'object' ) {\n\n\tmodule.exports = THREE;\n\n}\n\n// polyfills\n\nif ( Math.sign === undefined ) {\n\n\tMath.sign = function ( x ) {\n\n\t\treturn ( x < 0 ) ? - 1 : ( x > 0 ) ? 1 : 0;\n\n\t};\n\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent.button\n\nTHREE.MOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2 };\n\n// GL STATE CONSTANTS\n\nTHREE.CullFaceNone = 0;\nTHREE.CullFaceBack = 1;\nTHREE.CullFaceFront = 2;\nTHREE.CullFaceFrontBack = 3;\n\nTHREE.FrontFaceDirectionCW = 0;\nTHREE.FrontFaceDirectionCCW = 1;\n\n// SHADOWING TYPES\n\nTHREE.BasicShadowMap = 0;\nTHREE.PCFShadowMap = 1;\nTHREE.PCFSoftShadowMap = 2;\n\n// MATERIAL CONSTANTS\n\n// side\n\nTHREE.FrontSide = 0;\nTHREE.BackSide = 1;\nTHREE.DoubleSide = 2;\n\n// shading\n\nTHREE.NoShading = 0;\nTHREE.FlatShading = 1;\nTHREE.SmoothShading = 2;\n\n// colors\n\nTHREE.NoColors = 0;\nTHREE.FaceColors = 1;\nTHREE.VertexColors = 2;\n\n// blending modes\n\nTHREE.NoBlending = 0;\nTHREE.NormalBlending = 1;\nTHREE.AdditiveBlending = 2;\nTHREE.SubtractiveBlending = 3;\nTHREE.MultiplyBlending = 4;\nTHREE.CustomBlending = 5;\n\n// custom blending equations\n// (numbers start from 100 not to clash with other\n//  mappings to OpenGL constants defined in Texture.js)\n\nTHREE.AddEquation = 100;\nTHREE.SubtractEquation = 101;\nTHREE.ReverseSubtractEquation = 102;\nTHREE.MinEquation = 103;\nTHREE.MaxEquation = 104;\n\n// custom blending destination factors\n\nTHREE.ZeroFactor = 200;\nTHREE.OneFactor = 201;\nTHREE.SrcColorFactor = 202;\nTHREE.OneMinusSrcColorFactor = 203;\nTHREE.SrcAlphaFactor = 204;\nTHREE.OneMinusSrcAlphaFactor = 205;\nTHREE.DstAlphaFactor = 206;\nTHREE.OneMinusDstAlphaFactor = 207;\n\n// custom blending source factors\n\n//THREE.ZeroFactor = 200;\n//THREE.OneFactor = 201;\n//THREE.SrcAlphaFactor = 204;\n//THREE.OneMinusSrcAlphaFactor = 205;\n//THREE.DstAlphaFactor = 206;\n//THREE.OneMinusDstAlphaFactor = 207;\nTHREE.DstColorFactor = 208;\nTHREE.OneMinusDstColorFactor = 209;\nTHREE.SrcAlphaSaturateFactor = 210;\n\n\n// TEXTURE CONSTANTS\n\nTHREE.MultiplyOperation = 0;\nTHREE.MixOperation = 1;\nTHREE.AddOperation = 2;\n\n// Mapping modes\n\nTHREE.UVMapping = function () {};\n\nTHREE.CubeReflectionMapping = function () {};\nTHREE.CubeRefractionMapping = function () {};\n\nTHREE.SphericalReflectionMapping = function () {};\nTHREE.SphericalRefractionMapping = function () {};\n\n// Wrapping modes\n\nTHREE.RepeatWrapping = 1000;\nTHREE.ClampToEdgeWrapping = 1001;\nTHREE.MirroredRepeatWrapping = 1002;\n\n// Filters\n\nTHREE.NearestFilter = 1003;\nTHREE.NearestMipMapNearestFilter = 1004;\nTHREE.NearestMipMapLinearFilter = 1005;\nTHREE.LinearFilter = 1006;\nTHREE.LinearMipMapNearestFilter = 1007;\nTHREE.LinearMipMapLinearFilter = 1008;\n\n// Data types\n\nTHREE.UnsignedByteType = 1009;\nTHREE.ByteType = 1010;\nTHREE.ShortType = 1011;\nTHREE.UnsignedShortType = 1012;\nTHREE.IntType = 1013;\nTHREE.UnsignedIntType = 1014;\nTHREE.FloatType = 1015;\n\n// Pixel types\n\n//THREE.UnsignedByteType = 1009;\nTHREE.UnsignedShort4444Type = 1016;\nTHREE.UnsignedShort5551Type = 1017;\nTHREE.UnsignedShort565Type = 1018;\n\n// Pixel formats\n\nTHREE.AlphaFormat = 1019;\nTHREE.RGBFormat = 1020;\nTHREE.RGBAFormat = 1021;\nTHREE.LuminanceFormat = 1022;\nTHREE.LuminanceAlphaFormat = 1023;\n\n// DDS / ST3C Compressed texture formats\n\nTHREE.RGB_S3TC_DXT1_Format = 2001;\nTHREE.RGBA_S3TC_DXT1_Format = 2002;\nTHREE.RGBA_S3TC_DXT3_Format = 2003;\nTHREE.RGBA_S3TC_DXT5_Format = 2004;\n\n\n// PVRTC compressed texture formats\n\nTHREE.RGB_PVRTC_4BPPV1_Format = 2100;\nTHREE.RGB_PVRTC_2BPPV1_Format = 2101;\nTHREE.RGBA_PVRTC_4BPPV1_Format = 2102;\nTHREE.RGBA_PVRTC_2BPPV1_Format = 2103;\n\n\n// File:src/math/Color.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.Color = function ( color ) {\n\n\tif ( arguments.length === 3 ) {\n\n\t\treturn this.setRGB( arguments[ 0 ], arguments[ 1 ], arguments[ 2 ] );\n\n\t}\n\n\treturn this.set( color )\n\n};\n\nTHREE.Color.prototype = {\n\n\tconstructor: THREE.Color,\n\n\tr: 1, g: 1, b: 1,\n\n\tset: function ( value ) {\n\n\t\tif ( value instanceof THREE.Color ) {\n\n\t\t\tthis.copy( value );\n\n\t\t} else if ( typeof value === 'number' ) {\n\n\t\t\tthis.setHex( value );\n\n\t\t} else if ( typeof value === 'string' ) {\n\n\t\t\tthis.setStyle( value );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetHex: function ( hex ) {\n\n\t\thex = Math.floor( hex );\n\n\t\tthis.r = ( hex >> 16 & 255 ) / 255;\n\t\tthis.g = ( hex >> 8 & 255 ) / 255;\n\t\tthis.b = ( hex & 255 ) / 255;\n\n\t\treturn this;\n\n\t},\n\n\tsetRGB: function ( r, g, b ) {\n\n\t\tthis.r = r;\n\t\tthis.g = g;\n\t\tthis.b = b;\n\n\t\treturn this;\n\n\t},\n\n\tsetHSL: function ( h, s, l ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\n\t\tif ( s === 0 ) {\n\n\t\t\tthis.r = this.g = this.b = l;\n\n\t\t} else {\n\n\t\t\tvar hue2rgb = function ( p, q, t ) {\n\n\t\t\t\tif ( t < 0 ) t += 1;\n\t\t\t\tif ( t > 1 ) t -= 1;\n\t\t\t\tif ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\n\t\t\t\tif ( t < 1 / 2 ) return q;\n\t\t\t\tif ( t < 2 / 3 ) return p + ( q - p ) * 6 * ( 2 / 3 - t );\n\t\t\t\treturn p;\n\n\t\t\t};\n\n\t\t\tvar p = l <= 0.5 ? l * ( 1 + s ) : l + s - ( l * s );\n\t\t\tvar q = ( 2 * l ) - p;\n\n\t\t\tthis.r = hue2rgb( q, p, h + 1 / 3 );\n\t\t\tthis.g = hue2rgb( q, p, h );\n\t\t\tthis.b = hue2rgb( q, p, h - 1 / 3 );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetStyle: function ( style ) {\n\n\t\t// rgb(255,0,0)\n\n\t\tif ( /^rgb\\((\\d+), ?(\\d+), ?(\\d+)\\)$/i.test( style ) ) {\n\n\t\t\tvar color = /^rgb\\((\\d+), ?(\\d+), ?(\\d+)\\)$/i.exec( style );\n\n\t\t\tthis.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\n\t\t\tthis.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\n\t\t\tthis.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\t// rgb(100%,0%,0%)\n\n\t\tif ( /^rgb\\((\\d+)\\%, ?(\\d+)\\%, ?(\\d+)\\%\\)$/i.test( style ) ) {\n\n\t\t\tvar color = /^rgb\\((\\d+)\\%, ?(\\d+)\\%, ?(\\d+)\\%\\)$/i.exec( style );\n\n\t\t\tthis.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\n\t\t\tthis.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\n\t\t\tthis.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\t// #ff0000\n\n\t\tif ( /^\\#([0-9a-f]{6})$/i.test( style ) ) {\n\n\t\t\tvar color = /^\\#([0-9a-f]{6})$/i.exec( style );\n\n\t\t\tthis.setHex( parseInt( color[ 1 ], 16 ) );\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\t// #f00\n\n\t\tif ( /^\\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test( style ) ) {\n\n\t\t\tvar color = /^\\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec( style );\n\n\t\t\tthis.setHex( parseInt( color[ 1 ] + color[ 1 ] + color[ 2 ] + color[ 2 ] + color[ 3 ] + color[ 3 ], 16 ) );\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\t// red\n\n\t\tif ( /^(\\w+)$/i.test( style ) ) {\n\n\t\t\tthis.setHex( THREE.ColorKeywords[ style ] );\n\n\t\t\treturn this;\n\n\t\t}\n\n\n\t},\n\n\tcopy: function ( color ) {\n\n\t\tthis.r = color.r;\n\t\tthis.g = color.g;\n\t\tthis.b = color.b;\n\n\t\treturn this;\n\n\t},\n\n\tcopyGammaToLinear: function ( color ) {\n\n\t\tthis.r = color.r * color.r;\n\t\tthis.g = color.g * color.g;\n\t\tthis.b = color.b * color.b;\n\n\t\treturn this;\n\n\t},\n\n\tcopyLinearToGamma: function ( color ) {\n\n\t\tthis.r = Math.sqrt( color.r );\n\t\tthis.g = Math.sqrt( color.g );\n\t\tthis.b = Math.sqrt( color.b );\n\n\t\treturn this;\n\n\t},\n\n\tconvertGammaToLinear: function () {\n\n\t\tvar r = this.r, g = this.g, b = this.b;\n\n\t\tthis.r = r * r;\n\t\tthis.g = g * g;\n\t\tthis.b = b * b;\n\n\t\treturn this;\n\n\t},\n\n\tconvertLinearToGamma: function () {\n\n\t\tthis.r = Math.sqrt( this.r );\n\t\tthis.g = Math.sqrt( this.g );\n\t\tthis.b = Math.sqrt( this.b );\n\n\t\treturn this;\n\n\t},\n\n\tgetHex: function () {\n\n\t\treturn ( this.r * 255 ) << 16 ^ ( this.g * 255 ) << 8 ^ ( this.b * 255 ) << 0;\n\n\t},\n\n\tgetHexString: function () {\n\n\t\treturn ( '000000' + this.getHex().toString( 16 ) ).slice( - 6 );\n\n\t},\n\n\tgetHSL: function ( optionalTarget ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\n\t\tvar hsl = optionalTarget || { h: 0, s: 0, l: 0 };\n\n\t\tvar r = this.r, g = this.g, b = this.b;\n\n\t\tvar max = Math.max( r, g, b );\n\t\tvar min = Math.min( r, g, b );\n\n\t\tvar hue, saturation;\n\t\tvar lightness = ( min + max ) / 2.0;\n\n\t\tif ( min === max ) {\n\n\t\t\thue = 0;\n\t\t\tsaturation = 0;\n\n\t\t} else {\n\n\t\t\tvar delta = max - min;\n\n\t\t\tsaturation = lightness <= 0.5 ? delta / ( max + min ) : delta / ( 2 - max - min );\n\n\t\t\tswitch ( max ) {\n\n\t\t\t\tcase r: hue = ( g - b ) / delta + ( g < b ? 6 : 0 ); break;\n\t\t\t\tcase g: hue = ( b - r ) / delta + 2; break;\n\t\t\t\tcase b: hue = ( r - g ) / delta + 4; break;\n\n\t\t\t}\n\n\t\t\thue /= 6;\n\n\t\t}\n\n\t\thsl.h = hue;\n\t\thsl.s = saturation;\n\t\thsl.l = lightness;\n\n\t\treturn hsl;\n\n\t},\n\n\tgetStyle: function () {\n\n\t\treturn 'rgb(' + ( ( this.r * 255 ) | 0 ) + ',' + ( ( this.g * 255 ) | 0 ) + ',' + ( ( this.b * 255 ) | 0 ) + ')';\n\n\t},\n\n\toffsetHSL: function ( h, s, l ) {\n\n\t\tvar hsl = this.getHSL();\n\n\t\thsl.h += h; hsl.s += s; hsl.l += l;\n\n\t\tthis.setHSL( hsl.h, hsl.s, hsl.l );\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( color ) {\n\n\t\tthis.r += color.r;\n\t\tthis.g += color.g;\n\t\tthis.b += color.b;\n\n\t\treturn this;\n\n\t},\n\n\taddColors: function ( color1, color2 ) {\n\n\t\tthis.r = color1.r + color2.r;\n\t\tthis.g = color1.g + color2.g;\n\t\tthis.b = color1.b + color2.b;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.r += s;\n\t\tthis.g += s;\n\t\tthis.b += s;\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( color ) {\n\n\t\tthis.r *= color.r;\n\t\tthis.g *= color.g;\n\t\tthis.b *= color.b;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tthis.r *= s;\n\t\tthis.g *= s;\n\t\tthis.b *= s;\n\n\t\treturn this;\n\n\t},\n\n\tlerp: function ( color, alpha ) {\n\n\t\tthis.r += ( color.r - this.r ) * alpha;\n\t\tthis.g += ( color.g - this.g ) * alpha;\n\t\tthis.b += ( color.b - this.b ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( c ) {\n\n\t\treturn ( c.r === this.r ) && ( c.g === this.g ) && ( c.b === this.b );\n\n\t},\n\n\tfromArray: function ( array ) {\n\n\t\tthis.r = array[ 0 ];\n\t\tthis.g = array[ 1 ];\n\t\tthis.b = array[ 2 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function () {\n\n\t\treturn [ this.r, this.g, this.b ];\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.Color().setRGB( this.r, this.g, this.b );\n\n\t}\n\n};\n\nTHREE.ColorKeywords = { 'aliceblue': 0xF0F8FF, 'antiquewhite': 0xFAEBD7, 'aqua': 0x00FFFF, 'aquamarine': 0x7FFFD4, 'azure': 0xF0FFFF,\n'beige': 0xF5F5DC, 'bisque': 0xFFE4C4, 'black': 0x000000, 'blanchedalmond': 0xFFEBCD, 'blue': 0x0000FF, 'blueviolet': 0x8A2BE2,\n'brown': 0xA52A2A, 'burlywood': 0xDEB887, 'cadetblue': 0x5F9EA0, 'chartreuse': 0x7FFF00, 'chocolate': 0xD2691E, 'coral': 0xFF7F50,\n'cornflowerblue': 0x6495ED, 'cornsilk': 0xFFF8DC, 'crimson': 0xDC143C, 'cyan': 0x00FFFF, 'darkblue': 0x00008B, 'darkcyan': 0x008B8B,\n'darkgoldenrod': 0xB8860B, 'darkgray': 0xA9A9A9, 'darkgreen': 0x006400, 'darkgrey': 0xA9A9A9, 'darkkhaki': 0xBDB76B, 'darkmagenta': 0x8B008B,\n'darkolivegreen': 0x556B2F, 'darkorange': 0xFF8C00, 'darkorchid': 0x9932CC, 'darkred': 0x8B0000, 'darksalmon': 0xE9967A, 'darkseagreen': 0x8FBC8F,\n'darkslateblue': 0x483D8B, 'darkslategray': 0x2F4F4F, 'darkslategrey': 0x2F4F4F, 'darkturquoise': 0x00CED1, 'darkviolet': 0x9400D3,\n'deeppink': 0xFF1493, 'deepskyblue': 0x00BFFF, 'dimgray': 0x696969, 'dimgrey': 0x696969, 'dodgerblue': 0x1E90FF, 'firebrick': 0xB22222,\n'floralwhite': 0xFFFAF0, 'forestgreen': 0x228B22, 'fuchsia': 0xFF00FF, 'gainsboro': 0xDCDCDC, 'ghostwhite': 0xF8F8FF, 'gold': 0xFFD700,\n'goldenrod': 0xDAA520, 'gray': 0x808080, 'green': 0x008000, 'greenyellow': 0xADFF2F, 'grey': 0x808080, 'honeydew': 0xF0FFF0, 'hotpink': 0xFF69B4,\n'indianred': 0xCD5C5C, 'indigo': 0x4B0082, 'ivory': 0xFFFFF0, 'khaki': 0xF0E68C, 'lavender': 0xE6E6FA, 'lavenderblush': 0xFFF0F5, 'lawngreen': 0x7CFC00,\n'lemonchiffon': 0xFFFACD, 'lightblue': 0xADD8E6, 'lightcoral': 0xF08080, 'lightcyan': 0xE0FFFF, 'lightgoldenrodyellow': 0xFAFAD2, 'lightgray': 0xD3D3D3,\n'lightgreen': 0x90EE90, 'lightgrey': 0xD3D3D3, 'lightpink': 0xFFB6C1, 'lightsalmon': 0xFFA07A, 'lightseagreen': 0x20B2AA, 'lightskyblue': 0x87CEFA,\n'lightslategray': 0x778899, 'lightslategrey': 0x778899, 'lightsteelblue': 0xB0C4DE, 'lightyellow': 0xFFFFE0, 'lime': 0x00FF00, 'limegreen': 0x32CD32,\n'linen': 0xFAF0E6, 'magenta': 0xFF00FF, 'maroon': 0x800000, 'mediumaquamarine': 0x66CDAA, 'mediumblue': 0x0000CD, 'mediumorchid': 0xBA55D3,\n'mediumpurple': 0x9370DB, 'mediumseagreen': 0x3CB371, 'mediumslateblue': 0x7B68EE, 'mediumspringgreen': 0x00FA9A, 'mediumturquoise': 0x48D1CC,\n'mediumvioletred': 0xC71585, 'midnightblue': 0x191970, 'mintcream': 0xF5FFFA, 'mistyrose': 0xFFE4E1, 'moccasin': 0xFFE4B5, 'navajowhite': 0xFFDEAD,\n'navy': 0x000080, 'oldlace': 0xFDF5E6, 'olive': 0x808000, 'olivedrab': 0x6B8E23, 'orange': 0xFFA500, 'orangered': 0xFF4500, 'orchid': 0xDA70D6,\n'palegoldenrod': 0xEEE8AA, 'palegreen': 0x98FB98, 'paleturquoise': 0xAFEEEE, 'palevioletred': 0xDB7093, 'papayawhip': 0xFFEFD5, 'peachpuff': 0xFFDAB9,\n'peru': 0xCD853F, 'pink': 0xFFC0CB, 'plum': 0xDDA0DD, 'powderblue': 0xB0E0E6, 'purple': 0x800080, 'red': 0xFF0000, 'rosybrown': 0xBC8F8F,\n'royalblue': 0x4169E1, 'saddlebrown': 0x8B4513, 'salmon': 0xFA8072, 'sandybrown': 0xF4A460, 'seagreen': 0x2E8B57, 'seashell': 0xFFF5EE,\n'sienna': 0xA0522D, 'silver': 0xC0C0C0, 'skyblue': 0x87CEEB, 'slateblue': 0x6A5ACD, 'slategray': 0x708090, 'slategrey': 0x708090, 'snow': 0xFFFAFA,\n'springgreen': 0x00FF7F, 'steelblue': 0x4682B4, 'tan': 0xD2B48C, 'teal': 0x008080, 'thistle': 0xD8BFD8, 'tomato': 0xFF6347, 'turquoise': 0x40E0D0,\n'violet': 0xEE82EE, 'wheat': 0xF5DEB3, 'white': 0xFFFFFF, 'whitesmoke': 0xF5F5F5, 'yellow': 0xFFFF00, 'yellowgreen': 0x9ACD32 };\n\n// File:src/math/Quaternion.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://exocortex.com\n */\n\nTHREE.Quaternion = function ( x, y, z, w ) {\n\n\tthis._x = x || 0;\n\tthis._y = y || 0;\n\tthis._z = z || 0;\n\tthis._w = ( w !== undefined ) ? w : 1;\n\n};\n\nTHREE.Quaternion.prototype = {\n\n\tconstructor: THREE.Quaternion,\n\n\t_x: 0,_y: 0, _z: 0, _w: 0,\n\n\tget x () {\n\n\t\treturn this._x;\n\n\t},\n\n\tset x ( value ) {\n\n\t\tthis._x = value;\n\t\tthis.onChangeCallback();\n\n\t},\n\n\tget y () {\n\n\t\treturn this._y;\n\n\t},\n\n\tset y ( value ) {\n\n\t\tthis._y = value;\n\t\tthis.onChangeCallback();\n\n\t},\n\n\tget z () {\n\n\t\treturn this._z;\n\n\t},\n\n\tset z ( value ) {\n\n\t\tthis._z = value;\n\t\tthis.onChangeCallback();\n\n\t},\n\n\tget w () {\n\n\t\treturn this._w;\n\n\t},\n\n\tset w ( value ) {\n\n\t\tthis._w = value;\n\t\tthis.onChangeCallback();\n\n\t},\n\n\tset: function ( x, y, z, w ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( quaternion ) {\n\n\t\tthis._x = quaternion.x;\n\t\tthis._y = quaternion.y;\n\t\tthis._z = quaternion.z;\n\t\tthis._w = quaternion.w;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromEuler: function ( euler, update ) {\n\n\t\tif ( euler instanceof THREE.Euler === false ) {\n\n\t\t\tthrow new Error( 'THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\n\t\t}\n\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\n\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\n\t\t//\tcontent/SpinCalc.m\n\n\t\tvar c1 = Math.cos( euler._x / 2 );\n\t\tvar c2 = Math.cos( euler._y / 2 );\n\t\tvar c3 = Math.cos( euler._z / 2 );\n\t\tvar s1 = Math.sin( euler._x / 2 );\n\t\tvar s2 = Math.sin( euler._y / 2 );\n\t\tvar s3 = Math.sin( euler._z / 2 );\n\n\t\tif ( euler.order === 'XYZ' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( euler.order === 'YXZ' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t} else if ( euler.order === 'ZXY' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( euler.order === 'ZYX' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t} else if ( euler.order === 'YZX' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( euler.order === 'XZY' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t}\n\n\t\tif ( update !== false ) this.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromAxisAngle: function ( axis, angle ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\n\n\t\t// assumes axis is normalized\n\n\t\tvar halfAngle = angle / 2, s = Math.sin( halfAngle );\n\n\t\tthis._x = axis.x * s;\n\t\tthis._y = axis.y * s;\n\t\tthis._z = axis.z * s;\n\t\tthis._w = Math.cos( halfAngle );\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromRotationMatrix: function ( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tvar te = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\n\n\t\t\ttrace = m11 + m22 + m33,\n\t\t\ts;\n\n\t\tif ( trace > 0 ) {\n\n\t\t\ts = 0.5 / Math.sqrt( trace + 1.0 );\n\n\t\t\tthis._w = 0.25 / s;\n\t\t\tthis._x = ( m32 - m23 ) * s;\n\t\t\tthis._y = ( m13 - m31 ) * s;\n\t\t\tthis._z = ( m21 - m12 ) * s;\n\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\n\n\t\t\tthis._w = ( m32 - m23 ) / s;\n\t\t\tthis._x = 0.25 * s;\n\t\t\tthis._y = ( m12 + m21 ) / s;\n\t\t\tthis._z = ( m13 + m31 ) / s;\n\n\t\t} else if ( m22 > m33 ) {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\n\n\t\t\tthis._w = ( m13 - m31 ) / s;\n\t\t\tthis._x = ( m12 + m21 ) / s;\n\t\t\tthis._y = 0.25 * s;\n\t\t\tthis._z = ( m23 + m32 ) / s;\n\n\t\t} else {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\n\n\t\t\tthis._w = ( m21 - m12 ) / s;\n\t\t\tthis._x = ( m13 + m31 ) / s;\n\t\t\tthis._y = ( m23 + m32 ) / s;\n\t\t\tthis._z = 0.25 * s;\n\n\t\t}\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromUnitVectors: function () {\n\n\t\t// http://lolengine.net/blog/2014/02/24/quaternion-from-two-vectors-final\n\n\t\t// assumes direction vectors vFrom and vTo are normalized\n\n\t\tvar v1, r;\n\n\t\tvar EPS = 0.000001;\n\n\t\treturn function ( vFrom, vTo ) {\n\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\n\n\t\t\tr = vFrom.dot( vTo ) + 1;\n\n\t\t\tif ( r < EPS ) {\n\n\t\t\t\tr = 0;\n\n\t\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\n\n\t\t\t\t\tv1.set( - vFrom.y, vFrom.x, 0 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tv1.set( 0, - vFrom.z, vFrom.y );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tv1.crossVectors( vFrom, vTo );\n\n\t\t\t}\n\n\t\t\tthis._x = v1.x;\n\t\t\tthis._y = v1.y;\n\t\t\tthis._z = v1.z;\n\t\t\tthis._w = r;\n\n\t\t\tthis.normalize();\n\n\t\t\treturn this;\n\n\t\t}\n\n\t}(),\n\n\tinverse: function () {\n\n\t\tthis.conjugate().normalize();\n\n\t\treturn this;\n\n\t},\n\n\tconjugate: function () {\n\n\t\tthis._x *= - 1;\n\t\tthis._y *= - 1;\n\t\tthis._z *= - 1;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\n\n\t},\n\n\tnormalize: function () {\n\n\t\tvar l = this.length();\n\n\t\tif ( l === 0 ) {\n\n\t\t\tthis._x = 0;\n\t\t\tthis._y = 0;\n\t\t\tthis._z = 0;\n\t\t\tthis._w = 1;\n\n\t\t} else {\n\n\t\t\tl = 1 / l;\n\n\t\t\tthis._x = this._x * l;\n\t\t\tthis._y = this._y * l;\n\t\t\tthis._z = this._z * l;\n\t\t\tthis._w = this._w * l;\n\n\t\t}\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( q, p ) {\n\n\t\tif ( p !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.' );\n\t\t\treturn this.multiplyQuaternions( q, p );\n\n\t\t}\n\n\t\treturn this.multiplyQuaternions( this, q );\n\n\t},\n\n\tmultiplyQuaternions: function ( a, b ) {\n\n\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\n\n\t\tvar qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\n\t\tvar qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\n\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyVector3: function ( vector ) {\n\n\t\tconsole.warn( 'THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.' );\n\t\treturn vector.applyQuaternion( this );\n\n\t},\n\n\tslerp: function ( qb, t ) {\n\n\t\tif ( t === 0 ) return this;\n\t\tif ( t === 1 ) return this.copy( qb );\n\n\t\tvar x = this._x, y = this._y, z = this._z, w = this._w;\n\n\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\n\n\t\tvar cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\n\n\t\tif ( cosHalfTheta < 0 ) {\n\n\t\t\tthis._w = - qb._w;\n\t\t\tthis._x = - qb._x;\n\t\t\tthis._y = - qb._y;\n\t\t\tthis._z = - qb._z;\n\n\t\t\tcosHalfTheta = - cosHalfTheta;\n\n\t\t} else {\n\n\t\t\tthis.copy( qb );\n\n\t\t}\n\n\t\tif ( cosHalfTheta >= 1.0 ) {\n\n\t\t\tthis._w = w;\n\t\t\tthis._x = x;\n\t\t\tthis._y = y;\n\t\t\tthis._z = z;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar halfTheta = Math.acos( cosHalfTheta );\n\t\tvar sinHalfTheta = Math.sqrt( 1.0 - cosHalfTheta * cosHalfTheta );\n\n\t\tif ( Math.abs( sinHalfTheta ) < 0.001 ) {\n\n\t\t\tthis._w = 0.5 * ( w + this._w );\n\t\t\tthis._x = 0.5 * ( x + this._x );\n\t\t\tthis._y = 0.5 * ( y + this._y );\n\t\t\tthis._z = 0.5 * ( z + this._z );\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\n\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\n\n\t\tthis._w = ( w * ratioA + this._w * ratioB );\n\t\tthis._x = ( x * ratioA + this._x * ratioB );\n\t\tthis._y = ( y * ratioA + this._y * ratioB );\n\t\tthis._z = ( z * ratioA + this._z * ratioB );\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( quaternion ) {\n\n\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis._x = array[ offset ];\n\t\tthis._y = array[ offset + 1 ];\n\t\tthis._z = array[ offset + 2 ];\n\t\tthis._w = array[ offset + 3 ];\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._w;\n\n\t\treturn array;\n\n\t},\n\n\tonChange: function ( callback ) {\n\n\t\tthis.onChangeCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\tonChangeCallback: function () {},\n\n\tclone: function () {\n\n\t\treturn new THREE.Quaternion( this._x, this._y, this._z, this._w );\n\n\t}\n\n};\n\nTHREE.Quaternion.slerp = function ( qa, qb, qm, t ) {\n\n\treturn qm.copy( qa ).slerp( qb, t );\n\n}\n\n// File:src/math/Vector2.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author philogb / http://blog.thejit.org/\n * @author egraether / http://egraether.com/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n */\n\nTHREE.Vector2 = function ( x, y ) {\n\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\n};\n\nTHREE.Vector2.prototype = {\n\n\tconstructor: THREE.Vector2,\n\n\tset: function ( x, y ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tthis.x *= s;\n\t\tthis.y *= s;\n\n\t\treturn this;\n\n\t},\n\n\tdivide: function ( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\tif ( scalar !== 0 ) {\n\n\t\t\tvar invScalar = 1 / scalar;\n\n\t\t\tthis.x *= invScalar;\n\t\t\tthis.y *= invScalar;\n\n\t\t} else {\n\n\t\t\tthis.x = 0;\n\t\t\tthis.y = 0;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tif ( this.x > v.x ) {\n\n\t\t\tthis.x = v.x;\n\n\t\t}\n\n\t\tif ( this.y > v.y ) {\n\n\t\t\tthis.y = v.y;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tif ( this.x < v.x ) {\n\n\t\t\tthis.x = v.x;\n\n\t\t}\n\n\t\tif ( this.y < v.y ) {\n\n\t\t\tthis.y = v.y;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\n\n\t\tif ( this.x < min.x ) {\n\n\t\t\tthis.x = min.x;\n\n\t\t} else if ( this.x > max.x ) {\n\n\t\t\tthis.x = max.x;\n\n\t\t}\n\n\t\tif ( this.y < min.y ) {\n\n\t\t\tthis.y = min.y;\n\n\t\t} else if ( this.y > max.y ) {\n\n\t\t\tthis.y = max.y;\n\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tclampScalar: ( function () {\n\n\t\tvar min, max;\n\n\t\treturn function ( minVal, maxVal ) {\n\n\t\t\tif ( min === undefined ) {\n\n\t\t\t\tmin = new THREE.Vector2();\n\t\t\t\tmax = new THREE.Vector2();\n\n\t\t\t}\n\n\t\t\tmin.set( minVal, minVal );\n\t\t\tmax.set( maxVal, maxVal );\n\n\t\t\treturn this.clamp( min, max );\n\n\t\t};\n\n\t} )(),\n\n\tfloor: function () {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tceil: function () {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tround: function () {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\n\t\treturn this;\n\n\t},\n\n\troundToZero: function () {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() );\n\n\t},\n\n\tdistanceTo: function ( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t},\n\n\tdistanceToSquared: function ( v ) {\n\n\t\tvar dx = this.x - v.x, dy = this.y - v.y;\n\t\treturn dx * dx + dy * dy;\n\n\t},\n\n\tsetLength: function ( l ) {\n\n\t\tvar oldLength = this.length();\n\n\t\tif ( oldLength !== 0 && l !== oldLength ) {\n\n\t\t\tthis.multiplyScalar( l / oldLength );\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\n\t\treturn array;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.Vector2( this.x, this.y );\n\n\t}\n\n};\n\n// File:src/math/Vector3.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author *kile / http://kile.stravaganza.org/\n * @author philogb / http://blog.thejit.org/\n * @author mikael emtinger / http://gomo.se/\n * @author egraether / http://egraether.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nTHREE.Vector3 = function ( x, y, z ) {\n\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\tthis.z = z || 0;\n\n};\n\nTHREE.Vector3.prototype = {\n\n\tconstructor: THREE.Vector3,\n\n\tset: function ( x, y, z ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetZ: function ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.' );\n\t\t\treturn this.multiplyVectors( v, w );\n\n\t\t}\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\tthis.z *= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyVectors: function ( a, b ) {\n\n\t\tthis.x = a.x * b.x;\n\t\tthis.y = a.y * b.y;\n\t\tthis.z = a.z * b.z;\n\n\t\treturn this;\n\n\t},\n\n\tapplyEuler: function () {\n\n\t\tvar quaternion;\n\n\t\treturn function ( euler ) {\n\n\t\t\tif ( euler instanceof THREE.Euler === false ) {\n\n\t\t\t\tconsole.error( 'THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order.' );\n\n\t\t\t}\n\n\t\t\tif ( quaternion === undefined ) quaternion = new THREE.Quaternion();\n\n\t\t\tthis.applyQuaternion( quaternion.setFromEuler( euler ) );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tapplyAxisAngle: function () {\n\n\t\tvar quaternion;\n\n\t\treturn function ( axis, angle ) {\n\n\t\t\tif ( quaternion === undefined ) quaternion = new THREE.Quaternion();\n\n\t\t\tthis.applyQuaternion( quaternion.setFromAxisAngle( axis, angle ) );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tapplyMatrix3: function ( m ) {\n\n\t\tvar x = this.x;\n\t\tvar y = this.y;\n\t\tvar z = this.z;\n\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function ( m ) {\n\n\t\t// input: THREE.Matrix4 affine matrix\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z + e[ 12 ];\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z + e[ 13 ];\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ];\n\n\t\treturn this;\n\n\t},\n\n\tapplyProjection: function ( m ) {\n\n\t\t// input: THREE.Matrix4 projection matrix\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\n\t\tvar e = m.elements;\n\t\tvar d = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] ); // perspective divide\n\n\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z + e[ 12 ] ) * d;\n\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z + e[ 13 ] ) * d;\n\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * d;\n\n\t\treturn this;\n\n\t},\n\n\tapplyQuaternion: function ( q ) {\n\n\t\tvar x = this.x;\n\t\tvar y = this.y;\n\t\tvar z = this.z;\n\n\t\tvar qx = q.x;\n\t\tvar qy = q.y;\n\t\tvar qz = q.z;\n\t\tvar qw = q.w;\n\n\t\t// calculate quat * vector\n\n\t\tvar ix =  qw * x + qy * z - qz * y;\n\t\tvar iy =  qw * y + qz * x - qx * z;\n\t\tvar iz =  qw * z + qx * y - qy * x;\n\t\tvar iw = - qx * x - qy * y - qz * z;\n\n\t\t// calculate result * inverse quat\n\n\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\n\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\n\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\n\n\t\treturn this;\n\n\t},\n\n\tproject: function () {\n\n\t\tvar matrix;\n\n\t\treturn function ( camera ) {\n\n\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\n\n\t\t\tmatrix.multiplyMatrices( camera.projectionMatrix, matrix.getInverse( camera.matrixWorld ) );\n\t\t\treturn this.applyProjection( matrix );\n\n\t\t};\n\n\t}(),\n\n\tunproject: function () {\n\n\t\tvar matrix;\n\n\t\treturn function ( camera ) {\n\n\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\n\n\t\t\tmatrix.multiplyMatrices( camera.matrixWorld, matrix.getInverse( camera.projectionMatrix ) );\n\t\t\treturn this.applyProjection( matrix );\n\n\t\t};\n\n\t}(),\n\n\ttransformDirection: function ( m ) {\n\n\t\t// input: THREE.Matrix4 affine matrix\n\t\t// vector interpreted as a direction\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\n\n\t\tthis.normalize();\n\n\t\treturn this;\n\n\t},\n\n\tdivide: function ( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\t\tthis.z /= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\tif ( scalar !== 0 ) {\n\n\t\t\tvar invScalar = 1 / scalar;\n\n\t\t\tthis.x *= invScalar;\n\t\t\tthis.y *= invScalar;\n\t\t\tthis.z *= invScalar;\n\n\t\t} else {\n\n\t\t\tthis.x = 0;\n\t\t\tthis.y = 0;\n\t\t\tthis.z = 0;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tif ( this.x > v.x ) {\n\n\t\t\tthis.x = v.x;\n\n\t\t}\n\n\t\tif ( this.y > v.y ) {\n\n\t\t\tthis.y = v.y;\n\n\t\t}\n\n\t\tif ( this.z > v.z ) {\n\n\t\t\tthis.z = v.z;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tif ( this.x < v.x ) {\n\n\t\t\tthis.x = v.x;\n\n\t\t}\n\n\t\tif ( this.y < v.y ) {\n\n\t\t\tthis.y = v.y;\n\n\t\t}\n\n\t\tif ( this.z < v.z ) {\n\n\t\t\tthis.z = v.z;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\n\n\t\tif ( this.x < min.x ) {\n\n\t\t\tthis.x = min.x;\n\n\t\t} else if ( this.x > max.x ) {\n\n\t\t\tthis.x = max.x;\n\n\t\t}\n\n\t\tif ( this.y < min.y ) {\n\n\t\t\tthis.y = min.y;\n\n\t\t} else if ( this.y > max.y ) {\n\n\t\t\tthis.y = max.y;\n\n\t\t}\n\n\t\tif ( this.z < min.z ) {\n\n\t\t\tthis.z = min.z;\n\n\t\t} else if ( this.z > max.z ) {\n\n\t\t\tthis.z = max.z;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tclampScalar: ( function () {\n\n\t\tvar min, max;\n\n\t\treturn function ( minVal, maxVal ) {\n\n\t\t\tif ( min === undefined ) {\n\n\t\t\t\tmin = new THREE.Vector3();\n\t\t\t\tmax = new THREE.Vector3();\n\n\t\t\t}\n\n\t\t\tmin.set( minVal, minVal, minVal );\n\t\t\tmax.set( maxVal, maxVal, maxVal );\n\n\t\t\treturn this.clamp( min, max );\n\n\t\t};\n\n\t} )(),\n\n\tfloor: function () {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tceil: function () {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tround: function () {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\n\t\treturn this;\n\n\t},\n\n\troundToZero: function () {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\n\n\t},\n\n\tlengthManhattan: function () {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() );\n\n\t},\n\n\tsetLength: function ( l ) {\n\n\t\tvar oldLength = this.length();\n\n\t\tif ( oldLength !== 0 && l !== oldLength  ) {\n\n\t\t\tthis.multiplyScalar( l / oldLength );\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tcross: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.' );\n\t\t\treturn this.crossVectors( v, w );\n\n\t\t}\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\n\t\tthis.x = y * v.z - z * v.y;\n\t\tthis.y = z * v.x - x * v.z;\n\t\tthis.z = x * v.y - y * v.x;\n\n\t\treturn this;\n\n\t},\n\n\tcrossVectors: function ( a, b ) {\n\n\t\tvar ax = a.x, ay = a.y, az = a.z;\n\t\tvar bx = b.x, by = b.y, bz = b.z;\n\n\t\tthis.x = ay * bz - az * by;\n\t\tthis.y = az * bx - ax * bz;\n\t\tthis.z = ax * by - ay * bx;\n\n\t\treturn this;\n\n\t},\n\n\tprojectOnVector: function () {\n\n\t\tvar v1, dot;\n\n\t\treturn function ( vector ) {\n\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\n\n\t\t\tv1.copy( vector ).normalize();\n\n\t\t\tdot = this.dot( v1 );\n\n\t\t\treturn this.copy( v1 ).multiplyScalar( dot );\n\n\t\t};\n\n\t}(),\n\n\tprojectOnPlane: function () {\n\n\t\tvar v1;\n\n\t\treturn function ( planeNormal ) {\n\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\n\n\t\t\tv1.copy( this ).projectOnVector( planeNormal );\n\n\t\t\treturn this.sub( v1 );\n\n\t\t}\n\n\t}(),\n\n\treflect: function () {\n\n\t\t// reflect incident vector off plane orthogonal to normal\n\t\t// normal is assumed to have unit length\n\n\t\tvar v1;\n\n\t\treturn function ( normal ) {\n\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\n\n\t\t\treturn this.sub( v1.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\n\n\t\t}\n\n\t}(),\n\n\tangleTo: function ( v ) {\n\n\t\tvar theta = this.dot( v ) / ( this.length() * v.length() );\n\n\t\t// clamp, to handle numerical problems\n\n\t\treturn Math.acos( THREE.Math.clamp( theta, - 1, 1 ) );\n\n\t},\n\n\tdistanceTo: function ( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t},\n\n\tdistanceToSquared: function ( v ) {\n\n\t\tvar dx = this.x - v.x;\n\t\tvar dy = this.y - v.y;\n\t\tvar dz = this.z - v.z;\n\n\t\treturn dx * dx + dy * dy + dz * dz;\n\n\t},\n\n\tsetEulerFromRotationMatrix: function ( m, order ) {\n\n\t\tconsole.error( 'THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.' );\n\n\t},\n\n\tsetEulerFromQuaternion: function ( q, order ) {\n\n\t\tconsole.error( 'THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.' );\n\n\t},\n\n\tgetPositionFromMatrix: function ( m ) {\n\n\t\tconsole.warn( 'THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().' );\n\n\t\treturn this.setFromMatrixPosition( m );\n\n\t},\n\n\tgetScaleFromMatrix: function ( m ) {\n\n\t\tconsole.warn( 'THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().' );\n\n\t\treturn this.setFromMatrixScale( m );\n\t},\n\n\tgetColumnFromMatrix: function ( index, matrix ) {\n\n\t\tconsole.warn( 'THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().' );\n\n\t\treturn this.setFromMatrixColumn( index, matrix );\n\n\t},\n\n\tsetFromMatrixPosition: function ( m ) {\n\n\t\tthis.x = m.elements[ 12 ];\n\t\tthis.y = m.elements[ 13 ];\n\t\tthis.z = m.elements[ 14 ];\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrixScale: function ( m ) {\n\n\t\tvar sx = this.set( m.elements[ 0 ], m.elements[ 1 ], m.elements[  2 ] ).length();\n\t\tvar sy = this.set( m.elements[ 4 ], m.elements[ 5 ], m.elements[  6 ] ).length();\n\t\tvar sz = this.set( m.elements[ 8 ], m.elements[ 9 ], m.elements[ 10 ] ).length();\n\n\t\tthis.x = sx;\n\t\tthis.y = sy;\n\t\tthis.z = sz;\n\n\t\treturn this;\n\t},\n\n\tsetFromMatrixColumn: function ( index, matrix ) {\n\n\t\tvar offset = index * 4;\n\n\t\tvar me = matrix.elements;\n\n\t\tthis.x = me[ offset ];\n\t\tthis.y = me[ offset + 1 ];\n\t\tthis.z = me[ offset + 2 ];\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\n\t\treturn array;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.Vector3( this.x, this.y, this.z );\n\n\t}\n\n};\n\n// File:src/math/Vector4.js\n\n/**\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author philogb / http://blog.thejit.org/\n * @author mikael emtinger / http://gomo.se/\n * @author egraether / http://egraether.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nTHREE.Vector4 = function ( x, y, z, w ) {\n\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\tthis.z = z || 0;\n\tthis.w = ( w !== undefined ) ? w : 1;\n\n};\n\nTHREE.Vector4.prototype = {\n\n\tconstructor: THREE.Vector4,\n\n\tset: function ( x, y, z, w ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetZ: function ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetW: function ( w ) {\n\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tcase 3: this.w = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tcase 3: return this.w;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\t\tthis.w += v.w;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\t\tthis.w += s;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\t\tthis.w = a.w + b.w;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\t\tthis.w -= v.w;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\t\tthis.w = a.w - b.w;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\t\tthis.w *= scalar;\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tvar x = this.x;\n\t\tvar y = this.y;\n\t\tvar z = this.z;\n\t\tvar w = this.w;\n\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\n\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\tif ( scalar !== 0 ) {\n\n\t\t\tvar invScalar = 1 / scalar;\n\n\t\t\tthis.x *= invScalar;\n\t\t\tthis.y *= invScalar;\n\t\t\tthis.z *= invScalar;\n\t\t\tthis.w *= invScalar;\n\n\t\t} else {\n\n\t\t\tthis.x = 0;\n\t\t\tthis.y = 0;\n\t\t\tthis.z = 0;\n\t\t\tthis.w = 1;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetAxisAngleFromQuaternion: function ( q ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\n\n\t\t// q is assumed to be normalized\n\n\t\tthis.w = 2 * Math.acos( q.w );\n\n\t\tvar s = Math.sqrt( 1 - q.w * q.w );\n\n\t\tif ( s < 0.0001 ) {\n\n\t\t\t this.x = 1;\n\t\t\t this.y = 0;\n\t\t\t this.z = 0;\n\n\t\t} else {\n\n\t\t\t this.x = q.x / s;\n\t\t\t this.y = q.y / s;\n\t\t\t this.z = q.z / s;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetAxisAngleFromRotationMatrix: function ( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tvar angle, x, y, z,\t\t// variables for result\n\t\t\tepsilon = 0.01,\t\t// margin to allow for rounding errors\n\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\n\n\t\t\tte = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\tif ( ( Math.abs( m12 - m21 ) < epsilon )\n\t\t   && ( Math.abs( m13 - m31 ) < epsilon )\n\t\t   && ( Math.abs( m23 - m32 ) < epsilon ) ) {\n\n\t\t\t// singularity found\n\t\t\t// first check for identity matrix which must have +1 for all terms\n\t\t\t// in leading diagonal and zero in other terms\n\n\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 )\n\t\t\t   && ( Math.abs( m13 + m31 ) < epsilon2 )\n\t\t\t   && ( Math.abs( m23 + m32 ) < epsilon2 )\n\t\t\t   && ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\n\n\t\t\t\t// this singularity is identity matrix so angle = 0\n\n\t\t\t\tthis.set( 1, 0, 0, 0 );\n\n\t\t\t\treturn this; // zero angle, arbitrary axis\n\n\t\t\t}\n\n\t\t\t// otherwise this singularity is angle = 180\n\n\t\t\tangle = Math.PI;\n\n\t\t\tvar xx = ( m11 + 1 ) / 2;\n\t\t\tvar yy = ( m22 + 1 ) / 2;\n\t\t\tvar zz = ( m33 + 1 ) / 2;\n\t\t\tvar xy = ( m12 + m21 ) / 4;\n\t\t\tvar xz = ( m13 + m31 ) / 4;\n\t\t\tvar yz = ( m23 + m32 ) / 4;\n\n\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) { // m11 is the largest diagonal term\n\n\t\t\t\tif ( xx < epsilon ) {\n\n\t\t\t\t\tx = 0;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tx = Math.sqrt( xx );\n\t\t\t\t\ty = xy / x;\n\t\t\t\t\tz = xz / x;\n\n\t\t\t\t}\n\n\t\t\t} else if ( yy > zz ) { // m22 is the largest diagonal term\n\n\t\t\t\tif ( yy < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ty = Math.sqrt( yy );\n\t\t\t\t\tx = xy / y;\n\t\t\t\t\tz = yz / y;\n\n\t\t\t\t}\n\n\t\t\t} else { // m33 is the largest diagonal term so base result on this\n\n\t\t\t\tif ( zz < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tz = Math.sqrt( zz );\n\t\t\t\t\tx = xz / z;\n\t\t\t\t\ty = yz / z;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.set( x, y, z, angle );\n\n\t\t\treturn this; // return 180 deg rotation\n\n\t\t}\n\n\t\t// as we have reached here there are no singularities so we can handle normally\n\n\t\tvar s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 )\n\t\t\t\t\t\t  + ( m13 - m31 ) * ( m13 - m31 )\n\t\t\t\t\t\t  + ( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\n\n\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\n\n\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\n\t\t// caught by singularity test above, but I've left it in just in case\n\n\t\tthis.x = ( m32 - m23 ) / s;\n\t\tthis.y = ( m13 - m31 ) / s;\n\t\tthis.z = ( m21 - m12 ) / s;\n\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\n\n\t\treturn this;\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tif ( this.x > v.x ) {\n\n\t\t\tthis.x = v.x;\n\n\t\t}\n\n\t\tif ( this.y > v.y ) {\n\n\t\t\tthis.y = v.y;\n\n\t\t}\n\n\t\tif ( this.z > v.z ) {\n\n\t\t\tthis.z = v.z;\n\n\t\t}\n\n\t\tif ( this.w > v.w ) {\n\n\t\t\tthis.w = v.w;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tif ( this.x < v.x ) {\n\n\t\t\tthis.x = v.x;\n\n\t\t}\n\n\t\tif ( this.y < v.y ) {\n\n\t\t\tthis.y = v.y;\n\n\t\t}\n\n\t\tif ( this.z < v.z ) {\n\n\t\t\tthis.z = v.z;\n\n\t\t}\n\n\t\tif ( this.w < v.w ) {\n\n\t\t\tthis.w = v.w;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\n\n\t\tif ( this.x < min.x ) {\n\n\t\t\tthis.x = min.x;\n\n\t\t} else if ( this.x > max.x ) {\n\n\t\t\tthis.x = max.x;\n\n\t\t}\n\n\t\tif ( this.y < min.y ) {\n\n\t\t\tthis.y = min.y;\n\n\t\t} else if ( this.y > max.y ) {\n\n\t\t\tthis.y = max.y;\n\n\t\t}\n\n\t\tif ( this.z < min.z ) {\n\n\t\t\tthis.z = min.z;\n\n\t\t} else if ( this.z > max.z ) {\n\n\t\t\tthis.z = max.z;\n\n\t\t}\n\n\t\tif ( this.w < min.w ) {\n\n\t\t\tthis.w = min.w;\n\n\t\t} else if ( this.w > max.w ) {\n\n\t\t\tthis.w = max.w;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tclampScalar: ( function () {\n\n\t\tvar min, max;\n\n\t\treturn function ( minVal, maxVal ) {\n\n\t\t\tif ( min === undefined ) {\n\n\t\t\t\tmin = new THREE.Vector4();\n\t\t\t\tmax = new THREE.Vector4();\n\n\t\t\t}\n\n\t\t\tmin.set( minVal, minVal, minVal, minVal );\n\t\t\tmax.set( maxVal, maxVal, maxVal, maxVal );\n\n\t\t\treturn this.clamp( min, max );\n\n\t\t};\n\n\t} )(),\n\n    floor: function () {\n\n        this.x = Math.floor( this.x );\n        this.y = Math.floor( this.y );\n        this.z = Math.floor( this.z );\n        this.w = Math.floor( this.w );\n\n        return this;\n\n    },\n\n    ceil: function () {\n\n        this.x = Math.ceil( this.x );\n        this.y = Math.ceil( this.y );\n        this.z = Math.ceil( this.z );\n        this.w = Math.ceil( this.w );\n\n        return this;\n\n    },\n\n    round: function () {\n\n        this.x = Math.round( this.x );\n        this.y = Math.round( this.y );\n        this.z = Math.round( this.z );\n        this.w = Math.round( this.w );\n\n        return this;\n\n    },\n\n    roundToZero: function () {\n\n        this.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n        this.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n        this.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n        this.w = ( this.w < 0 ) ? Math.ceil( this.w ) : Math.floor( this.w );\n\n        return this;\n\n    },\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\t\tthis.w = - this.w;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\n\n\t},\n\n\tlengthManhattan: function () {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() );\n\n\t},\n\n\tsetLength: function ( l ) {\n\n\t\tvar oldLength = this.length();\n\n\t\tif ( oldLength !== 0 && l !== oldLength ) {\n\n\t\t\tthis.multiplyScalar( l / oldLength );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\t\tthis.w += ( v.w - this.w ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\t\tthis.w = array[ offset + 3 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\t\tarray[ offset + 3 ] = this.w;\n\n\t\treturn array;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.Vector4( this.x, this.y, this.z, this.w );\n\n\t}\n\n};\n\n// File:src/math/Euler.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://exocortex.com\n */\n\nTHREE.Euler = function ( x, y, z, order ) {\n\n\tthis._x = x || 0;\n\tthis._y = y || 0;\n\tthis._z = z || 0;\n\tthis._order = order || THREE.Euler.DefaultOrder;\n\n};\n\nTHREE.Euler.RotationOrders = [ 'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX' ];\n\nTHREE.Euler.DefaultOrder = 'XYZ';\n\nTHREE.Euler.prototype = {\n\n\tconstructor: THREE.Euler,\n\n\t_x: 0, _y: 0, _z: 0, _order: THREE.Euler.DefaultOrder,\n\n\tget x () {\n\n\t\treturn this._x;\n\n\t},\n\n\tset x ( value ) {\n\n\t\tthis._x = value;\n\t\tthis.onChangeCallback();\n\n\t},\n\n\tget y () {\n\n\t\treturn this._y;\n\n\t},\n\n\tset y ( value ) {\n\n\t\tthis._y = value;\n\t\tthis.onChangeCallback();\n\n\t},\n\n\tget z () {\n\n\t\treturn this._z;\n\n\t},\n\n\tset z ( value ) {\n\n\t\tthis._z = value;\n\t\tthis.onChangeCallback();\n\n\t},\n\n\tget order () {\n\n\t\treturn this._order;\n\n\t},\n\n\tset order ( value ) {\n\n\t\tthis._order = value;\n\t\tthis.onChangeCallback();\n\n\t},\n\n\tset: function ( x, y, z, order ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._order = order || this._order;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( euler ) {\n\n\t\tthis._x = euler._x;\n\t\tthis._y = euler._y;\n\t\tthis._z = euler._z;\n\t\tthis._order = euler._order;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromRotationMatrix: function ( m, order ) {\n\n\t\tvar clamp = THREE.Math.clamp;\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tvar te = m.elements;\n\t\tvar m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\n\t\tvar m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\n\t\tvar m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\torder = order || this._order;\n\n\t\tif ( order === 'XYZ' ) {\n\n\t\t\tthis._y = Math.asin( clamp( m13, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m13 ) < 0.99999 ) {\n\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\tthis._z = Math.atan2( - m12, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\tthis._z = 0;\n\n\t\t\t}\n\n\t\t} else if ( order === 'YXZ' ) {\n\n\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m23 ) < 0.99999 ) {\n\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\t\t\t\tthis._z = Math.atan2( m21, m22 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\t\t\t\tthis._z = 0;\n\n\t\t\t}\n\n\t\t} else if ( order === 'ZXY' ) {\n\n\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m32 ) < 0.99999 ) {\n\n\t\t\t\tthis._y = Math.atan2( - m31, m33 );\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._y = 0;\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t}\n\n\t\t} else if ( order === 'ZYX' ) {\n\n\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m31 ) < 0.99999 ) {\n\n\t\t\t\tthis._x = Math.atan2( m32, m33 );\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t}\n\n\t\t} else if ( order === 'YZX' ) {\n\n\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m21 ) < 0.99999 ) {\n\n\t\t\t\tthis._x = Math.atan2( - m23, m22 );\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\n\t\t\t}\n\n\t\t} else if ( order === 'XZY' ) {\n\n\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m12 ) < 0.99999 ) {\n\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\tthis._y = Math.atan2( m13, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\tthis._y = 0;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.Euler: .setFromRotationMatrix() given unsupported order: ' + order )\n\n\t\t}\n\n\t\tthis._order = order;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromQuaternion: function ( q, order, update ) {\n\n\t\tvar clamp = THREE.Math.clamp;\n\n\t\t// q is assumed to be normalized\n\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/content/SpinCalc.m\n\n\t\tvar sqx = q.x * q.x;\n\t\tvar sqy = q.y * q.y;\n\t\tvar sqz = q.z * q.z;\n\t\tvar sqw = q.w * q.w;\n\n\t\torder = order || this._order;\n\n\t\tif ( order === 'XYZ' ) {\n\n\t\t\tthis._x = Math.atan2( 2 * ( q.x * q.w - q.y * q.z ), ( sqw - sqx - sqy + sqz ) );\n\t\t\tthis._y = Math.asin(  clamp( 2 * ( q.x * q.z + q.y * q.w ), - 1, 1 ) );\n\t\t\tthis._z = Math.atan2( 2 * ( q.z * q.w - q.x * q.y ), ( sqw + sqx - sqy - sqz ) );\n\n\t\t} else if ( order ===  'YXZ' ) {\n\n\t\t\tthis._x = Math.asin(  clamp( 2 * ( q.x * q.w - q.y * q.z ), - 1, 1 ) );\n\t\t\tthis._y = Math.atan2( 2 * ( q.x * q.z + q.y * q.w ), ( sqw - sqx - sqy + sqz ) );\n\t\t\tthis._z = Math.atan2( 2 * ( q.x * q.y + q.z * q.w ), ( sqw - sqx + sqy - sqz ) );\n\n\t\t} else if ( order === 'ZXY' ) {\n\n\t\t\tthis._x = Math.asin(  clamp( 2 * ( q.x * q.w + q.y * q.z ), - 1, 1 ) );\n\t\t\tthis._y = Math.atan2( 2 * ( q.y * q.w - q.z * q.x ), ( sqw - sqx - sqy + sqz ) );\n\t\t\tthis._z = Math.atan2( 2 * ( q.z * q.w - q.x * q.y ), ( sqw - sqx + sqy - sqz ) );\n\n\t\t} else if ( order === 'ZYX' ) {\n\n\t\t\tthis._x = Math.atan2( 2 * ( q.x * q.w + q.z * q.y ), ( sqw - sqx - sqy + sqz ) );\n\t\t\tthis._y = Math.asin(  clamp( 2 * ( q.y * q.w - q.x * q.z ), - 1, 1 ) );\n\t\t\tthis._z = Math.atan2( 2 * ( q.x * q.y + q.z * q.w ), ( sqw + sqx - sqy - sqz ) );\n\n\t\t} else if ( order === 'YZX' ) {\n\n\t\t\tthis._x = Math.atan2( 2 * ( q.x * q.w - q.z * q.y ), ( sqw - sqx + sqy - sqz ) );\n\t\t\tthis._y = Math.atan2( 2 * ( q.y * q.w - q.x * q.z ), ( sqw + sqx - sqy - sqz ) );\n\t\t\tthis._z = Math.asin(  clamp( 2 * ( q.x * q.y + q.z * q.w ), - 1, 1 ) );\n\n\t\t} else if ( order === 'XZY' ) {\n\n\t\t\tthis._x = Math.atan2( 2 * ( q.x * q.w + q.y * q.z ), ( sqw - sqx + sqy - sqz ) );\n\t\t\tthis._y = Math.atan2( 2 * ( q.x * q.z + q.y * q.w ), ( sqw + sqx - sqy - sqz ) );\n\t\t\tthis._z = Math.asin(  clamp( 2 * ( q.z * q.w - q.x * q.y ), - 1, 1 ) );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.Euler: .setFromQuaternion() given unsupported order: ' + order )\n\n\t\t}\n\n\t\tthis._order = order;\n\n\t\tif ( update !== false ) this.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\treorder: function () {\n\n\t\t// WARNING: this discards revolution information -bhouston\n\n\t\tvar q = new THREE.Quaternion();\n\n\t\treturn function ( newOrder ) {\n\n\t\t\tq.setFromEuler( this );\n\t\t\tthis.setFromQuaternion( q, newOrder );\n\n\t\t};\n\n\n\t}(),\n\n\tequals: function ( euler ) {\n\n\t\treturn ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\n\n\t},\n\n\tfromArray: function ( array ) {\n\n\t\tthis._x = array[ 0 ];\n\t\tthis._y = array[ 1 ];\n\t\tthis._z = array[ 2 ];\n\t\tif ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function () {\n\n\t\treturn [ this._x, this._y, this._z, this._order ];\n\n\t},\n\n\tonChange: function ( callback ) {\n\n\t\tthis.onChangeCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\tonChangeCallback: function () {},\n\n\tclone: function () {\n\n\t\treturn new THREE.Euler( this._x, this._y, this._z, this._order );\n\n\t}\n\n};\n\n// File:src/math/Line3.js\n\n/**\n * @author bhouston / http://exocortex.com\n */\n\nTHREE.Line3 = function ( start, end ) {\n\n\tthis.start = ( start !== undefined ) ? start : new THREE.Vector3();\n\tthis.end = ( end !== undefined ) ? end : new THREE.Vector3();\n\n};\n\nTHREE.Line3.prototype = {\n\n\tconstructor: THREE.Line3,\n\n\tset: function ( start, end ) {\n\n\t\tthis.start.copy( start );\n\t\tthis.end.copy( end );\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( line ) {\n\n\t\tthis.start.copy( line.start );\n\t\tthis.end.copy( line.end );\n\n\t\treturn this;\n\n\t},\n\n\tcenter: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\t\treturn result.addVectors( this.start, this.end ).multiplyScalar( 0.5 );\n\n\t},\n\n\tdelta: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\t\treturn result.subVectors( this.end, this.start );\n\n\t},\n\n\tdistanceSq: function () {\n\n\t\treturn this.start.distanceToSquared( this.end );\n\n\t},\n\n\tdistance: function () {\n\n\t\treturn this.start.distanceTo( this.end );\n\n\t},\n\n\tat: function ( t, optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\treturn this.delta( result ).multiplyScalar( t ).add( this.start );\n\n\t},\n\n\tclosestPointToPointParameter: function () {\n\n\t\tvar startP = new THREE.Vector3();\n\t\tvar startEnd = new THREE.Vector3();\n\n\t\treturn function ( point, clampToLine ) {\n\n\t\t\tstartP.subVectors( point, this.start );\n\t\t\tstartEnd.subVectors( this.end, this.start );\n\n\t\t\tvar startEnd2 = startEnd.dot( startEnd );\n\t\t\tvar startEnd_startP = startEnd.dot( startP );\n\n\t\t\tvar t = startEnd_startP / startEnd2;\n\n\t\t\tif ( clampToLine ) {\n\n\t\t\t\tt = THREE.Math.clamp( t, 0, 1 );\n\n\t\t\t}\n\n\t\t\treturn t;\n\n\t\t};\n\n\t}(),\n\n\tclosestPointToPoint: function ( point, clampToLine, optionalTarget ) {\n\n\t\tvar t = this.closestPointToPointParameter( point, clampToLine );\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\treturn this.delta( result ).multiplyScalar( t ).add( this.start );\n\n\t},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tthis.start.applyMatrix4( matrix );\n\t\tthis.end.applyMatrix4( matrix );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( line ) {\n\n\t\treturn line.start.equals( this.start ) && line.end.equals( this.end );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.Line3().copy( this );\n\n\t}\n\n};\n\n// File:src/math/Box2.js\n\n/**\n * @author bhouston / http://exocortex.com\n */\n\nTHREE.Box2 = function ( min, max ) {\n\n\tthis.min = ( min !== undefined ) ? min : new THREE.Vector2( Infinity, Infinity );\n\tthis.max = ( max !== undefined ) ? max : new THREE.Vector2( - Infinity, - Infinity );\n\n};\n\nTHREE.Box2.prototype = {\n\n\tconstructor: THREE.Box2,\n\n\tset: function ( min, max ) {\n\n\t\tthis.min.copy( min );\n\t\tthis.max.copy( max );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tthis.expandByPoint( points[ i ] )\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCenterAndSize: function () {\n\n\t\tvar v1 = new THREE.Vector2();\n\n\t\treturn function ( center, size ) {\n\n\t\t\tvar halfSize = v1.copy( size ).multiplyScalar( 0.5 );\n\t\t\tthis.min.copy( center ).sub( halfSize );\n\t\t\tthis.max.copy( center ).add( halfSize );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tcopy: function ( box ) {\n\n\t\tthis.min.copy( box.min );\n\t\tthis.max.copy( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tmakeEmpty: function () {\n\n\t\tthis.min.x = this.min.y = Infinity;\n\t\tthis.max.x = this.max.y = - Infinity;\n\n\t\treturn this;\n\n\t},\n\n\tempty: function () {\n\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y );\n\n\t},\n\n\tcenter: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector2();\n\t\treturn result.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\n\n\t},\n\n\tsize: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector2();\n\t\treturn result.subVectors( this.max, this.min );\n\n\t},\n\n\texpandByPoint: function ( point ) {\n\n\t\tthis.min.min( point );\n\t\tthis.max.max( point );\n\n\t\treturn this;\n\t},\n\n\texpandByVector: function ( vector ) {\n\n\t\tthis.min.sub( vector );\n\t\tthis.max.add( vector );\n\n\t\treturn this;\n\t},\n\n\texpandByScalar: function ( scalar ) {\n\n\t\tthis.min.addScalar( - scalar );\n\t\tthis.max.addScalar( scalar );\n\n\t\treturn this;\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\tif ( point.x < this.min.x || point.x > this.max.x ||\n\t\t     point.y < this.min.y || point.y > this.max.y ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tcontainsBox: function ( box ) {\n\n\t\tif ( ( this.min.x <= box.min.x ) && ( box.max.x <= this.max.x ) &&\n\t\t     ( this.min.y <= box.min.y ) && ( box.max.y <= this.max.y ) ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t},\n\n\tgetParameter: function ( point, optionalTarget ) {\n\n\t\t// This can potentially have a divide by zero if the box\n\t\t// has a size dimension of 0.\n\n\t\tvar result = optionalTarget || new THREE.Vector2();\n\n\t\treturn result.set(\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y )\n\t\t);\n\n\t},\n\n\tisIntersectionBox: function ( box ) {\n\n\t\t// using 6 splitting planes to rule out intersections.\n\n\t\tif ( box.max.x < this.min.x || box.min.x > this.max.x ||\n\t\t     box.max.y < this.min.y || box.min.y > this.max.y ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tclampPoint: function ( point, optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector2();\n\t\treturn result.copy( point ).clamp( this.min, this.max );\n\n\t},\n\n\tdistanceToPoint: function () {\n\n\t\tvar v1 = new THREE.Vector2();\n\n\t\treturn function ( point ) {\n\n\t\t\tvar clampedPoint = v1.copy( point ).clamp( this.min, this.max );\n\t\t\treturn clampedPoint.sub( point ).length();\n\n\t\t};\n\n\t}(),\n\n\tintersect: function ( box ) {\n\n\t\tthis.min.max( box.min );\n\t\tthis.max.min( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tunion: function ( box ) {\n\n\t\tthis.min.min( box.min );\n\t\tthis.max.max( box.max );\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.min.add( offset );\n\t\tthis.max.add( offset );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( box ) {\n\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.Box2().copy( this );\n\n\t}\n\n};\n\n// File:src/math/Box3.js\n\n/**\n * @author bhouston / http://exocortex.com\n * @author WestLangley / http://github.com/WestLangley\n */\n\nTHREE.Box3 = function ( min, max ) {\n\n\tthis.min = ( min !== undefined ) ? min : new THREE.Vector3( Infinity, Infinity, Infinity );\n\tthis.max = ( max !== undefined ) ? max : new THREE.Vector3( - Infinity, - Infinity, - Infinity );\n\n};\n\nTHREE.Box3.prototype = {\n\n\tconstructor: THREE.Box3,\n\n\tset: function ( min, max ) {\n\n\t\tthis.min.copy( min );\n\t\tthis.max.copy( max );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tthis.expandByPoint( points[ i ] )\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCenterAndSize: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function ( center, size ) {\n\n\t\t\tvar halfSize = v1.copy( size ).multiplyScalar( 0.5 );\n\n\t\t\tthis.min.copy( center ).sub( halfSize );\n\t\t\tthis.max.copy( center ).add( halfSize );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tsetFromObject: function () {\n\n\t\t// Computes the world-axis-aligned bounding box of an object (including its children),\n\t\t// accounting for both the object's, and childrens', world transforms\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function ( object ) {\n\n\t\t\tvar scope = this;\n\n\t\t\tobject.updateMatrixWorld( true );\n\n\t\t\tthis.makeEmpty();\n\n\t\t\tobject.traverse( function ( node ) {\n\n\t\t\t\tvar geometry = node.geometry;\n\n\t\t\t\tif ( geometry !== undefined ) {\n\n\t\t\t\t\tif ( geometry instanceof THREE.Geometry ) {\n\n\t\t\t\t\t\tvar vertices = geometry.vertices;\n\n\t\t\t\t\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\n\n\t\t\t\t\t\t\tv1.copy( vertices[ i ] );\n\n\t\t\t\t\t\t\tv1.applyMatrix4( node.matrixWorld );\n\n\t\t\t\t\t\t\tscope.expandByPoint( v1 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( geometry instanceof THREE.BufferGeometry && geometry.attributes[ 'position' ] !== undefined ) {\n\n\t\t\t\t\t\tvar positions = geometry.attributes[ 'position' ].array;\n\n\t\t\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 3 ) {\n\n\t\t\t\t\t\t\tv1.set( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] );\n\n\t\t\t\t\t\t\tv1.applyMatrix4( node.matrixWorld );\n\n\t\t\t\t\t\t\tscope.expandByPoint( v1 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tcopy: function ( box ) {\n\n\t\tthis.min.copy( box.min );\n\t\tthis.max.copy( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tmakeEmpty: function () {\n\n\t\tthis.min.x = this.min.y = this.min.z = Infinity;\n\t\tthis.max.x = this.max.y = this.max.z = - Infinity;\n\n\t\treturn this;\n\n\t},\n\n\tempty: function () {\n\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y ) || ( this.max.z < this.min.z );\n\n\t},\n\n\tcenter: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\t\treturn result.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\n\n\t},\n\n\tsize: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\t\treturn result.subVectors( this.max, this.min );\n\n\t},\n\n\texpandByPoint: function ( point ) {\n\n\t\tthis.min.min( point );\n\t\tthis.max.max( point );\n\n\t\treturn this;\n\n\t},\n\n\texpandByVector: function ( vector ) {\n\n\t\tthis.min.sub( vector );\n\t\tthis.max.add( vector );\n\n\t\treturn this;\n\n\t},\n\n\texpandByScalar: function ( scalar ) {\n\n\t\tthis.min.addScalar( - scalar );\n\t\tthis.max.addScalar( scalar );\n\n\t\treturn this;\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\tif ( point.x < this.min.x || point.x > this.max.x ||\n\t\t     point.y < this.min.y || point.y > this.max.y ||\n\t\t     point.z < this.min.z || point.z > this.max.z ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tcontainsBox: function ( box ) {\n\n\t\tif ( ( this.min.x <= box.min.x ) && ( box.max.x <= this.max.x ) &&\n\t\t\t ( this.min.y <= box.min.y ) && ( box.max.y <= this.max.y ) &&\n\t\t\t ( this.min.z <= box.min.z ) && ( box.max.z <= this.max.z ) ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t},\n\n\tgetParameter: function ( point, optionalTarget ) {\n\n\t\t// This can potentially have a divide by zero if the box\n\t\t// has a size dimension of 0.\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\treturn result.set(\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y ),\n\t\t\t( point.z - this.min.z ) / ( this.max.z - this.min.z )\n\t\t);\n\n\t},\n\n\tisIntersectionBox: function ( box ) {\n\n\t\t// using 6 splitting planes to rule out intersections.\n\n\t\tif ( box.max.x < this.min.x || box.min.x > this.max.x ||\n\t\t     box.max.y < this.min.y || box.min.y > this.max.y ||\n\t\t     box.max.z < this.min.z || box.min.z > this.max.z ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tclampPoint: function ( point, optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\t\treturn result.copy( point ).clamp( this.min, this.max );\n\n\t},\n\n\tdistanceToPoint: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function ( point ) {\n\n\t\t\tvar clampedPoint = v1.copy( point ).clamp( this.min, this.max );\n\t\t\treturn clampedPoint.sub( point ).length();\n\n\t\t};\n\n\t}(),\n\n\tgetBoundingSphere: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function ( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new THREE.Sphere();\n\n\t\t\tresult.center = this.center();\n\t\t\tresult.radius = this.size( v1 ).length() * 0.5;\n\n\t\t\treturn result;\n\n\t\t};\n\n\t}(),\n\n\tintersect: function ( box ) {\n\n\t\tthis.min.max( box.min );\n\t\tthis.max.min( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tunion: function ( box ) {\n\n\t\tthis.min.min( box.min );\n\t\tthis.max.max( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function () {\n\n\t\tvar points = [\n\t\t\tnew THREE.Vector3(),\n\t\t\tnew THREE.Vector3(),\n\t\t\tnew THREE.Vector3(),\n\t\t\tnew THREE.Vector3(),\n\t\t\tnew THREE.Vector3(),\n\t\t\tnew THREE.Vector3(),\n\t\t\tnew THREE.Vector3(),\n\t\t\tnew THREE.Vector3()\n\t\t];\n\n\t\treturn function ( matrix ) {\n\n\t\t\t// NOTE: I am using a binary pattern to specify all 2^3 combinations below\n\t\t\tpoints[ 0 ].set( this.min.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 000\n\t\t\tpoints[ 1 ].set( this.min.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 001\n\t\t\tpoints[ 2 ].set( this.min.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 010\n\t\t\tpoints[ 3 ].set( this.min.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 011\n\t\t\tpoints[ 4 ].set( this.max.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 100\n\t\t\tpoints[ 5 ].set( this.max.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 101\n\t\t\tpoints[ 6 ].set( this.max.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 110\n\t\t\tpoints[ 7 ].set( this.max.x, this.max.y, this.max.z ).applyMatrix4( matrix );  // 111\n\n\t\t\tthis.makeEmpty();\n\t\t\tthis.setFromPoints( points );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.min.add( offset );\n\t\tthis.max.add( offset );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( box ) {\n\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.Box3().copy( this );\n\n\t}\n\n};\n\n// File:src/math/Matrix3.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://exocortex.com\n */\n\nTHREE.Matrix3 = function () {\n\n\tthis.elements = new Float32Array( [\n\n\t\t1, 0, 0,\n\t\t0, 1, 0,\n\t\t0, 0, 1\n\n\t] );\n\n\tif ( arguments.length > 0 ) {\n\n\t\tconsole.error( 'THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.' );\n\n\t}\n\n};\n\nTHREE.Matrix3.prototype = {\n\n\tconstructor: THREE.Matrix3,\n\n\tset: function ( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 3 ] = n12; te[ 6 ] = n13;\n\t\tte[ 1 ] = n21; te[ 4 ] = n22; te[ 7 ] = n23;\n\t\tte[ 2 ] = n31; te[ 5 ] = n32; te[ 8 ] = n33;\n\n\t\treturn this;\n\n\t},\n\n\tidentity: function () {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0,\n\t\t\t0, 1, 0,\n\t\t\t0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( m ) {\n\n\t\tvar me = m.elements;\n\n\t\tthis.set(\n\n\t\t\tme[ 0 ], me[ 3 ], me[ 6 ],\n\t\t\tme[ 1 ], me[ 4 ], me[ 7 ],\n\t\t\tme[ 2 ], me[ 5 ], me[ 8 ]\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyVector3: function ( vector ) {\n\n\t\tconsole.warn( 'THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.' );\n\t\treturn vector.applyMatrix3( this );\n\n\t},\n\n\tmultiplyVector3Array: function ( a ) {\n\n\t\tconsole.warn( 'THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.' );\n\t\treturn this.applyToVector3Array( a );\n\n\t},\n\n\tapplyToVector3Array: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function ( array, offset, length ) {\n\n\t\t\tif ( offset === undefined ) offset = 0;\n\t\t\tif ( length === undefined ) length = array.length;\n\n\t\t\tfor ( var i = 0, j = offset, il; i < length; i += 3, j += 3 ) {\n\n\t\t\t\tv1.x = array[ j ];\n\t\t\t\tv1.y = array[ j + 1 ];\n\t\t\t\tv1.z = array[ j + 2 ];\n\n\t\t\t\tv1.applyMatrix3( this );\n\n\t\t\t\tarray[ j ]     = v1.x;\n\t\t\t\tarray[ j + 1 ] = v1.y;\n\t\t\t\tarray[ j + 2 ] = v1.z;\n\n\t\t\t}\n\n\t\t\treturn array;\n\n\t\t};\n\n\t}(),\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\n\t\tte[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\n\t\tte[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\n\n\t\treturn this;\n\n\t},\n\n\tdeterminant: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\n\t\t\td = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\n\t\t\tg = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\n\n\t\treturn a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\n\n\t},\n\n\tgetInverse: function ( matrix, throwOnInvertible ) {\n\n\t\t// input: THREE.Matrix4\n\t\t// ( based on http://code.google.com/p/webgl-mjs/ )\n\n\t\tvar me = matrix.elements;\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] =   me[ 10 ] * me[ 5 ] - me[ 6 ] * me[ 9 ];\n\t\tte[ 1 ] = - me[ 10 ] * me[ 1 ] + me[ 2 ] * me[ 9 ];\n\t\tte[ 2 ] =   me[ 6 ] * me[ 1 ] - me[ 2 ] * me[ 5 ];\n\t\tte[ 3 ] = - me[ 10 ] * me[ 4 ] + me[ 6 ] * me[ 8 ];\n\t\tte[ 4 ] =   me[ 10 ] * me[ 0 ] - me[ 2 ] * me[ 8 ];\n\t\tte[ 5 ] = - me[ 6 ] * me[ 0 ] + me[ 2 ] * me[ 4 ];\n\t\tte[ 6 ] =   me[ 9 ] * me[ 4 ] - me[ 5 ] * me[ 8 ];\n\t\tte[ 7 ] = - me[ 9 ] * me[ 0 ] + me[ 1 ] * me[ 8 ];\n\t\tte[ 8 ] =   me[ 5 ] * me[ 0 ] - me[ 1 ] * me[ 4 ];\n\n\t\tvar det = me[ 0 ] * te[ 0 ] + me[ 1 ] * te[ 3 ] + me[ 2 ] * te[ 6 ];\n\n\t\t// no inverse\n\n\t\tif ( det === 0 ) {\n\n\t\t\tvar msg = \"Matrix3.getInverse(): can't invert matrix, determinant is 0\";\n\n\t\t\tif ( throwOnInvertible || false ) {\n\n\t\t\t\tthrow new Error( msg );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( msg );\n\n\t\t\t}\n\n\t\t\tthis.identity();\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tthis.multiplyScalar( 1.0 / det );\n\n\t\treturn this;\n\n\t},\n\n\ttranspose: function () {\n\n\t\tvar tmp, m = this.elements;\n\n\t\ttmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\n\t\ttmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\n\t\ttmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\n\n\t\treturn this;\n\n\t},\n\n\tflattenToArrayOffset: function ( array, offset ) {\n\n\t\tvar te = this.elements;\n\n\t\tarray[ offset     ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\t\tarray[ offset + 8 ]  = te[ 8 ];\n\n\t\treturn array;\n\n\t},\n\n\tgetNormalMatrix: function ( m ) {\n\n\t\t// input: THREE.Matrix4\n\n\t\tthis.getInverse( m ).transpose();\n\n\t\treturn this;\n\n\t},\n\n\ttransposeIntoArray: function ( r ) {\n\n\t\tvar m = this.elements;\n\n\t\tr[ 0 ] = m[ 0 ];\n\t\tr[ 1 ] = m[ 3 ];\n\t\tr[ 2 ] = m[ 6 ];\n\t\tr[ 3 ] = m[ 1 ];\n\t\tr[ 4 ] = m[ 4 ];\n\t\tr[ 5 ] = m[ 7 ];\n\t\tr[ 6 ] = m[ 2 ];\n\t\tr[ 7 ] = m[ 5 ];\n\t\tr[ 8 ] = m[ 8 ];\n\n\t\treturn this;\n\n\t},\n\n\tfromArray: function ( array ) {\n\n\t\tthis.elements.set( array );\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function () {\n\n\t\tvar te = this.elements;\n\n\t\treturn [\n\t\t\tte[ 0 ], te[ 1 ], te[ 2 ],\n\t\t\tte[ 3 ], te[ 4 ], te[ 5 ],\n\t\t\tte[ 6 ], te[ 7 ], te[ 8 ]\n\t\t];\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.Matrix3().fromArray( this.elements );\n\n\t}\n\n};\n\n// File:src/math/Matrix4.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author philogb / http://blog.thejit.org/\n * @author jordi_ros / http://plattsoft.com\n * @author D1plo1d / http://github.com/D1plo1d\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author timknip / http://www.floorplanner.com/\n * @author bhouston / http://exocortex.com\n * @author WestLangley / http://github.com/WestLangley\n */\n\nTHREE.Matrix4 = function () {\n\n\tthis.elements = new Float32Array( [\n\n\t\t1, 0, 0, 0,\n\t\t0, 1, 0, 0,\n\t\t0, 0, 1, 0,\n\t\t0, 0, 0, 1\n\n\t] );\n\n\tif ( arguments.length > 0 ) {\n\n\t\tconsole.error( 'THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.' );\n\n\t}\n\n};\n\nTHREE.Matrix4.prototype = {\n\n\tconstructor: THREE.Matrix4,\n\n\tset: function ( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\n\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\n\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\n\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\n\n\t\treturn this;\n\n\t},\n\n\tidentity: function () {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( m ) {\n\n\t\tthis.elements.set( m.elements );\n\n\t\treturn this;\n\n\t},\n\n\textractPosition: function ( m ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().' );\n\t\treturn this.copyPosition( m );\n\n\t},\n\n\tcopyPosition: function ( m ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = m.elements;\n\n\t\tte[ 12 ] = me[ 12 ];\n\t\tte[ 13 ] = me[ 13 ];\n\t\tte[ 14 ] = me[ 14 ];\n\n\t\treturn this;\n\n\t},\n\n\textractRotation: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function ( m ) {\n\n\t\t\tvar te = this.elements;\n\t\t\tvar me = m.elements;\n\n\t\t\tvar scaleX = 1 / v1.set( me[ 0 ], me[ 1 ], me[ 2 ] ).length();\n\t\t\tvar scaleY = 1 / v1.set( me[ 4 ], me[ 5 ], me[ 6 ] ).length();\n\t\t\tvar scaleZ = 1 / v1.set( me[ 8 ], me[ 9 ], me[ 10 ] ).length();\n\n\t\t\tte[ 0 ] = me[ 0 ] * scaleX;\n\t\t\tte[ 1 ] = me[ 1 ] * scaleX;\n\t\t\tte[ 2 ] = me[ 2 ] * scaleX;\n\n\t\t\tte[ 4 ] = me[ 4 ] * scaleY;\n\t\t\tte[ 5 ] = me[ 5 ] * scaleY;\n\t\t\tte[ 6 ] = me[ 6 ] * scaleY;\n\n\t\t\tte[ 8 ] = me[ 8 ] * scaleZ;\n\t\t\tte[ 9 ] = me[ 9 ] * scaleZ;\n\t\t\tte[ 10 ] = me[ 10 ] * scaleZ;\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tmakeRotationFromEuler: function ( euler ) {\n\n\t\tif ( euler instanceof THREE.Euler === false ) {\n\n\t\t\tconsole.error( 'THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tvar te = this.elements;\n\n\t\tvar x = euler.x, y = euler.y, z = euler.z;\n\t\tvar a = Math.cos( x ), b = Math.sin( x );\n\t\tvar c = Math.cos( y ), d = Math.sin( y );\n\t\tvar e = Math.cos( z ), f = Math.sin( z );\n\n\t\tif ( euler.order === 'XYZ' ) {\n\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - c * f;\n\t\t\tte[ 8 ] = d;\n\n\t\t\tte[ 1 ] = af + be * d;\n\t\t\tte[ 5 ] = ae - bf * d;\n\t\t\tte[ 9 ] = - b * c;\n\n\t\t\tte[ 2 ] = bf - ae * d;\n\t\t\tte[ 6 ] = be + af * d;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YXZ' ) {\n\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce + df * b;\n\t\t\tte[ 4 ] = de * b - cf;\n\t\t\tte[ 8 ] = a * d;\n\n\t\t\tte[ 1 ] = a * f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b;\n\n\t\t\tte[ 2 ] = cf * b - de;\n\t\t\tte[ 6 ] = df + ce * b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZXY' ) {\n\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce - df * b;\n\t\t\tte[ 4 ] = - a * f;\n\t\t\tte[ 8 ] = de + cf * b;\n\n\t\t\tte[ 1 ] = cf + de * b;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = df - ce * b;\n\n\t\t\tte[ 2 ] = - a * d;\n\t\t\tte[ 6 ] = b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZYX' ) {\n\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = be * d - af;\n\t\t\tte[ 8 ] = ae * d + bf;\n\n\t\t\tte[ 1 ] = c * f;\n\t\t\tte[ 5 ] = bf * d + ae;\n\t\t\tte[ 9 ] = af * d - be;\n\n\t\t\tte[ 2 ] = - d;\n\t\t\tte[ 6 ] = b * c;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YZX' ) {\n\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = bd - ac * f;\n\t\t\tte[ 8 ] = bc * f + ad;\n\n\t\t\tte[ 1 ] = f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b * e;\n\n\t\t\tte[ 2 ] = - d * e;\n\t\t\tte[ 6 ] = ad * f + bc;\n\t\t\tte[ 10 ] = ac - bd * f;\n\n\t\t} else if ( euler.order === 'XZY' ) {\n\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - f;\n\t\t\tte[ 8 ] = d * e;\n\n\t\t\tte[ 1 ] = ac * f + bd;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = ad * f - bc;\n\n\t\t\tte[ 2 ] = bc * f - ad;\n\t\t\tte[ 6 ] = b * e;\n\t\t\tte[ 10 ] = bd * f + ac;\n\n\t\t}\n\n\t\t// last column\n\t\tte[ 3 ] = 0;\n\t\tte[ 7 ] = 0;\n\t\tte[ 11 ] = 0;\n\n\t\t// bottom row\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tsetRotationFromQuaternion: function ( q ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().' );\n\n\t\treturn this.makeRotationFromQuaternion( q );\n\n\t},\n\n\tmakeRotationFromQuaternion: function ( q ) {\n\n\t\tvar te = this.elements;\n\n\t\tvar x = q.x, y = q.y, z = q.z, w = q.w;\n\t\tvar x2 = x + x, y2 = y + y, z2 = z + z;\n\t\tvar xx = x * x2, xy = x * y2, xz = x * z2;\n\t\tvar yy = y * y2, yz = y * z2, zz = z * z2;\n\t\tvar wx = w * x2, wy = w * y2, wz = w * z2;\n\n\t\tte[ 0 ] = 1 - ( yy + zz );\n\t\tte[ 4 ] = xy - wz;\n\t\tte[ 8 ] = xz + wy;\n\n\t\tte[ 1 ] = xy + wz;\n\t\tte[ 5 ] = 1 - ( xx + zz );\n\t\tte[ 9 ] = yz - wx;\n\n\t\tte[ 2 ] = xz - wy;\n\t\tte[ 6 ] = yz + wx;\n\t\tte[ 10 ] = 1 - ( xx + yy );\n\n\t\t// last column\n\t\tte[ 3 ] = 0;\n\t\tte[ 7 ] = 0;\n\t\tte[ 11 ] = 0;\n\n\t\t// bottom row\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tlookAt: function () {\n\n\t\tvar x = new THREE.Vector3();\n\t\tvar y = new THREE.Vector3();\n\t\tvar z = new THREE.Vector3();\n\n\t\treturn function ( eye, target, up ) {\n\n\t\t\tvar te = this.elements;\n\n\t\t\tz.subVectors( eye, target ).normalize();\n\n\t\t\tif ( z.length() === 0 ) {\n\n\t\t\t\tz.z = 1;\n\n\t\t\t}\n\n\t\t\tx.crossVectors( up, z ).normalize();\n\n\t\t\tif ( x.length() === 0 ) {\n\n\t\t\t\tz.x += 0.0001;\n\t\t\t\tx.crossVectors( up, z ).normalize();\n\n\t\t\t}\n\n\t\t\ty.crossVectors( z, x );\n\n\n\t\t\tte[ 0 ] = x.x; te[ 4 ] = y.x; te[ 8 ] = z.x;\n\t\t\tte[ 1 ] = x.y; te[ 5 ] = y.y; te[ 9 ] = z.y;\n\t\t\tte[ 2 ] = x.z; te[ 6 ] = y.z; te[ 10 ] = z.z;\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tmultiply: function ( m, n ) {\n\n\t\tif ( n !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.' );\n\t\t\treturn this.multiplyMatrices( m, n );\n\n\t\t}\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t},\n\n\tmultiplyMatrices: function ( a, b ) {\n\n\t\tvar ae = a.elements;\n\t\tvar be = b.elements;\n\t\tvar te = this.elements;\n\n\t\tvar a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\n\t\tvar a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\n\t\tvar a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\n\t\tvar a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\n\n\t\tvar b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\n\t\tvar b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\n\t\tvar b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\n\t\tvar b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n\n\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyToArray: function ( a, b, r ) {\n\n\t\tvar te = this.elements;\n\n\t\tthis.multiplyMatrices( a, b );\n\n\t\tr[ 0 ] = te[ 0 ]; r[ 1 ] = te[ 1 ]; r[ 2 ] = te[ 2 ]; r[ 3 ] = te[ 3 ];\n\t\tr[ 4 ] = te[ 4 ]; r[ 5 ] = te[ 5 ]; r[ 6 ] = te[ 6 ]; r[ 7 ] = te[ 7 ];\n\t\tr[ 8 ]  = te[ 8 ]; r[ 9 ]  = te[ 9 ]; r[ 10 ] = te[ 10 ]; r[ 11 ] = te[ 11 ];\n\t\tr[ 12 ] = te[ 12 ]; r[ 13 ] = te[ 13 ]; r[ 14 ] = te[ 14 ]; r[ 15 ] = te[ 15 ];\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\n\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\n\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\n\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyVector3: function ( vector ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.' );\n\t\treturn vector.applyProjection( this );\n\n\t},\n\n\tmultiplyVector4: function ( vector ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\n\t\treturn vector.applyMatrix4( this );\n\n\t},\n\n\tmultiplyVector3Array: function ( a ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.' );\n\t\treturn this.applyToVector3Array( a );\n\n\t},\n\n\tapplyToVector3Array: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function ( array, offset, length ) {\n\n\t\t\tif ( offset === undefined ) offset = 0;\n\t\t\tif ( length === undefined ) length = array.length;\n\n\t\t\tfor ( var i = 0, j = offset, il; i < length; i += 3, j += 3 ) {\n\n\t\t\t\tv1.x = array[ j ];\n\t\t\t\tv1.y = array[ j + 1 ];\n\t\t\t\tv1.z = array[ j + 2 ];\n\n\t\t\t\tv1.applyMatrix4( this );\n\n\t\t\t\tarray[ j ]     = v1.x;\n\t\t\t\tarray[ j + 1 ] = v1.y;\n\t\t\t\tarray[ j + 2 ] = v1.z;\n\n\t\t\t}\n\n\t\t\treturn array;\n\n\t\t};\n\n\t}(),\n\n\trotateAxis: function ( v ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.' );\n\n\t\tv.transformDirection( this );\n\n\t},\n\n\tcrossVector: function ( vector ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\n\t\treturn vector.applyMatrix4( this );\n\n\t},\n\n\tdeterminant: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\n\t\tvar n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\n\t\tvar n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\n\t\tvar n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\n\n\t\t//TODO: make this more efficient\n\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\n\n\t\treturn (\n\t\t\tn41 * (\n\t\t\t\t+ n14 * n23 * n32\n\t\t\t\t - n13 * n24 * n32\n\t\t\t\t - n14 * n22 * n33\n\t\t\t\t + n12 * n24 * n33\n\t\t\t\t + n13 * n22 * n34\n\t\t\t\t - n12 * n23 * n34\n\t\t\t) +\n\t\t\tn42 * (\n\t\t\t\t+ n11 * n23 * n34\n\t\t\t\t - n11 * n24 * n33\n\t\t\t\t + n14 * n21 * n33\n\t\t\t\t - n13 * n21 * n34\n\t\t\t\t + n13 * n24 * n31\n\t\t\t\t - n14 * n23 * n31\n\t\t\t) +\n\t\t\tn43 * (\n\t\t\t\t+ n11 * n24 * n32\n\t\t\t\t - n11 * n22 * n34\n\t\t\t\t - n14 * n21 * n32\n\t\t\t\t + n12 * n21 * n34\n\t\t\t\t + n14 * n22 * n31\n\t\t\t\t - n12 * n24 * n31\n\t\t\t) +\n\t\t\tn44 * (\n\t\t\t\t- n13 * n22 * n31\n\t\t\t\t - n11 * n23 * n32\n\t\t\t\t + n11 * n22 * n33\n\t\t\t\t + n13 * n21 * n32\n\t\t\t\t - n12 * n21 * n33\n\t\t\t\t + n12 * n23 * n31\n\t\t\t)\n\n\t\t);\n\n\t},\n\n\ttranspose: function () {\n\n\t\tvar te = this.elements;\n\t\tvar tmp;\n\n\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\n\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\n\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\n\n\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\n\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\n\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\n\n\t\treturn this;\n\n\t},\n\n\tflattenToArrayOffset: function ( array, offset ) {\n\n\t\tvar te = this.elements;\n\n\t\tarray[ offset     ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\n\t\tarray[ offset + 8 ]  = te[ 8 ];\n\t\tarray[ offset + 9 ]  = te[ 9 ];\n\t\tarray[ offset + 10 ] = te[ 10 ];\n\t\tarray[ offset + 11 ] = te[ 11 ];\n\n\t\tarray[ offset + 12 ] = te[ 12 ];\n\t\tarray[ offset + 13 ] = te[ 13 ];\n\t\tarray[ offset + 14 ] = te[ 14 ];\n\t\tarray[ offset + 15 ] = te[ 15 ];\n\n\t\treturn array;\n\n\t},\n\n\tgetPosition: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function () {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.' );\n\n\t\t\tvar te = this.elements;\n\t\t\treturn v1.set( te[ 12 ], te[ 13 ], te[ 14 ] );\n\n\t\t};\n\n\t}(),\n\n\tsetPosition: function ( v ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 12 ] = v.x;\n\t\tte[ 13 ] = v.y;\n\t\tte[ 14 ] = v.z;\n\n\t\treturn this;\n\n\t},\n\n\tgetInverse: function ( m, throwOnInvertible ) {\n\n\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n\t\tvar te = this.elements;\n\t\tvar me = m.elements;\n\n\t\tvar n11 = me[ 0 ], n12 = me[ 4 ], n13 = me[ 8 ], n14 = me[ 12 ];\n\t\tvar n21 = me[ 1 ], n22 = me[ 5 ], n23 = me[ 9 ], n24 = me[ 13 ];\n\t\tvar n31 = me[ 2 ], n32 = me[ 6 ], n33 = me[ 10 ], n34 = me[ 14 ];\n\t\tvar n41 = me[ 3 ], n42 = me[ 7 ], n43 = me[ 11 ], n44 = me[ 15 ];\n\n\t\tte[ 0 ] = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44;\n\t\tte[ 4 ] = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44;\n\t\tte[ 8 ] = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44;\n\t\tte[ 12 ] = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\n\t\tte[ 1 ] = n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44;\n\t\tte[ 5 ] = n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44;\n\t\tte[ 9 ] = n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44;\n\t\tte[ 13 ] = n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34;\n\t\tte[ 2 ] = n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44;\n\t\tte[ 6 ] = n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44;\n\t\tte[ 10 ] = n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44;\n\t\tte[ 14 ] = n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34;\n\t\tte[ 3 ] = n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43;\n\t\tte[ 7 ] = n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43;\n\t\tte[ 11 ] = n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43;\n\t\tte[ 15 ] = n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33;\n\n\t\tvar det = n11 * te[ 0 ] + n21 * te[ 4 ] + n31 * te[ 8 ] + n41 * te[ 12 ];\n\n\t\tif ( det == 0 ) {\n\n\t\t\tvar msg = \"Matrix4.getInverse(): can't invert matrix, determinant is 0\";\n\n\t\t\tif ( throwOnInvertible || false ) {\n\n\t\t\t\tthrow new Error( msg );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( msg );\n\n\t\t\t}\n\n\t\t\tthis.identity();\n\n\t\t\treturn this;\n\t\t}\n\n\t\tthis.multiplyScalar( 1 / det );\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( v ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .translate() has been removed.' );\n\n\t},\n\n\trotateX: function ( angle ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .rotateX() has been removed.' );\n\n\t},\n\n\trotateY: function ( angle ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .rotateY() has been removed.' );\n\n\t},\n\n\trotateZ: function ( angle ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .rotateZ() has been removed.' );\n\n\t},\n\n\trotateByAxis: function ( axis, angle ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .rotateByAxis() has been removed.' );\n\n\t},\n\n\tscale: function ( v ) {\n\n\t\tvar te = this.elements;\n\t\tvar x = v.x, y = v.y, z = v.z;\n\n\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\n\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\n\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\n\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\n\n\t\treturn this;\n\n\t},\n\n\tgetMaxScaleOnAxis: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\n\t\tvar scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\n\t\tvar scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\n\n\t\treturn Math.sqrt( Math.max( scaleXSq, Math.max( scaleYSq, scaleZSq ) ) );\n\n\t},\n\n\tmakeTranslation: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, x,\n\t\t\t0, 1, 0, y,\n\t\t\t0, 0, 1, z,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationX: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t1, 0,  0, 0,\n\t\t\t0, c, - s, 0,\n\t\t\t0, s,  c, 0,\n\t\t\t0, 0,  0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationY: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t c, 0, s, 0,\n\t\t\t 0, 1, 0, 0,\n\t\t\t- s, 0, c, 0,\n\t\t\t 0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationZ: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\tc, - s, 0, 0,\n\t\t\ts,  c, 0, 0,\n\t\t\t0,  0, 1, 0,\n\t\t\t0,  0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationAxis: function ( axis, angle ) {\n\n\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\n\n\t\tvar c = Math.cos( angle );\n\t\tvar s = Math.sin( angle );\n\t\tvar t = 1 - c;\n\t\tvar x = axis.x, y = axis.y, z = axis.z;\n\t\tvar tx = t * x, ty = t * y;\n\n\t\tthis.set(\n\n\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\n\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\n\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\t return this;\n\n\t},\n\n\tmakeScale: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\tx, 0, 0, 0,\n\t\t\t0, y, 0, 0,\n\t\t\t0, 0, z, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tcompose: function ( position, quaternion, scale ) {\n\n\t\tthis.makeRotationFromQuaternion( quaternion );\n\t\tthis.scale( scale );\n\t\tthis.setPosition( position );\n\n\t\treturn this;\n\n\t},\n\n\tdecompose: function () {\n\n\t\tvar vector = new THREE.Vector3();\n\t\tvar matrix = new THREE.Matrix4();\n\n\t\treturn function ( position, quaternion, scale ) {\n\n\t\t\tvar te = this.elements;\n\n\t\t\tvar sx = vector.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\n\t\t\tvar sy = vector.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\n\t\t\tvar sz = vector.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\n\n\t\t\t// if determine is negative, we need to invert one scale\n\t\t\tvar det = this.determinant();\n\t\t\tif ( det < 0 ) {\n\t\t\t\tsx = - sx;\n\t\t\t}\n\n\t\t\tposition.x = te[ 12 ];\n\t\t\tposition.y = te[ 13 ];\n\t\t\tposition.z = te[ 14 ];\n\n\t\t\t// scale the rotation part\n\n\t\t\tmatrix.elements.set( this.elements ); // at this point matrix is incomplete so we can't use .copy()\n\n\t\t\tvar invSX = 1 / sx;\n\t\t\tvar invSY = 1 / sy;\n\t\t\tvar invSZ = 1 / sz;\n\n\t\t\tmatrix.elements[ 0 ] *= invSX;\n\t\t\tmatrix.elements[ 1 ] *= invSX;\n\t\t\tmatrix.elements[ 2 ] *= invSX;\n\n\t\t\tmatrix.elements[ 4 ] *= invSY;\n\t\t\tmatrix.elements[ 5 ] *= invSY;\n\t\t\tmatrix.elements[ 6 ] *= invSY;\n\n\t\t\tmatrix.elements[ 8 ] *= invSZ;\n\t\t\tmatrix.elements[ 9 ] *= invSZ;\n\t\t\tmatrix.elements[ 10 ] *= invSZ;\n\n\t\t\tquaternion.setFromRotationMatrix( matrix );\n\n\t\t\tscale.x = sx;\n\t\t\tscale.y = sy;\n\t\t\tscale.z = sz;\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tmakeFrustum: function ( left, right, bottom, top, near, far ) {\n\n\t\tvar te = this.elements;\n\t\tvar x = 2 * near / ( right - left );\n\t\tvar y = 2 * near / ( top - bottom );\n\n\t\tvar a = ( right + left ) / ( right - left );\n\t\tvar b = ( top + bottom ) / ( top - bottom );\n\t\tvar c = - ( far + near ) / ( far - near );\n\t\tvar d = - 2 * far * near / ( far - near );\n\n\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\n\n\t\treturn this;\n\n\t},\n\n\tmakePerspective: function ( fov, aspect, near, far ) {\n\n\t\tvar ymax = near * Math.tan( THREE.Math.degToRad( fov * 0.5 ) );\n\t\tvar ymin = - ymax;\n\t\tvar xmin = ymin * aspect;\n\t\tvar xmax = ymax * aspect;\n\n\t\treturn this.makeFrustum( xmin, xmax, ymin, ymax, near, far );\n\n\t},\n\n\tmakeOrthographic: function ( left, right, top, bottom, near, far ) {\n\n\t\tvar te = this.elements;\n\t\tvar w = right - left;\n\t\tvar h = top - bottom;\n\t\tvar p = far - near;\n\n\t\tvar x = ( right + left ) / w;\n\t\tvar y = ( top + bottom ) / h;\n\t\tvar z = ( far + near ) / p;\n\n\t\tte[ 0 ] = 2 / w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = 2 / h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 / p;\tte[ 14 ] = - z;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tfromArray: function ( array ) {\n\n\t\tthis.elements.set( array );\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function () {\n\n\t\tvar te = this.elements;\n\n\t\treturn [\n\t\t\tte[ 0 ], te[ 1 ], te[ 2 ], te[ 3 ],\n\t\t\tte[ 4 ], te[ 5 ], te[ 6 ], te[ 7 ],\n\t\t\tte[ 8 ], te[ 9 ], te[ 10 ], te[ 11 ],\n\t\t\tte[ 12 ], te[ 13 ], te[ 14 ], te[ 15 ]\n\t\t];\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.Matrix4().fromArray( this.elements );\n\n\t}\n\n};\n\n// File:src/math/Ray.js\n\n/**\n * @author bhouston / http://exocortex.com\n */\n\nTHREE.Ray = function ( origin, direction ) {\n\n\tthis.origin = ( origin !== undefined ) ? origin : new THREE.Vector3();\n\tthis.direction = ( direction !== undefined ) ? direction : new THREE.Vector3();\n\n};\n\nTHREE.Ray.prototype = {\n\n\tconstructor: THREE.Ray,\n\n\tset: function ( origin, direction ) {\n\n\t\tthis.origin.copy( origin );\n\t\tthis.direction.copy( direction );\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( ray ) {\n\n\t\tthis.origin.copy( ray.origin );\n\t\tthis.direction.copy( ray.direction );\n\n\t\treturn this;\n\n\t},\n\n\tat: function ( t, optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\treturn result.copy( this.direction ).multiplyScalar( t ).add( this.origin );\n\n\t},\n\n\trecast: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function ( t ) {\n\n\t\t\tthis.origin.copy( this.at( t, v1 ) );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tclosestPointToPoint: function ( point, optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\t\tresult.subVectors( point, this.origin );\n\t\tvar directionDistance = result.dot( this.direction );\n\n\t\tif ( directionDistance < 0 ) {\n\n\t\t\treturn result.copy( this.origin );\n\n\t\t}\n\n\t\treturn result.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t},\n\n\tdistanceToPoint: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function ( point ) {\n\n\t\t\tvar directionDistance = v1.subVectors( point, this.origin ).dot( this.direction );\n\n\t\t\t// point behind the ray\n\n\t\t\tif ( directionDistance < 0 ) {\n\n\t\t\t\treturn this.origin.distanceTo( point );\n\n\t\t\t}\n\n\t\t\tv1.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t\t\treturn v1.distanceTo( point );\n\n\t\t};\n\n\t}(),\n\n\tdistanceSqToSegment: function ( v0, v1, optionalPointOnRay, optionalPointOnSegment ) {\n\n\t\t// from http://www.geometrictools.com/LibMathematics/Distance/Wm5DistRay3Segment3.cpp\n\t\t// It returns the min distance between the ray and the segment\n\t\t// defined by v0 and v1\n\t\t// It can also set two optional targets :\n\t\t// - The closest point on the ray\n\t\t// - The closest point on the segment\n\n\t\tvar segCenter = v0.clone().add( v1 ).multiplyScalar( 0.5 );\n\t\tvar segDir = v1.clone().sub( v0 ).normalize();\n\t\tvar segExtent = v0.distanceTo( v1 ) * 0.5;\n\t\tvar diff = this.origin.clone().sub( segCenter );\n\t\tvar a01 = - this.direction.dot( segDir );\n\t\tvar b0 = diff.dot( this.direction );\n\t\tvar b1 = - diff.dot( segDir );\n\t\tvar c = diff.lengthSq();\n\t\tvar det = Math.abs( 1 - a01 * a01 );\n\t\tvar s0, s1, sqrDist, extDet;\n\n\t\tif ( det >= 0 ) {\n\n\t\t\t// The ray and segment are not parallel.\n\n\t\t\ts0 = a01 * b1 - b0;\n\t\t\ts1 = a01 * b0 - b1;\n\t\t\textDet = segExtent * det;\n\n\t\t\tif ( s0 >= 0 ) {\n\n\t\t\t\tif ( s1 >= - extDet ) {\n\n\t\t\t\t\tif ( s1 <= extDet ) {\n\n\t\t\t\t\t\t// region 0\n\t\t\t\t\t\t// Minimum at interior points of ray and segment.\n\n\t\t\t\t\t\tvar invDet = 1 / det;\n\t\t\t\t\t\ts0 *= invDet;\n\t\t\t\t\t\ts1 *= invDet;\n\t\t\t\t\t\tsqrDist = s0 * ( s0 + a01 * s1 + 2 * b0 ) + s1 * ( a01 * s0 + s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// region 1\n\n\t\t\t\t\t\ts1 = segExtent;\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// region 5\n\n\t\t\t\t\ts1 = - segExtent;\n\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( s1 <= - extDet ) {\n\n\t\t\t\t\t// region 4\n\n\t\t\t\t\ts0 = Math.max( 0, - ( - a01 * segExtent + b0 ) );\n\t\t\t\t\ts1 = ( s0 > 0 ) ? - segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t} else if ( s1 <= extDet ) {\n\n\t\t\t\t\t// region 3\n\n\t\t\t\t\ts0 = 0;\n\t\t\t\t\ts1 = Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// region 2\n\n\t\t\t\t\ts0 = Math.max( 0, - ( a01 * segExtent + b0 ) );\n\t\t\t\t\ts1 = ( s0 > 0 ) ? segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// Ray and segment are parallel.\n\n\t\t\ts1 = ( a01 > 0 ) ? - segExtent : segExtent;\n\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t}\n\n\t\tif ( optionalPointOnRay ) {\n\n\t\t\toptionalPointOnRay.copy( this.direction.clone().multiplyScalar( s0 ).add( this.origin ) );\n\n\t\t}\n\n\t\tif ( optionalPointOnSegment ) {\n\n\t\t\toptionalPointOnSegment.copy( segDir.clone().multiplyScalar( s1 ).add( segCenter ) );\n\n\t\t}\n\n\t\treturn sqrDist;\n\n\t},\n\n\tisIntersectionSphere: function ( sphere ) {\n\n\t\treturn this.distanceToPoint( sphere.center ) <= sphere.radius;\n\n\t},\n\n\tintersectSphere: function () {\n\n\t\t// from http://www.scratchapixel.com/lessons/3d-basic-lessons/lesson-7-intersecting-simple-shapes/ray-sphere-intersection/\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function ( sphere, optionalTarget ) {\n\n\t\t\tv1.subVectors( sphere.center, this.origin );\n\n\t\t\tvar tca = v1.dot( this.direction );\n\n\t\t\tvar d2 = v1.dot( v1 ) - tca * tca;\n\n\t\t\tvar radius2 = sphere.radius * sphere.radius;\n\n\t\t\tif ( d2 > radius2 ) return null;\n\n\t\t\tvar thc = Math.sqrt( radius2 - d2 );\n\n\t\t\t// t0 = first intersect point - entrance on front of sphere\n\t\t\tvar t0 = tca - thc;\n\n\t\t\t// t1 = second intersect point - exit point on back of sphere\n\t\t\tvar t1 = tca + thc;\n\n\t\t\t// test to see if both t0 and t1 are behind the ray - if so, return null\n\t\t\tif ( t0 < 0 && t1 < 0 ) return null;\n\n\t\t\t// test to see if t0 is behind the ray:\n\t\t\t// if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\n\t\t\t// in order to always return an intersect point that is in front of the ray.\n\t\t\tif ( t0 < 0 ) return this.at( t1, optionalTarget );\n\n\t\t\t// else t0 is in front of the ray, so return the first collision point scaled by t0 \n\t\t\treturn this.at( t0, optionalTarget );\n\n\t\t}\n\n\t}(),\n\n\tisIntersectionPlane: function ( plane ) {\n\n\t\t// check if the ray lies on the plane first\n\n\t\tvar distToPoint = plane.distanceToPoint( this.origin );\n\n\t\tif ( distToPoint === 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\tvar denominator = plane.normal.dot( this.direction );\n\n\t\tif ( denominator * distToPoint < 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\t// ray origin is behind the plane (and is pointing behind it)\n\n\t\treturn false;\n\n\t},\n\n\tdistanceToPlane: function ( plane ) {\n\n\t\tvar denominator = plane.normal.dot( this.direction );\n\t\tif ( denominator == 0 ) {\n\n\t\t\t// line is coplanar, return origin\n\t\t\tif ( plane.distanceToPoint( this.origin ) == 0 ) {\n\n\t\t\t\treturn 0;\n\n\t\t\t}\n\n\t\t\t// Null is preferable to undefined since undefined means.... it is undefined\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tvar t = - ( this.origin.dot( plane.normal ) + plane.constant ) / denominator;\n\n\t\t// Return if the ray never intersects the plane\n\n\t\treturn t >= 0 ? t :  null;\n\n\t},\n\n\tintersectPlane: function ( plane, optionalTarget ) {\n\n\t\tvar t = this.distanceToPlane( plane );\n\n\t\tif ( t === null ) {\n\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.at( t, optionalTarget );\n\n\t},\n\n\tisIntersectionBox: function () {\n\n\t\tvar v = new THREE.Vector3();\n\n\t\treturn function ( box ) {\n\n\t\t\treturn this.intersectBox( box, v ) !== null;\n\n\t\t};\n\n\t}(),\n\n\tintersectBox: function ( box , optionalTarget ) {\n\n\t\t// http://www.scratchapixel.com/lessons/3d-basic-lessons/lesson-7-intersecting-simple-shapes/ray-box-intersection/\n\n\t\tvar tmin,tmax,tymin,tymax,tzmin,tzmax;\n\n\t\tvar invdirx = 1 / this.direction.x,\n\t\t\tinvdiry = 1 / this.direction.y,\n\t\t\tinvdirz = 1 / this.direction.z;\n\n\t\tvar origin = this.origin;\n\n\t\tif ( invdirx >= 0 ) {\n\n\t\t\ttmin = ( box.min.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.max.x - origin.x ) * invdirx;\n\n\t\t} else {\n\n\t\t\ttmin = ( box.max.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.min.x - origin.x ) * invdirx;\n\t\t}\n\n\t\tif ( invdiry >= 0 ) {\n\n\t\t\ttymin = ( box.min.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.max.y - origin.y ) * invdiry;\n\n\t\t} else {\n\n\t\t\ttymin = ( box.max.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.min.y - origin.y ) * invdiry;\n\t\t}\n\n\t\tif ( ( tmin > tymax ) || ( tymin > tmax ) ) return null;\n\n\t\t// These lines also handle the case where tmin or tmax is NaN\n\t\t// (result of 0 * Infinity). x !== x returns true if x is NaN\n\n\t\tif ( tymin > tmin || tmin !== tmin ) tmin = tymin;\n\n\t\tif ( tymax < tmax || tmax !== tmax ) tmax = tymax;\n\n\t\tif ( invdirz >= 0 ) {\n\n\t\t\ttzmin = ( box.min.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.max.z - origin.z ) * invdirz;\n\n\t\t} else {\n\n\t\t\ttzmin = ( box.max.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.min.z - origin.z ) * invdirz;\n\t\t}\n\n\t\tif ( ( tmin > tzmax ) || ( tzmin > tmax ) ) return null;\n\n\t\tif ( tzmin > tmin || tmin !== tmin ) tmin = tzmin;\n\n\t\tif ( tzmax < tmax || tmax !== tmax ) tmax = tzmax;\n\n\t\t//return point closest to the ray (positive side)\n\n\t\tif ( tmax < 0 ) return null;\n\n\t\treturn this.at( tmin >= 0 ? tmin : tmax, optionalTarget );\n\n\t},\n\n\tintersectTriangle: function () {\n\n\t\t// Compute the offset origin, edges, and normal.\n\t\tvar diff = new THREE.Vector3();\n\t\tvar edge1 = new THREE.Vector3();\n\t\tvar edge2 = new THREE.Vector3();\n\t\tvar normal = new THREE.Vector3();\n\n\t\treturn function ( a, b, c, backfaceCulling, optionalTarget ) {\n\n\t\t\t// from http://www.geometrictools.com/LibMathematics/Intersection/Wm5IntrRay3Triangle3.cpp\n\n\t\t\tedge1.subVectors( b, a );\n\t\t\tedge2.subVectors( c, a );\n\t\t\tnormal.crossVectors( edge1, edge2 );\n\n\t\t\t// Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\n\t\t\t// E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\n\t\t\t//   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\n\t\t\t//   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\n\t\t\t//   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\n\t\t\tvar DdN = this.direction.dot( normal );\n\t\t\tvar sign;\n\n\t\t\tif ( DdN > 0 ) {\n\n\t\t\t\tif ( backfaceCulling ) return null;\n\t\t\t\tsign = 1;\n\n\t\t\t} else if ( DdN < 0 ) {\n\n\t\t\t\tsign = - 1;\n\t\t\t\tDdN = - DdN;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tdiff.subVectors( this.origin, a );\n\t\t\tvar DdQxE2 = sign * this.direction.dot( edge2.crossVectors( diff, edge2 ) );\n\n\t\t\t// b1 < 0, no intersection\n\t\t\tif ( DdQxE2 < 0 ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tvar DdE1xQ = sign * this.direction.dot( edge1.cross( diff ) );\n\n\t\t\t// b2 < 0, no intersection\n\t\t\tif ( DdE1xQ < 0 ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\t// b1+b2 > 1, no intersection\n\t\t\tif ( DdQxE2 + DdE1xQ > DdN ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\t// Line intersects triangle, check if ray does.\n\t\t\tvar QdN = - sign * diff.dot( normal );\n\n\t\t\t// t < 0, no intersection\n\t\t\tif ( QdN < 0 ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\t// Ray intersects triangle.\n\t\t\treturn this.at( QdN / DdN, optionalTarget );\n\n\t\t};\n\n\t}(),\n\n\tapplyMatrix4: function ( matrix4 ) {\n\n\t\tthis.direction.add( this.origin ).applyMatrix4( matrix4 );\n\t\tthis.origin.applyMatrix4( matrix4 );\n\t\tthis.direction.sub( this.origin );\n\t\tthis.direction.normalize();\n\n\t\treturn this;\n\t},\n\n\tequals: function ( ray ) {\n\n\t\treturn ray.origin.equals( this.origin ) && ray.direction.equals( this.direction );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.Ray().copy( this );\n\n\t}\n\n};\n\n// File:src/math/Sphere.js\n\n/**\n * @author bhouston / http://exocortex.com\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.Sphere = function ( center, radius ) {\n\n\tthis.center = ( center !== undefined ) ? center : new THREE.Vector3();\n\tthis.radius = ( radius !== undefined ) ? radius : 0;\n\n};\n\nTHREE.Sphere.prototype = {\n\n\tconstructor: THREE.Sphere,\n\n\tset: function ( center, radius ) {\n\n\t\tthis.center.copy( center );\n\t\tthis.radius = radius;\n\n\t\treturn this;\n\t},\n\n\tsetFromPoints: function () {\n\n\t\tvar box = new THREE.Box3();\n\n\t\treturn function ( points, optionalCenter )  {\n\n\t\t\tvar center = this.center;\n\n\t\t\tif ( optionalCenter !== undefined ) {\n\n\t\t\t\tcenter.copy( optionalCenter );\n\n\t\t\t} else {\n\n\t\t\t\tbox.setFromPoints( points ).center( center );\n\n\t\t\t}\n\n\t\t\tvar maxRadiusSq = 0;\n\n\t\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( points[ i ] ) );\n\n\t\t\t}\n\n\t\t\tthis.radius = Math.sqrt( maxRadiusSq );\n\n\t\t\treturn this;\n\n \t\t};\n\n\t}(),\n\n\tcopy: function ( sphere ) {\n\n\t\tthis.center.copy( sphere.center );\n\t\tthis.radius = sphere.radius;\n\n\t\treturn this;\n\n\t},\n\n\tempty: function () {\n\n\t\treturn ( this.radius <= 0 );\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn ( point.distanceToSquared( this.center ) <= ( this.radius * this.radius ) );\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\treturn ( point.distanceTo( this.center ) - this.radius );\n\n\t},\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\tvar radiusSum = this.radius + sphere.radius;\n\n\t\treturn sphere.center.distanceToSquared( this.center ) <= ( radiusSum * radiusSum );\n\n\t},\n\n\tclampPoint: function ( point, optionalTarget ) {\n\n\t\tvar deltaLengthSq = this.center.distanceToSquared( point );\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\t\tresult.copy( point );\n\n\t\tif ( deltaLengthSq > ( this.radius * this.radius ) ) {\n\n\t\t\tresult.sub( this.center ).normalize();\n\t\t\tresult.multiplyScalar( this.radius ).add( this.center );\n\n\t\t}\n\n\t\treturn result;\n\n\t},\n\n\tgetBoundingBox: function ( optionalTarget ) {\n\n\t\tvar box = optionalTarget || new THREE.Box3();\n\n\t\tbox.set( this.center, this.center );\n\t\tbox.expandByScalar( this.radius );\n\n\t\treturn box;\n\n\t},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tthis.center.applyMatrix4( matrix );\n\t\tthis.radius = this.radius * matrix.getMaxScaleOnAxis();\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.center.add( offset );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( sphere ) {\n\n\t\treturn sphere.center.equals( this.center ) && ( sphere.radius === this.radius );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.Sphere().copy( this );\n\n\t}\n\n};\n\n// File:src/math/Frustum.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author bhouston / http://exocortex.com\n */\n\nTHREE.Frustum = function ( p0, p1, p2, p3, p4, p5 ) {\n\n\tthis.planes = [\n\n\t\t( p0 !== undefined ) ? p0 : new THREE.Plane(),\n\t\t( p1 !== undefined ) ? p1 : new THREE.Plane(),\n\t\t( p2 !== undefined ) ? p2 : new THREE.Plane(),\n\t\t( p3 !== undefined ) ? p3 : new THREE.Plane(),\n\t\t( p4 !== undefined ) ? p4 : new THREE.Plane(),\n\t\t( p5 !== undefined ) ? p5 : new THREE.Plane()\n\n\t];\n\n};\n\nTHREE.Frustum.prototype = {\n\n\tconstructor: THREE.Frustum,\n\n\tset: function ( p0, p1, p2, p3, p4, p5 ) {\n\n\t\tvar planes = this.planes;\n\n\t\tplanes[ 0 ].copy( p0 );\n\t\tplanes[ 1 ].copy( p1 );\n\t\tplanes[ 2 ].copy( p2 );\n\t\tplanes[ 3 ].copy( p3 );\n\t\tplanes[ 4 ].copy( p4 );\n\t\tplanes[ 5 ].copy( p5 );\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( frustum ) {\n\n\t\tvar planes = this.planes;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tplanes[ i ].copy( frustum.planes[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrix: function ( m ) {\n\n\t\tvar planes = this.planes;\n\t\tvar me = m.elements;\n\t\tvar me0 = me[ 0 ], me1 = me[ 1 ], me2 = me[ 2 ], me3 = me[ 3 ];\n\t\tvar me4 = me[ 4 ], me5 = me[ 5 ], me6 = me[ 6 ], me7 = me[ 7 ];\n\t\tvar me8 = me[ 8 ], me9 = me[ 9 ], me10 = me[ 10 ], me11 = me[ 11 ];\n\t\tvar me12 = me[ 12 ], me13 = me[ 13 ], me14 = me[ 14 ], me15 = me[ 15 ];\n\n\t\tplanes[ 0 ].setComponents( me3 - me0, me7 - me4, me11 - me8, me15 - me12 ).normalize();\n\t\tplanes[ 1 ].setComponents( me3 + me0, me7 + me4, me11 + me8, me15 + me12 ).normalize();\n\t\tplanes[ 2 ].setComponents( me3 + me1, me7 + me5, me11 + me9, me15 + me13 ).normalize();\n\t\tplanes[ 3 ].setComponents( me3 - me1, me7 - me5, me11 - me9, me15 - me13 ).normalize();\n\t\tplanes[ 4 ].setComponents( me3 - me2, me7 - me6, me11 - me10, me15 - me14 ).normalize();\n\t\tplanes[ 5 ].setComponents( me3 + me2, me7 + me6, me11 + me10, me15 + me14 ).normalize();\n\n\t\treturn this;\n\n\t},\n\n\tintersectsObject: function () {\n\n\t\tvar sphere = new THREE.Sphere();\n\n\t\treturn function ( object ) {\n\n\t\t\tvar geometry = object.geometry;\n\n\t\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t\tsphere.copy( geometry.boundingSphere );\n\t\t\tsphere.applyMatrix4( object.matrixWorld );\n\n\t\t\treturn this.intersectsSphere( sphere );\n\n\t\t};\n\n\t}(),\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\tvar planes = this.planes;\n\t\tvar center = sphere.center;\n\t\tvar negRadius = - sphere.radius;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tvar distance = planes[ i ].distanceToPoint( center );\n\n\t\t\tif ( distance < negRadius ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tintersectsBox: function () {\n\n\t\tvar p1 = new THREE.Vector3(),\n\t\t\tp2 = new THREE.Vector3();\n\n\t\treturn function ( box ) {\n\n\t\t\tvar planes = this.planes;\n\n\t\t\tfor ( var i = 0; i < 6 ; i ++ ) {\n\n\t\t\t\tvar plane = planes[ i ];\n\n\t\t\t\tp1.x = plane.normal.x > 0 ? box.min.x : box.max.x;\n\t\t\t\tp2.x = plane.normal.x > 0 ? box.max.x : box.min.x;\n\t\t\t\tp1.y = plane.normal.y > 0 ? box.min.y : box.max.y;\n\t\t\t\tp2.y = plane.normal.y > 0 ? box.max.y : box.min.y;\n\t\t\t\tp1.z = plane.normal.z > 0 ? box.min.z : box.max.z;\n\t\t\t\tp2.z = plane.normal.z > 0 ? box.max.z : box.min.z;\n\n\t\t\t\tvar d1 = plane.distanceToPoint( p1 );\n\t\t\t\tvar d2 = plane.distanceToPoint( p2 );\n\n\t\t\t\t// if both outside plane, no intersection\n\n\t\t\t\tif ( d1 < 0 && d2 < 0 ) {\n\n\t\t\t\t\treturn false;\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t};\n\n\t}(),\n\n\n\tcontainsPoint: function ( point ) {\n\n\t\tvar planes = this.planes;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tif ( planes[ i ].distanceToPoint( point ) < 0 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.Frustum().copy( this );\n\n\t}\n\n};\n\n// File:src/math/Plane.js\n\n/**\n * @author bhouston / http://exocortex.com\n */\n\nTHREE.Plane = function ( normal, constant ) {\n\n\tthis.normal = ( normal !== undefined ) ? normal : new THREE.Vector3( 1, 0, 0 );\n\tthis.constant = ( constant !== undefined ) ? constant : 0;\n\n};\n\nTHREE.Plane.prototype = {\n\n\tconstructor: THREE.Plane,\n\n\tset: function ( normal, constant ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = constant;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponents: function ( x, y, z, w ) {\n\n\t\tthis.normal.set( x, y, z );\n\t\tthis.constant = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetFromNormalAndCoplanarPoint: function ( normal, point ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = - point.dot( this.normal );\t// must be this.normal, not normal, as this.normal is normalized\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCoplanarPoints: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\t\tvar v2 = new THREE.Vector3();\n\n\t\treturn function ( a, b, c ) {\n\n\t\t\tvar normal = v1.subVectors( c, b ).cross( v2.subVectors( a, b ) ).normalize();\n\n\t\t\t// Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\n\n\t\t\tthis.setFromNormalAndCoplanarPoint( normal, a );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\n\tcopy: function ( plane ) {\n\n\t\tthis.normal.copy( plane.normal );\n\t\tthis.constant = plane.constant;\n\n\t\treturn this;\n\n\t},\n\n\tnormalize: function () {\n\n\t\t// Note: will lead to a divide by zero if the plane is invalid.\n\n\t\tvar inverseNormalLength = 1.0 / this.normal.length();\n\t\tthis.normal.multiplyScalar( inverseNormalLength );\n\t\tthis.constant *= inverseNormalLength;\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.constant *= - 1;\n\t\tthis.normal.negate();\n\n\t\treturn this;\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\treturn this.normal.dot( point ) + this.constant;\n\n\t},\n\n\tdistanceToSphere: function ( sphere ) {\n\n\t\treturn this.distanceToPoint( sphere.center ) - sphere.radius;\n\n\t},\n\n\tprojectPoint: function ( point, optionalTarget ) {\n\n\t\treturn this.orthoPoint( point, optionalTarget ).sub( point ).negate();\n\n\t},\n\n\torthoPoint: function ( point, optionalTarget ) {\n\n\t\tvar perpendicularMagnitude = this.distanceToPoint( point );\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\t\treturn result.copy( this.normal ).multiplyScalar( perpendicularMagnitude );\n\n\t},\n\n\tisIntersectionLine: function ( line ) {\n\n\t\t// Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\n\n\t\tvar startSign = this.distanceToPoint( line.start );\n\t\tvar endSign = this.distanceToPoint( line.end );\n\n\t\treturn ( startSign < 0 && endSign > 0 ) || ( endSign < 0 && startSign > 0 );\n\n\t},\n\n\tintersectLine: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function ( line, optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\t\tvar direction = line.delta( v1 );\n\n\t\t\tvar denominator = this.normal.dot( direction );\n\n\t\t\tif ( denominator == 0 ) {\n\n\t\t\t\t// line is coplanar, return origin\n\t\t\t\tif ( this.distanceToPoint( line.start ) == 0 ) {\n\n\t\t\t\t\treturn result.copy( line.start );\n\n\t\t\t\t}\n\n\t\t\t\t// Unsure if this is the correct method to handle this case.\n\t\t\t\treturn undefined;\n\n\t\t\t}\n\n\t\t\tvar t = - ( line.start.dot( this.normal ) + this.constant ) / denominator;\n\n\t\t\tif ( t < 0 || t > 1 ) {\n\n\t\t\t\treturn undefined;\n\n\t\t\t}\n\n\t\t\treturn result.copy( direction ).multiplyScalar( t ).add( line.start );\n\n\t\t};\n\n\t}(),\n\n\n\tcoplanarPoint: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\t\treturn result.copy( this.normal ).multiplyScalar( - this.constant );\n\n\t},\n\n\tapplyMatrix4: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\t\tvar v2 = new THREE.Vector3();\n\t\tvar m1 = new THREE.Matrix3();\n\n\t\treturn function ( matrix, optionalNormalMatrix ) {\n\n\t\t\t// compute new normal based on theory here:\n\t\t\t// http://www.songho.ca/opengl/gl_normaltransform.html\n\t\t\tvar normalMatrix = optionalNormalMatrix || m1.getNormalMatrix( matrix );\n\t\t\tvar newNormal = v1.copy( this.normal ).applyMatrix3( normalMatrix );\n\n\t\t\tvar newCoplanarPoint = this.coplanarPoint( v2 );\n\t\t\tnewCoplanarPoint.applyMatrix4( matrix );\n\n\t\t\tthis.setFromNormalAndCoplanarPoint( newNormal, newCoplanarPoint );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.constant = this.constant - offset.dot( this.normal );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( plane ) {\n\n\t\treturn plane.normal.equals( this.normal ) && ( plane.constant == this.constant );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.Plane().copy( this );\n\n\t}\n\n};\n\n// File:src/math/Math.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.Math = {\n\n\tgenerateUUID: function () {\n\n\t\t// http://www.broofa.com/Tools/Math.uuid.htm\n\n\t\tvar chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split( '' );\n\t\tvar uuid = new Array( 36 );\n\t\tvar rnd = 0, r;\n\n\t\treturn function () {\n\n\t\t\tfor ( var i = 0; i < 36; i ++ ) {\n\n\t\t\t\tif ( i == 8 || i == 13 || i == 18 || i == 23 ) {\n\n\t\t\t\t\tuuid[ i ] = '-';\n\n\t\t\t\t} else if ( i == 14 ) {\n\n\t\t\t\t\tuuid[ i ] = '4';\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( rnd <= 0x02 ) rnd = 0x2000000 + ( Math.random() * 0x1000000 ) | 0;\n\t\t\t\t\tr = rnd & 0xf;\n\t\t\t\t\trnd = rnd >> 4;\n\t\t\t\t\tuuid[ i ] = chars[ ( i == 19 ) ? ( r & 0x3 ) | 0x8 : r ];\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn uuid.join( '' );\n\n\t\t};\n\n\t}(),\n\n\t// Clamp value to range <a, b>\n\n\tclamp: function ( x, a, b ) {\n\n\t\treturn ( x < a ) ? a : ( ( x > b ) ? b : x );\n\n\t},\n\n\t// Clamp value to range <a, inf)\n\n\tclampBottom: function ( x, a ) {\n\n\t\treturn x < a ? a : x;\n\n\t},\n\n\t// Linear mapping from range <a1, a2> to range <b1, b2>\n\n\tmapLinear: function ( x, a1, a2, b1, b2 ) {\n\n\t\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\n\n\t},\n\n\t// http://en.wikipedia.org/wiki/Smoothstep\n\n\tsmoothstep: function ( x, min, max ) {\n\n\t\tif ( x <= min ) return 0;\n\t\tif ( x >= max ) return 1;\n\n\t\tx = ( x - min ) / ( max - min );\n\n\t\treturn x * x * ( 3 - 2 * x );\n\n\t},\n\n\tsmootherstep: function ( x, min, max ) {\n\n\t\tif ( x <= min ) return 0;\n\t\tif ( x >= max ) return 1;\n\n\t\tx = ( x - min ) / ( max - min );\n\n\t\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\n\n\t},\n\n\t// Random float from <0, 1> with 16 bits of randomness\n\t// (standard Math.random() creates repetitive patterns when applied over larger space)\n\n\trandom16: function () {\n\n\t\treturn ( 65280 * Math.random() + 255 * Math.random() ) / 65535;\n\n\t},\n\n\t// Random integer from <low, high> interval\n\n\trandInt: function ( low, high ) {\n\n\t\treturn low + Math.floor( Math.random() * ( high - low + 1 ) );\n\n\t},\n\n\t// Random float from <low, high> interval\n\n\trandFloat: function ( low, high ) {\n\n\t\treturn low + Math.random() * ( high - low );\n\n\t},\n\n\t// Random float from <-range/2, range/2> interval\n\n\trandFloatSpread: function ( range ) {\n\n\t\treturn range * ( 0.5 - Math.random() );\n\n\t},\n\n\tdegToRad: function () {\n\n\t\tvar degreeToRadiansFactor = Math.PI / 180;\n\n\t\treturn function ( degrees ) {\n\n\t\t\treturn degrees * degreeToRadiansFactor;\n\n\t\t};\n\n\t}(),\n\n\tradToDeg: function () {\n\n\t\tvar radianToDegreesFactor = 180 / Math.PI;\n\n\t\treturn function ( radians ) {\n\n\t\t\treturn radians * radianToDegreesFactor;\n\n\t\t};\n\n\t}(),\n\n\tisPowerOfTwo: function ( value ) {\n\n\t\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\n\n\t}\n\n};\n\n// File:src/math/Spline.js\n\n/**\n * Spline from Tween.js, slightly optimized (and trashed)\n * http://sole.github.com/tween.js/examples/05_spline.html\n *\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.Spline = function ( points ) {\n\n\tthis.points = points;\n\n\tvar c = [], v3 = { x: 0, y: 0, z: 0 },\n\tpoint, intPoint, weight, w2, w3,\n\tpa, pb, pc, pd;\n\n\tthis.initFromArray = function ( a ) {\n\n\t\tthis.points = [];\n\n\t\tfor ( var i = 0; i < a.length; i ++ ) {\n\n\t\t\tthis.points[ i ] = { x: a[ i ][ 0 ], y: a[ i ][ 1 ], z: a[ i ][ 2 ] };\n\n\t\t}\n\n\t};\n\n\tthis.getPoint = function ( k ) {\n\n\t\tpoint = ( this.points.length - 1 ) * k;\n\t\tintPoint = Math.floor( point );\n\t\tweight = point - intPoint;\n\n\t\tc[ 0 ] = intPoint === 0 ? intPoint : intPoint - 1;\n\t\tc[ 1 ] = intPoint;\n\t\tc[ 2 ] = intPoint  > this.points.length - 2 ? this.points.length - 1 : intPoint + 1;\n\t\tc[ 3 ] = intPoint  > this.points.length - 3 ? this.points.length - 1 : intPoint + 2;\n\n\t\tpa = this.points[ c[ 0 ] ];\n\t\tpb = this.points[ c[ 1 ] ];\n\t\tpc = this.points[ c[ 2 ] ];\n\t\tpd = this.points[ c[ 3 ] ];\n\n\t\tw2 = weight * weight;\n\t\tw3 = weight * w2;\n\n\t\tv3.x = interpolate( pa.x, pb.x, pc.x, pd.x, weight, w2, w3 );\n\t\tv3.y = interpolate( pa.y, pb.y, pc.y, pd.y, weight, w2, w3 );\n\t\tv3.z = interpolate( pa.z, pb.z, pc.z, pd.z, weight, w2, w3 );\n\n\t\treturn v3;\n\n\t};\n\n\tthis.getControlPointsArray = function () {\n\n\t\tvar i, p, l = this.points.length,\n\t\t\tcoords = [];\n\n\t\tfor ( i = 0; i < l; i ++ ) {\n\n\t\t\tp = this.points[ i ];\n\t\t\tcoords[ i ] = [ p.x, p.y, p.z ];\n\n\t\t}\n\n\t\treturn coords;\n\n\t};\n\n\t// approximate length by summing linear segments\n\n\tthis.getLength = function ( nSubDivisions ) {\n\n\t\tvar i, index, nSamples, position,\n\t\t\tpoint = 0, intPoint = 0, oldIntPoint = 0,\n\t\t\toldPosition = new THREE.Vector3(),\n\t\t\ttmpVec = new THREE.Vector3(),\n\t\t\tchunkLengths = [],\n\t\t\ttotalLength = 0;\n\n\t\t// first point has 0 length\n\n\t\tchunkLengths[ 0 ] = 0;\n\n\t\tif ( ! nSubDivisions ) nSubDivisions = 100;\n\n\t\tnSamples = this.points.length * nSubDivisions;\n\n\t\toldPosition.copy( this.points[ 0 ] );\n\n\t\tfor ( i = 1; i < nSamples; i ++ ) {\n\n\t\t\tindex = i / nSamples;\n\n\t\t\tposition = this.getPoint( index );\n\t\t\ttmpVec.copy( position );\n\n\t\t\ttotalLength += tmpVec.distanceTo( oldPosition );\n\n\t\t\toldPosition.copy( position );\n\n\t\t\tpoint = ( this.points.length - 1 ) * index;\n\t\t\tintPoint = Math.floor( point );\n\n\t\t\tif ( intPoint != oldIntPoint ) {\n\n\t\t\t\tchunkLengths[ intPoint ] = totalLength;\n\t\t\t\toldIntPoint = intPoint;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// last point ends with total length\n\n\t\tchunkLengths[ chunkLengths.length ] = totalLength;\n\n\t\treturn { chunks: chunkLengths, total: totalLength };\n\n\t};\n\n\tthis.reparametrizeByArcLength = function ( samplingCoef ) {\n\n\t\tvar i, j,\n\t\t\tindex, indexCurrent, indexNext,\n\t\t\tlinearDistance, realDistance,\n\t\t\tsampling, position,\n\t\t\tnewpoints = [],\n\t\t\ttmpVec = new THREE.Vector3(),\n\t\t\tsl = this.getLength();\n\n\t\tnewpoints.push( tmpVec.copy( this.points[ 0 ] ).clone() );\n\n\t\tfor ( i = 1; i < this.points.length; i ++ ) {\n\n\t\t\t//tmpVec.copy( this.points[ i - 1 ] );\n\t\t\t//linearDistance = tmpVec.distanceTo( this.points[ i ] );\n\n\t\t\trealDistance = sl.chunks[ i ] - sl.chunks[ i - 1 ];\n\n\t\t\tsampling = Math.ceil( samplingCoef * realDistance / sl.total );\n\n\t\t\tindexCurrent = ( i - 1 ) / ( this.points.length - 1 );\n\t\t\tindexNext = i / ( this.points.length - 1 );\n\n\t\t\tfor ( j = 1; j < sampling - 1; j ++ ) {\n\n\t\t\t\tindex = indexCurrent + j * ( 1 / sampling ) * ( indexNext - indexCurrent );\n\n\t\t\t\tposition = this.getPoint( index );\n\t\t\t\tnewpoints.push( tmpVec.copy( position ).clone() );\n\n\t\t\t}\n\n\t\t\tnewpoints.push( tmpVec.copy( this.points[ i ] ).clone() );\n\n\t\t}\n\n\t\tthis.points = newpoints;\n\n\t};\n\n\t// Catmull-Rom\n\n\tfunction interpolate( p0, p1, p2, p3, t, t2, t3 ) {\n\n\t\tvar v0 = ( p2 - p0 ) * 0.5,\n\t\t\tv1 = ( p3 - p1 ) * 0.5;\n\n\t\treturn ( 2 * ( p1 - p2 ) + v0 + v1 ) * t3 + ( - 3 * ( p1 - p2 ) - 2 * v0 - v1 ) * t2 + v0 * t + p1;\n\n\t};\n\n};\n\n// File:src/math/Triangle.js\n\n/**\n * @author bhouston / http://exocortex.com\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.Triangle = function ( a, b, c ) {\n\n\tthis.a = ( a !== undefined ) ? a : new THREE.Vector3();\n\tthis.b = ( b !== undefined ) ? b : new THREE.Vector3();\n\tthis.c = ( c !== undefined ) ? c : new THREE.Vector3();\n\n};\n\nTHREE.Triangle.normal = function () {\n\n\tvar v0 = new THREE.Vector3();\n\n\treturn function ( a, b, c, optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\tresult.subVectors( c, b );\n\t\tv0.subVectors( a, b );\n\t\tresult.cross( v0 );\n\n\t\tvar resultLengthSq = result.lengthSq();\n\t\tif ( resultLengthSq > 0 ) {\n\n\t\t\treturn result.multiplyScalar( 1 / Math.sqrt( resultLengthSq ) );\n\n\t\t}\n\n\t\treturn result.set( 0, 0, 0 );\n\n\t};\n\n}();\n\n// static/instance method to calculate barycoordinates\n// based on: http://www.blackpawn.com/texts/pointinpoly/default.html\nTHREE.Triangle.barycoordFromPoint = function () {\n\n\tvar v0 = new THREE.Vector3();\n\tvar v1 = new THREE.Vector3();\n\tvar v2 = new THREE.Vector3();\n\n\treturn function ( point, a, b, c, optionalTarget ) {\n\n\t\tv0.subVectors( c, a );\n\t\tv1.subVectors( b, a );\n\t\tv2.subVectors( point, a );\n\n\t\tvar dot00 = v0.dot( v0 );\n\t\tvar dot01 = v0.dot( v1 );\n\t\tvar dot02 = v0.dot( v2 );\n\t\tvar dot11 = v1.dot( v1 );\n\t\tvar dot12 = v1.dot( v2 );\n\n\t\tvar denom = ( dot00 * dot11 - dot01 * dot01 );\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\t// colinear or singular triangle\n\t\tif ( denom == 0 ) {\n\t\t\t// arbitrary location outside of triangle?\n\t\t\t// not sure if this is the best idea, maybe should be returning undefined\n\t\t\treturn result.set( - 2, - 1, - 1 );\n\t\t}\n\n\t\tvar invDenom = 1 / denom;\n\t\tvar u = ( dot11 * dot02 - dot01 * dot12 ) * invDenom;\n\t\tvar v = ( dot00 * dot12 - dot01 * dot02 ) * invDenom;\n\n\t\t// barycoordinates must always sum to 1\n\t\treturn result.set( 1 - u - v, v, u );\n\n\t};\n\n}();\n\nTHREE.Triangle.containsPoint = function () {\n\n\tvar v1 = new THREE.Vector3();\n\n\treturn function ( point, a, b, c ) {\n\n\t\tvar result = THREE.Triangle.barycoordFromPoint( point, a, b, c, v1 );\n\n\t\treturn ( result.x >= 0 ) && ( result.y >= 0 ) && ( ( result.x + result.y ) <= 1 );\n\n\t};\n\n}();\n\nTHREE.Triangle.prototype = {\n\n\tconstructor: THREE.Triangle,\n\n\tset: function ( a, b, c ) {\n\n\t\tthis.a.copy( a );\n\t\tthis.b.copy( b );\n\t\tthis.c.copy( c );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPointsAndIndices: function ( points, i0, i1, i2 ) {\n\n\t\tthis.a.copy( points[ i0 ] );\n\t\tthis.b.copy( points[ i1 ] );\n\t\tthis.c.copy( points[ i2 ] );\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( triangle ) {\n\n\t\tthis.a.copy( triangle.a );\n\t\tthis.b.copy( triangle.b );\n\t\tthis.c.copy( triangle.c );\n\n\t\treturn this;\n\n\t},\n\n\tarea: function () {\n\n\t\tvar v0 = new THREE.Vector3();\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function () {\n\n\t\t\tv0.subVectors( this.c, this.b );\n\t\t\tv1.subVectors( this.a, this.b );\n\n\t\t\treturn v0.cross( v1 ).length() * 0.5;\n\n\t\t};\n\n\t}(),\n\n\tmidpoint: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\t\treturn result.addVectors( this.a, this.b ).add( this.c ).multiplyScalar( 1 / 3 );\n\n\t},\n\n\tnormal: function ( optionalTarget ) {\n\n\t\treturn THREE.Triangle.normal( this.a, this.b, this.c, optionalTarget );\n\n\t},\n\n\tplane: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Plane();\n\n\t\treturn result.setFromCoplanarPoints( this.a, this.b, this.c );\n\n\t},\n\n\tbarycoordFromPoint: function ( point, optionalTarget ) {\n\n\t\treturn THREE.Triangle.barycoordFromPoint( point, this.a, this.b, this.c, optionalTarget );\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn THREE.Triangle.containsPoint( point, this.a, this.b, this.c );\n\n\t},\n\n\tequals: function ( triangle ) {\n\n\t\treturn triangle.a.equals( this.a ) && triangle.b.equals( this.b ) && triangle.c.equals( this.c );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.Triangle().copy( this );\n\n\t}\n\n};\n\n// File:src/core/Clock.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.Clock = function ( autoStart ) {\n\n\tthis.autoStart = ( autoStart !== undefined ) ? autoStart : true;\n\n\tthis.startTime = 0;\n\tthis.oldTime = 0;\n\tthis.elapsedTime = 0;\n\n\tthis.running = false;\n\n};\n\nTHREE.Clock.prototype = {\n\n\tconstructor: THREE.Clock,\n\n\tstart: function () {\n\n\t\tthis.startTime = self.performance !== undefined && self.performance.now !== undefined\n\t\t\t\t\t ? self.performance.now()\n\t\t\t\t\t : Date.now();\n\n\t\tthis.oldTime = this.startTime;\n\t\tthis.running = true;\n\t},\n\n\tstop: function () {\n\n\t\tthis.getElapsedTime();\n\t\tthis.running = false;\n\n\t},\n\n\tgetElapsedTime: function () {\n\n\t\tthis.getDelta();\n\t\treturn this.elapsedTime;\n\n\t},\n\n\tgetDelta: function () {\n\n\t\tvar diff = 0;\n\n\t\tif ( this.autoStart && ! this.running ) {\n\n\t\t\tthis.start();\n\n\t\t}\n\n\t\tif ( this.running ) {\n\n\t\t\tvar newTime = self.performance !== undefined && self.performance.now !== undefined\n\t\t\t\t\t ? self.performance.now()\n\t\t\t\t\t : Date.now();\n\n\t\t\tdiff = 0.001 * ( newTime - this.oldTime );\n\t\t\tthis.oldTime = newTime;\n\n\t\t\tthis.elapsedTime += diff;\n\n\t\t}\n\n\t\treturn diff;\n\n\t}\n\n};\n\n// File:src/core/EventDispatcher.js\n\n/**\n * https://github.com/mrdoob/eventdispatcher.js/\n */\n\nTHREE.EventDispatcher = function () {}\n\nTHREE.EventDispatcher.prototype = {\n\n\tconstructor: THREE.EventDispatcher,\n\n\tapply: function ( object ) {\n\n\t\tobject.addEventListener = THREE.EventDispatcher.prototype.addEventListener;\n\t\tobject.hasEventListener = THREE.EventDispatcher.prototype.hasEventListener;\n\t\tobject.removeEventListener = THREE.EventDispatcher.prototype.removeEventListener;\n\t\tobject.dispatchEvent = THREE.EventDispatcher.prototype.dispatchEvent;\n\n\t},\n\n\taddEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) this._listeners = {};\n\n\t\tvar listeners = this._listeners;\n\n\t\tif ( listeners[ type ] === undefined ) {\n\n\t\t\tlisteners[ type ] = [];\n\n\t\t}\n\n\t\tif ( listeners[ type ].indexOf( listener ) === - 1 ) {\n\n\t\t\tlisteners[ type ].push( listener );\n\n\t\t}\n\n\t},\n\n\thasEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return false;\n\n\t\tvar listeners = this._listeners;\n\n\t\tif ( listeners[ type ] !== undefined && listeners[ type ].indexOf( listener ) !== - 1 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t},\n\n\tremoveEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tvar listeners = this._listeners;\n\t\tvar listenerArray = listeners[ type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tvar index = listenerArray.indexOf( listener );\n\n\t\t\tif ( index !== - 1 ) {\n\n\t\t\t\tlistenerArray.splice( index, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tdispatchEvent: function ( event ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tvar listeners = this._listeners;\n\t\tvar listenerArray = listeners[ event.type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tevent.target = this;\n\n\t\t\tvar array = [];\n\t\t\tvar length = listenerArray.length;\n\n\t\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\t\tarray[ i ] = listenerArray[ i ];\n\n\t\t\t}\n\n\t\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\t\tarray[ i ].call( this, event );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n};\n\n// File:src/core/Raycaster.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author bhouston / http://exocortex.com/\n * @author stephomi / http://stephaneginier.com/\n */\n\n( function ( THREE ) {\n\n\tTHREE.Raycaster = function ( origin, direction, near, far ) {\n\n\t\tthis.ray = new THREE.Ray( origin, direction );\n\t\t// direction is assumed to be normalized (for accurate distance calculations)\n\n\t\tthis.near = near || 0;\n\t\tthis.far = far || Infinity;\n\n\t\tthis.params = {\n\t\t\tSprite: {},\n\t\t\tMesh: {},\n\t\t\tPointCloud: { threshold: 1 },\n\t\t\tLOD: {},\n\t\t\tLine: {}\n\t\t};\n\n\t};\n\n\tvar descSort = function ( a, b ) {\n\n\t\treturn a.distance - b.distance;\n\n\t};\n\n\tvar intersectObject = function ( object, raycaster, intersects, recursive ) {\n\n\t\tobject.raycast( raycaster, intersects );\n\n\t\tif ( recursive === true ) {\n\n\t\t\tvar children = object.children;\n\n\t\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\t\tintersectObject( children[ i ], raycaster, intersects, true );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\t//\n\n\tTHREE.Raycaster.prototype = {\n\n\t\tconstructor: THREE.Raycaster,\n\n\t\tprecision: 0.0001,\n\t\tlinePrecision: 1,\n\n\t\tset: function ( origin, direction ) {\n\n\t\t\tthis.ray.set( origin, direction );\n\t\t\t// direction is assumed to be normalized (for accurate distance calculations)\n\n\t\t},\n\n\t\tintersectObject: function ( object, recursive ) {\n\n\t\t\tvar intersects = [];\n\n\t\t\tintersectObject( object, this, intersects, recursive );\n\n\t\t\tintersects.sort( descSort );\n\n\t\t\treturn intersects;\n\n\t\t},\n\n\t\tintersectObjects: function ( objects, recursive ) {\n\n\t\t\tvar intersects = [];\n\n\t\t\tif ( objects instanceof Array === false ) {\n\n\t\t\t\tconsole.log( 'THREE.Raycaster.intersectObjects: objects is not an Array.' );\n\t\t\t\treturn intersects;\n\n\t\t\t}\n\n\t\t\tfor ( var i = 0, l = objects.length; i < l; i ++ ) {\n\n\t\t\t\tintersectObject( objects[ i ], this, intersects, recursive );\n\n\t\t\t}\n\n\t\t\tintersects.sort( descSort );\n\n\t\t\treturn intersects;\n\n\t\t}\n\n\t};\n\n}( THREE ) );\n\n// File:src/core/Object3D.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nTHREE.Object3D = function () {\n\n\tObject.defineProperty( this, 'id', { value: THREE.Object3DIdCount ++ } );\n\n\tthis.uuid = THREE.Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Object3D';\n\n\tthis.parent = undefined;\n\tthis.children = [];\n\n\tthis.up = THREE.Object3D.DefaultUp.clone();\n\n\tvar scope = this;\n\n\tvar position = new THREE.Vector3();\n\tvar rotation = new THREE.Euler();\n\tvar quaternion = new THREE.Quaternion();\n\tvar scale = new THREE.Vector3( 1, 1, 1 );\n\n\tvar onRotationChange = function () {\n\t\tquaternion.setFromEuler( rotation, false );\n\t};\n\n\tvar onQuaternionChange = function () {\n\t\trotation.setFromQuaternion( quaternion, undefined, false );\n\t};\n\n\trotation.onChange( onRotationChange );\n\tquaternion.onChange( onQuaternionChange );\n\n\tObject.defineProperties( this, {\n\t\tposition: {\n\t\t\tenumerable: true,\n\t\t\tvalue: position\n\t\t},\n\t\trotation: {\n\t\t\tenumerable: true,\n\t\t\tvalue: rotation\n\t\t},\n\t\tquaternion: {\n\t\t\tenumerable: true,\n\t\t\tvalue: quaternion\n\t\t},\n\t\tscale: {\n\t\t\tenumerable: true,\n\t\t\tvalue: scale\n\t\t},\n\t} );\n\n\tthis.renderDepth = null;\n\n\tthis.rotationAutoUpdate = true;\n\n\tthis.matrix = new THREE.Matrix4();\n\tthis.matrixWorld = new THREE.Matrix4();\n\n\tthis.matrixAutoUpdate = true;\n\tthis.matrixWorldNeedsUpdate = false;\n\n\tthis.visible = true;\n\n\tthis.castShadow = false;\n\tthis.receiveShadow = false;\n\n\tthis.frustumCulled = true;\n\n\tthis.userData = {};\n\n};\n\nTHREE.Object3D.DefaultUp = new THREE.Vector3( 0, 1, 0 );\n\nTHREE.Object3D.prototype = {\n\n\tconstructor: THREE.Object3D,\n\n\tget eulerOrder () {\n\n\t\tconsole.warn( 'THREE.Object3D: .eulerOrder has been moved to .rotation.order.' );\n\n\t\treturn this.rotation.order;\n\n\t},\n\n\tset eulerOrder ( value ) {\n\n\t\tconsole.warn( 'THREE.Object3D: .eulerOrder has been moved to .rotation.order.' );\n\n\t\tthis.rotation.order = value;\n\n\t},\n\n\tget useQuaternion () {\n\n\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\n\n\t},\n\n\tset useQuaternion ( value ) {\n\n\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\n\n\t},\n\n\tapplyMatrix: function ( matrix ) {\n\n\t\tthis.matrix.multiplyMatrices( matrix, this.matrix );\n\n\t\tthis.matrix.decompose( this.position, this.quaternion, this.scale );\n\n\t},\n\n\tsetRotationFromAxisAngle: function ( axis, angle ) {\n\n\t\t// assumes axis is normalized\n\n\t\tthis.quaternion.setFromAxisAngle( axis, angle );\n\n\t},\n\n\tsetRotationFromEuler: function ( euler ) {\n\n\t\tthis.quaternion.setFromEuler( euler, true );\n\n\t},\n\n\tsetRotationFromMatrix: function ( m ) {\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tthis.quaternion.setFromRotationMatrix( m );\n\n\t},\n\n\tsetRotationFromQuaternion: function ( q ) {\n\n\t\t// assumes q is normalized\n\n\t\tthis.quaternion.copy( q );\n\n\t},\n\n\trotateOnAxis: function () {\n\n\t\t// rotate object on axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\tvar q1 = new THREE.Quaternion();\n\n\t\treturn function ( axis, angle ) {\n\n\t\t\tq1.setFromAxisAngle( axis, angle );\n\n\t\t\tthis.quaternion.multiply( q1 );\n\n\t\t\treturn this;\n\n\t\t}\n\n\t}(),\n\n\trotateX: function () {\n\n\t\tvar v1 = new THREE.Vector3( 1, 0, 0 );\n\n\t\treturn function ( angle ) {\n\n\t\t\treturn this.rotateOnAxis( v1, angle );\n\n\t\t};\n\n\t}(),\n\n\trotateY: function () {\n\n\t\tvar v1 = new THREE.Vector3( 0, 1, 0 );\n\n\t\treturn function ( angle ) {\n\n\t\t\treturn this.rotateOnAxis( v1, angle );\n\n\t\t};\n\n\t}(),\n\n\trotateZ: function () {\n\n\t\tvar v1 = new THREE.Vector3( 0, 0, 1 );\n\n\t\treturn function ( angle ) {\n\n\t\t\treturn this.rotateOnAxis( v1, angle );\n\n\t\t};\n\n\t}(),\n\n\ttranslateOnAxis: function () {\n\n\t\t// translate object by distance along axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function ( axis, distance ) {\n\n\t\t\tv1.copy( axis ).applyQuaternion( this.quaternion );\n\n\t\t\tthis.position.add( v1.multiplyScalar( distance ) );\n\n\t\t\treturn this;\n\n\t\t}\n\n\t}(),\n\n\ttranslate: function ( distance, axis ) {\n\n\t\tconsole.warn( 'THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.' );\n\t\treturn this.translateOnAxis( axis, distance );\n\n\t},\n\n\ttranslateX: function () {\n\n\t\tvar v1 = new THREE.Vector3( 1, 0, 0 );\n\n\t\treturn function ( distance ) {\n\n\t\t\treturn this.translateOnAxis( v1, distance );\n\n\t\t};\n\n\t}(),\n\n\ttranslateY: function () {\n\n\t\tvar v1 = new THREE.Vector3( 0, 1, 0 );\n\n\t\treturn function ( distance ) {\n\n\t\t\treturn this.translateOnAxis( v1, distance );\n\n\t\t};\n\n\t}(),\n\n\ttranslateZ: function () {\n\n\t\tvar v1 = new THREE.Vector3( 0, 0, 1 );\n\n\t\treturn function ( distance ) {\n\n\t\t\treturn this.translateOnAxis( v1, distance );\n\n\t\t};\n\n\t}(),\n\n\tlocalToWorld: function ( vector ) {\n\n\t\treturn vector.applyMatrix4( this.matrixWorld );\n\n\t},\n\n\tworldToLocal: function () {\n\n\t\tvar m1 = new THREE.Matrix4();\n\n\t\treturn function ( vector ) {\n\n\t\t\treturn vector.applyMatrix4( m1.getInverse( this.matrixWorld ) );\n\n\t\t};\n\n\t}(),\n\n\tlookAt: function () {\n\n\t\t// This routine does not support objects with rotated and/or translated parent(s)\n\n\t\tvar m1 = new THREE.Matrix4();\n\n\t\treturn function ( vector ) {\n\n\t\t\tm1.lookAt( vector, this.position, this.up );\n\n\t\t\tthis.quaternion.setFromRotationMatrix( m1 );\n\n\t\t};\n\n\t}(),\n\n\tadd: function ( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( var i = 0; i < arguments.length; i++ ) {\n\n\t\t\t\tthis.add( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t};\n\n\t\tif ( object === this ) {\n\n\t\t\tconsole.error( \"THREE.Object3D.add:\", object, \"can't be added as a child of itself.\" );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( object instanceof THREE.Object3D ) {\n\n\t\t\tif ( object.parent !== undefined ) {\n\n\t\t\t\tobject.parent.remove( object );\n\n\t\t\t}\n\n\t\t\tobject.parent = this;\n\t\t\tobject.dispatchEvent( { type: 'added' } );\n\n\t\t\tthis.children.push( object );\n\n\t\t} else {\n\n\t\t\tconsole.error( \"THREE.Object3D.add:\", object, \"is not an instance of THREE.Object3D.\" );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tremove: function ( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( var i = 0; i < arguments.length; i++ ) {\n\n\t\t\t\tthis.remove( arguments[ i ] );\n\n\t\t\t}\n\n\t\t};\n\n\t\tvar index = this.children.indexOf( object );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\tobject.parent = undefined;\n\n\t\t\tobject.dispatchEvent( { type: 'removed' } );\n\n\t\t\tthis.children.splice( index, 1 );\n\n\t\t}\n\n\t},\n\n\tgetChildByName: function ( name, recursive ) {\n\n\t\tconsole.warn( 'THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().' );\n\t\treturn this.getObjectByName( name, recursive );\n\n\t},\n\n\tgetObjectById: function ( id, recursive ) {\n\n\t\tif ( this.id === id ) return this;\n\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\n\n\t\t\tvar child = this.children[ i ];\n\t\t\tvar object = child.getObjectById( id, recursive );\n\n\t\t\tif ( object !== undefined ) {\n\n\t\t\t\treturn object;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn undefined;\n\n\t},\n\n\tgetObjectByName: function ( name, recursive ) {\n\n\t\tif ( this.name === name ) return this;\n\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\n\n\t\t\tvar child = this.children[ i ];\n\t\t\tvar object = child.getObjectByName( name, recursive );\n\n\t\t\tif ( object !== undefined ) {\n\n\t\t\t\treturn object;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn undefined;\n\n\t},\n\n\tgetWorldPosition: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\treturn result.setFromMatrixPosition( this.matrixWorld );\n\n\t},\n\n\tgetWorldQuaternion: function () {\n\n\t\tvar position = new THREE.Vector3();\n\t\tvar scale = new THREE.Vector3();\n\n\t\treturn function ( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new THREE.Quaternion();\n\n\t\t\tthis.updateMatrixWorld( true );\n\n\t\t\tthis.matrixWorld.decompose( position, result, scale );\n\n\t\t\treturn result;\n\n\t\t}\n\n\t}(),\n\n\tgetWorldRotation: function () {\n\n\t\tvar quaternion = new THREE.Quaternion();\n\n\t\treturn function ( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new THREE.Euler();\n\n\t\t\tthis.getWorldQuaternion( quaternion );\n\n\t\t\treturn result.setFromQuaternion( quaternion, this.rotation.order, false );\n\n\t\t}\n\n\t}(),\n\n\tgetWorldScale: function () {\n\n\t\tvar position = new THREE.Vector3();\n\t\tvar quaternion = new THREE.Quaternion();\n\n\t\treturn function ( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\t\tthis.updateMatrixWorld( true );\n\n\t\t\tthis.matrixWorld.decompose( position, quaternion, result );\n\n\t\t\treturn result;\n\n\t\t}\n\n\t}(),\n\n\tgetWorldDirection: function () {\n\n\t\tvar quaternion = new THREE.Quaternion();\n\n\t\treturn function ( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\t\tthis.getWorldQuaternion( quaternion );\n\n\t\t\treturn result.set( 0, 0, 1 ).applyQuaternion( quaternion );\n\n\t\t}\n\n\t}(),\n\n\traycast: function () {},\n\n\ttraverse: function ( callback ) {\n\n\t\tcallback( this );\n\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\n\n\t\t\tthis.children[ i ].traverse( callback );\n\n\t\t}\n\n\t},\n\n\ttraverseVisible: function ( callback ) {\n\n\t\tif ( this.visible === false ) return;\n\n\t\tcallback( this );\n\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\n\n\t\t\tthis.children[ i ].traverseVisible( callback );\n\n\t\t}\n\n\t},\n\n\tupdateMatrix: function () {\n\n\t\tthis.matrix.compose( this.position, this.quaternion, this.scale );\n\n\t\tthis.matrixWorldNeedsUpdate = true;\n\n\t},\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tif ( this.matrixAutoUpdate === true ) this.updateMatrix();\n\n\t\tif ( this.matrixWorldNeedsUpdate === true || force === true ) {\n\n\t\t\tif ( this.parent === undefined ) {\n\n\t\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t\t} else {\n\n\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t\t}\n\n\t\t\tthis.matrixWorldNeedsUpdate = false;\n\n\t\t\tforce = true;\n\n\t\t}\n\n\t\t// update children\n\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\n\n\t\t\tthis.children[ i ].updateMatrixWorld( force );\n\n\t\t}\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar output = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.3,\n\t\t\t\ttype: 'Object',\n\t\t\t\tgenerator: 'ObjectExporter'\n\t\t\t}\n\t\t};\n\n\t\t//\n\n\t\tvar geometries = {};\n\n\t\tvar parseGeometry = function ( geometry ) {\n\n\t\t\tif ( output.geometries === undefined ) {\n\n\t\t\t\toutput.geometries = [];\n\n\t\t\t}\n\n\t\t\tif ( geometries[ geometry.uuid ] === undefined ) {\n\n\t\t\t\tvar json = geometry.toJSON();\n\n\t\t\t\tdelete json.metadata;\n\n\t\t\t\tgeometries[ geometry.uuid ] = json;\n\n\t\t\t\toutput.geometries.push( json );\n\n\t\t\t}\n\n\t\t\treturn geometry.uuid;\n\n\t\t};\n\n\t\t//\n\n\t\tvar materials = {};\n\n\t\tvar parseMaterial = function ( material ) {\n\n\t\t\tif ( output.materials === undefined ) {\n\n\t\t\t\toutput.materials = [];\n\n\t\t\t}\n\n\t\t\tif ( materials[ material.uuid ] === undefined ) {\n\n\t\t\t\tvar json = material.toJSON();\n\n\t\t\t\tdelete json.metadata;\n\n\t\t\t\tmaterials[ material.uuid ] = json;\n\n\t\t\t\toutput.materials.push( json );\n\n\t\t\t}\n\n\t\t\treturn material.uuid;\n\n\t\t};\n\n\t\t//\n\n\t\tvar parseObject = function ( object ) {\n\n\t\t\tvar data = {};\n\n\t\t\tdata.uuid = object.uuid;\n\t\t\tdata.type = object.type;\n\n\t\t\tif ( object.name !== '' ) data.name = object.name;\n\t\t\tif ( JSON.stringify( object.userData ) !== '{}' ) data.userData = object.userData;\n\t\t\tif ( object.visible !== true ) data.visible = object.visible;\n\n\t\t\tif ( object instanceof THREE.PerspectiveCamera ) {\n\n\t\t\t\tdata.fov = object.fov;\n\t\t\t\tdata.aspect = object.aspect;\n\t\t\t\tdata.near = object.near;\n\t\t\t\tdata.far = object.far;\n\n\t\t\t} else if ( object instanceof THREE.OrthographicCamera ) {\n\n\t\t\t\tdata.left = object.left;\n\t\t\t\tdata.right = object.right;\n\t\t\t\tdata.top = object.top;\n\t\t\t\tdata.bottom = object.bottom;\n\t\t\t\tdata.near = object.near;\n\t\t\t\tdata.far = object.far;\n\n\t\t\t} else if ( object instanceof THREE.AmbientLight ) {\n\n\t\t\t\tdata.color = object.color.getHex();\n\n\t\t\t} else if ( object instanceof THREE.DirectionalLight ) {\n\n\t\t\t\tdata.color = object.color.getHex();\n\t\t\t\tdata.intensity = object.intensity;\n\n\t\t\t} else if ( object instanceof THREE.PointLight ) {\n\n\t\t\t\tdata.color = object.color.getHex();\n\t\t\t\tdata.intensity = object.intensity;\n\t\t\t\tdata.distance = object.distance;\n\n\t\t\t} else if ( object instanceof THREE.SpotLight ) {\n\n\t\t\t\tdata.color = object.color.getHex();\n\t\t\t\tdata.intensity = object.intensity;\n\t\t\t\tdata.distance = object.distance;\n\t\t\t\tdata.angle = object.angle;\n\t\t\t\tdata.exponent = object.exponent;\n\n\t\t\t} else if ( object instanceof THREE.HemisphereLight ) {\n\n\t\t\t\tdata.color = object.color.getHex();\n\t\t\t\tdata.groundColor = object.groundColor.getHex();\n\n\t\t\t} else if ( object instanceof THREE.Mesh ) {\n\n\t\t\t\tdata.geometry = parseGeometry( object.geometry );\n\t\t\t\tdata.material = parseMaterial( object.material );\n\n\t\t\t} else if ( object instanceof THREE.Line ) {\n\n\t\t\t\tdata.geometry = parseGeometry( object.geometry );\n\t\t\t\tdata.material = parseMaterial( object.material );\n\n\t\t\t} else if ( object instanceof THREE.Sprite ) {\n\n\t\t\t\tdata.material = parseMaterial( object.material );\n\n\t\t\t}\n\n\t\t\tdata.matrix = object.matrix.toArray();\n\n\t\t\tif ( object.children.length > 0 ) {\n\n\t\t\t\tdata.children = [];\n\n\t\t\t\tfor ( var i = 0; i < object.children.length; i ++ ) {\n\n\t\t\t\t\tdata.children.push( parseObject( object.children[ i ] ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\toutput.object = parseObject( this );\n\n\t\treturn output;\n\n\t},\n\n\tclone: function ( object, recursive ) {\n\n\t\tif ( object === undefined ) object = new THREE.Object3D();\n\t\tif ( recursive === undefined ) recursive = true;\n\n\t\tobject.name = this.name;\n\n\t\tobject.up.copy( this.up );\n\n\t\tobject.position.copy( this.position );\n\t\tobject.quaternion.copy( this.quaternion );\n\t\tobject.scale.copy( this.scale );\n\n\t\tobject.renderDepth = this.renderDepth;\n\n\t\tobject.rotationAutoUpdate = this.rotationAutoUpdate;\n\n\t\tobject.matrix.copy( this.matrix );\n\t\tobject.matrixWorld.copy( this.matrixWorld );\n\n\t\tobject.matrixAutoUpdate = this.matrixAutoUpdate;\n\t\tobject.matrixWorldNeedsUpdate = this.matrixWorldNeedsUpdate;\n\n\t\tobject.visible = this.visible;\n\n\t\tobject.castShadow = this.castShadow;\n\t\tobject.receiveShadow = this.receiveShadow;\n\n\t\tobject.frustumCulled = this.frustumCulled;\n\n\t\tobject.userData = JSON.parse( JSON.stringify( this.userData ) );\n\n\t\tif ( recursive === true ) {\n\n\t\t\tfor ( var i = 0; i < this.children.length; i ++ ) {\n\n\t\t\t\tvar child = this.children[ i ];\n\t\t\t\tobject.add( child.clone() );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn object;\n\n\t}\n\n};\n\nTHREE.EventDispatcher.prototype.apply( THREE.Object3D.prototype );\n\nTHREE.Object3DIdCount = 0;\n\n// File:src/core/Projector.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.Projector = function () {\n\n\tconsole.warn( 'THREE.Projector has been moved to /examples/renderers/Projector.js.' );\n\n\tthis.projectVector = function ( vector, camera ) {\n\n\t\tconsole.warn( 'THREE.Projector: .projectVector() is now vector.project().' );\n\t\tvector.project( camera );\n\n\t};\n\n\tthis.unprojectVector = function ( vector, camera ) {\n\n\t\tconsole.warn( 'THREE.Projector: .unprojectVector() is now vector.unproject().' );\n\t\tvector.unproject( camera );\n\n\t};\n\n\tthis.pickingRay = function ( vector, camera ) {\n\n\t\tconsole.error( 'THREE.Projector: .pickingRay() has been removed.' );\n\n\t};\n\n};\n\n// File:src/core/Face3.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.Face3 = function ( a, b, c, normal, color, materialIndex ) {\n\n\tthis.a = a;\n\tthis.b = b;\n\tthis.c = c;\n\n\tthis.normal = normal instanceof THREE.Vector3 ? normal : new THREE.Vector3();\n\tthis.vertexNormals = normal instanceof Array ? normal : [];\n\n\tthis.color = color instanceof THREE.Color ? color : new THREE.Color();\n\tthis.vertexColors = color instanceof Array ? color : [];\n\n\tthis.vertexTangents = [];\n\n\tthis.materialIndex = materialIndex !== undefined ? materialIndex : 0;\n\n};\n\nTHREE.Face3.prototype = {\n\n\tconstructor: THREE.Face3,\n\n\tclone: function () {\n\n\t\tvar face = new THREE.Face3( this.a, this.b, this.c );\n\n\t\tface.normal.copy( this.normal );\n\t\tface.color.copy( this.color );\n\n\t\tface.materialIndex = this.materialIndex;\n\n\t\tfor ( var i = 0, il = this.vertexNormals.length; i < il; i ++ ) {\n\n\t\t\tface.vertexNormals[ i ] = this.vertexNormals[ i ].clone();\n\n\t\t}\n\n\t\tfor ( var i = 0, il = this.vertexColors.length; i < il; i ++ ) {\n\n\t\t\tface.vertexColors[ i ] = this.vertexColors[ i ].clone();\n\n\t\t}\n\n\t\tfor ( var i = 0, il = this.vertexTangents.length; i < il; i ++ ) {\n\n\t\t\tface.vertexTangents[ i ] = this.vertexTangents[ i ].clone();\n\n\t\t}\n\n\t\treturn face;\n\n\t}\n\n};\n\n// File:src/core/Face4.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.Face4 = function ( a, b, c, d, normal, color, materialIndex ) {\n\n\tconsole.warn( 'THREE.Face4 has been removed. A THREE.Face3 will be created instead.' )\n\treturn new THREE.Face3( a, b, c, normal, color, materialIndex );\n\n};\n\n// File:src/core/BufferAttribute.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.BufferAttribute = function ( array, itemSize ) {\n\n\tthis.array = array;\n\tthis.itemSize = itemSize;\n\n\tthis.needsUpdate = false;\n\n};\n\nTHREE.BufferAttribute.prototype = {\n\n\tconstructor: THREE.BufferAttribute,\n\n\tget length () {\n\n\t\treturn this.array.length;\n\n\t},\n\n\tcopyAt: function ( index1, attribute, index2 ) {\n\n\t\tindex1 *= this.itemSize;\n\t\tindex2 *= attribute.itemSize;\n\n\t\tfor ( var i = 0, l = this.itemSize; i < l; i ++ ) {\n\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t}\n\n\t},\n\n\tset: function ( value ) {\n\n\t\tthis.array.set( value );\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( index, x ) {\n\n\t\tthis.array[ index * this.itemSize ] = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( index, y ) {\n\n\t\tthis.array[ index * this.itemSize + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetZ: function ( index, z ) {\n\n\t\tthis.array[ index * this.itemSize + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetXY: function ( index, x, y ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index     ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZ: function ( index, x, y, z ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index     ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZW: function ( index, x, y, z, w ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index     ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\t\tthis.array[ index + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.BufferAttribute( new this.array.constructor( this.array ), this.itemSize );\n\n\t}\n\n};\n\n//\n\nTHREE.Int8Attribute = function ( data, itemSize ) {\n\n\tconsole.warn( 'THREE.Int8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\n\treturn new THREE.BufferAttribute( data, itemSize );\n\n};\n\nTHREE.Uint8Attribute = function ( data, itemSize ) {\n\n\tconsole.warn( 'THREE.Uint8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\n\treturn new THREE.BufferAttribute( data, itemSize );\n\n};\n\nTHREE.Uint8ClampedAttribute = function ( data, itemSize ) {\n\n\tconsole.warn( 'THREE.Uint8ClampedAttribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\n\treturn new THREE.BufferAttribute( data, itemSize );\n\n\n};\n\nTHREE.Int16Attribute = function ( data, itemSize ) {\n\n\tconsole.warn( 'THREE.Int16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\n\treturn new THREE.BufferAttribute( data, itemSize );\n\n};\n\nTHREE.Uint16Attribute = function ( data, itemSize ) {\n\n\tconsole.warn( 'THREE.Uint16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\n\treturn new THREE.BufferAttribute( data, itemSize );\n\n};\n\nTHREE.Int32Attribute = function ( data, itemSize ) {\n\n\tconsole.warn( 'THREE.Int32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\n\treturn new THREE.BufferAttribute( data, itemSize );\n\n};\n\nTHREE.Uint32Attribute = function ( data, itemSize ) {\n\n\tconsole.warn( 'THREE.Uint32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\n\treturn new THREE.BufferAttribute( data, itemSize );\n\n};\n\nTHREE.Float32Attribute = function ( data, itemSize ) {\n\n\tconsole.warn( 'THREE.Float32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\n\treturn new THREE.BufferAttribute( data, itemSize );\n\n};\n\nTHREE.Float64Attribute = function ( data, itemSize ) {\n\n\tconsole.warn( 'THREE.Float64Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\n\treturn new THREE.BufferAttribute( data, itemSize );\n\n};\n\n// File:src/core/BufferGeometry.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.BufferGeometry = function () {\n\n\tObject.defineProperty( this, 'id', { value: THREE.GeometryIdCount ++ } );\n\n\tthis.uuid = THREE.Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'BufferGeometry';\n\n\tthis.attributes = {};\n\tthis.attributesKeys = [];\n\n\tthis.drawcalls = [];\n\tthis.offsets = this.drawcalls; // backwards compatibility\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n};\n\nTHREE.BufferGeometry.prototype = {\n\n\tconstructor: THREE.BufferGeometry,\n\n\taddAttribute: function ( name, attribute ) {\n\n\t\tif ( attribute instanceof THREE.BufferAttribute === false ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).' );\n\n\t\t\tthis.attributes[ name ] = { array: arguments[ 1 ], itemSize: arguments[ 2 ] };\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.attributes[ name ] = attribute;\n\t\tthis.attributesKeys = Object.keys( this.attributes );\n\n\t},\n\n\tgetAttribute: function ( name ) {\n\n\t\treturn this.attributes[ name ];\n\n\t},\n\n\taddDrawCall: function ( start, count, indexOffset ) {\n\n\t\tthis.drawcalls.push( {\n\n\t\t\tstart: start,\n\t\t\tcount: count,\n\t\t\tindex: indexOffset !== undefined ? indexOffset : 0\n\n\t\t} );\n\n\t},\n\n\tapplyMatrix: function ( matrix ) {\n\n\t\tvar position = this.attributes.position;\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tmatrix.applyToVector3Array( position.array );\n\t\t\tposition.needsUpdate = true;\n\n\t\t}\n\n\t\tvar normal = this.attributes.normal;\n\n\t\tif ( normal !== undefined ) {\n\n\t\t\tvar normalMatrix = new THREE.Matrix3().getNormalMatrix( matrix );\n\n\t\t\tnormalMatrix.applyToVector3Array( normal.array );\n\t\t\tnormal.needsUpdate = true;\n\n\t\t}\n\n\t},\n\n\tcenter: function () {\n\n\t\t// TODO\n\n\t},\n\n\tfromGeometry: function ( geometry, settings ) {\n\n\t\tsettings = settings || { 'vertexColors': THREE.NoColors };\n\n\t\tvar vertices = geometry.vertices;\n\t\tvar faces = geometry.faces;\n\t\tvar faceVertexUvs = geometry.faceVertexUvs;\n\t\tvar vertexColors = settings.vertexColors;\n\t\tvar hasFaceVertexUv = faceVertexUvs[ 0 ].length > 0;\n\t\tvar hasFaceVertexNormals = faces[ 0 ].vertexNormals.length == 3;\n\n\t\tvar positions = new Float32Array( faces.length * 3 * 3 );\n\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );\n\n\t\tvar normals = new Float32Array( faces.length * 3 * 3 );\n\t\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ) );\n\n\t\tif ( vertexColors !== THREE.NoColors ) {\n\n\t\t\tvar colors = new Float32Array( faces.length * 3 * 3 );\n\t\t\tthis.addAttribute( 'color', new THREE.BufferAttribute( colors, 3 ) );\n\n\t\t}\n\n\t\tif ( hasFaceVertexUv === true ) {\n\n\t\t\tvar uvs = new Float32Array( faces.length * 3 * 2 );\n\t\t\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\n\n\t\t}\n\n\t\tfor ( var i = 0, i2 = 0, i3 = 0; i < faces.length; i ++, i2 += 6, i3 += 9 ) {\n\n\t\t\tvar face = faces[ i ];\n\n\t\t\tvar a = vertices[ face.a ];\n\t\t\tvar b = vertices[ face.b ];\n\t\t\tvar c = vertices[ face.c ];\n\n\t\t\tpositions[ i3     ] = a.x;\n\t\t\tpositions[ i3 + 1 ] = a.y;\n\t\t\tpositions[ i3 + 2 ] = a.z;\n\n\t\t\tpositions[ i3 + 3 ] = b.x;\n\t\t\tpositions[ i3 + 4 ] = b.y;\n\t\t\tpositions[ i3 + 5 ] = b.z;\n\n\t\t\tpositions[ i3 + 6 ] = c.x;\n\t\t\tpositions[ i3 + 7 ] = c.y;\n\t\t\tpositions[ i3 + 8 ] = c.z;\n\n\t\t\tif ( hasFaceVertexNormals === true ) {\n\n\t\t\t\tvar na = face.vertexNormals[ 0 ];\n\t\t\t\tvar nb = face.vertexNormals[ 1 ];\n\t\t\t\tvar nc = face.vertexNormals[ 2 ];\n\n\t\t\t\tnormals[ i3     ] = na.x;\n\t\t\t\tnormals[ i3 + 1 ] = na.y;\n\t\t\t\tnormals[ i3 + 2 ] = na.z;\n\n\t\t\t\tnormals[ i3 + 3 ] = nb.x;\n\t\t\t\tnormals[ i3 + 4 ] = nb.y;\n\t\t\t\tnormals[ i3 + 5 ] = nb.z;\n\n\t\t\t\tnormals[ i3 + 6 ] = nc.x;\n\t\t\t\tnormals[ i3 + 7 ] = nc.y;\n\t\t\t\tnormals[ i3 + 8 ] = nc.z;\n\n\t\t\t} else {\n\n\t\t\t\tvar n = face.normal;\n\n\t\t\t\tnormals[ i3     ] = n.x;\n\t\t\t\tnormals[ i3 + 1 ] = n.y;\n\t\t\t\tnormals[ i3 + 2 ] = n.z;\n\n\t\t\t\tnormals[ i3 + 3 ] = n.x;\n\t\t\t\tnormals[ i3 + 4 ] = n.y;\n\t\t\t\tnormals[ i3 + 5 ] = n.z;\n\n\t\t\t\tnormals[ i3 + 6 ] = n.x;\n\t\t\t\tnormals[ i3 + 7 ] = n.y;\n\t\t\t\tnormals[ i3 + 8 ] = n.z;\n\n\t\t\t}\n\n\t\t\tif ( vertexColors === THREE.FaceColors ) {\n\n\t\t\t\tvar fc = face.color;\n\n\t\t\t\tcolors[ i3     ] = fc.r;\n\t\t\t\tcolors[ i3 + 1 ] = fc.g;\n\t\t\t\tcolors[ i3 + 2 ] = fc.b;\n\n\t\t\t\tcolors[ i3 + 3 ] = fc.r;\n\t\t\t\tcolors[ i3 + 4 ] = fc.g;\n\t\t\t\tcolors[ i3 + 5 ] = fc.b;\n\n\t\t\t\tcolors[ i3 + 6 ] = fc.r;\n\t\t\t\tcolors[ i3 + 7 ] = fc.g;\n\t\t\t\tcolors[ i3 + 8 ] = fc.b;\n\n\t\t\t} else if ( vertexColors === THREE.VertexColors ) {\n\n\t\t\t\tvar vca = face.vertexColors[ 0 ];\n\t\t\t\tvar vcb = face.vertexColors[ 1 ];\n\t\t\t\tvar vcc = face.vertexColors[ 2 ];\n\n\t\t\t\tcolors[ i3     ] = vca.r;\n\t\t\t\tcolors[ i3 + 1 ] = vca.g;\n\t\t\t\tcolors[ i3 + 2 ] = vca.b;\n\n\t\t\t\tcolors[ i3 + 3 ] = vcb.r;\n\t\t\t\tcolors[ i3 + 4 ] = vcb.g;\n\t\t\t\tcolors[ i3 + 5 ] = vcb.b;\n\n\t\t\t\tcolors[ i3 + 6 ] = vcc.r;\n\t\t\t\tcolors[ i3 + 7 ] = vcc.g;\n\t\t\t\tcolors[ i3 + 8 ] = vcc.b;\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexUv === true ) {\n\n\t\t\t\tvar uva = faceVertexUvs[ 0 ][ i ][ 0 ];\n\t\t\t\tvar uvb = faceVertexUvs[ 0 ][ i ][ 1 ];\n\t\t\t\tvar uvc = faceVertexUvs[ 0 ][ i ][ 2 ];\n\n\t\t\t\tuvs[ i2     ] = uva.x;\n\t\t\t\tuvs[ i2 + 1 ] = uva.y;\n\n\t\t\t\tuvs[ i2 + 2 ] = uvb.x;\n\t\t\t\tuvs[ i2 + 3 ] = uvb.y;\n\n\t\t\t\tuvs[ i2 + 4 ] = uvc.x;\n\t\t\t\tuvs[ i2 + 5 ] = uvc.y;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.computeBoundingSphere()\n\n\t\treturn this;\n\n\t},\n\n\tcomputeBoundingBox: function () {\n\n\t\tvar vector = new THREE.Vector3();\n\n\t\treturn function () {\n\n\t\t\tif ( this.boundingBox === null ) {\n\n\t\t\t\tthis.boundingBox = new THREE.Box3();\n\n\t\t\t}\n\n\t\t\tvar positions = this.attributes.position.array;\n\n\t\t\tif ( positions ) {\n\n\t\t\t\tvar bb = this.boundingBox;\n\t\t\t\tbb.makeEmpty();\n\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 3 ) {\n\n\t\t\t\t\tvector.set( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] );\n\t\t\t\t\tbb.expandByPoint( vector );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( positions === undefined || positions.length === 0 ) {\n\n\t\t\t\tthis.boundingBox.min.set( 0, 0, 0 );\n\t\t\t\tthis.boundingBox.max.set( 0, 0, 0 );\n\n\t\t\t}\n\n\t\t\tif ( isNaN( this.boundingBox.min.x ) || isNaN( this.boundingBox.min.y ) || isNaN( this.boundingBox.min.z ) ) {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.' );\n\n\t\t\t}\n\n\t\t}\n\n\t}(),\n\n\tcomputeBoundingSphere: function () {\n\n\t\tvar box = new THREE.Box3();\n\t\tvar vector = new THREE.Vector3();\n\n\t\treturn function () {\n\n\t\t\tif ( this.boundingSphere === null ) {\n\n\t\t\t\tthis.boundingSphere = new THREE.Sphere();\n\n\t\t\t}\n\n\t\t\tvar positions = this.attributes.position.array;\n\n\t\t\tif ( positions ) {\n\n\t\t\t\tbox.makeEmpty();\n\n\t\t\t\tvar center = this.boundingSphere.center;\n\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 3 ) {\n\n\t\t\t\t\tvector.set( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] );\n\t\t\t\t\tbox.expandByPoint( vector );\n\n\t\t\t\t}\n\n\t\t\t\tbox.center( center );\n\n\t\t\t\t// hoping to find a boundingSphere with a radius smaller than the\n\t\t\t\t// boundingSphere of the boundingBox:  sqrt(3) smaller in the best case\n\n\t\t\t\tvar maxRadiusSq = 0;\n\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 3 ) {\n\n\t\t\t\t\tvector.set( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] );\n\t\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( vector ) );\n\n\t\t\t\t}\n\n\t\t\t\tthis.boundingSphere.radius = Math.sqrt( maxRadiusSq );\n\n\t\t\t\tif ( isNaN( this.boundingSphere.radius ) ) {\n\n\t\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}(),\n\n\tcomputeFaceNormals: function () {\n\n\t\t// backwards compatibility\n\n\t},\n\n\tcomputeVertexNormals: function () {\n\n\t\tvar attributes = this.attributes;\n\n\t\tif ( attributes.position ) {\n\n\t\t\tvar positions = attributes.position.array;\n\n\t\t\tif ( attributes.normal === undefined ) {\n\n\t\t\t\tthis.addAttribute( 'normal', new THREE.BufferAttribute( new Float32Array( positions.length ), 3 ) );\n\n\t\t\t} else {\n\n\t\t\t\t// reset existing normals to zero\n\n\t\t\t\tvar normals = attributes.normal.array;\n\n\t\t\t\tfor ( var i = 0, il = normals.length; i < il; i ++ ) {\n\n\t\t\t\t\tnormals[ i ] = 0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar normals = attributes.normal.array;\n\n\t\t\tvar vA, vB, vC,\n\n\t\t\tpA = new THREE.Vector3(),\n\t\t\tpB = new THREE.Vector3(),\n\t\t\tpC = new THREE.Vector3(),\n\n\t\t\tcb = new THREE.Vector3(),\n\t\t\tab = new THREE.Vector3();\n\n\t\t\t// indexed elements\n\n\t\t\tif ( attributes.index ) {\n\n\t\t\t\tvar indices = attributes.index.array;\n\n\t\t\t\tvar offsets = ( this.offsets.length > 0 ? this.offsets : [ { start: 0, count: indices.length, index: 0 } ] );\n\n\t\t\t\tfor ( var j = 0, jl = offsets.length; j < jl; ++ j ) {\n\n\t\t\t\t\tvar start = offsets[ j ].start;\n\t\t\t\t\tvar count = offsets[ j ].count;\n\t\t\t\t\tvar index = offsets[ j ].index;\n\n\t\t\t\t\tfor ( var i = start, il = start + count; i < il; i += 3 ) {\n\n\t\t\t\t\t\tvA = ( index + indices[ i     ] ) * 3;\n\t\t\t\t\t\tvB = ( index + indices[ i + 1 ] ) * 3;\n\t\t\t\t\t\tvC = ( index + indices[ i + 2 ] ) * 3;\n\n\t\t\t\t\t\tpA.fromArray( positions, vA );\n\t\t\t\t\t\tpB.fromArray( positions, vB );\n\t\t\t\t\t\tpC.fromArray( positions, vC );\n\n\t\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\t\tnormals[ vA     ] += cb.x;\n\t\t\t\t\t\tnormals[ vA + 1 ] += cb.y;\n\t\t\t\t\t\tnormals[ vA + 2 ] += cb.z;\n\n\t\t\t\t\t\tnormals[ vB     ] += cb.x;\n\t\t\t\t\t\tnormals[ vB + 1 ] += cb.y;\n\t\t\t\t\t\tnormals[ vB + 2 ] += cb.z;\n\n\t\t\t\t\t\tnormals[ vC     ] += cb.x;\n\t\t\t\t\t\tnormals[ vC + 1 ] += cb.y;\n\t\t\t\t\t\tnormals[ vC + 2 ] += cb.z;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// non-indexed elements (unconnected triangle soup)\n\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 9 ) {\n\n\t\t\t\t\tpA.fromArray( positions, i );\n\t\t\t\t\tpB.fromArray( positions, i + 3 );\n\t\t\t\t\tpC.fromArray( positions, i + 6 );\n\n\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\tnormals[ i     ] = cb.x;\n\t\t\t\t\tnormals[ i + 1 ] = cb.y;\n\t\t\t\t\tnormals[ i + 2 ] = cb.z;\n\n\t\t\t\t\tnormals[ i + 3 ] = cb.x;\n\t\t\t\t\tnormals[ i + 4 ] = cb.y;\n\t\t\t\t\tnormals[ i + 5 ] = cb.z;\n\n\t\t\t\t\tnormals[ i + 6 ] = cb.x;\n\t\t\t\t\tnormals[ i + 7 ] = cb.y;\n\t\t\t\t\tnormals[ i + 8 ] = cb.z;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.normalizeNormals();\n\n\t\t\tattributes.normal.needsUpdate = true;\n\n\t\t}\n\n\t},\n\n\tcomputeTangents: function () {\n\n\t\t// based on http://www.terathon.com/code/tangent.html\n\t\t// (per vertex tangents)\n\n\t\tif ( this.attributes.index === undefined ||\n\t\t\t this.attributes.position === undefined ||\n\t\t\t this.attributes.normal === undefined ||\n\t\t\t this.attributes.uv === undefined ) {\n\n\t\t\tconsole.warn( 'Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar indices = this.attributes.index.array;\n\t\tvar positions = this.attributes.position.array;\n\t\tvar normals = this.attributes.normal.array;\n\t\tvar uvs = this.attributes.uv.array;\n\n\t\tvar nVertices = positions.length / 3;\n\n\t\tif ( this.attributes.tangent === undefined ) {\n\n\t\t\tthis.addAttribute( 'tangent', new THREE.BufferAttribute( new Float32Array( 4 * nVertices ), 4 ) );\n\n\t\t}\n\n\t\tvar tangents = this.attributes.tangent.array;\n\n\t\tvar tan1 = [], tan2 = [];\n\n\t\tfor ( var k = 0; k < nVertices; k ++ ) {\n\n\t\t\ttan1[ k ] = new THREE.Vector3();\n\t\t\ttan2[ k ] = new THREE.Vector3();\n\n\t\t}\n\n\t\tvar vA = new THREE.Vector3(),\n\t\t\tvB = new THREE.Vector3(),\n\t\t\tvC = new THREE.Vector3(),\n\n\t\t\tuvA = new THREE.Vector2(),\n\t\t\tuvB = new THREE.Vector2(),\n\t\t\tuvC = new THREE.Vector2(),\n\n\t\t\tx1, x2, y1, y2, z1, z2,\n\t\t\ts1, s2, t1, t2, r;\n\n\t\tvar sdir = new THREE.Vector3(), tdir = new THREE.Vector3();\n\n\t\tfunction handleTriangle( a, b, c ) {\n\n\t\t\tvA.fromArray( positions, a * 3 );\n\t\t\tvB.fromArray( positions, b * 3 );\n\t\t\tvC.fromArray( positions, c * 3 );\n\n\t\t\tuvA.fromArray( uvs, a * 2 );\n\t\t\tuvB.fromArray( uvs, b * 2 );\n\t\t\tuvC.fromArray( uvs, c * 2 );\n\n\t\t\tx1 = vB.x - vA.x;\n\t\t\tx2 = vC.x - vA.x;\n\n\t\t\ty1 = vB.y - vA.y;\n\t\t\ty2 = vC.y - vA.y;\n\n\t\t\tz1 = vB.z - vA.z;\n\t\t\tz2 = vC.z - vA.z;\n\n\t\t\ts1 = uvB.x - uvA.x;\n\t\t\ts2 = uvC.x - uvA.x;\n\n\t\t\tt1 = uvB.y - uvA.y;\n\t\t\tt2 = uvC.y - uvA.y;\n\n\t\t\tr = 1.0 / ( s1 * t2 - s2 * t1 );\n\n\t\t\tsdir.set(\n\t\t\t\t( t2 * x1 - t1 * x2 ) * r,\n\t\t\t\t( t2 * y1 - t1 * y2 ) * r,\n\t\t\t\t( t2 * z1 - t1 * z2 ) * r\n\t\t\t);\n\n\t\t\ttdir.set(\n\t\t\t\t( s1 * x2 - s2 * x1 ) * r,\n\t\t\t\t( s1 * y2 - s2 * y1 ) * r,\n\t\t\t\t( s1 * z2 - s2 * z1 ) * r\n\t\t\t);\n\n\t\t\ttan1[ a ].add( sdir );\n\t\t\ttan1[ b ].add( sdir );\n\t\t\ttan1[ c ].add( sdir );\n\n\t\t\ttan2[ a ].add( tdir );\n\t\t\ttan2[ b ].add( tdir );\n\t\t\ttan2[ c ].add( tdir );\n\n\t\t}\n\n\t\tvar i, il;\n\t\tvar j, jl;\n\t\tvar iA, iB, iC;\n\n\t\tif ( this.drawcalls.length === 0 ) {\n\n\t\t\tthis.addDrawCall( 0, indices.length, 0 );\n\n\t\t}\n\n\t\tvar drawcalls = this.drawcalls;\n\n\t\tfor ( j = 0, jl = drawcalls.length; j < jl; ++ j ) {\n\n\t\t\tvar start = drawcalls[ j ].start;\n\t\t\tvar count = drawcalls[ j ].count;\n\t\t\tvar index = drawcalls[ j ].index;\n\n\t\t\tfor ( i = start, il = start + count; i < il; i += 3 ) {\n\n\t\t\t\tiA = index + indices[ i ];\n\t\t\t\tiB = index + indices[ i + 1 ];\n\t\t\t\tiC = index + indices[ i + 2 ];\n\n\t\t\t\thandleTriangle( iA, iB, iC );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar tmp = new THREE.Vector3(), tmp2 = new THREE.Vector3();\n\t\tvar n = new THREE.Vector3(), n2 = new THREE.Vector3();\n\t\tvar w, t, test;\n\n\t\tfunction handleVertex( v ) {\n\n\t\t\tn.fromArray( normals, v * 3 );\n\t\t\tn2.copy( n );\n\n\t\t\tt = tan1[ v ];\n\n\t\t\t// Gram-Schmidt orthogonalize\n\n\t\t\ttmp.copy( t );\n\t\t\ttmp.sub( n.multiplyScalar( n.dot( t ) ) ).normalize();\n\n\t\t\t// Calculate handedness\n\n\t\t\ttmp2.crossVectors( n2, t );\n\t\t\ttest = tmp2.dot( tan2[ v ] );\n\t\t\tw = ( test < 0.0 ) ? - 1.0 : 1.0;\n\n\t\t\ttangents[ v * 4     ] = tmp.x;\n\t\t\ttangents[ v * 4 + 1 ] = tmp.y;\n\t\t\ttangents[ v * 4 + 2 ] = tmp.z;\n\t\t\ttangents[ v * 4 + 3 ] = w;\n\n\t\t}\n\n\t\tfor ( j = 0, jl = drawcalls.length; j < jl; ++ j ) {\n\n\t\t\tvar start = drawcalls[ j ].start;\n\t\t\tvar count = drawcalls[ j ].count;\n\t\t\tvar index = drawcalls[ j ].index;\n\n\t\t\tfor ( i = start, il = start + count; i < il; i += 3 ) {\n\n\t\t\t\tiA = index + indices[ i ];\n\t\t\t\tiB = index + indices[ i + 1 ];\n\t\t\t\tiC = index + indices[ i + 2 ];\n\n\t\t\t\thandleVertex( iA );\n\t\t\t\thandleVertex( iB );\n\t\t\t\thandleVertex( iC );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t/*\n\t\tcomputeOffsets\n\t\tCompute the draw offset for large models by chunking the index buffer into chunks of 65k addressable vertices.\n\t\tThis method will effectively rewrite the index buffer and remap all attributes to match the new indices.\n\t\tWARNING: This method will also expand the vertex count to prevent sprawled triangles across draw offsets.\n\t\tindexBufferSize - Defaults to 65535, but allows for larger or smaller chunks.\n\t*/\n\tcomputeOffsets: function ( indexBufferSize ) {\n\n\t\tvar size = indexBufferSize;\n\t\tif ( indexBufferSize === undefined )\n\t\t\tsize = 65535; //WebGL limits type of index buffer values to 16-bit.\n\n\t\tvar s = Date.now();\n\n\t\tvar indices = this.attributes.index.array;\n\t\tvar vertices = this.attributes.position.array;\n\n\t\tvar verticesCount = ( vertices.length / 3 );\n\t\tvar facesCount = ( indices.length / 3 );\n\n\t\t/*\n\t\tconsole.log(\"Computing buffers in offsets of \"+size+\" -> indices:\"+indices.length+\" vertices:\"+vertices.length);\n\t\tconsole.log(\"Faces to process: \"+(indices.length/3));\n\t\tconsole.log(\"Reordering \"+verticesCount+\" vertices.\");\n\t\t*/\n\n\t\tvar sortedIndices = new Uint16Array( indices.length ); //16-bit buffers\n\t\tvar indexPtr = 0;\n\t\tvar vertexPtr = 0;\n\n\t\tvar offsets = [ { start:0, count:0, index:0 } ];\n\t\tvar offset = offsets[ 0 ];\n\n\t\tvar duplicatedVertices = 0;\n\t\tvar newVerticeMaps = 0;\n\t\tvar faceVertices = new Int32Array( 6 );\n\t\tvar vertexMap = new Int32Array( vertices.length );\n\t\tvar revVertexMap = new Int32Array( vertices.length );\n\t\tfor ( var j = 0; j < vertices.length; j ++ ) { vertexMap[ j ] = - 1; revVertexMap[ j ] = - 1; }\n\n\t\t/*\n\t\t\tTraverse every face and reorder vertices in the proper offsets of 65k.\n\t\t\tWe can have more than 65k entries in the index buffer per offset, but only reference 65k values.\n\t\t*/\n\t\tfor ( var findex = 0; findex < facesCount; findex ++ ) {\n\t\t\tnewVerticeMaps = 0;\n\n\t\t\tfor ( var vo = 0; vo < 3; vo ++ ) {\n\t\t\t\tvar vid = indices[ findex * 3 + vo ];\n\t\t\t\tif ( vertexMap[ vid ] == - 1 ) {\n\t\t\t\t\t//Unmapped vertice\n\t\t\t\t\tfaceVertices[ vo * 2 ] = vid;\n\t\t\t\t\tfaceVertices[ vo * 2 + 1 ] = - 1;\n\t\t\t\t\tnewVerticeMaps ++;\n\t\t\t\t} else if ( vertexMap[ vid ] < offset.index ) {\n\t\t\t\t\t//Reused vertices from previous block (duplicate)\n\t\t\t\t\tfaceVertices[ vo * 2 ] = vid;\n\t\t\t\t\tfaceVertices[ vo * 2 + 1 ] = - 1;\n\t\t\t\t\tduplicatedVertices ++;\n\t\t\t\t} else {\n\t\t\t\t\t//Reused vertice in the current block\n\t\t\t\t\tfaceVertices[ vo * 2 ] = vid;\n\t\t\t\t\tfaceVertices[ vo * 2 + 1 ] = vertexMap[ vid ];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar faceMax = vertexPtr + newVerticeMaps;\n\t\t\tif ( faceMax > ( offset.index + size ) ) {\n\t\t\t\tvar new_offset = { start:indexPtr, count:0, index:vertexPtr };\n\t\t\t\toffsets.push( new_offset );\n\t\t\t\toffset = new_offset;\n\n\t\t\t\t//Re-evaluate reused vertices in light of new offset.\n\t\t\t\tfor ( var v = 0; v < 6; v += 2 ) {\n\t\t\t\t\tvar new_vid = faceVertices[ v + 1 ];\n\t\t\t\t\tif ( new_vid > - 1 && new_vid < offset.index )\n\t\t\t\t\t\tfaceVertices[ v + 1 ] = - 1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//Reindex the face.\n\t\t\tfor ( var v = 0; v < 6; v += 2 ) {\n\t\t\t\tvar vid = faceVertices[ v ];\n\t\t\t\tvar new_vid = faceVertices[ v + 1 ];\n\n\t\t\t\tif ( new_vid === - 1 )\n\t\t\t\t\tnew_vid = vertexPtr ++;\n\n\t\t\t\tvertexMap[ vid ] = new_vid;\n\t\t\t\trevVertexMap[ new_vid ] = vid;\n\t\t\t\tsortedIndices[ indexPtr ++ ] = new_vid - offset.index; //XXX overflows at 16bit\n\t\t\t\toffset.count ++;\n\t\t\t}\n\t\t}\n\n\t\t/* Move all attribute values to map to the new computed indices , also expand the vertice stack to match our new vertexPtr. */\n\t\tthis.reorderBuffers( sortedIndices, revVertexMap, vertexPtr );\n\t\tthis.offsets = offsets;\n\n\t\t/*\n\t\tvar orderTime = Date.now();\n\t\tconsole.log(\"Reorder time: \"+(orderTime-s)+\"ms\");\n\t\tconsole.log(\"Duplicated \"+duplicatedVertices+\" vertices.\");\n\t\tconsole.log(\"Compute Buffers time: \"+(Date.now()-s)+\"ms\");\n\t\tconsole.log(\"Draw offsets: \"+offsets.length);\n\t\t*/\n\n\t\treturn offsets;\n\t},\n\n\tmerge: function () {\n\n\t\tconsole.log( 'BufferGeometry.merge(): TODO' );\n\n\t},\n\n\tnormalizeNormals: function () {\n\n\t\tvar normals = this.attributes.normal.array;\n\n\t\tvar x, y, z, n;\n\n\t\tfor ( var i = 0, il = normals.length; i < il; i += 3 ) {\n\n\t\t\tx = normals[ i ];\n\t\t\ty = normals[ i + 1 ];\n\t\t\tz = normals[ i + 2 ];\n\n\t\t\tn = 1.0 / Math.sqrt( x * x + y * y + z * z );\n\n\t\t\tnormals[ i     ] *= n;\n\t\t\tnormals[ i + 1 ] *= n;\n\t\t\tnormals[ i + 2 ] *= n;\n\n\t\t}\n\n\t},\n\n\t/*\n\t\treoderBuffers:\n\t\tReorder attributes based on a new indexBuffer and indexMap.\n\t\tindexBuffer - Uint16Array of the new ordered indices.\n\t\tindexMap - Int32Array where the position is the new vertex ID and the value the old vertex ID for each vertex.\n\t\tvertexCount - Amount of total vertices considered in this reordering (in case you want to grow the vertice stack).\n\t*/\n\treorderBuffers: function ( indexBuffer, indexMap, vertexCount ) {\n\n\t\t/* Create a copy of all attributes for reordering. */\n\t\tvar sortedAttributes = {};\n\t\tfor ( var attr in this.attributes ) {\n\t\t\tif ( attr == 'index' )\n\t\t\t\tcontinue;\n\t\t\tvar sourceArray = this.attributes[ attr ].array;\n\t\t\tsortedAttributes[ attr ] = new sourceArray.constructor( this.attributes[ attr ].itemSize * vertexCount );\n\t\t}\n\n\t\t/* Move attribute positions based on the new index map */\n\t\tfor ( var new_vid = 0; new_vid < vertexCount; new_vid ++ ) {\n\t\t\tvar vid = indexMap[ new_vid ];\n\t\t\tfor ( var attr in this.attributes ) {\n\t\t\t\tif ( attr == 'index' )\n\t\t\t\t\tcontinue;\n\t\t\t\tvar attrArray = this.attributes[ attr ].array;\n\t\t\t\tvar attrSize = this.attributes[ attr ].itemSize;\n\t\t\t\tvar sortedAttr = sortedAttributes[ attr ];\n\t\t\t\tfor ( var k = 0; k < attrSize; k ++ )\n\t\t\t\t\tsortedAttr[ new_vid * attrSize + k ] = attrArray[ vid * attrSize + k ];\n\t\t\t}\n\t\t}\n\n\t\t/* Carry the new sorted buffers locally */\n\t\tthis.attributes[ 'index' ].array = indexBuffer;\n\t\tfor ( var attr in this.attributes ) {\n\t\t\tif ( attr == 'index' )\n\t\t\t\tcontinue;\n\t\t\tthis.attributes[ attr ].array = sortedAttributes[ attr ];\n\t\t\tthis.attributes[ attr ].numItems = this.attributes[ attr ].itemSize * vertexCount;\n\t\t}\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar output = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.0,\n\t\t\t\ttype: 'BufferGeometry',\n\t\t\t\tgenerator: 'BufferGeometryExporter'\n\t\t\t},\n\t\t\tuuid: this.uuid,\n\t\t\ttype: this.type,\n\t\t\tdata: {\n\t\t\t\tattributes: {}\n\t\t\t}\n\t\t};\n\n\t\tvar attributes = this.attributes;\n\t\tvar offsets = this.offsets;\n\t\tvar boundingSphere = this.boundingSphere;\n\n\t\tfor ( var key in attributes ) {\n\n\t\t\tvar attribute = attributes[ key ];\n\n\t\t\tvar array = [], typeArray = attribute.array;\n\n\t\t\tfor ( var i = 0, l = typeArray.length; i < l; i ++ ) {\n\n\t\t\t\tarray[ i ] = typeArray[ i ];\n\n\t\t\t}\n\n\t\t\toutput.data.attributes[ key ] = {\n\t\t\t\titemSize: attribute.itemSize,\n\t\t\t\ttype: attribute.array.constructor.name,\n\t\t\t\tarray: array\n\t\t\t}\n\n\t\t}\n\n\t\tif ( offsets.length > 0 ) {\n\n\t\t\toutput.data.offsets = JSON.parse( JSON.stringify( offsets ) );\n\n\t\t}\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\toutput.data.boundingSphere = {\n\t\t\t\tcenter: boundingSphere.center.toArray(),\n\t\t\t\tradius: boundingSphere.radius\n\t\t\t}\n\n\t\t}\n\n\t\treturn output;\n\n\t},\n\n\tclone: function () {\n\n\t\tvar geometry = new THREE.BufferGeometry();\n\n\t\tfor ( var attr in this.attributes ) {\n\n\t\t\tvar sourceAttr = this.attributes[ attr ];\n\t\t\tgeometry.addAttribute( attr, sourceAttr.clone() );\n\n\t\t}\n\n\t\tfor ( var i = 0, il = this.offsets.length; i < il; i ++ ) {\n\n\t\t\tvar offset = this.offsets[ i ];\n\n\t\t\tgeometry.offsets.push( {\n\n\t\t\t\tstart: offset.start,\n\t\t\t\tindex: offset.index,\n\t\t\t\tcount: offset.count\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn geometry;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n};\n\nTHREE.EventDispatcher.prototype.apply( THREE.BufferGeometry.prototype );\n\n// File:src/core/Geometry.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author kile / http://kile.stravaganza.org/\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author bhouston / http://exocortex.com\n */\n\nTHREE.Geometry = function () {\n\n\tObject.defineProperty( this, 'id', { value: THREE.GeometryIdCount ++ } );\n\n\tthis.uuid = THREE.Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Geometry';\n\n\tthis.vertices = [];\n\tthis.colors = [];  // one-to-one vertex colors, used in Points and Line\n\n\tthis.faces = [];\n\n\tthis.faceVertexUvs = [ [] ];\n\n\tthis.morphTargets = [];\n\tthis.morphColors = [];\n\tthis.morphNormals = [];\n\n\tthis.skinWeights = [];\n\tthis.skinIndices = [];\n\n\tthis.lineDistances = [];\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n\tthis.hasTangents = false;\n\n\tthis.dynamic = true; // the intermediate typed arrays will be deleted when set to false\n\n\t// update flags\n\n\tthis.verticesNeedUpdate = false;\n\tthis.elementsNeedUpdate = false;\n\tthis.uvsNeedUpdate = false;\n\tthis.normalsNeedUpdate = false;\n\tthis.tangentsNeedUpdate = false;\n\tthis.colorsNeedUpdate = false;\n\tthis.lineDistancesNeedUpdate = false;\n\n\tthis.groupsNeedUpdate = false;\n\n};\n\nTHREE.Geometry.prototype = {\n\n\tconstructor: THREE.Geometry,\n\n\tapplyMatrix: function ( matrix ) {\n\n\t\tvar normalMatrix = new THREE.Matrix3().getNormalMatrix( matrix );\n\n\t\tfor ( var i = 0, il = this.vertices.length; i < il; i ++ ) {\n\n\t\t\tvar vertex = this.vertices[ i ];\n\t\t\tvertex.applyMatrix4( matrix );\n\n\t\t}\n\n\t\tfor ( var i = 0, il = this.faces.length; i < il; i ++ ) {\n\n\t\t\tvar face = this.faces[ i ];\n\t\t\tface.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\tface.vertexNormals[ j ].applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.boundingBox instanceof THREE.Box3 ) {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t}\n\n\t\tif ( this.boundingSphere instanceof THREE.Sphere ) {\n\n\t\t\tthis.computeBoundingSphere();\n\n\t\t}\n\n\t},\n\n\tfromBufferGeometry: function ( geometry ) {\n\n\t\tvar scope = this;\n\n\t\tvar attributes = geometry.attributes;\n\n\t\tvar vertices = attributes.position.array;\n\t\tvar indices = attributes.index !== undefined ? attributes.index.array : undefined;\n\t\tvar normals = attributes.normal !== undefined ? attributes.normal.array : undefined;\n\t\tvar colors = attributes.color !== undefined ? attributes.color.array : undefined;\n\t\tvar uvs = attributes.uv !== undefined ? attributes.uv.array : undefined;\n\n\t\tvar tempNormals = [];\n\t\tvar tempUVs = [];\n\n\t\tfor ( var i = 0, j = 0; i < vertices.length; i += 3, j += 2 ) {\n\n\t\t\tscope.vertices.push( new THREE.Vector3( vertices[ i ], vertices[ i + 1 ], vertices[ i + 2 ] ) );\n\n\t\t\tif ( normals !== undefined ) {\n\n\t\t\t\ttempNormals.push( new THREE.Vector3( normals[ i ], normals[ i + 1 ], normals[ i + 2 ] ) );\n\n\t\t\t}\n\n\t\t\tif ( colors !== undefined ) {\n\n\t\t\t\tscope.colors.push( new THREE.Color( colors[ i ], colors[ i + 1 ], colors[ i + 2 ] ) );\n\n\t\t\t}\n\n\t\t\tif ( uvs !== undefined ) {\n\n\t\t\t\ttempUVs.push( new THREE.Vector2( uvs[ j ], uvs[ j + 1 ] ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar addFace = function ( a, b, c ) {\n\n\t\t\tvar vertexNormals = normals !== undefined ? [ tempNormals[ a ].clone(), tempNormals[ b ].clone(), tempNormals[ c ].clone() ] : [];\n\t\t\tvar vertexColors = colors !== undefined ? [ scope.colors[ a ].clone(), scope.colors[ b ].clone(), scope.colors[ c ].clone() ] : [];\n\n\t\t\tscope.faces.push( new THREE.Face3( a, b, c, vertexNormals, vertexColors ) );\n\t\t\tscope.faceVertexUvs[ 0 ].push( [ tempUVs[ a ], tempUVs[ b ], tempUVs[ c ] ] );\n\n\t\t};\n\n\t\tif ( indices !== undefined ) {\n\n\t\t\tfor ( var i = 0; i < indices.length; i += 3 ) {\n\n\t\t\t\taddFace( indices[ i ], indices[ i + 1 ], indices[ i + 2 ] );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tfor ( var i = 0; i < vertices.length / 3; i += 3 ) {\n\n\t\t\t\taddFace( i, i + 1, i + 2 );\n\n\t\t\t}\n\n\t\t}\n\t\t\n\t\tthis.computeFaceNormals();\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t}\n\n\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcenter: function () {\n\n\t\tthis.computeBoundingBox();\n\n\t\tvar offset = new THREE.Vector3();\n\n\t\toffset.addVectors( this.boundingBox.min, this.boundingBox.max );\n\t\toffset.multiplyScalar( - 0.5 );\n\n\t\tthis.applyMatrix( new THREE.Matrix4().makeTranslation( offset.x, offset.y, offset.z ) );\n\t\tthis.computeBoundingBox();\n\n\t\treturn offset;\n\n\t},\n\n\tcomputeFaceNormals: function () {\n\n\t\tvar cb = new THREE.Vector3(), ab = new THREE.Vector3();\n\n\t\tfor ( var f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tvar face = this.faces[ f ];\n\n\t\t\tvar vA = this.vertices[ face.a ];\n\t\t\tvar vB = this.vertices[ face.b ];\n\t\t\tvar vC = this.vertices[ face.c ];\n\n\t\t\tcb.subVectors( vC, vB );\n\t\t\tab.subVectors( vA, vB );\n\t\t\tcb.cross( ab );\n\n\t\t\tcb.normalize();\n\n\t\t\tface.normal.copy( cb );\n\n\t\t}\n\n\t},\n\n\tcomputeVertexNormals: function ( areaWeighted ) {\n\n\t\tvar v, vl, f, fl, face, vertices;\n\n\t\tvertices = new Array( this.vertices.length );\n\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\n\n\t\t\tvertices[ v ] = new THREE.Vector3();\n\n\t\t}\n\n\t\tif ( areaWeighted ) {\n\n\t\t\t// vertex normals weighted by triangle areas\n\t\t\t// http://www.iquilezles.org/www/articles/normals/normals.htm\n\n\t\t\tvar vA, vB, vC, vD;\n\t\t\tvar cb = new THREE.Vector3(), ab = new THREE.Vector3(),\n\t\t\t\tdb = new THREE.Vector3(), dc = new THREE.Vector3(), bc = new THREE.Vector3();\n\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\tvA = this.vertices[ face.a ];\n\t\t\t\tvB = this.vertices[ face.b ];\n\t\t\t\tvC = this.vertices[ face.c ];\n\n\t\t\t\tcb.subVectors( vC, vB );\n\t\t\t\tab.subVectors( vA, vB );\n\t\t\t\tcb.cross( ab );\n\n\t\t\t\tvertices[ face.a ].add( cb );\n\t\t\t\tvertices[ face.b ].add( cb );\n\t\t\t\tvertices[ face.c ].add( cb );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\tvertices[ face.a ].add( face.normal );\n\t\t\t\tvertices[ face.b ].add( face.normal );\n\t\t\t\tvertices[ face.c ].add( face.normal );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\n\n\t\t\tvertices[ v ].normalize();\n\n\t\t}\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tface.vertexNormals[ 0 ] = vertices[ face.a ].clone();\n\t\t\tface.vertexNormals[ 1 ] = vertices[ face.b ].clone();\n\t\t\tface.vertexNormals[ 2 ] = vertices[ face.c ].clone();\n\n\t\t}\n\n\t},\n\n\tcomputeMorphNormals: function () {\n\n\t\tvar i, il, f, fl, face;\n\n\t\t// save original normals\n\t\t// - create temp variables on first access\n\t\t//   otherwise just copy (for faster repeated calls)\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tif ( ! face.__originalFaceNormal ) {\n\n\t\t\t\tface.__originalFaceNormal = face.normal.clone();\n\n\t\t\t} else {\n\n\t\t\t\tface.__originalFaceNormal.copy( face.normal );\n\n\t\t\t}\n\n\t\t\tif ( ! face.__originalVertexNormals ) face.__originalVertexNormals = [];\n\n\t\t\tfor ( i = 0, il = face.vertexNormals.length; i < il; i ++ ) {\n\n\t\t\t\tif ( ! face.__originalVertexNormals[ i ] ) {\n\n\t\t\t\t\tface.__originalVertexNormals[ i ] = face.vertexNormals[ i ].clone();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tface.__originalVertexNormals[ i ].copy( face.vertexNormals[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// use temp geometry to compute face and vertex normals for each morph\n\n\t\tvar tmpGeo = new THREE.Geometry();\n\t\ttmpGeo.faces = this.faces;\n\n\t\tfor ( i = 0, il = this.morphTargets.length; i < il; i ++ ) {\n\n\t\t\t// create on first access\n\n\t\t\tif ( ! this.morphNormals[ i ] ) {\n\n\t\t\t\tthis.morphNormals[ i ] = {};\n\t\t\t\tthis.morphNormals[ i ].faceNormals = [];\n\t\t\t\tthis.morphNormals[ i ].vertexNormals = [];\n\n\t\t\t\tvar dstNormalsFace = this.morphNormals[ i ].faceNormals;\n\t\t\t\tvar dstNormalsVertex = this.morphNormals[ i ].vertexNormals;\n\n\t\t\t\tvar faceNormal, vertexNormals;\n\n\t\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\t\tfaceNormal = new THREE.Vector3();\n\t\t\t\t\tvertexNormals = { a: new THREE.Vector3(), b: new THREE.Vector3(), c: new THREE.Vector3() };\n\n\t\t\t\t\tdstNormalsFace.push( faceNormal );\n\t\t\t\t\tdstNormalsVertex.push( vertexNormals );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar morphNormals = this.morphNormals[ i ];\n\n\t\t\t// set vertices to morph target\n\n\t\t\ttmpGeo.vertices = this.morphTargets[ i ].vertices;\n\n\t\t\t// compute morph normals\n\n\t\t\ttmpGeo.computeFaceNormals();\n\t\t\ttmpGeo.computeVertexNormals();\n\n\t\t\t// store morph normals\n\n\t\t\tvar faceNormal, vertexNormals;\n\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\tfaceNormal = morphNormals.faceNormals[ f ];\n\t\t\t\tvertexNormals = morphNormals.vertexNormals[ f ];\n\n\t\t\t\tfaceNormal.copy( face.normal );\n\n\t\t\t\tvertexNormals.a.copy( face.vertexNormals[ 0 ] );\n\t\t\t\tvertexNormals.b.copy( face.vertexNormals[ 1 ] );\n\t\t\t\tvertexNormals.c.copy( face.vertexNormals[ 2 ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// restore original normals\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tface.normal = face.__originalFaceNormal;\n\t\t\tface.vertexNormals = face.__originalVertexNormals;\n\n\t\t}\n\n\t},\n\n\tcomputeTangents: function () {\n\n\t\t// based on http://www.terathon.com/code/tangent.html\n\t\t// tangents go to vertices\n\n\t\tvar f, fl, v, vl, i, il, vertexIndex,\n\t\t\tface, uv, vA, vB, vC, uvA, uvB, uvC,\n\t\t\tx1, x2, y1, y2, z1, z2,\n\t\t\ts1, s2, t1, t2, r, t, test,\n\t\t\ttan1 = [], tan2 = [],\n\t\t\tsdir = new THREE.Vector3(), tdir = new THREE.Vector3(),\n\t\t\ttmp = new THREE.Vector3(), tmp2 = new THREE.Vector3(),\n\t\t\tn = new THREE.Vector3(), w;\n\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\n\n\t\t\ttan1[ v ] = new THREE.Vector3();\n\t\t\ttan2[ v ] = new THREE.Vector3();\n\n\t\t}\n\n\t\tfunction handleTriangle( context, a, b, c, ua, ub, uc ) {\n\n\t\t\tvA = context.vertices[ a ];\n\t\t\tvB = context.vertices[ b ];\n\t\t\tvC = context.vertices[ c ];\n\n\t\t\tuvA = uv[ ua ];\n\t\t\tuvB = uv[ ub ];\n\t\t\tuvC = uv[ uc ];\n\n\t\t\tx1 = vB.x - vA.x;\n\t\t\tx2 = vC.x - vA.x;\n\t\t\ty1 = vB.y - vA.y;\n\t\t\ty2 = vC.y - vA.y;\n\t\t\tz1 = vB.z - vA.z;\n\t\t\tz2 = vC.z - vA.z;\n\n\t\t\ts1 = uvB.x - uvA.x;\n\t\t\ts2 = uvC.x - uvA.x;\n\t\t\tt1 = uvB.y - uvA.y;\n\t\t\tt2 = uvC.y - uvA.y;\n\n\t\t\tr = 1.0 / ( s1 * t2 - s2 * t1 );\n\t\t\tsdir.set( ( t2 * x1 - t1 * x2 ) * r,\n\t\t\t\t\t  ( t2 * y1 - t1 * y2 ) * r,\n\t\t\t\t\t  ( t2 * z1 - t1 * z2 ) * r );\n\t\t\ttdir.set( ( s1 * x2 - s2 * x1 ) * r,\n\t\t\t\t\t  ( s1 * y2 - s2 * y1 ) * r,\n\t\t\t\t\t  ( s1 * z2 - s2 * z1 ) * r );\n\n\t\t\ttan1[ a ].add( sdir );\n\t\t\ttan1[ b ].add( sdir );\n\t\t\ttan1[ c ].add( sdir );\n\n\t\t\ttan2[ a ].add( tdir );\n\t\t\ttan2[ b ].add( tdir );\n\t\t\ttan2[ c ].add( tdir );\n\n\t\t}\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\t\t\tuv = this.faceVertexUvs[ 0 ][ f ]; // use UV layer 0 for tangents\n\n\t\t\thandleTriangle( this, face.a, face.b, face.c, 0, 1, 2 );\n\n\t\t}\n\n\t\tvar faceIndex = [ 'a', 'b', 'c', 'd' ];\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tfor ( i = 0; i < Math.min( face.vertexNormals.length, 3 ); i ++ ) {\n\n\t\t\t\tn.copy( face.vertexNormals[ i ] );\n\n\t\t\t\tvertexIndex = face[ faceIndex[ i ] ];\n\n\t\t\t\tt = tan1[ vertexIndex ];\n\n\t\t\t\t// Gram-Schmidt orthogonalize\n\n\t\t\t\ttmp.copy( t );\n\t\t\t\ttmp.sub( n.multiplyScalar( n.dot( t ) ) ).normalize();\n\n\t\t\t\t// Calculate handedness\n\n\t\t\t\ttmp2.crossVectors( face.vertexNormals[ i ], t );\n\t\t\t\ttest = tmp2.dot( tan2[ vertexIndex ] );\n\t\t\t\tw = ( test < 0.0 ) ? - 1.0 : 1.0;\n\n\t\t\t\tface.vertexTangents[ i ] = new THREE.Vector4( tmp.x, tmp.y, tmp.z, w );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.hasTangents = true;\n\n\t},\n\n\tcomputeLineDistances: function () {\n\n\t\tvar d = 0;\n\t\tvar vertices = this.vertices;\n\n\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\n\n\t\t\tif ( i > 0 ) {\n\n\t\t\t\td += vertices[ i ].distanceTo( vertices[ i - 1 ] );\n\n\t\t\t}\n\n\t\t\tthis.lineDistances[ i ] = d;\n\n\t\t}\n\n\t},\n\n\tcomputeBoundingBox: function () {\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new THREE.Box3();\n\n\t\t}\n\n\t\tthis.boundingBox.setFromPoints( this.vertices );\n\n\t},\n\n\tcomputeBoundingSphere: function () {\n\n\t\tif ( this.boundingSphere === null ) {\n\n\t\t\tthis.boundingSphere = new THREE.Sphere();\n\n\t\t}\n\n\t\tthis.boundingSphere.setFromPoints( this.vertices );\n\n\t},\n\n\tmerge: function ( geometry, matrix, materialIndexOffset ) {\n\n\t\tif ( geometry instanceof THREE.Geometry === false ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.', geometry );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar normalMatrix,\n\t\tvertexOffset = this.vertices.length,\n\t\tvertices1 = this.vertices,\n\t\tvertices2 = geometry.vertices,\n\t\tfaces1 = this.faces,\n\t\tfaces2 = geometry.faces,\n\t\tuvs1 = this.faceVertexUvs[ 0 ],\n\t\tuvs2 = geometry.faceVertexUvs[ 0 ];\n\n\t\tif ( materialIndexOffset === undefined ) materialIndexOffset = 0;\n\n\t\tif ( matrix !== undefined ) {\n\n\t\t\tnormalMatrix = new THREE.Matrix3().getNormalMatrix( matrix );\n\n\t\t}\n\n\t\t// vertices\n\n\t\tfor ( var i = 0, il = vertices2.length; i < il; i ++ ) {\n\n\t\t\tvar vertex = vertices2[ i ];\n\n\t\t\tvar vertexCopy = vertex.clone();\n\n\t\t\tif ( matrix !== undefined ) vertexCopy.applyMatrix4( matrix );\n\n\t\t\tvertices1.push( vertexCopy );\n\n\t\t}\n\n\t\t// faces\n\n\t\tfor ( i = 0, il = faces2.length; i < il; i ++ ) {\n\n\t\t\tvar face = faces2[ i ], faceCopy, normal, color,\n\t\t\tfaceVertexNormals = face.vertexNormals,\n\t\t\tfaceVertexColors = face.vertexColors;\n\n\t\t\tfaceCopy = new THREE.Face3( face.a + vertexOffset, face.b + vertexOffset, face.c + vertexOffset );\n\t\t\tfaceCopy.normal.copy( face.normal );\n\n\t\t\tif ( normalMatrix !== undefined ) {\n\n\t\t\t\tfaceCopy.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t}\n\n\t\t\tfor ( var j = 0, jl = faceVertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\tnormal = faceVertexNormals[ j ].clone();\n\n\t\t\t\tif ( normalMatrix !== undefined ) {\n\n\t\t\t\t\tnormal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t\t}\n\n\t\t\t\tfaceCopy.vertexNormals.push( normal );\n\n\t\t\t}\n\n\t\t\tfaceCopy.color.copy( face.color );\n\n\t\t\tfor ( var j = 0, jl = faceVertexColors.length; j < jl; j ++ ) {\n\n\t\t\t\tcolor = faceVertexColors[ j ];\n\t\t\t\tfaceCopy.vertexColors.push( color.clone() );\n\n\t\t\t}\n\n\t\t\tfaceCopy.materialIndex = face.materialIndex + materialIndexOffset;\n\n\t\t\tfaces1.push( faceCopy );\n\n\t\t}\n\n\t\t// uvs\n\n\t\tfor ( i = 0, il = uvs2.length; i < il; i ++ ) {\n\n\t\t\tvar uv = uvs2[ i ], uvCopy = [];\n\n\t\t\tif ( uv === undefined ) {\n\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tfor ( var j = 0, jl = uv.length; j < jl; j ++ ) {\n\n\t\t\t\tuvCopy.push( new THREE.Vector2( uv[ j ].x, uv[ j ].y ) );\n\n\t\t\t}\n\n\t\t\tuvs1.push( uvCopy );\n\n\t\t}\n\n\t},\n\n\t/*\n\t * Checks for duplicate vertices with hashmap.\n\t * Duplicated vertices are removed\n\t * and faces' vertices are updated.\n\t */\n\n\tmergeVertices: function () {\n\n\t\tvar verticesMap = {}; // Hashmap for looking up vertice by position coordinates (and making sure they are unique)\n\t\tvar unique = [], changes = [];\n\n\t\tvar v, key;\n\t\tvar precisionPoints = 4; // number of decimal points, eg. 4 for epsilon of 0.0001\n\t\tvar precision = Math.pow( 10, precisionPoints );\n\t\tvar i,il, face;\n\t\tvar indices, k, j, jl, u;\n\n\t\tfor ( i = 0, il = this.vertices.length; i < il; i ++ ) {\n\n\t\t\tv = this.vertices[ i ];\n\t\t\tkey = Math.round( v.x * precision ) + '_' + Math.round( v.y * precision ) + '_' + Math.round( v.z * precision );\n\n\t\t\tif ( verticesMap[ key ] === undefined ) {\n\n\t\t\t\tverticesMap[ key ] = i;\n\t\t\t\tunique.push( this.vertices[ i ] );\n\t\t\t\tchanges[ i ] = unique.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\t//console.log('Duplicate vertex found. ', i, ' could be using ', verticesMap[key]);\n\t\t\t\tchanges[ i ] = changes[ verticesMap[ key ] ];\n\n\t\t\t}\n\n\t\t};\n\n\n\t\t// if faces are completely degenerate after merging vertices, we\n\t\t// have to remove them from the geometry.\n\t\tvar faceIndicesToRemove = [];\n\n\t\tfor ( i = 0, il = this.faces.length; i < il; i ++ ) {\n\n\t\t\tface = this.faces[ i ];\n\n\t\t\tface.a = changes[ face.a ];\n\t\t\tface.b = changes[ face.b ];\n\t\t\tface.c = changes[ face.c ];\n\n\t\t\tindices = [ face.a, face.b, face.c ];\n\n\t\t\tvar dupIndex = - 1;\n\n\t\t\t// if any duplicate vertices are found in a Face3\n\t\t\t// we have to remove the face as nothing can be saved\n\t\t\tfor ( var n = 0; n < 3; n ++ ) {\n\t\t\t\tif ( indices[ n ] == indices[ ( n + 1 ) % 3 ] ) {\n\n\t\t\t\t\tdupIndex = n;\n\t\t\t\t\tfaceIndicesToRemove.push( i );\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( i = faceIndicesToRemove.length - 1; i >= 0; i -- ) {\n\t\t\tvar idx = faceIndicesToRemove[ i ];\n\n\t\t\tthis.faces.splice( idx, 1 );\n\n\t\t\tfor ( j = 0, jl = this.faceVertexUvs.length; j < jl; j ++ ) {\n\n\t\t\t\tthis.faceVertexUvs[ j ].splice( idx, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Use unique set of vertices\n\n\t\tvar diff = this.vertices.length - unique.length;\n\t\tthis.vertices = unique;\n\t\treturn diff;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar output = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.0,\n\t\t\t\ttype: 'BufferGeometry',\n\t\t\t\tgenerator: 'BufferGeometryExporter'\n\t\t\t},\n\t\t\tuuid: this.uuid,\n\t\t\ttype: this.type\n\t\t};\n\n\t\tif ( this.name !== \"\" ) output.name = this.name;\n\n\t\tif ( this.parameters !== undefined ) {\n\n\t\t\tvar parameters = this.parameters;\n\n\t\t\tfor ( var key in parameters ) {\n\n\t\t\t\tif ( parameters[ key ] !== undefined ) output[ key ] = parameters[ key ];\n\n\t\t\t}\n\n\t\t\treturn output;\n\n\t\t}\n\n\t\tvar vertices = [];\n\n\t\tfor ( var i = 0; i < this.vertices.length; i ++ ) {\n\n\t\t\tvar vertex = this.vertices[ i ];\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t}\n\n\t\tvar faces = [];\n\t\tvar normals = [];\n\t\tvar normalsHash = {};\n\t\tvar colors = [];\n\t\tvar colorsHash = {};\n\t\tvar uvs = [];\n\t\tvar uvsHash = {};\n\n\t\tfor ( var i = 0; i < this.faces.length; i ++ ) {\n\n\t\t\tvar face = this.faces[ i ];\n\n\t\t\tvar hasMaterial = false; // face.materialIndex !== undefined;\n\t\t\tvar hasFaceUv = false; // deprecated\n\t\t\tvar hasFaceVertexUv = this.faceVertexUvs[ 0 ][ i ] !== undefined;\n\t\t\tvar hasFaceNormal = face.normal.length() > 0;\n\t\t\tvar hasFaceVertexNormal = face.vertexNormals.length > 0;\n\t\t\tvar hasFaceColor = face.color.r !== 1 || face.color.g !== 1 || face.color.b !== 1;\n\t\t\tvar hasFaceVertexColor = face.vertexColors.length > 0;\n\n\t\t\tvar faceType = 0;\n\n\t\t\tfaceType = setBit( faceType, 0, 0 );\n\t\t\tfaceType = setBit( faceType, 1, hasMaterial );\n\t\t\tfaceType = setBit( faceType, 2, hasFaceUv );\n\t\t\tfaceType = setBit( faceType, 3, hasFaceVertexUv );\n\t\t\tfaceType = setBit( faceType, 4, hasFaceNormal );\n\t\t\tfaceType = setBit( faceType, 5, hasFaceVertexNormal );\n\t\t\tfaceType = setBit( faceType, 6, hasFaceColor );\n\t\t\tfaceType = setBit( faceType, 7, hasFaceVertexColor );\n\n\t\t\tfaces.push( faceType );\n\t\t\tfaces.push( face.a, face.b, face.c );\n\n\n\t\t\t/*\n\t\t\tif ( hasMaterial ) {\n\n\t\t\t\tfaces.push( face.materialIndex );\n\n\t\t\t}\n\t\t\t*/\n\n\t\t\tif ( hasFaceVertexUv ) {\n\n\t\t\t\tvar faceVertexUvs = this.faceVertexUvs[ 0 ][ i ];\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 0 ] ),\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 1 ] ),\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( hasFaceNormal ) {\n\n\t\t\t\tfaces.push( getNormalIndex( face.normal ) );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexNormal ) {\n\n\t\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 0 ] ),\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 1 ] ),\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( hasFaceColor ) {\n\n\t\t\t\tfaces.push( getColorIndex( face.color ) );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexColor ) {\n\n\t\t\t\tvar vertexColors = face.vertexColors;\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetColorIndex( vertexColors[ 0 ] ),\n\t\t\t\t\tgetColorIndex( vertexColors[ 1 ] ),\n\t\t\t\t\tgetColorIndex( vertexColors[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction setBit( value, position, enabled ) {\n\n\t\t\treturn enabled ? value | ( 1 << position ) : value & ( ~ ( 1 << position) );\n\n\t\t}\n\n\t\tfunction getNormalIndex( normal ) {\n\n\t\t\tvar hash = normal.x.toString() + normal.y.toString() + normal.z.toString();\n\n\t\t\tif ( normalsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn normalsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tnormalsHash[ hash ] = normals.length / 3;\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\treturn normalsHash[ hash ];\n\n\t\t}\n\n\t\tfunction getColorIndex( color ) {\n\n\t\t\tvar hash = color.r.toString() + color.g.toString() + color.b.toString();\n\n\t\t\tif ( colorsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn colorsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tcolorsHash[ hash ] = colors.length;\n\t\t\tcolors.push( color.getHex() );\n\n\t\t\treturn colorsHash[ hash ];\n\n\t\t}\n\n\t\tfunction getUvIndex( uv ) {\n\n\t\t\tvar hash = uv.x.toString() + uv.y.toString();\n\n\t\t\tif ( uvsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn uvsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tuvsHash[ hash ] = uvs.length / 2;\n\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\treturn uvsHash[ hash ];\n\n\t\t}\n\n\t\toutput.data = {};\n\n\t\toutput.data.vertices = vertices;\n\t\toutput.data.normals = normals;\n\t\tif ( colors.length > 0 ) output.data.colors = colors;\n\t\tif ( uvs.length > 0 ) output.data.uvs = [ uvs ]; // temporal backward compatibility\n\t\toutput.data.faces = faces;\n\n\t\t//\n\n\t\treturn output;\n\n\t},\n\n\tclone: function () {\n\n\t\tvar geometry = new THREE.Geometry();\n\n\t\tvar vertices = this.vertices;\n\n\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\n\n\t\t\tgeometry.vertices.push( vertices[ i ].clone() );\n\n\t\t}\n\n\t\tvar faces = this.faces;\n\n\t\tfor ( var i = 0, il = faces.length; i < il; i ++ ) {\n\n\t\t\tgeometry.faces.push( faces[ i ].clone() );\n\n\t\t}\n\n\t\tvar uvs = this.faceVertexUvs[ 0 ];\n\n\t\tfor ( var i = 0, il = uvs.length; i < il; i ++ ) {\n\n\t\t\tvar uv = uvs[ i ], uvCopy = [];\n\n\t\t\tfor ( var j = 0, jl = uv.length; j < jl; j ++ ) {\n\n\t\t\t\tuvCopy.push( new THREE.Vector2( uv[ j ].x, uv[ j ].y ) );\n\n\t\t\t}\n\n\t\t\tgeometry.faceVertexUvs[ 0 ].push( uvCopy );\n\n\t\t}\n\n\t\treturn geometry;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n};\n\nTHREE.EventDispatcher.prototype.apply( THREE.Geometry.prototype );\n\nTHREE.GeometryIdCount = 0;\n\n// File:src/cameras/Camera.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n * @author WestLangley / http://github.com/WestLangley\n*/\n\nTHREE.Camera = function () {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.type = 'Camera';\n\n\tthis.matrixWorldInverse = new THREE.Matrix4();\n\tthis.projectionMatrix = new THREE.Matrix4();\n\n};\n\nTHREE.Camera.prototype = Object.create( THREE.Object3D.prototype );\n\nTHREE.Camera.prototype.getWorldDirection = function () {\n\n\tvar quaternion = new THREE.Quaternion();\n\n\treturn function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\tthis.getWorldQuaternion( quaternion );\n\n\t\treturn result.set( 0, 0, - 1 ).applyQuaternion( quaternion );\n\n\t}\n\n}();\n\nTHREE.Camera.prototype.lookAt = function () {\n\n\t// This routine does not support cameras with rotated and/or translated parent(s)\n\n\tvar m1 = new THREE.Matrix4();\n\n\treturn function ( vector ) {\n\n\t\tm1.lookAt( this.position, vector, this.up );\n\n\t\tthis.quaternion.setFromRotationMatrix( m1 );\n\n\t};\n\n}();\n\nTHREE.Camera.prototype.clone = function ( camera ) {\n\n\tif ( camera === undefined ) camera = new THREE.Camera();\n\n\tTHREE.Object3D.prototype.clone.call( this, camera );\n\n\tcamera.matrixWorldInverse.copy( this.matrixWorldInverse );\n\tcamera.projectionMatrix.copy( this.projectionMatrix );\n\n\treturn camera;\n};\n\n// File:src/cameras/CubeCamera.js\n\n/**\n * Camera for rendering cube maps\n *\t- renders scene into axis-aligned cube\n *\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.CubeCamera = function ( near, far, cubeResolution ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.type = 'CubeCamera';\n\n\tvar fov = 90, aspect = 1;\n\n\tvar cameraPX = new THREE.PerspectiveCamera( fov, aspect, near, far );\n\tcameraPX.up.set( 0, - 1, 0 );\n\tcameraPX.lookAt( new THREE.Vector3( 1, 0, 0 ) );\n\tthis.add( cameraPX );\n\n\tvar cameraNX = new THREE.PerspectiveCamera( fov, aspect, near, far );\n\tcameraNX.up.set( 0, - 1, 0 );\n\tcameraNX.lookAt( new THREE.Vector3( - 1, 0, 0 ) );\n\tthis.add( cameraNX );\n\n\tvar cameraPY = new THREE.PerspectiveCamera( fov, aspect, near, far );\n\tcameraPY.up.set( 0, 0, 1 );\n\tcameraPY.lookAt( new THREE.Vector3( 0, 1, 0 ) );\n\tthis.add( cameraPY );\n\n\tvar cameraNY = new THREE.PerspectiveCamera( fov, aspect, near, far );\n\tcameraNY.up.set( 0, 0, - 1 );\n\tcameraNY.lookAt( new THREE.Vector3( 0, - 1, 0 ) );\n\tthis.add( cameraNY );\n\n\tvar cameraPZ = new THREE.PerspectiveCamera( fov, aspect, near, far );\n\tcameraPZ.up.set( 0, - 1, 0 );\n\tcameraPZ.lookAt( new THREE.Vector3( 0, 0, 1 ) );\n\tthis.add( cameraPZ );\n\n\tvar cameraNZ = new THREE.PerspectiveCamera( fov, aspect, near, far );\n\tcameraNZ.up.set( 0, - 1, 0 );\n\tcameraNZ.lookAt( new THREE.Vector3( 0, 0, - 1 ) );\n\tthis.add( cameraNZ );\n\n\tthis.renderTarget = new THREE.WebGLRenderTargetCube( cubeResolution, cubeResolution, { format: THREE.RGBFormat, magFilter: THREE.LinearFilter, minFilter: THREE.LinearFilter } );\n\n\tthis.updateCubeMap = function ( renderer, scene ) {\n\n\t\tvar renderTarget = this.renderTarget;\n\t\tvar generateMipmaps = renderTarget.generateMipmaps;\n\n\t\trenderTarget.generateMipmaps = false;\n\n\t\trenderTarget.activeCubeFace = 0;\n\t\trenderer.render( scene, cameraPX, renderTarget );\n\n\t\trenderTarget.activeCubeFace = 1;\n\t\trenderer.render( scene, cameraNX, renderTarget );\n\n\t\trenderTarget.activeCubeFace = 2;\n\t\trenderer.render( scene, cameraPY, renderTarget );\n\n\t\trenderTarget.activeCubeFace = 3;\n\t\trenderer.render( scene, cameraNY, renderTarget );\n\n\t\trenderTarget.activeCubeFace = 4;\n\t\trenderer.render( scene, cameraPZ, renderTarget );\n\n\t\trenderTarget.generateMipmaps = generateMipmaps;\n\n\t\trenderTarget.activeCubeFace = 5;\n\t\trenderer.render( scene, cameraNZ, renderTarget );\n\n\t};\n\n};\n\nTHREE.CubeCamera.prototype = Object.create( THREE.Object3D.prototype );\n\n// File:src/cameras/OrthographicCamera.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.OrthographicCamera = function ( left, right, top, bottom, near, far ) {\n\n\tTHREE.Camera.call( this );\n\n\tthis.type = 'OrthographicCamera';\n\n\tthis.zoom = 1;\n\n\tthis.left = left;\n\tthis.right = right;\n\tthis.top = top;\n\tthis.bottom = bottom;\n\n\tthis.near = ( near !== undefined ) ? near : 0.1;\n\tthis.far = ( far !== undefined ) ? far : 2000;\n\n\tthis.updateProjectionMatrix();\n\n};\n\nTHREE.OrthographicCamera.prototype = Object.create( THREE.Camera.prototype );\n\nTHREE.OrthographicCamera.prototype.updateProjectionMatrix = function () {\n\n\tvar dx = ( this.right - this.left ) / ( 2 * this.zoom );\n\tvar dy = ( this.top - this.bottom ) / ( 2 * this.zoom );\n\tvar cx = ( this.right + this.left ) / 2;\n\tvar cy = ( this.top + this.bottom ) / 2;\n\n\tthis.projectionMatrix.makeOrthographic( cx - dx, cx + dx, cy + dy, cy - dy, this.near, this.far );\n\n};\n\nTHREE.OrthographicCamera.prototype.clone = function () {\n\n\tvar camera = new THREE.OrthographicCamera();\n\n\tTHREE.Camera.prototype.clone.call( this, camera );\n\n\tcamera.zoom = this.zoom;\n\n\tcamera.left = this.left;\n\tcamera.right = this.right;\n\tcamera.top = this.top;\n\tcamera.bottom = this.bottom;\n\n\tcamera.near = this.near;\n\tcamera.far = this.far;\n\n\tcamera.projectionMatrix.copy( this.projectionMatrix );\n\n\treturn camera;\n};\n\n// File:src/cameras/PerspectiveCamera.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author greggman / http://games.greggman.com/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n */\n\nTHREE.PerspectiveCamera = function ( fov, aspect, near, far ) {\n\n\tTHREE.Camera.call( this );\n\n\tthis.type = 'PerspectiveCamera';\n\n\tthis.zoom = 1;\n\n\tthis.fov = fov !== undefined ? fov : 50;\n\tthis.aspect = aspect !== undefined ? aspect : 1;\n\tthis.near = near !== undefined ? near : 0.1;\n\tthis.far = far !== undefined ? far : 2000;\n\n\tthis.updateProjectionMatrix();\n\n};\n\nTHREE.PerspectiveCamera.prototype = Object.create( THREE.Camera.prototype );\n\n\n/**\n * Uses Focal Length (in mm) to estimate and set FOV\n * 35mm (fullframe) camera is used if frame size is not specified;\n * Formula based on http://www.bobatkins.com/photography/technical/field_of_view.html\n */\n\nTHREE.PerspectiveCamera.prototype.setLens = function ( focalLength, frameHeight ) {\n\n\tif ( frameHeight === undefined ) frameHeight = 24;\n\n\tthis.fov = 2 * THREE.Math.radToDeg( Math.atan( frameHeight / ( focalLength * 2 ) ) );\n\tthis.updateProjectionMatrix();\n\n}\n\n\n/**\n * Sets an offset in a larger frustum. This is useful for multi-window or\n * multi-monitor/multi-machine setups.\n *\n * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\n * the monitors are in grid like this\n *\n *   +---+---+---+\n *   | A | B | C |\n *   +---+---+---+\n *   | D | E | F |\n *   +---+---+---+\n *\n * then for each monitor you would call it like this\n *\n *   var w = 1920;\n *   var h = 1080;\n *   var fullWidth = w * 3;\n *   var fullHeight = h * 2;\n *\n *   --A--\n *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\n *   --B--\n *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\n *   --C--\n *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\n *   --D--\n *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\n *   --E--\n *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\n *   --F--\n *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\n *\n *   Note there is no reason monitors have to be the same size or in a grid.\n */\n\nTHREE.PerspectiveCamera.prototype.setViewOffset = function ( fullWidth, fullHeight, x, y, width, height ) {\n\n\tthis.fullWidth = fullWidth;\n\tthis.fullHeight = fullHeight;\n\tthis.x = x;\n\tthis.y = y;\n\tthis.width = width;\n\tthis.height = height;\n\n\tthis.updateProjectionMatrix();\n\n};\n\n\nTHREE.PerspectiveCamera.prototype.updateProjectionMatrix = function () {\n\n\tvar fov = THREE.Math.radToDeg( 2 * Math.atan( Math.tan( THREE.Math.degToRad( this.fov ) * 0.5 ) / this.zoom ) );\n\n\tif ( this.fullWidth ) {\n\n\t\tvar aspect = this.fullWidth / this.fullHeight;\n\t\tvar top = Math.tan( THREE.Math.degToRad( fov * 0.5 ) ) * this.near;\n\t\tvar bottom = - top;\n\t\tvar left = aspect * bottom;\n\t\tvar right = aspect * top;\n\t\tvar width = Math.abs( right - left );\n\t\tvar height = Math.abs( top - bottom );\n\n\t\tthis.projectionMatrix.makeFrustum(\n\t\t\tleft + this.x * width / this.fullWidth,\n\t\t\tleft + ( this.x + this.width ) * width / this.fullWidth,\n\t\t\ttop - ( this.y + this.height ) * height / this.fullHeight,\n\t\t\ttop - this.y * height / this.fullHeight,\n\t\t\tthis.near,\n\t\t\tthis.far\n\t\t);\n\n\t} else {\n\n\t\tthis.projectionMatrix.makePerspective( fov, this.aspect, this.near, this.far );\n\n\t}\n\n};\n\nTHREE.PerspectiveCamera.prototype.clone = function () {\n\n\tvar camera = new THREE.PerspectiveCamera();\n\n\tTHREE.Camera.prototype.clone.call( this, camera );\n\n\tcamera.zoom = this.zoom;\n\n\tcamera.fov = this.fov;\n\tcamera.aspect = this.aspect;\n\tcamera.near = this.near;\n\tcamera.far = this.far;\n\n\tcamera.projectionMatrix.copy( this.projectionMatrix );\n\n\treturn camera;\n\n};\n\n// File:src/lights/Light.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.Light = function ( color ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.type = 'Light';\n\t\n\tthis.color = new THREE.Color( color );\n\n};\n\nTHREE.Light.prototype = Object.create( THREE.Object3D.prototype );\n\nTHREE.Light.prototype.clone = function ( light ) {\n\n\tif ( light === undefined ) light = new THREE.Light();\n\n\tTHREE.Object3D.prototype.clone.call( this, light );\n\n\tlight.color.copy( this.color );\n\n\treturn light;\n\n};\n\n// File:src/lights/AmbientLight.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.AmbientLight = function ( color ) {\n\n\tTHREE.Light.call( this, color );\n\n\tthis.type = 'AmbientLight';\n\n};\n\nTHREE.AmbientLight.prototype = Object.create( THREE.Light.prototype );\n\nTHREE.AmbientLight.prototype.clone = function () {\n\n\tvar light = new THREE.AmbientLight();\n\n\tTHREE.Light.prototype.clone.call( this, light );\n\n\treturn light;\n\n};\n\n// File:src/lights/AreaLight.js\n\n/**\n * @author MPanknin / http://www.redplant.de/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.AreaLight = function ( color, intensity ) {\n\n\tTHREE.Light.call( this, color );\n\n\tthis.type = 'AreaLight';\n\n\tthis.normal = new THREE.Vector3( 0, - 1, 0 );\n\tthis.right = new THREE.Vector3( 1, 0, 0 );\n\n\tthis.intensity = ( intensity !== undefined ) ? intensity : 1;\n\n\tthis.width = 1.0;\n\tthis.height = 1.0;\n\n\tthis.constantAttenuation = 1.5;\n\tthis.linearAttenuation = 0.5;\n\tthis.quadraticAttenuation = 0.1;\n\n};\n\nTHREE.AreaLight.prototype = Object.create( THREE.Light.prototype );\n\n\n// File:src/lights/DirectionalLight.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.DirectionalLight = function ( color, intensity ) {\n\n\tTHREE.Light.call( this, color );\n\n\tthis.type = 'DirectionalLight';\n\n\tthis.position.set( 0, 1, 0 );\n\tthis.target = new THREE.Object3D();\n\n\tthis.intensity = ( intensity !== undefined ) ? intensity : 1;\n\n\tthis.castShadow = false;\n\tthis.onlyShadow = false;\n\n\t//\n\n\tthis.shadowCameraNear = 50;\n\tthis.shadowCameraFar = 5000;\n\n\tthis.shadowCameraLeft = - 500;\n\tthis.shadowCameraRight = 500;\n\tthis.shadowCameraTop = 500;\n\tthis.shadowCameraBottom = - 500;\n\n\tthis.shadowCameraVisible = false;\n\n\tthis.shadowBias = 0;\n\tthis.shadowDarkness = 0.5;\n\n\tthis.shadowMapWidth = 512;\n\tthis.shadowMapHeight = 512;\n\n\t//\n\n\tthis.shadowCascade = false;\n\n\tthis.shadowCascadeOffset = new THREE.Vector3( 0, 0, - 1000 );\n\tthis.shadowCascadeCount = 2;\n\n\tthis.shadowCascadeBias = [ 0, 0, 0 ];\n\tthis.shadowCascadeWidth = [ 512, 512, 512 ];\n\tthis.shadowCascadeHeight = [ 512, 512, 512 ];\n\n\tthis.shadowCascadeNearZ = [ - 1.000, 0.990, 0.998 ];\n\tthis.shadowCascadeFarZ  = [  0.990, 0.998, 1.000 ];\n\n\tthis.shadowCascadeArray = [];\n\n\t//\n\n\tthis.shadowMap = null;\n\tthis.shadowMapSize = null;\n\tthis.shadowCamera = null;\n\tthis.shadowMatrix = null;\n\n};\n\nTHREE.DirectionalLight.prototype = Object.create( THREE.Light.prototype );\n\nTHREE.DirectionalLight.prototype.clone = function () {\n\n\tvar light = new THREE.DirectionalLight();\n\n\tTHREE.Light.prototype.clone.call( this, light );\n\n\tlight.target = this.target.clone();\n\n\tlight.intensity = this.intensity;\n\n\tlight.castShadow = this.castShadow;\n\tlight.onlyShadow = this.onlyShadow;\n\n\t//\n\n\tlight.shadowCameraNear = this.shadowCameraNear;\n\tlight.shadowCameraFar = this.shadowCameraFar;\n\n\tlight.shadowCameraLeft = this.shadowCameraLeft;\n\tlight.shadowCameraRight = this.shadowCameraRight;\n\tlight.shadowCameraTop = this.shadowCameraTop;\n\tlight.shadowCameraBottom = this.shadowCameraBottom;\n\n\tlight.shadowCameraVisible = this.shadowCameraVisible;\n\n\tlight.shadowBias = this.shadowBias;\n\tlight.shadowDarkness = this.shadowDarkness;\n\n\tlight.shadowMapWidth = this.shadowMapWidth;\n\tlight.shadowMapHeight = this.shadowMapHeight;\n\n\t//\n\n\tlight.shadowCascade = this.shadowCascade;\n\n\tlight.shadowCascadeOffset.copy( this.shadowCascadeOffset );\n\tlight.shadowCascadeCount = this.shadowCascadeCount;\n\n\tlight.shadowCascadeBias = this.shadowCascadeBias.slice( 0 );\n\tlight.shadowCascadeWidth = this.shadowCascadeWidth.slice( 0 );\n\tlight.shadowCascadeHeight = this.shadowCascadeHeight.slice( 0 );\n\n\tlight.shadowCascadeNearZ = this.shadowCascadeNearZ.slice( 0 );\n\tlight.shadowCascadeFarZ  = this.shadowCascadeFarZ.slice( 0 );\n\n\treturn light;\n\n};\n\n// File:src/lights/HemisphereLight.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.HemisphereLight = function ( skyColor, groundColor, intensity ) {\n\n\tTHREE.Light.call( this, skyColor );\n\n\tthis.type = 'HemisphereLight';\n\n\tthis.position.set( 0, 100, 0 );\n\n\tthis.groundColor = new THREE.Color( groundColor );\n\tthis.intensity = ( intensity !== undefined ) ? intensity : 1;\n\n};\n\nTHREE.HemisphereLight.prototype = Object.create( THREE.Light.prototype );\n\nTHREE.HemisphereLight.prototype.clone = function () {\n\n\tvar light = new THREE.HemisphereLight();\n\n\tTHREE.Light.prototype.clone.call( this, light );\n\n\tlight.groundColor.copy( this.groundColor );\n\tlight.intensity = this.intensity;\n\n\treturn light;\n\n};\n\n// File:src/lights/PointLight.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.PointLight = function ( color, intensity, distance ) {\n\n\tTHREE.Light.call( this, color );\n\n\tthis.type = 'PointLight';\n\n\tthis.intensity = ( intensity !== undefined ) ? intensity : 1;\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\n\n};\n\nTHREE.PointLight.prototype = Object.create( THREE.Light.prototype );\n\nTHREE.PointLight.prototype.clone = function () {\n\n\tvar light = new THREE.PointLight();\n\n\tTHREE.Light.prototype.clone.call( this, light );\n\n\tlight.intensity = this.intensity;\n\tlight.distance = this.distance;\n\n\treturn light;\n\n};\n\n// File:src/lights/SpotLight.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.SpotLight = function ( color, intensity, distance, angle, exponent ) {\n\n\tTHREE.Light.call( this, color );\n\n\tthis.type = 'SpotLight';\n\n\tthis.position.set( 0, 1, 0 );\n\tthis.target = new THREE.Object3D();\n\n\tthis.intensity = ( intensity !== undefined ) ? intensity : 1;\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\n\tthis.angle = ( angle !== undefined ) ? angle : Math.PI / 3;\n\tthis.exponent = ( exponent !== undefined ) ? exponent : 10;\n\n\tthis.castShadow = false;\n\tthis.onlyShadow = false;\n\n\t//\n\n\tthis.shadowCameraNear = 50;\n\tthis.shadowCameraFar = 5000;\n\tthis.shadowCameraFov = 50;\n\n\tthis.shadowCameraVisible = false;\n\n\tthis.shadowBias = 0;\n\tthis.shadowDarkness = 0.5;\n\n\tthis.shadowMapWidth = 512;\n\tthis.shadowMapHeight = 512;\n\n\t//\n\n\tthis.shadowMap = null;\n\tthis.shadowMapSize = null;\n\tthis.shadowCamera = null;\n\tthis.shadowMatrix = null;\n\n};\n\nTHREE.SpotLight.prototype = Object.create( THREE.Light.prototype );\n\nTHREE.SpotLight.prototype.clone = function () {\n\n\tvar light = new THREE.SpotLight();\n\n\tTHREE.Light.prototype.clone.call( this, light );\n\n\tlight.target = this.target.clone();\n\n\tlight.intensity = this.intensity;\n\tlight.distance = this.distance;\n\tlight.angle = this.angle;\n\tlight.exponent = this.exponent;\n\n\tlight.castShadow = this.castShadow;\n\tlight.onlyShadow = this.onlyShadow;\n\n\t//\n\n\tlight.shadowCameraNear = this.shadowCameraNear;\n\tlight.shadowCameraFar = this.shadowCameraFar;\n\tlight.shadowCameraFov = this.shadowCameraFov;\n\n\tlight.shadowCameraVisible = this.shadowCameraVisible;\n\n\tlight.shadowBias = this.shadowBias;\n\tlight.shadowDarkness = this.shadowDarkness;\n\n\tlight.shadowMapWidth = this.shadowMapWidth;\n\tlight.shadowMapHeight = this.shadowMapHeight;\n\n\treturn light;\n\n};\n\n// File:src/loaders/Cache.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.Cache = function () {\n\n\tthis.files = {};\n\n};\n\nTHREE.Cache.prototype = {\n\n\tconstructor: THREE.Cache,\n\n\tadd: function ( key, file ) {\n\n\t\t// console.log( 'THREE.Cache', 'Adding key:', key );\n\n\t\tthis.files[ key ] = file;\n\n\t},\n\n\tget: function ( key ) {\n\n\t\t// console.log( 'THREE.Cache', 'Checking key:', key );\n\n\t\treturn this.files[ key ];\n\n\t},\n\n\tremove: function ( key ) {\n\n\t\tdelete this.files[ key ];\n\n\t},\n\n\tclear: function () {\n\n\t\tthis.files = {}\n\n\t}\n\n};\n\n// File:src/loaders/Loader.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.Loader = function ( showStatus ) {\n\n\tthis.showStatus = showStatus;\n\tthis.statusDomElement = showStatus ? THREE.Loader.prototype.addStatusElement() : null;\n\n\tthis.imageLoader = new THREE.ImageLoader();\n\n\tthis.onLoadStart = function () {};\n\tthis.onLoadProgress = function () {};\n\tthis.onLoadComplete = function () {};\n\n};\n\nTHREE.Loader.prototype = {\n\n\tconstructor: THREE.Loader,\n\n\tcrossOrigin: undefined,\n\n\taddStatusElement: function () {\n\n\t\tvar e = document.createElement( 'div' );\n\n\t\te.style.position = 'absolute';\n\t\te.style.right = '0px';\n\t\te.style.top = '0px';\n\t\te.style.fontSize = '0.8em';\n\t\te.style.textAlign = 'left';\n\t\te.style.background = 'rgba(0,0,0,0.25)';\n\t\te.style.color = '#fff';\n\t\te.style.width = '120px';\n\t\te.style.padding = '0.5em 0.5em 0.5em 0.5em';\n\t\te.style.zIndex = 1000;\n\n\t\te.innerHTML = 'Loading ...';\n\n\t\treturn e;\n\n\t},\n\n\tupdateProgress: function ( progress ) {\n\n\t\tvar message = 'Loaded ';\n\n\t\tif ( progress.total ) {\n\n\t\t\tmessage += ( 100 * progress.loaded / progress.total ).toFixed( 0 ) + '%';\n\n\n\t\t} else {\n\n\t\t\tmessage += ( progress.loaded / 1024 ).toFixed( 2 ) + ' KB';\n\n\t\t}\n\n\t\tthis.statusDomElement.innerHTML = message;\n\n\t},\n\n\textractUrlBase: function ( url ) {\n\n\t\tvar parts = url.split( '/' );\n\n\t\tif ( parts.length === 1 ) return './';\n\n\t\tparts.pop();\n\n\t\treturn parts.join( '/' ) + '/';\n\n\t},\n\n\tinitMaterials: function ( materials, texturePath ) {\n\n\t\tvar array = [];\n\n\t\tfor ( var i = 0; i < materials.length; ++ i ) {\n\n\t\t\tarray[ i ] = this.createMaterial( materials[ i ], texturePath );\n\n\t\t}\n\n\t\treturn array;\n\n\t},\n\n\tneedsTangents: function ( materials ) {\n\n\t\tfor ( var i = 0, il = materials.length; i < il; i ++ ) {\n\n\t\t\tvar m = materials[ i ];\n\n\t\t\tif ( m instanceof THREE.ShaderMaterial ) return true;\n\n\t\t}\n\n\t\treturn false;\n\n\t},\n\n\tcreateMaterial: function ( m, texturePath ) {\n\n\t\tvar scope = this;\n\n\t\tfunction nearest_pow2( n ) {\n\n\t\t\tvar l = Math.log( n ) / Math.LN2;\n\t\t\treturn Math.pow( 2, Math.round(  l ) );\n\n\t\t}\n\n\t\tfunction create_texture( where, name, sourceFile, repeat, offset, wrap, anisotropy ) {\n\n\t\t\tvar fullPath = texturePath + sourceFile;\n\n\t\t\tvar texture;\n\n\t\t\tvar loader = THREE.Loader.Handlers.get( fullPath );\n\n\t\t\tif ( loader !== null ) {\n\n\t\t\t\ttexture = loader.load( fullPath );\n\n\t\t\t} else {\n\n\t\t\t\ttexture = new THREE.Texture();\n\n\t\t\t\tloader = scope.imageLoader;\n\t\t\t\tloader.crossOrigin = scope.crossOrigin;\n\t\t\t\tloader.load( fullPath, function ( image ) {\n\n\t\t\t\t\tif ( THREE.Math.isPowerOfTwo( image.width ) === false ||\n\t\t\t\t\t\t THREE.Math.isPowerOfTwo( image.height ) === false ) {\n\n\t\t\t\t\t\tvar width = nearest_pow2( image.width );\n\t\t\t\t\t\tvar height = nearest_pow2( image.height );\n\n\t\t\t\t\t\tvar canvas = document.createElement( 'canvas' );\n\t\t\t\t\t\tcanvas.width = width;\n\t\t\t\t\t\tcanvas.height = height;\n\n\t\t\t\t\t\tvar context = canvas.getContext( '2d' );\n\t\t\t\t\t\tcontext.drawImage( image, 0, 0, width, height );\n\n\t\t\t\t\t\ttexture.image = canvas;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ttexture.image = image;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\ttexture.sourceFile = sourceFile;\n\n\t\t\tif ( repeat ) {\n\n\t\t\t\ttexture.repeat.set( repeat[ 0 ], repeat[ 1 ] );\n\n\t\t\t\tif ( repeat[ 0 ] !== 1 ) texture.wrapS = THREE.RepeatWrapping;\n\t\t\t\tif ( repeat[ 1 ] !== 1 ) texture.wrapT = THREE.RepeatWrapping;\n\n\t\t\t}\n\n\t\t\tif ( offset ) {\n\n\t\t\t\ttexture.offset.set( offset[ 0 ], offset[ 1 ] );\n\n\t\t\t}\n\n\t\t\tif ( wrap ) {\n\n\t\t\t\tvar wrapMap = {\n\t\t\t\t\t'repeat': THREE.RepeatWrapping,\n\t\t\t\t\t'mirror': THREE.MirroredRepeatWrapping\n\t\t\t\t}\n\n\t\t\t\tif ( wrapMap[ wrap[ 0 ] ] !== undefined ) texture.wrapS = wrapMap[ wrap[ 0 ] ];\n\t\t\t\tif ( wrapMap[ wrap[ 1 ] ] !== undefined ) texture.wrapT = wrapMap[ wrap[ 1 ] ];\n\n\t\t\t}\n\n\t\t\tif ( anisotropy ) {\n\n\t\t\t\ttexture.anisotropy = anisotropy;\n\n\t\t\t}\n\n\t\t\twhere[ name ] = texture;\n\n\t\t}\n\n\t\tfunction rgb2hex( rgb ) {\n\n\t\t\treturn ( rgb[ 0 ] * 255 << 16 ) + ( rgb[ 1 ] * 255 << 8 ) + rgb[ 2 ] * 255;\n\n\t\t}\n\n\t\t// defaults\n\n\t\tvar mtype = 'MeshLambertMaterial';\n\t\tvar mpars = { color: 0xeeeeee, opacity: 1.0, map: null, lightMap: null, normalMap: null, bumpMap: null, wireframe: false };\n\n\t\t// parameters from model file\n\n\t\tif ( m.shading ) {\n\n\t\t\tvar shading = m.shading.toLowerCase();\n\n\t\t\tif ( shading === 'phong' ) mtype = 'MeshPhongMaterial';\n\t\t\telse if ( shading === 'basic' ) mtype = 'MeshBasicMaterial';\n\n\t\t}\n\n\t\tif ( m.blending !== undefined && THREE[ m.blending ] !== undefined ) {\n\n\t\t\tmpars.blending = THREE[ m.blending ];\n\n\t\t}\n\n\t\tif ( m.transparent !== undefined || m.opacity < 1.0 ) {\n\n\t\t\tmpars.transparent = m.transparent;\n\n\t\t}\n\n\t\tif ( m.depthTest !== undefined ) {\n\n\t\t\tmpars.depthTest = m.depthTest;\n\n\t\t}\n\n\t\tif ( m.depthWrite !== undefined ) {\n\n\t\t\tmpars.depthWrite = m.depthWrite;\n\n\t\t}\n\n\t\tif ( m.visible !== undefined ) {\n\n\t\t\tmpars.visible = m.visible;\n\n\t\t}\n\n\t\tif ( m.flipSided !== undefined ) {\n\n\t\t\tmpars.side = THREE.BackSide;\n\n\t\t}\n\n\t\tif ( m.doubleSided !== undefined ) {\n\n\t\t\tmpars.side = THREE.DoubleSide;\n\n\t\t}\n\n\t\tif ( m.wireframe !== undefined ) {\n\n\t\t\tmpars.wireframe = m.wireframe;\n\n\t\t}\n\n\t\tif ( m.vertexColors !== undefined ) {\n\n\t\t\tif ( m.vertexColors === 'face' ) {\n\n\t\t\t\tmpars.vertexColors = THREE.FaceColors;\n\n\t\t\t} else if ( m.vertexColors ) {\n\n\t\t\t\tmpars.vertexColors = THREE.VertexColors;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// colors\n\n\t\tif ( m.colorDiffuse ) {\n\n\t\t\tmpars.color = rgb2hex( m.colorDiffuse );\n\n\t\t} else if ( m.DbgColor ) {\n\n\t\t\tmpars.color = m.DbgColor;\n\n\t\t}\n\n\t\tif ( m.colorSpecular ) {\n\n\t\t\tmpars.specular = rgb2hex( m.colorSpecular );\n\n\t\t}\n\n\t\tif ( m.colorAmbient ) {\n\n\t\t\tmpars.ambient = rgb2hex( m.colorAmbient );\n\n\t\t}\n\n\t\tif ( m.colorEmissive ) {\n\n\t\t\tmpars.emissive = rgb2hex( m.colorEmissive );\n\n\t\t}\n\n\t\t// modifiers\n\n\t\tif ( m.transparency ) {\n\n\t\t\tmpars.opacity = m.transparency;\n\n\t\t}\n\n\t\tif ( m.specularCoef ) {\n\n\t\t\tmpars.shininess = m.specularCoef;\n\n\t\t}\n\n\t\t// textures\n\n\t\tif ( m.mapDiffuse && texturePath ) {\n\n\t\t\tcreate_texture( mpars, 'map', m.mapDiffuse, m.mapDiffuseRepeat, m.mapDiffuseOffset, m.mapDiffuseWrap, m.mapDiffuseAnisotropy );\n\n\t\t}\n\n\t\tif ( m.mapLight && texturePath ) {\n\n\t\t\tcreate_texture( mpars, 'lightMap', m.mapLight, m.mapLightRepeat, m.mapLightOffset, m.mapLightWrap, m.mapLightAnisotropy );\n\n\t\t}\n\n\t\tif ( m.mapBump && texturePath ) {\n\n\t\t\tcreate_texture( mpars, 'bumpMap', m.mapBump, m.mapBumpRepeat, m.mapBumpOffset, m.mapBumpWrap, m.mapBumpAnisotropy );\n\n\t\t}\n\n\t\tif ( m.mapNormal && texturePath ) {\n\n\t\t\tcreate_texture( mpars, 'normalMap', m.mapNormal, m.mapNormalRepeat, m.mapNormalOffset, m.mapNormalWrap, m.mapNormalAnisotropy );\n\n\t\t}\n\n\t\tif ( m.mapSpecular && texturePath ) {\n\n\t\t\tcreate_texture( mpars, 'specularMap', m.mapSpecular, m.mapSpecularRepeat, m.mapSpecularOffset, m.mapSpecularWrap, m.mapSpecularAnisotropy );\n\n\t\t}\n\n\t\tif ( m.mapAlpha && texturePath ) {\n\n\t\t\tcreate_texture( mpars, 'alphaMap', m.mapAlpha, m.mapAlphaRepeat, m.mapAlphaOffset, m.mapAlphaWrap, m.mapAlphaAnisotropy );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( m.mapBumpScale ) {\n\n\t\t\tmpars.bumpScale = m.mapBumpScale;\n\n\t\t}\n\n\t\t// special case for normal mapped material\n\n\t\tif ( m.mapNormal ) {\n\n\t\t\tvar shader = THREE.ShaderLib[ 'normalmap' ];\n\t\t\tvar uniforms = THREE.UniformsUtils.clone( shader.uniforms );\n\n\t\t\tuniforms[ 'tNormal' ].value = mpars.normalMap;\n\n\t\t\tif ( m.mapNormalFactor ) {\n\n\t\t\t\tuniforms[ 'uNormalScale' ].value.set( m.mapNormalFactor, m.mapNormalFactor );\n\n\t\t\t}\n\n\t\t\tif ( mpars.map ) {\n\n\t\t\t\tuniforms[ 'tDiffuse' ].value = mpars.map;\n\t\t\t\tuniforms[ 'enableDiffuse' ].value = true;\n\n\t\t\t}\n\n\t\t\tif ( mpars.specularMap ) {\n\n\t\t\t\tuniforms[ 'tSpecular' ].value = mpars.specularMap;\n\t\t\t\tuniforms[ 'enableSpecular' ].value = true;\n\n\t\t\t}\n\n\t\t\tif ( mpars.lightMap ) {\n\n\t\t\t\tuniforms[ 'tAO' ].value = mpars.lightMap;\n\t\t\t\tuniforms[ 'enableAO' ].value = true;\n\n\t\t\t}\n\n\t\t\t// for the moment don't handle displacement texture\n\n\t\t\tuniforms[ 'diffuse' ].value.setHex( mpars.color );\n\t\t\tuniforms[ 'specular' ].value.setHex( mpars.specular );\n\t\t\tuniforms[ 'ambient' ].value.setHex( mpars.ambient );\n\n\t\t\tuniforms[ 'shininess' ].value = mpars.shininess;\n\n\t\t\tif ( mpars.opacity !== undefined ) {\n\n\t\t\t\tuniforms[ 'opacity' ].value = mpars.opacity;\n\n\t\t\t}\n\n\t\t\tvar parameters = { fragmentShader: shader.fragmentShader, vertexShader: shader.vertexShader, uniforms: uniforms, lights: true, fog: true };\n\t\t\tvar material = new THREE.ShaderMaterial( parameters );\n\n\t\t\tif ( mpars.transparent ) {\n\n\t\t\t\tmaterial.transparent = true;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tvar material = new THREE[ mtype ]( mpars );\n\n\t\t}\n\n\t\tif ( m.DbgName !== undefined ) material.name = m.DbgName;\n\n\t\treturn material;\n\n\t}\n\n};\n\nTHREE.Loader.Handlers = {\n\n\thandlers: [],\n\n\tadd: function ( regex, loader ) {\n\n\t\tthis.handlers.push( regex, loader );\n\n\t},\n\n\tget: function ( file ) {\n\n\t\tfor ( var i = 0, l = this.handlers.length; i < l; i += 2 ) {\n\n\t\t\tvar regex = this.handlers[ i ];\n\t\t\tvar loader  = this.handlers[ i + 1 ];\n\n\t\t\tif ( regex.test( file ) ) {\n\n\t\t\t\treturn loader;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n};\n\n// File:src/loaders/XHRLoader.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.XHRLoader = function ( manager ) {\n\n\tthis.cache = new THREE.Cache();\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n};\n\nTHREE.XHRLoader.prototype = {\n\n\tconstructor: THREE.XHRLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar cached = scope.cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tif ( onLoad ) onLoad( cached );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar request = new XMLHttpRequest();\n\t\trequest.open( 'GET', url, true );\n\n\t\trequest.addEventListener( 'load', function ( event ) {\n\n\t\t\tscope.cache.add( url, this.response );\n\n\t\t\tif ( onLoad ) onLoad( this.response );\n\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t}, false );\n\n\t\tif ( onProgress !== undefined ) {\n\n\t\t\trequest.addEventListener( 'progress', function ( event ) {\n\n\t\t\t\tonProgress( event );\n\n\t\t\t}, false );\n\n\t\t}\n\n\t\tif ( onError !== undefined ) {\n\n\t\t\trequest.addEventListener( 'error', function ( event ) {\n\n\t\t\t\tonError( event );\n\n\t\t\t}, false );\n\n\t\t}\n\n\t\tif ( this.crossOrigin !== undefined ) request.crossOrigin = this.crossOrigin;\n\t\tif ( this.responseType !== undefined ) request.responseType = this.responseType;\n\n\t\trequest.send( null );\n\n\t\tscope.manager.itemStart( url );\n\n\t},\n\n\tsetResponseType: function ( value ) {\n\n\t\tthis.responseType = value;\n\n\t},\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\n\t}\n\n};\n\n// File:src/loaders/ImageLoader.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.ImageLoader = function ( manager ) {\n\n\tthis.cache = new THREE.Cache();\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n};\n\nTHREE.ImageLoader.prototype = {\n\n\tconstructor: THREE.ImageLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar cached = scope.cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tonLoad( cached );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar image = document.createElement( 'img' );\n\n\t\tif ( onLoad !== undefined ) {\n\n\t\t\timage.addEventListener( 'load', function ( event ) {\n\n\t\t\t\tscope.cache.add( url, this );\n\n\t\t\t\tonLoad( this );\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, false );\n\n\t\t}\n\n\t\tif ( onProgress !== undefined ) {\n\n\t\t\timage.addEventListener( 'progress', function ( event ) {\n\n\t\t\t\tonProgress( event );\n\n\t\t\t}, false );\n\n\t\t}\n\n\t\tif ( onError !== undefined ) {\n\n\t\t\timage.addEventListener( 'error', function ( event ) {\n\n\t\t\t\tonError( event );\n\n\t\t\t}, false );\n\n\t\t}\n\n\t\tif ( this.crossOrigin !== undefined ) image.crossOrigin = this.crossOrigin;\n\n\t\timage.src = url;\n\n\t\tscope.manager.itemStart( url );\n\n\t\treturn image;\n\n\t},\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\n\t}\n\n}\n\n// File:src/loaders/JSONLoader.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.JSONLoader = function ( showStatus ) {\n\n\tTHREE.Loader.call( this, showStatus );\n\n\tthis.withCredentials = false;\n\n};\n\nTHREE.JSONLoader.prototype = Object.create( THREE.Loader.prototype );\n\nTHREE.JSONLoader.prototype.load = function ( url, callback, texturePath ) {\n\n\tvar scope = this;\n\n\t// todo: unify load API to for easier SceneLoader use\n\n\ttexturePath = texturePath && ( typeof texturePath === 'string' ) ? texturePath : this.extractUrlBase( url );\n\n\tthis.onLoadStart();\n\tthis.loadAjaxJSON( this, url, callback, texturePath );\n\n};\n\nTHREE.JSONLoader.prototype.loadAjaxJSON = function ( context, url, callback, texturePath, callbackProgress ) {\n\n\tvar xhr = new XMLHttpRequest();\n\n\tvar length = 0;\n\n\txhr.onreadystatechange = function () {\n\n\t\tif ( xhr.readyState === xhr.DONE ) {\n\n\t\t\tif ( xhr.status === 200 || xhr.status === 0 ) {\n\n\t\t\t\tif ( xhr.responseText ) {\n\n\t\t\t\t\tvar json = JSON.parse( xhr.responseText );\n\n\t\t\t\t\tif ( json.metadata !== undefined && json.metadata.type === 'scene' ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.JSONLoader: \"' + url + '\" seems to be a Scene. Use THREE.SceneLoader instead.' );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar result = context.parse( json, texturePath );\n\t\t\t\t\tcallback( result.geometry, result.materials );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( 'THREE.JSONLoader: \"' + url + '\" seems to be unreachable or the file is empty.' );\n\n\t\t\t\t}\n\n\t\t\t\t// in context of more complex asset initialization\n\t\t\t\t// do not block on single failed file\n\t\t\t\t// maybe should go even one more level up\n\n\t\t\t\tcontext.onLoadComplete();\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( 'THREE.JSONLoader: Couldn\\'t load \"' + url + '\" (' + xhr.status + ')' );\n\n\t\t\t}\n\n\t\t} else if ( xhr.readyState === xhr.LOADING ) {\n\n\t\t\tif ( callbackProgress ) {\n\n\t\t\t\tif ( length === 0 ) {\n\n\t\t\t\t\tlength = xhr.getResponseHeader( 'Content-Length' );\n\n\t\t\t\t}\n\n\t\t\t\tcallbackProgress( { total: length, loaded: xhr.responseText.length } );\n\n\t\t\t}\n\n\t\t} else if ( xhr.readyState === xhr.HEADERS_RECEIVED ) {\n\n\t\t\tif ( callbackProgress !== undefined ) {\n\n\t\t\t\tlength = xhr.getResponseHeader( 'Content-Length' );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\txhr.open( 'GET', url, true );\n\txhr.withCredentials = this.withCredentials;\n\txhr.send( null );\n\n};\n\nTHREE.JSONLoader.prototype.parse = function ( json, texturePath ) {\n\n\tvar scope = this,\n\tgeometry = new THREE.Geometry(),\n\tscale = ( json.scale !== undefined ) ? 1.0 / json.scale : 1.0;\n\n\tparseModel( scale );\n\n\tparseSkin();\n\tparseMorphing( scale );\n\n\tgeometry.computeFaceNormals();\n\tgeometry.computeBoundingSphere();\n\n\tfunction parseModel( scale ) {\n\n\t\tfunction isBitSet( value, position ) {\n\n\t\t\treturn value & ( 1 << position );\n\n\t\t}\n\n\t\tvar i, j, fi,\n\n\t\toffset, zLength,\n\n\t\tcolorIndex, normalIndex, uvIndex, materialIndex,\n\n\t\ttype,\n\t\tisQuad,\n\t\thasMaterial,\n\t\thasFaceVertexUv,\n\t\thasFaceNormal, hasFaceVertexNormal,\n\t\thasFaceColor, hasFaceVertexColor,\n\n\t\tvertex, face, faceA, faceB, color, hex, normal,\n\n\t\tuvLayer, uv, u, v,\n\n\t\tfaces = json.faces,\n\t\tvertices = json.vertices,\n\t\tnormals = json.normals,\n\t\tcolors = json.colors,\n\n\t\tnUvLayers = 0;\n\n\t\tif ( json.uvs !== undefined ) {\n\n\t\t\t// disregard empty arrays\n\n\t\t\tfor ( i = 0; i < json.uvs.length; i ++ ) {\n\n\t\t\t\tif ( json.uvs[ i ].length ) nUvLayers ++;\n\n\t\t\t}\n\n\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\n\n\t\t\t\tgeometry.faceVertexUvs[ i ] = [];\n\n\t\t\t}\n\n\t\t}\n\n\t\toffset = 0;\n\t\tzLength = vertices.length;\n\n\t\twhile ( offset < zLength ) {\n\n\t\t\tvertex = new THREE.Vector3();\n\n\t\t\tvertex.x = vertices[ offset ++ ] * scale;\n\t\t\tvertex.y = vertices[ offset ++ ] * scale;\n\t\t\tvertex.z = vertices[ offset ++ ] * scale;\n\n\t\t\tgeometry.vertices.push( vertex );\n\n\t\t}\n\n\t\toffset = 0;\n\t\tzLength = faces.length;\n\n\t\twhile ( offset < zLength ) {\n\n\t\t\ttype = faces[ offset ++ ];\n\n\n\t\t\tisQuad              = isBitSet( type, 0 );\n\t\t\thasMaterial         = isBitSet( type, 1 );\n\t\t\thasFaceVertexUv     = isBitSet( type, 3 );\n\t\t\thasFaceNormal       = isBitSet( type, 4 );\n\t\t\thasFaceVertexNormal = isBitSet( type, 5 );\n\t\t\thasFaceColor\t     = isBitSet( type, 6 );\n\t\t\thasFaceVertexColor  = isBitSet( type, 7 );\n\n\t\t\t// console.log(\"type\", type, \"bits\", isQuad, hasMaterial, hasFaceVertexUv, hasFaceNormal, hasFaceVertexNormal, hasFaceColor, hasFaceVertexColor);\n\n\t\t\tif ( isQuad ) {\n\n\t\t\t\tfaceA = new THREE.Face3();\n\t\t\t\tfaceA.a = faces[ offset ];\n\t\t\t\tfaceA.b = faces[ offset + 1 ];\n\t\t\t\tfaceA.c = faces[ offset + 3 ];\n\n\t\t\t\tfaceB = new THREE.Face3();\n\t\t\t\tfaceB.a = faces[ offset + 1 ];\n\t\t\t\tfaceB.b = faces[ offset + 2 ];\n\t\t\t\tfaceB.c = faces[ offset + 3 ];\n\n\t\t\t\toffset += 4;\n\n\t\t\t\tif ( hasMaterial ) {\n\n\t\t\t\t\tmaterialIndex = faces[ offset ++ ];\n\t\t\t\t\tfaceA.materialIndex = materialIndex;\n\t\t\t\t\tfaceB.materialIndex = materialIndex;\n\n\t\t\t\t}\n\n\t\t\t\t// to get face <=> uv index correspondence\n\n\t\t\t\tfi = geometry.faces.length;\n\n\t\t\t\tif ( hasFaceVertexUv ) {\n\n\t\t\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\n\n\t\t\t\t\t\tuvLayer = json.uvs[ i ];\n\n\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ] = [];\n\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi + 1 ] = []\n\n\t\t\t\t\t\tfor ( j = 0; j < 4; j ++ ) {\n\n\t\t\t\t\t\t\tuvIndex = faces[ offset ++ ];\n\n\t\t\t\t\t\t\tu = uvLayer[ uvIndex * 2 ];\n\t\t\t\t\t\t\tv = uvLayer[ uvIndex * 2 + 1 ];\n\n\t\t\t\t\t\t\tuv = new THREE.Vector2( u, v );\n\n\t\t\t\t\t\t\tif ( j !== 2 ) geometry.faceVertexUvs[ i ][ fi ].push( uv );\n\t\t\t\t\t\t\tif ( j !== 0 ) geometry.faceVertexUvs[ i ][ fi + 1 ].push( uv );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( hasFaceNormal ) {\n\n\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\n\n\t\t\t\t\tfaceA.normal.set(\n\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\tnormals[ normalIndex ]\n\t\t\t\t\t);\n\n\t\t\t\t\tfaceB.normal.copy( faceA.normal );\n\n\t\t\t\t}\n\n\t\t\t\tif ( hasFaceVertexNormal ) {\n\n\t\t\t\t\tfor ( i = 0; i < 4; i ++ ) {\n\n\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\n\n\t\t\t\t\t\tnormal = new THREE.Vector3(\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\t\tnormals[ normalIndex ]\n\t\t\t\t\t\t);\n\n\n\t\t\t\t\t\tif ( i !== 2 ) faceA.vertexNormals.push( normal );\n\t\t\t\t\t\tif ( i !== 0 ) faceB.vertexNormals.push( normal );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\tif ( hasFaceColor ) {\n\n\t\t\t\t\tcolorIndex = faces[ offset ++ ];\n\t\t\t\t\thex = colors[ colorIndex ];\n\n\t\t\t\t\tfaceA.color.setHex( hex );\n\t\t\t\t\tfaceB.color.setHex( hex );\n\n\t\t\t\t}\n\n\n\t\t\t\tif ( hasFaceVertexColor ) {\n\n\t\t\t\t\tfor ( i = 0; i < 4; i ++ ) {\n\n\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\n\t\t\t\t\t\thex = colors[ colorIndex ];\n\n\t\t\t\t\t\tif ( i !== 2 ) faceA.vertexColors.push( new THREE.Color( hex ) );\n\t\t\t\t\t\tif ( i !== 0 ) faceB.vertexColors.push( new THREE.Color( hex ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.faces.push( faceA );\n\t\t\t\tgeometry.faces.push( faceB );\n\n\t\t\t} else {\n\n\t\t\t\tface = new THREE.Face3();\n\t\t\t\tface.a = faces[ offset ++ ];\n\t\t\t\tface.b = faces[ offset ++ ];\n\t\t\t\tface.c = faces[ offset ++ ];\n\n\t\t\t\tif ( hasMaterial ) {\n\n\t\t\t\t\tmaterialIndex = faces[ offset ++ ];\n\t\t\t\t\tface.materialIndex = materialIndex;\n\n\t\t\t\t}\n\n\t\t\t\t// to get face <=> uv index correspondence\n\n\t\t\t\tfi = geometry.faces.length;\n\n\t\t\t\tif ( hasFaceVertexUv ) {\n\n\t\t\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\n\n\t\t\t\t\t\tuvLayer = json.uvs[ i ];\n\n\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ] = [];\n\n\t\t\t\t\t\tfor ( j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\t\t\tuvIndex = faces[ offset ++ ];\n\n\t\t\t\t\t\t\tu = uvLayer[ uvIndex * 2 ];\n\t\t\t\t\t\t\tv = uvLayer[ uvIndex * 2 + 1 ];\n\n\t\t\t\t\t\t\tuv = new THREE.Vector2( u, v );\n\n\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ].push( uv );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( hasFaceNormal ) {\n\n\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\n\n\t\t\t\t\tface.normal.set(\n\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\tnormals[ normalIndex ]\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t\tif ( hasFaceVertexNormal ) {\n\n\t\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\n\n\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\n\n\t\t\t\t\t\tnormal = new THREE.Vector3(\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\t\tnormals[ normalIndex ]\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tface.vertexNormals.push( normal );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\tif ( hasFaceColor ) {\n\n\t\t\t\t\tcolorIndex = faces[ offset ++ ];\n\t\t\t\t\tface.color.setHex( colors[ colorIndex ] );\n\n\t\t\t\t}\n\n\n\t\t\t\tif ( hasFaceVertexColor ) {\n\n\t\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\n\n\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\n\t\t\t\t\t\tface.vertexColors.push( new THREE.Color( colors[ colorIndex ] ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.faces.push( face );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tfunction parseSkin() {\n\t\tvar influencesPerVertex = ( json.influencesPerVertex !== undefined ) ? json.influencesPerVertex : 2;\n\n\t\tif ( json.skinWeights ) {\n\n\t\t\tfor ( var i = 0, l = json.skinWeights.length; i < l; i += influencesPerVertex ) {\n\n\t\t\t\tvar x =                               json.skinWeights[ i     ];\n\t\t\t\tvar y = ( influencesPerVertex > 1 ) ? json.skinWeights[ i + 1 ] : 0;\n\t\t\t\tvar z = ( influencesPerVertex > 2 ) ? json.skinWeights[ i + 2 ] : 0;\n\t\t\t\tvar w = ( influencesPerVertex > 3 ) ? json.skinWeights[ i + 3 ] : 0;\n\n\t\t\t\tgeometry.skinWeights.push( new THREE.Vector4( x, y, z, w ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( json.skinIndices ) {\n\n\t\t\tfor ( var i = 0, l = json.skinIndices.length; i < l; i += influencesPerVertex ) {\n\n\t\t\t\tvar a =                               json.skinIndices[ i     ];\n\t\t\t\tvar b = ( influencesPerVertex > 1 ) ? json.skinIndices[ i + 1 ] : 0;\n\t\t\t\tvar c = ( influencesPerVertex > 2 ) ? json.skinIndices[ i + 2 ] : 0;\n\t\t\t\tvar d = ( influencesPerVertex > 3 ) ? json.skinIndices[ i + 3 ] : 0;\n\n\t\t\t\tgeometry.skinIndices.push( new THREE.Vector4( a, b, c, d ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeometry.bones = json.bones;\n\n\t\tif ( geometry.bones && geometry.bones.length > 0 && ( geometry.skinWeights.length !== geometry.skinIndices.length || geometry.skinIndices.length !== geometry.vertices.length ) ) {\n\n\t\t\t\tconsole.warn( 'When skinning, number of vertices (' + geometry.vertices.length + '), skinIndices (' +\n\t\t\t\t\tgeometry.skinIndices.length + '), and skinWeights (' + geometry.skinWeights.length + ') should match.' );\n\n\t\t}\n\n\n\t\t// could change this to json.animations[0] or remove completely\n\n\t\tgeometry.animation = json.animation;\n\t\tgeometry.animations = json.animations;\n\n\t};\n\n\tfunction parseMorphing( scale ) {\n\n\t\tif ( json.morphTargets !== undefined ) {\n\n\t\t\tvar i, l, v, vl, dstVertices, srcVertices;\n\n\t\t\tfor ( i = 0, l = json.morphTargets.length; i < l; i ++ ) {\n\n\t\t\t\tgeometry.morphTargets[ i ] = {};\n\t\t\t\tgeometry.morphTargets[ i ].name = json.morphTargets[ i ].name;\n\t\t\t\tgeometry.morphTargets[ i ].vertices = [];\n\n\t\t\t\tdstVertices = geometry.morphTargets[ i ].vertices;\n\t\t\t\tsrcVertices = json.morphTargets [ i ].vertices;\n\n\t\t\t\tfor ( v = 0, vl = srcVertices.length; v < vl; v += 3 ) {\n\n\t\t\t\t\tvar vertex = new THREE.Vector3();\n\t\t\t\t\tvertex.x = srcVertices[ v ] * scale;\n\t\t\t\t\tvertex.y = srcVertices[ v + 1 ] * scale;\n\t\t\t\t\tvertex.z = srcVertices[ v + 2 ] * scale;\n\n\t\t\t\t\tdstVertices.push( vertex );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( json.morphColors !== undefined ) {\n\n\t\t\tvar i, l, c, cl, dstColors, srcColors, color;\n\n\t\t\tfor ( i = 0, l = json.morphColors.length; i < l; i ++ ) {\n\n\t\t\t\tgeometry.morphColors[ i ] = {};\n\t\t\t\tgeometry.morphColors[ i ].name = json.morphColors[ i ].name;\n\t\t\t\tgeometry.morphColors[ i ].colors = [];\n\n\t\t\t\tdstColors = geometry.morphColors[ i ].colors;\n\t\t\t\tsrcColors = json.morphColors [ i ].colors;\n\n\t\t\t\tfor ( c = 0, cl = srcColors.length; c < cl; c += 3 ) {\n\n\t\t\t\t\tcolor = new THREE.Color( 0xffaa00 );\n\t\t\t\t\tcolor.setRGB( srcColors[ c ], srcColors[ c + 1 ], srcColors[ c + 2 ] );\n\t\t\t\t\tdstColors.push( color );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tif ( json.materials === undefined || json.materials.length === 0 ) {\n\n\t\treturn { geometry: geometry };\n\n\t} else {\n\n\t\tvar materials = this.initMaterials( json.materials, texturePath );\n\n\t\tif ( this.needsTangents( materials ) ) {\n\n\t\t\tgeometry.computeTangents();\n\n\t\t}\n\n\t\treturn { geometry: geometry, materials: materials };\n\n\t}\n\n};\n\n// File:src/loaders/LoadingManager.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.LoadingManager = function ( onLoad, onProgress, onError ) {\n\n\tvar scope = this;\n\n\tvar loaded = 0, total = 0;\n\n\tthis.onLoad = onLoad;\n\tthis.onProgress = onProgress;\n\tthis.onError = onError;\n\n\tthis.itemStart = function ( url ) {\n\n\t\ttotal ++;\n\n\t};\n\n\tthis.itemEnd = function ( url ) {\n\n\t\tloaded ++;\n\n\t\tif ( scope.onProgress !== undefined ) {\n\n\t\t\tscope.onProgress( url, loaded, total );\n\n\t\t}\n\n\t\tif ( loaded === total && scope.onLoad !== undefined ) {\n\n\t\t\tscope.onLoad();\n\n\t\t}\n\n\t};\n\n};\n\nTHREE.DefaultLoadingManager = new THREE.LoadingManager();\n\n// File:src/loaders/BufferGeometryLoader.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.BufferGeometryLoader = function ( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n};\n\nTHREE.BufferGeometryLoader.prototype = {\n\n\tconstructor: THREE.BufferGeometryLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar loader = new THREE.XHRLoader();\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\n\t},\n\n\tparse: function ( json ) {\n\n\t\tvar geometry = new THREE.BufferGeometry();\n\n\t\tvar attributes = json.attributes;\n\n\t\tfor ( var key in attributes ) {\n\n\t\t\tvar attribute = attributes[ key ];\n\t\t\tvar typedArray = new self[ attribute.type ]( attribute.array );\n\n\t\t\tgeometry.addAttribute( key, new THREE.BufferAttribute( typedArray, attribute.itemSize ) );\n\n\t\t}\n\n\t\tvar offsets = json.offsets;\n\n\t\tif ( offsets !== undefined ) {\n\n\t\t\tgeometry.offsets = JSON.parse( JSON.stringify( offsets ) );\n\n\t\t}\n\n\t\tvar boundingSphere = json.boundingSphere;\n\n\t\tif ( boundingSphere !== undefined ) {\n\n\t\t\tvar center = new THREE.Vector3();\n\n\t\t\tif ( boundingSphere.center !== undefined ) {\n\n\t\t\t\tcenter.fromArray( boundingSphere.center );\n\n\t\t\t}\n\n\t\t\tgeometry.boundingSphere = new THREE.Sphere( center, boundingSphere.radius );\n\n\t\t}\n\n\t\treturn geometry;\n\n\t}\n\n};\n\n// File:src/loaders/MaterialLoader.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.MaterialLoader = function ( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n};\n\nTHREE.MaterialLoader.prototype = {\n\n\tconstructor: THREE.MaterialLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar loader = new THREE.XHRLoader();\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\n\t},\n\n\tparse: function ( json ) {\n\n\t\tvar material = new THREE[ json.type ];\n\n\t\tif ( json.color !== undefined ) material.color.setHex( json.color );\n\t\tif ( json.ambient !== undefined ) material.ambient.setHex( json.ambient );\n\t\tif ( json.emissive !== undefined ) material.emissive.setHex( json.emissive );\n\t\tif ( json.specular !== undefined ) material.specular.setHex( json.specular );\n\t\tif ( json.shininess !== undefined ) material.shininess = json.shininess;\n\t\tif ( json.uniforms !== undefined ) material.uniforms = json.uniforms;\n\t\tif ( json.vertexShader !== undefined ) material.vertexShader = json.vertexShader;\n\t\tif ( json.fragmentShader !== undefined ) material.fragmentShader = json.fragmentShader;\t\t\n\t\tif ( json.vertexColors !== undefined ) material.vertexColors = json.vertexColors;\n\t\tif ( json.shading !== undefined ) material.shading = json.shading;\n\t\tif ( json.blending !== undefined ) material.blending = json.blending;\n\t\tif ( json.side !== undefined ) material.side = json.side;\n\t\tif ( json.opacity !== undefined ) material.opacity = json.opacity;\n\t\tif ( json.transparent !== undefined ) material.transparent = json.transparent;\n\t\tif ( json.wireframe !== undefined ) material.wireframe = json.wireframe;\n\n\t\tif ( json.materials !== undefined ) {\n\n\t\t\tfor ( var i = 0, l = json.materials.length; i < l; i ++ ) {\n\n\t\t\t\tmaterial.materials.push( this.parse( json.materials[ i ] ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn material;\n\n\t}\n\n};\n\n// File:src/loaders/ObjectLoader.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.ObjectLoader = function ( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n};\n\nTHREE.ObjectLoader.prototype = {\n\n\tconstructor: THREE.ObjectLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar loader = new THREE.XHRLoader( scope.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\n\t},\n\n\tparse: function ( json ) {\n\n\t\tvar geometries = this.parseGeometries( json.geometries );\n\t\tvar materials = this.parseMaterials( json.materials );\n\t\tvar object = this.parseObject( json.object, geometries, materials );\n\n\t\treturn object;\n\n\t},\n\n\tparseGeometries: function ( json ) {\n\n\t\tvar geometries = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tvar geometryLoader = new THREE.JSONLoader();\n\t\t\tvar bufferGeometryLoader = new THREE.BufferGeometryLoader();\n\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tvar geometry;\n\t\t\t\tvar data = json[ i ];\n\n\t\t\t\tswitch ( data.type ) {\n\n\t\t\t\t\tcase 'PlaneGeometry':\n\n\t\t\t\t\t\tgeometry = new THREE.PlaneGeometry(\n\t\t\t\t\t\t\tdata.width,\n\t\t\t\t\t\t\tdata.height,\n\t\t\t\t\t\t\tdata.widthSegments,\n\t\t\t\t\t\t\tdata.heightSegments\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'BoxGeometry':\n\t\t\t\t\tcase 'CubeGeometry': // backwards compatible\n\n\t\t\t\t\t\tgeometry = new THREE.BoxGeometry(\n\t\t\t\t\t\t\tdata.width,\n\t\t\t\t\t\t\tdata.height,\n\t\t\t\t\t\t\tdata.depth,\n\t\t\t\t\t\t\tdata.widthSegments,\n\t\t\t\t\t\t\tdata.heightSegments,\n\t\t\t\t\t\t\tdata.depthSegments\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'CircleGeometry':\n\n\t\t\t\t\t\tgeometry = new THREE.CircleGeometry(\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.segments\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'CylinderGeometry':\n\n\t\t\t\t\t\tgeometry = new THREE.CylinderGeometry(\n\t\t\t\t\t\t\tdata.radiusTop,\n\t\t\t\t\t\t\tdata.radiusBottom,\n\t\t\t\t\t\t\tdata.height,\n\t\t\t\t\t\t\tdata.radialSegments,\n\t\t\t\t\t\t\tdata.heightSegments,\n\t\t\t\t\t\t\tdata.openEnded\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'SphereGeometry':\n\n\t\t\t\t\t\tgeometry = new THREE.SphereGeometry(\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.widthSegments,\n\t\t\t\t\t\t\tdata.heightSegments,\n\t\t\t\t\t\t\tdata.phiStart,\n\t\t\t\t\t\t\tdata.phiLength,\n\t\t\t\t\t\t\tdata.thetaStart,\n\t\t\t\t\t\t\tdata.thetaLength\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'IcosahedronGeometry':\n\n\t\t\t\t\t\tgeometry = new THREE.IcosahedronGeometry(\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.detail\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'TorusGeometry':\n\n\t\t\t\t\t\tgeometry = new THREE.TorusGeometry(\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.tube,\n\t\t\t\t\t\t\tdata.radialSegments,\n\t\t\t\t\t\t\tdata.tubularSegments,\n\t\t\t\t\t\t\tdata.arc\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'TorusKnotGeometry':\n\n\t\t\t\t\t\tgeometry = new THREE.TorusKnotGeometry(\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.tube,\n\t\t\t\t\t\t\tdata.radialSegments,\n\t\t\t\t\t\t\tdata.tubularSegments,\n\t\t\t\t\t\t\tdata.p,\n\t\t\t\t\t\t\tdata.q,\n\t\t\t\t\t\t\tdata.heightScale\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'BufferGeometry':\n\n\t\t\t\t\t\tgeometry = bufferGeometryLoader.parse( data.data );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Geometry':\n\n\t\t\t\t\t\tgeometry = geometryLoader.parse( data.data ).geometry;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.uuid = data.uuid;\n\n\t\t\t\tif ( data.name !== undefined ) geometry.name = data.name;\n\n\t\t\t\tgeometries[ data.uuid ] = geometry;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn geometries;\n\n\t},\n\n\tparseMaterials: function ( json ) {\n\n\t\tvar materials = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tvar loader = new THREE.MaterialLoader();\n\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tvar data = json[ i ];\n\t\t\t\tvar material = loader.parse( data );\n\n\t\t\t\tmaterial.uuid = data.uuid;\n\n\t\t\t\tif ( data.name !== undefined ) material.name = data.name;\n\n\t\t\t\tmaterials[ data.uuid ] = material;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn materials;\n\n\t},\n\n\tparseObject: function () {\n\n\t\tvar matrix = new THREE.Matrix4();\n\n\t\treturn function ( data, geometries, materials ) {\n\n\t\t\tvar object;\n\n\t\t\tswitch ( data.type ) {\n\n\t\t\t\tcase 'Scene':\n\n\t\t\t\t\tobject = new THREE.Scene();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PerspectiveCamera':\n\n\t\t\t\t\tobject = new THREE.PerspectiveCamera( data.fov, data.aspect, data.near, data.far );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'OrthographicCamera':\n\n\t\t\t\t\tobject = new THREE.OrthographicCamera( data.left, data.right, data.top, data.bottom, data.near, data.far );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'AmbientLight':\n\n\t\t\t\t\tobject = new THREE.AmbientLight( data.color );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'DirectionalLight':\n\n\t\t\t\t\tobject = new THREE.DirectionalLight( data.color, data.intensity );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PointLight':\n\n\t\t\t\t\tobject = new THREE.PointLight( data.color, data.intensity, data.distance );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'SpotLight':\n\n\t\t\t\t\tobject = new THREE.SpotLight( data.color, data.intensity, data.distance, data.angle, data.exponent );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'HemisphereLight':\n\n\t\t\t\t\tobject = new THREE.HemisphereLight( data.color, data.groundColor, data.intensity );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Mesh':\n\n\t\t\t\t\tvar geometry = geometries[ data.geometry ];\n\t\t\t\t\tvar material = materials[ data.material ];\n\n\t\t\t\t\tif ( geometry === undefined ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined geometry', data.geometry );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( material === undefined ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', data.material );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tobject = new THREE.Mesh( geometry, material );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Line':\n\n\t\t\t\t\tvar geometry = geometries[ data.geometry ];\n\t\t\t\t\tvar material = materials[ data.material ];\n\n\t\t\t\t\tif ( geometry === undefined ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined geometry', data.geometry );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( material === undefined ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', data.material );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tobject = new THREE.Line( geometry, material );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Sprite':\n\n\t\t\t\t\tvar material = materials[ data.material ];\n\n\t\t\t\t\tif ( material === undefined ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', data.material );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tobject = new THREE.Sprite( material );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Group':\n\n\t\t\t\t\tobject = new THREE.Group();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tobject = new THREE.Object3D();\n\n\t\t\t}\n\n\t\t\tobject.uuid = data.uuid;\n\n\t\t\tif ( data.name !== undefined ) object.name = data.name;\n\t\t\tif ( data.matrix !== undefined ) {\n\n\t\t\t\tmatrix.fromArray( data.matrix );\n\t\t\t\tmatrix.decompose( object.position, object.quaternion, object.scale );\n\n\t\t\t} else {\n\n\t\t\t\tif ( data.position !== undefined ) object.position.fromArray( data.position );\n\t\t\t\tif ( data.rotation !== undefined ) object.rotation.fromArray( data.rotation );\n\t\t\t\tif ( data.scale !== undefined ) object.scale.fromArray( data.scale );\n\n\t\t\t}\n\n\t\t\tif ( data.visible !== undefined ) object.visible = data.visible;\n\t\t\tif ( data.userData !== undefined ) object.userData = data.userData;\n\n\t\t\tif ( data.children !== undefined ) {\n\n\t\t\t\tfor ( var child in data.children ) {\n\n\t\t\t\t\tobject.add( this.parseObject( data.children[ child ], geometries, materials ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn object;\n\n\t\t}\n\n\t}()\n\n};\n\n// File:src/loaders/TextureLoader.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.TextureLoader = function ( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n};\n\nTHREE.TextureLoader.prototype = {\n\n\tconstructor: THREE.TextureLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar loader = new THREE.ImageLoader( scope.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.load( url, function ( image ) {\n\n\t\t\tvar texture = new THREE.Texture( image );\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tif ( onLoad !== undefined ) {\n\n\t\t\t\tonLoad( texture );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\n\t}\n\n};\n\n// File:src/loaders/CompressedTextureLoader.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n *\n * Abstract Base class to block based textures loader (dds, pvr, ...)\n */\n\nTHREE.CompressedTextureLoader = function () {\n\n\t// override in sub classes\n\tthis._parser = null;\n\n};\n\n\nTHREE.CompressedTextureLoader.prototype = {\n\n\tconstructor: THREE.CompressedTextureLoader,\n\n\tload: function ( url, onLoad, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar images = [];\n\n\t\tvar texture = new THREE.CompressedTexture();\n\t\ttexture.image = images;\n\n\t\tvar loader = new THREE.XHRLoader();\n\t\tloader.setResponseType( 'arraybuffer' );\n\n\t\tif ( url instanceof Array ) {\n\n\t\t\tvar loaded = 0;\n\n\t\t\tvar loadTexture = function ( i ) {\n\n\t\t\t\tloader.load( url[ i ], function ( buffer ) {\n\n\t\t\t\t\tvar texDatas = scope._parser( buffer, true );\n\n\t\t\t\t\timages[ i ] = {\n\t\t\t\t\t\twidth: texDatas.width,\n\t\t\t\t\t\theight: texDatas.height,\n\t\t\t\t\t\tformat: texDatas.format,\n\t\t\t\t\t\tmipmaps: texDatas.mipmaps\n\t\t\t\t\t};\n\n\t\t\t\t\tloaded += 1;\n\n\t\t\t\t\tif ( loaded === 6 ) {\n\n \t\t\t\t\t\tif (texDatas.mipmapCount == 1)\n \t\t\t\t\t\t\ttexture.minFilter = THREE.LinearFilter;\n\n\t\t\t\t\t\ttexture.format = texDatas.format;\n\t\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t};\n\n\t\t\tfor ( var i = 0, il = url.length; i < il; ++ i ) {\n\n\t\t\t\tloadTexture( i );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// compressed cubemap texture stored in a single DDS file\n\n\t\t\tloader.load( url, function ( buffer ) {\n\n\t\t\t\tvar texDatas = scope._parser( buffer, true );\n\n\t\t\t\tif ( texDatas.isCubemap ) {\n\n\t\t\t\t\tvar faces = texDatas.mipmaps.length / texDatas.mipmapCount;\n\n\t\t\t\t\tfor ( var f = 0; f < faces; f ++ ) {\n\n\t\t\t\t\t\timages[ f ] = { mipmaps : [] };\n\n\t\t\t\t\t\tfor ( var i = 0; i < texDatas.mipmapCount; i ++ ) {\n\n\t\t\t\t\t\t\timages[ f ].mipmaps.push( texDatas.mipmaps[ f * texDatas.mipmapCount + i ] );\n\t\t\t\t\t\t\timages[ f ].format = texDatas.format;\n\t\t\t\t\t\t\timages[ f ].width = texDatas.width;\n\t\t\t\t\t\t\timages[ f ].height = texDatas.height;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttexture.image.width = texDatas.width;\n\t\t\t\t\ttexture.image.height = texDatas.height;\n\t\t\t\t\ttexture.mipmaps = texDatas.mipmaps;\n\n\t\t\t\t}\n\n\t\t\t\tif ( texDatas.mipmapCount === 1 ) {\n\n\t\t\t\t\ttexture.minFilter = THREE.LinearFilter;\n\n\t\t\t\t}\n\n\t\t\t\ttexture.format = texDatas.format;\n\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n};\n\n// File:src/materials/Material.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.Material = function () {\n\n\tObject.defineProperty( this, 'id', { value: THREE.MaterialIdCount ++ } );\n\n\tthis.uuid = THREE.Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Material';\n\n\tthis.side = THREE.FrontSide;\n\n\tthis.opacity = 1;\n\tthis.transparent = false;\n\n\tthis.blending = THREE.NormalBlending;\n\n\tthis.blendSrc = THREE.SrcAlphaFactor;\n\tthis.blendDst = THREE.OneMinusSrcAlphaFactor;\n\tthis.blendEquation = THREE.AddEquation;\n\n\tthis.depthTest = true;\n\tthis.depthWrite = true;\n\n\tthis.polygonOffset = false;\n\tthis.polygonOffsetFactor = 0;\n\tthis.polygonOffsetUnits = 0;\n\n\tthis.alphaTest = 0;\n\n\tthis.overdraw = 0; // Overdrawn pixels (typically between 0 and 1) for fixing antialiasing gaps in CanvasRenderer\n\n\tthis.visible = true;\n\n\tthis.needsUpdate = true;\n\n};\n\nTHREE.Material.prototype = {\n\n\tconstructor: THREE.Material,\n\n\tsetValues: function ( values ) {\n\n\t\tif ( values === undefined ) return;\n\n\t\tfor ( var key in values ) {\n\n\t\t\tvar newValue = values[ key ];\n\n\t\t\tif ( newValue === undefined ) {\n\n\t\t\t\tconsole.warn( \"THREE.Material: '\" + key + \"' parameter is undefined.\" );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif ( key in this ) {\n\n\t\t\t\tvar currentValue = this[ key ];\n\n\t\t\t\tif ( currentValue instanceof THREE.Color ) {\n\n\t\t\t\t\tcurrentValue.set( newValue );\n\n\t\t\t\t} else if ( currentValue instanceof THREE.Vector3 && newValue instanceof THREE.Vector3 ) {\n\n\t\t\t\t\tcurrentValue.copy( newValue );\n\n\t\t\t\t} else if ( key == 'overdraw' ) {\n\n\t\t\t\t\t// ensure overdraw is backwards-compatable with legacy boolean type\n\t\t\t\t\tthis[ key ] = Number( newValue );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis[ key ] = newValue;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar output = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.2,\n\t\t\t\ttype: 'material',\n\t\t\t\tgenerator: 'MaterialExporter'\n\t\t\t},\n\t\t\tuuid: this.uuid,\n\t\t\ttype: this.type\n\t\t};\n\n\t\tif ( this.name !== \"\" ) output.name = this.name;\n\n\t\tif ( this instanceof THREE.MeshBasicMaterial ) {\n\n\t\t\toutput.color = this.color.getHex();\n\t\t\tif ( this.vertexColors !== THREE.NoColors ) output.vertexColors = this.vertexColors;\n\t\t\tif ( this.blending !== THREE.NormalBlending ) output.blending = this.blending;\n\t\t\tif ( this.side !== THREE.FrontSide ) output.side = this.side;\n\n\t\t} else if ( this instanceof THREE.MeshLambertMaterial ) {\n\n\t\t\toutput.color = this.color.getHex();\n\t\t\toutput.ambient = this.ambient.getHex();\n\t\t\toutput.emissive = this.emissive.getHex();\n\t\t\tif ( this.vertexColors !== THREE.NoColors ) output.vertexColors = this.vertexColors;\n\t\t\tif ( this.blending !== THREE.NormalBlending ) output.blending = this.blending;\n\t\t\tif ( this.side !== THREE.FrontSide ) output.side = this.side;\n\n\t\t} else if ( this instanceof THREE.MeshPhongMaterial ) {\n\n\t\t\toutput.color = this.color.getHex();\n\t\t\toutput.ambient = this.ambient.getHex();\n\t\t\toutput.emissive = this.emissive.getHex();\n\t\t\toutput.specular = this.specular.getHex();\n\t\t\toutput.shininess = this.shininess;\n\t\t\tif ( this.vertexColors !== THREE.NoColors ) output.vertexColors = this.vertexColors;\n\t\t\tif ( this.blending !== THREE.NormalBlending ) output.blending = this.blending;\n\t\t\tif ( this.side !== THREE.FrontSide ) output.side = this.side;\n\n\t\t} else if ( this instanceof THREE.MeshNormalMaterial ) {\n\n\t\t\tif ( this.shading !== THREE.FlatShading ) output.shading = this.shading;\n\t\t\tif ( this.blending !== THREE.NormalBlending ) output.blending = this.blending;\n\t\t\tif ( this.side !== THREE.FrontSide ) output.side = this.side;\n\n\t\t} else if ( this instanceof THREE.MeshDepthMaterial ) {\n\n\t\t\tif ( this.blending !== THREE.NormalBlending ) output.blending = this.blending;\n\t\t\tif ( this.side !== THREE.FrontSide ) output.side = this.side;\n\n\t\t} else if ( this instanceof THREE.ShaderMaterial ) {\n\n\t\t\toutput.uniforms = this.uniforms;\n\t\t\toutput.vertexShader = this.vertexShader;\n\t\t\toutput.fragmentShader = this.fragmentShader;\n\n\t\t} else if ( this instanceof THREE.SpriteMaterial ) {\n\n\t\t\toutput.color = this.color.getHex();\n\n\t\t}\n\n\t\tif ( this.opacity < 1 ) output.opacity = this.opacity;\n\t\tif ( this.transparent !== false ) output.transparent = this.transparent;\n\t\tif ( this.wireframe !== false ) output.wireframe = this.wireframe;\n\n\t\treturn output;\n\n\t},\n\n\tclone: function ( material ) {\n\n\t\tif ( material === undefined ) material = new THREE.Material();\n\n\t\tmaterial.name = this.name;\n\n\t\tmaterial.side = this.side;\n\n\t\tmaterial.opacity = this.opacity;\n\t\tmaterial.transparent = this.transparent;\n\n\t\tmaterial.blending = this.blending;\n\n\t\tmaterial.blendSrc = this.blendSrc;\n\t\tmaterial.blendDst = this.blendDst;\n\t\tmaterial.blendEquation = this.blendEquation;\n\n\t\tmaterial.depthTest = this.depthTest;\n\t\tmaterial.depthWrite = this.depthWrite;\n\n\t\tmaterial.polygonOffset = this.polygonOffset;\n\t\tmaterial.polygonOffsetFactor = this.polygonOffsetFactor;\n\t\tmaterial.polygonOffsetUnits = this.polygonOffsetUnits;\n\n\t\tmaterial.alphaTest = this.alphaTest;\n\n\t\tmaterial.overdraw = this.overdraw;\n\n\t\tmaterial.visible = this.visible;\n\n\t\treturn material;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n};\n\nTHREE.EventDispatcher.prototype.apply( THREE.Material.prototype );\n\nTHREE.MaterialIdCount = 0;\n\n// File:src/materials/LineBasicMaterial.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  blending: THREE.NormalBlending,\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *  linewidth: <float>,\n *  linecap: \"round\",\n *  linejoin: \"round\",\n *\n *  vertexColors: <bool>\n *\n *  fog: <bool>\n * }\n */\n\nTHREE.LineBasicMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this );\n\n\tthis.type = 'LineBasicMaterial';\n\n\tthis.color = new THREE.Color( 0xffffff );\n\n\tthis.linewidth = 1;\n\tthis.linecap = 'round';\n\tthis.linejoin = 'round';\n\n\tthis.vertexColors = THREE.NoColors;\n\n\tthis.fog = true;\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.LineBasicMaterial.prototype = Object.create( THREE.Material.prototype );\n\nTHREE.LineBasicMaterial.prototype.clone = function () {\n\n\tvar material = new THREE.LineBasicMaterial();\n\n\tTHREE.Material.prototype.clone.call( this, material );\n\n\tmaterial.color.copy( this.color );\n\n\tmaterial.linewidth = this.linewidth;\n\tmaterial.linecap = this.linecap;\n\tmaterial.linejoin = this.linejoin;\n\n\tmaterial.vertexColors = this.vertexColors;\n\n\tmaterial.fog = this.fog;\n\n\treturn material;\n\n};\n\n// File:src/materials/LineDashedMaterial.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  blending: THREE.NormalBlending,\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *  linewidth: <float>,\n *\n *  scale: <float>,\n *  dashSize: <float>,\n *  gapSize: <float>,\n *\n *  vertexColors: <bool>\n *\n *  fog: <bool>\n * }\n */\n\nTHREE.LineDashedMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this );\n\n\tthis.type = 'LineDashedMaterial';\n\n\tthis.color = new THREE.Color( 0xffffff );\n\n\tthis.linewidth = 1;\n\n\tthis.scale = 1;\n\tthis.dashSize = 3;\n\tthis.gapSize = 1;\n\n\tthis.vertexColors = false;\n\n\tthis.fog = true;\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.LineDashedMaterial.prototype = Object.create( THREE.Material.prototype );\n\nTHREE.LineDashedMaterial.prototype.clone = function () {\n\n\tvar material = new THREE.LineDashedMaterial();\n\n\tTHREE.Material.prototype.clone.call( this, material );\n\n\tmaterial.color.copy( this.color );\n\n\tmaterial.linewidth = this.linewidth;\n\n\tmaterial.scale = this.scale;\n\tmaterial.dashSize = this.dashSize;\n\tmaterial.gapSize = this.gapSize;\n\n\tmaterial.vertexColors = this.vertexColors;\n\n\tmaterial.fog = this.fog;\n\n\treturn material;\n\n};\n\n// File:src/materials/MeshBasicMaterial.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  shading: THREE.SmoothShading,\n *  blending: THREE.NormalBlending,\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *\n *  fog: <bool>\n * }\n */\n\nTHREE.MeshBasicMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this );\n\n\tthis.type = 'MeshBasicMaterial';\n\n\tthis.color = new THREE.Color( 0xffffff ); // emissive\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = THREE.MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.fog = true;\n\n\tthis.shading = THREE.SmoothShading;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.vertexColors = THREE.NoColors;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.MeshBasicMaterial.prototype = Object.create( THREE.Material.prototype );\n\nTHREE.MeshBasicMaterial.prototype.clone = function () {\n\n\tvar material = new THREE.MeshBasicMaterial();\n\n\tTHREE.Material.prototype.clone.call( this, material );\n\n\tmaterial.color.copy( this.color );\n\n\tmaterial.map = this.map;\n\n\tmaterial.lightMap = this.lightMap;\n\n\tmaterial.specularMap = this.specularMap;\n\n\tmaterial.alphaMap = this.alphaMap;\n\n\tmaterial.envMap = this.envMap;\n\tmaterial.combine = this.combine;\n\tmaterial.reflectivity = this.reflectivity;\n\tmaterial.refractionRatio = this.refractionRatio;\n\n\tmaterial.fog = this.fog;\n\n\tmaterial.shading = this.shading;\n\n\tmaterial.wireframe = this.wireframe;\n\tmaterial.wireframeLinewidth = this.wireframeLinewidth;\n\tmaterial.wireframeLinecap = this.wireframeLinecap;\n\tmaterial.wireframeLinejoin = this.wireframeLinejoin;\n\n\tmaterial.vertexColors = this.vertexColors;\n\n\tmaterial.skinning = this.skinning;\n\tmaterial.morphTargets = this.morphTargets;\n\n\treturn material;\n\n};\n\n// File:src/materials/MeshLambertMaterial.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  ambient: <hex>,\n *  emissive: <hex>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  shading: THREE.SmoothShading,\n *  blending: THREE.NormalBlending,\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>,\n *\n *\tfog: <bool>\n * }\n */\n\nTHREE.MeshLambertMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this );\n\n\tthis.type = 'MeshLambertMaterial';\n\n\tthis.color = new THREE.Color( 0xffffff ); // diffuse\n\tthis.ambient = new THREE.Color( 0xffffff );\n\tthis.emissive = new THREE.Color( 0x000000 );\n\n\tthis.wrapAround = false;\n\tthis.wrapRGB = new THREE.Vector3( 1, 1, 1 );\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = THREE.MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.fog = true;\n\n\tthis.shading = THREE.SmoothShading;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.vertexColors = THREE.NoColors;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.MeshLambertMaterial.prototype = Object.create( THREE.Material.prototype );\n\nTHREE.MeshLambertMaterial.prototype.clone = function () {\n\n\tvar material = new THREE.MeshLambertMaterial();\n\n\tTHREE.Material.prototype.clone.call( this, material );\n\n\tmaterial.color.copy( this.color );\n\tmaterial.ambient.copy( this.ambient );\n\tmaterial.emissive.copy( this.emissive );\n\n\tmaterial.wrapAround = this.wrapAround;\n\tmaterial.wrapRGB.copy( this.wrapRGB );\n\n\tmaterial.map = this.map;\n\n\tmaterial.lightMap = this.lightMap;\n\n\tmaterial.specularMap = this.specularMap;\n\n\tmaterial.alphaMap = this.alphaMap;\n\n\tmaterial.envMap = this.envMap;\n\tmaterial.combine = this.combine;\n\tmaterial.reflectivity = this.reflectivity;\n\tmaterial.refractionRatio = this.refractionRatio;\n\n\tmaterial.fog = this.fog;\n\n\tmaterial.shading = this.shading;\n\n\tmaterial.wireframe = this.wireframe;\n\tmaterial.wireframeLinewidth = this.wireframeLinewidth;\n\tmaterial.wireframeLinecap = this.wireframeLinecap;\n\tmaterial.wireframeLinejoin = this.wireframeLinejoin;\n\n\tmaterial.vertexColors = this.vertexColors;\n\n\tmaterial.skinning = this.skinning;\n\tmaterial.morphTargets = this.morphTargets;\n\tmaterial.morphNormals = this.morphNormals;\n\n\treturn material;\n\n};\n\n// File:src/materials/MeshPhongMaterial.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  ambient: <hex>,\n *  emissive: <hex>,\n *  specular: <hex>,\n *  shininess: <float>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalScale: <Vector2>,\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  shading: THREE.SmoothShading,\n *  blending: THREE.NormalBlending,\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>,\n *\n *\tfog: <bool>\n * }\n */\n\nTHREE.MeshPhongMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this );\n\n\tthis.type = 'MeshPhongMaterial';\n\n\tthis.color = new THREE.Color( 0xffffff ); // diffuse\n\tthis.ambient = new THREE.Color( 0xffffff );\n\tthis.emissive = new THREE.Color( 0x000000 );\n\tthis.specular = new THREE.Color( 0x111111 );\n\tthis.shininess = 30;\n\n\tthis.metal = false;\n\n\tthis.wrapAround = false;\n\tthis.wrapRGB = new THREE.Vector3( 1, 1, 1 );\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalScale = new THREE.Vector2( 1, 1 );\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = THREE.MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.fog = true;\n\n\tthis.shading = THREE.SmoothShading;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.vertexColors = THREE.NoColors;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.MeshPhongMaterial.prototype = Object.create( THREE.Material.prototype );\n\nTHREE.MeshPhongMaterial.prototype.clone = function () {\n\n\tvar material = new THREE.MeshPhongMaterial();\n\n\tTHREE.Material.prototype.clone.call( this, material );\n\n\tmaterial.color.copy( this.color );\n\tmaterial.ambient.copy( this.ambient );\n\tmaterial.emissive.copy( this.emissive );\n\tmaterial.specular.copy( this.specular );\n\tmaterial.shininess = this.shininess;\n\n\tmaterial.metal = this.metal;\n\n\tmaterial.wrapAround = this.wrapAround;\n\tmaterial.wrapRGB.copy( this.wrapRGB );\n\n\tmaterial.map = this.map;\n\n\tmaterial.lightMap = this.lightMap;\n\n\tmaterial.bumpMap = this.bumpMap;\n\tmaterial.bumpScale = this.bumpScale;\n\n\tmaterial.normalMap = this.normalMap;\n\tmaterial.normalScale.copy( this.normalScale );\n\n\tmaterial.specularMap = this.specularMap;\n\n\tmaterial.alphaMap = this.alphaMap;\n\n\tmaterial.envMap = this.envMap;\n\tmaterial.combine = this.combine;\n\tmaterial.reflectivity = this.reflectivity;\n\tmaterial.refractionRatio = this.refractionRatio;\n\n\tmaterial.fog = this.fog;\n\n\tmaterial.shading = this.shading;\n\n\tmaterial.wireframe = this.wireframe;\n\tmaterial.wireframeLinewidth = this.wireframeLinewidth;\n\tmaterial.wireframeLinecap = this.wireframeLinecap;\n\tmaterial.wireframeLinejoin = this.wireframeLinejoin;\n\n\tmaterial.vertexColors = this.vertexColors;\n\n\tmaterial.skinning = this.skinning;\n\tmaterial.morphTargets = this.morphTargets;\n\tmaterial.morphNormals = this.morphNormals;\n\n\treturn material;\n\n};\n\n// File:src/materials/MeshDepthMaterial.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  opacity: <float>,\n *\n *  blending: THREE.NormalBlending,\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>\n * }\n */\n\nTHREE.MeshDepthMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this );\n\n\tthis.type = 'MeshDepthMaterial';\n\n\tthis.morphTargets = false;\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.MeshDepthMaterial.prototype = Object.create( THREE.Material.prototype );\n\nTHREE.MeshDepthMaterial.prototype.clone = function () {\n\n\tvar material = new THREE.MeshDepthMaterial();\n\n\tTHREE.Material.prototype.clone.call( this, material );\n\n\tmaterial.wireframe = this.wireframe;\n\tmaterial.wireframeLinewidth = this.wireframeLinewidth;\n\n\treturn material;\n\n};\n\n// File:src/materials/MeshNormalMaterial.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n *\n * parameters = {\n *  opacity: <float>,\n *\n *  shading: THREE.FlatShading,\n *  blending: THREE.NormalBlending,\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>\n * }\n */\n\nTHREE.MeshNormalMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this, parameters );\n\n\tthis.type = 'MeshNormalMaterial';\n\n\tthis.shading = THREE.FlatShading;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.morphTargets = false;\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.MeshNormalMaterial.prototype = Object.create( THREE.Material.prototype );\n\nTHREE.MeshNormalMaterial.prototype.clone = function () {\n\n\tvar material = new THREE.MeshNormalMaterial();\n\n\tTHREE.Material.prototype.clone.call( this, material );\n\n\tmaterial.shading = this.shading;\n\n\tmaterial.wireframe = this.wireframe;\n\tmaterial.wireframeLinewidth = this.wireframeLinewidth;\n\n\treturn material;\n\n};\n\n// File:src/materials/MeshFaceMaterial.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.MeshFaceMaterial = function ( materials ) {\n\n\tthis.uuid = THREE.Math.generateUUID();\n\n\tthis.type = 'MeshFaceMaterial';\n\t\n\tthis.materials = materials instanceof Array ? materials : [];\n\n};\n\nTHREE.MeshFaceMaterial.prototype = {\n\n\tconstructor: THREE.MeshFaceMaterial,\n\n\ttoJSON: function () {\n\n\t\tvar output = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.2,\n\t\t\t\ttype: 'material',\n\t\t\t\tgenerator: 'MaterialExporter'\n\t\t\t},\n\t\t\tuuid: this.uuid,\n\t\t\ttype: this.type,\n\t\t\tmaterials: []\n\t\t};\n\n\t\tfor ( var i = 0, l = this.materials.length; i < l; i ++ ) {\n\n\t\t\toutput.materials.push( this.materials[ i ].toJSON() );\n\n\t\t}\n\n\t\treturn output;\n\n\t},\n\n\tclone: function () {\n\n\t\tvar material = new THREE.MeshFaceMaterial();\n\n\t\tfor ( var i = 0; i < this.materials.length; i ++ ) {\n\n\t\t\tmaterial.materials.push( this.materials[ i ].clone() );\n\n\t\t}\n\n\t\treturn material;\n\n\t}\n\n};\n\n// File:src/materials/PointCloudMaterial.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *  map: new THREE.Texture( <Image> ),\n *\n *  size: <float>,\n *\n *  blending: THREE.NormalBlending,\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *  vertexColors: <bool>,\n *\n *  fog: <bool>\n * }\n */\n\nTHREE.PointCloudMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this );\n\n\tthis.type = 'PointCloudMaterial';\n\n\tthis.color = new THREE.Color( 0xffffff );\n\n\tthis.map = null;\n\n\tthis.size = 1;\n\tthis.sizeAttenuation = true;\n\n\tthis.vertexColors = THREE.NoColors;\n\n\tthis.fog = true;\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.PointCloudMaterial.prototype = Object.create( THREE.Material.prototype );\n\nTHREE.PointCloudMaterial.prototype.clone = function () {\n\n\tvar material = new THREE.PointCloudMaterial();\n\n\tTHREE.Material.prototype.clone.call( this, material );\n\n\tmaterial.color.copy( this.color );\n\n\tmaterial.map = this.map;\n\n\tmaterial.size = this.size;\n\tmaterial.sizeAttenuation = this.sizeAttenuation;\n\n\tmaterial.vertexColors = this.vertexColors;\n\n\tmaterial.fog = this.fog;\n\n\treturn material;\n\n};\n\n// backwards compatibility\n\nTHREE.ParticleBasicMaterial = function ( parameters ) {\n\n\tconsole.warn( 'THREE.ParticleBasicMaterial has been renamed to THREE.PointCloudMaterial.' );\n\treturn new THREE.PointCloudMaterial( parameters );\n\n};\n\nTHREE.ParticleSystemMaterial = function ( parameters ) {\n\n\tconsole.warn( 'THREE.ParticleSystemMaterial has been renamed to THREE.PointCloudMaterial.' );\n\treturn new THREE.PointCloudMaterial( parameters );\n\n};\n\n// File:src/materials/ShaderMaterial.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  defines: { \"label\" : \"value\" },\n *  uniforms: { \"parameter1\": { type: \"f\", value: 1.0 }, \"parameter2\": { type: \"i\" value2: 2 } },\n *\n *  fragmentShader: <string>,\n *  vertexShader: <string>,\n *\n *  shading: THREE.SmoothShading,\n *  blending: THREE.NormalBlending,\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  lights: <bool>,\n *\n *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>,\n *\n *\tfog: <bool>\n * }\n */\n\nTHREE.ShaderMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this );\n\n\tthis.type = 'ShaderMaterial';\n\n\tthis.defines = {};\n\tthis.uniforms = {};\n\tthis.attributes = null;\n\n\tthis.vertexShader = 'void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}';\n\tthis.fragmentShader = 'void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}';\n\n\tthis.shading = THREE.SmoothShading;\n\n\tthis.linewidth = 1;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false; // set to use scene fog\n\n\tthis.lights = false; // set to use scene lights\n\n\tthis.vertexColors = THREE.NoColors; // set to use \"color\" attribute stream\n\n\tthis.skinning = false; // set to use skinning attribute streams\n\n\tthis.morphTargets = false; // set to use morph targets\n\tthis.morphNormals = false; // set to use morph normals\n\n\t// When rendered geometry doesn't include these attributes but the material does,\n\t// use these default values in WebGL. This avoids errors when buffer data is missing.\n\tthis.defaultAttributeValues = {\n\t\t'color': [ 1, 1, 1 ],\n\t\t'uv': [ 0, 0 ],\n\t\t'uv2': [ 0, 0 ]\n\t};\n\n\tthis.index0AttributeName = undefined;\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.ShaderMaterial.prototype = Object.create( THREE.Material.prototype );\n\nTHREE.ShaderMaterial.prototype.clone = function () {\n\n\tvar material = new THREE.ShaderMaterial();\n\n\tTHREE.Material.prototype.clone.call( this, material );\n\n\tmaterial.fragmentShader = this.fragmentShader;\n\tmaterial.vertexShader = this.vertexShader;\n\n\tmaterial.uniforms = THREE.UniformsUtils.clone( this.uniforms );\n\n\tmaterial.attributes = this.attributes;\n\tmaterial.defines = this.defines;\n\n\tmaterial.shading = this.shading;\n\n\tmaterial.wireframe = this.wireframe;\n\tmaterial.wireframeLinewidth = this.wireframeLinewidth;\n\n\tmaterial.fog = this.fog;\n\n\tmaterial.lights = this.lights;\n\n\tmaterial.vertexColors = this.vertexColors;\n\n\tmaterial.skinning = this.skinning;\n\n\tmaterial.morphTargets = this.morphTargets;\n\tmaterial.morphNormals = this.morphNormals;\n\n\treturn material;\n\n};\n\n// File:src/materials/RawShaderMaterial.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.RawShaderMaterial = function ( parameters ) {\n\n\tTHREE.ShaderMaterial.call( this, parameters );\n\n\tthis.type = 'RawShaderMaterial';\n\n};\n\nTHREE.RawShaderMaterial.prototype = Object.create( THREE.ShaderMaterial.prototype );\n\nTHREE.RawShaderMaterial.prototype.clone = function () {\n\n\tvar material = new THREE.RawShaderMaterial();\n\n\tTHREE.ShaderMaterial.prototype.clone.call( this, material );\n\n\treturn material;\n\n};\n\n// File:src/materials/SpriteMaterial.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *  map: new THREE.Texture( <Image> ),\n *\n *  blending: THREE.NormalBlending,\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *\tuvOffset: new THREE.Vector2(),\n *\tuvScale: new THREE.Vector2(),\n *\n *  fog: <bool>\n * }\n */\n\nTHREE.SpriteMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this );\n\n\tthis.type = 'SpriteMaterial';\n\n\tthis.color = new THREE.Color( 0xffffff );\n\tthis.map = null;\n\n\tthis.rotation = 0;\n\n\tthis.fog = false;\n\n\t// set parameters\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.SpriteMaterial.prototype = Object.create( THREE.Material.prototype );\n\nTHREE.SpriteMaterial.prototype.clone = function () {\n\n\tvar material = new THREE.SpriteMaterial();\n\n\tTHREE.Material.prototype.clone.call( this, material );\n\n\tmaterial.color.copy( this.color );\n\tmaterial.map = this.map;\n\n\tmaterial.rotation = this.rotation;\n\n\tmaterial.fog = this.fog;\n\n\treturn material;\n\n};\n\n// File:src/textures/Texture.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author szimek / https://github.com/szimek/\n */\n\nTHREE.Texture = function ( image, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\n\n\tObject.defineProperty( this, 'id', { value: THREE.TextureIdCount ++ } );\n\n\tthis.uuid = THREE.Math.generateUUID();\n\n\tthis.name = '';\n\n\tthis.image = image !== undefined ? image : THREE.Texture.DEFAULT_IMAGE;\n\tthis.mipmaps = [];\n\n\tthis.mapping = mapping !== undefined ? mapping : THREE.Texture.DEFAULT_MAPPING;\n\n\tthis.wrapS = wrapS !== undefined ? wrapS : THREE.ClampToEdgeWrapping;\n\tthis.wrapT = wrapT !== undefined ? wrapT : THREE.ClampToEdgeWrapping;\n\n\tthis.magFilter = magFilter !== undefined ? magFilter : THREE.LinearFilter;\n\tthis.minFilter = minFilter !== undefined ? minFilter : THREE.LinearMipMapLinearFilter;\n\n\tthis.anisotropy = anisotropy !== undefined ? anisotropy : 1;\n\n\tthis.format = format !== undefined ? format : THREE.RGBAFormat;\n\tthis.type = type !== undefined ? type : THREE.UnsignedByteType;\n\n\tthis.offset = new THREE.Vector2( 0, 0 );\n\tthis.repeat = new THREE.Vector2( 1, 1 );\n\n\tthis.generateMipmaps = true;\n\tthis.premultiplyAlpha = false;\n\tthis.flipY = true;\n\tthis.unpackAlignment = 4; // valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\n\n\tthis._needsUpdate = false;\n\tthis.onUpdate = null;\n\n};\n\nTHREE.Texture.DEFAULT_IMAGE = undefined;\nTHREE.Texture.DEFAULT_MAPPING = new THREE.UVMapping();\n\nTHREE.Texture.prototype = {\n\n\tconstructor: THREE.Texture,\n\n\tget needsUpdate () {\n\n\t\treturn this._needsUpdate;\n\n\t},\n\n\tset needsUpdate ( value ) {\n\n\t\tif ( value === true ) this.update();\n\n\t\tthis._needsUpdate = value;\n\n\t},\n\n\tclone: function ( texture ) {\n\n\t\tif ( texture === undefined ) texture = new THREE.Texture();\n\n\t\ttexture.image = this.image;\n\t\ttexture.mipmaps = this.mipmaps.slice( 0 );\n\n\t\ttexture.mapping = this.mapping;\n\n\t\ttexture.wrapS = this.wrapS;\n\t\ttexture.wrapT = this.wrapT;\n\n\t\ttexture.magFilter = this.magFilter;\n\t\ttexture.minFilter = this.minFilter;\n\n\t\ttexture.anisotropy = this.anisotropy;\n\n\t\ttexture.format = this.format;\n\t\ttexture.type = this.type;\n\n\t\ttexture.offset.copy( this.offset );\n\t\ttexture.repeat.copy( this.repeat );\n\n\t\ttexture.generateMipmaps = this.generateMipmaps;\n\t\ttexture.premultiplyAlpha = this.premultiplyAlpha;\n\t\ttexture.flipY = this.flipY;\n\t\ttexture.unpackAlignment = this.unpackAlignment;\n\n\t\treturn texture;\n\n\t},\n\n\tupdate: function () {\n\n\t\tthis.dispatchEvent( { type: 'update' } );\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n};\n\nTHREE.EventDispatcher.prototype.apply( THREE.Texture.prototype );\n\nTHREE.TextureIdCount = 0;\n\n// File:src/textures/CubeTexture.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.CubeTexture = function ( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\n\n\tTHREE.Texture.call( this, images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\tthis.images = images;\n\n};\n\nTHREE.CubeTexture.prototype = Object.create( THREE.Texture.prototype );\n\nTHREE.CubeTexture.clone = function ( texture ) {\n\n\tif ( texture === undefined ) texture = new THREE.CubeTexture();\n\n\tTHREE.Texture.prototype.clone.call( this, texture );\n\n\ttexture.images = this.images;\n\n\treturn texture;\n\n};\n\n// File:src/textures/CompressedTexture.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.CompressedTexture = function ( mipmaps, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy ) {\n\n\tTHREE.Texture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\tthis.image = { width: width, height: height };\n\tthis.mipmaps = mipmaps;\n\n\t// no flipping for cube textures\n\t// (also flipping doesn't work for compressed textures )\n\n\tthis.flipY = false;\n\n\t// can't generate mipmaps for compressed textures\n\t// mips must be embedded in DDS files\n\n\tthis.generateMipmaps = false;\n\n};\n\nTHREE.CompressedTexture.prototype = Object.create( THREE.Texture.prototype );\n\nTHREE.CompressedTexture.prototype.clone = function () {\n\n\tvar texture = new THREE.CompressedTexture();\n\n\tTHREE.Texture.prototype.clone.call( this, texture );\n\n\treturn texture;\n\n};\n\n// File:src/textures/DataTexture.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.DataTexture = function ( data, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy ) {\n\n\tTHREE.Texture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\tthis.image = { data: data, width: width, height: height };\n\n};\n\nTHREE.DataTexture.prototype = Object.create( THREE.Texture.prototype );\n\nTHREE.DataTexture.prototype.clone = function () {\n\n\tvar texture = new THREE.DataTexture();\n\n\tTHREE.Texture.prototype.clone.call( this, texture );\n\n\treturn texture;\n\n};\n\n// File:src/textures/VideoTexture.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.VideoTexture = function ( video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\n\n\tTHREE.Texture.call( this, video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\tthis.generateMipmaps = false;\n\n\tvar scope = this;\n\n\tvar update = function () {\n\n\t\trequestAnimationFrame( update );\n\n\t\tif ( video.readyState === video.HAVE_ENOUGH_DATA ) {\n\n\t\t\tscope.needsUpdate = true;\n\n\t\t}\n\n\t};\n\n\tupdate();\n\n};\n\nTHREE.VideoTexture.prototype = Object.create( THREE.Texture.prototype );\n\n// File:src/objects/Group.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.Group = function () {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.type = 'Group';\n\n};\n\nTHREE.Group.prototype = Object.create( THREE.Object3D.prototype );\n\n// File:src/objects/PointCloud.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.PointCloud = function ( geometry, material ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.type = 'PointCloud';\n\n\tthis.geometry = geometry !== undefined ? geometry : new THREE.Geometry();\n\tthis.material = material !== undefined ? material : new THREE.PointCloudMaterial( { color: Math.random() * 0xffffff } );\n\n\tthis.sortParticles = false;\n\n};\n\nTHREE.PointCloud.prototype = Object.create( THREE.Object3D.prototype );\n\nTHREE.PointCloud.prototype.raycast = ( function () {\n\n\tvar inverseMatrix = new THREE.Matrix4();\n\tvar ray = new THREE.Ray();\n\n\treturn function ( raycaster, intersects ) {\n\n\t\tvar object = this;\n\t\tvar geometry = object.geometry;\n\t\tvar threshold = raycaster.params.PointCloud.threshold;\n\n\t\tinverseMatrix.getInverse( this.matrixWorld );\n\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tif ( ray.isIntersectionBox( geometry.boundingBox ) === false ) {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\n\t\tvar position = new THREE.Vector3();\n\n\t\tvar testPoint = function ( point, index ) {\n\n\t\t\tvar rayPointDistance = ray.distanceToPoint( point );\n\n\t\t\tif ( rayPointDistance < localThreshold ) {\n\n\t\t\t\tvar intersectPoint = ray.closestPointToPoint( point );\n\t\t\t\tintersectPoint.applyMatrix4( object.matrixWorld );\n\n\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectPoint );\n\n\t\t\t\tintersects.push( {\n\n\t\t\t\t\tdistance: distance,\n\t\t\t\t\tdistanceToRay: rayPointDistance,\n\t\t\t\t\tpoint: intersectPoint.clone(),\n\t\t\t\t\tindex: index,\n\t\t\t\t\tface: null,\n\t\t\t\t\tobject: object\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t};\n\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\n\n\t\t\tvar attributes = geometry.attributes;\n\t\t\tvar positions = attributes.position.array;\n\n\t\t\tif ( attributes.index !== undefined ) {\n\n\t\t\t\tvar indices = attributes.index.array;\n\t\t\t\tvar offsets = geometry.offsets;\n\n\t\t\t\tif ( offsets.length === 0 ) {\n\n\t\t\t\t\tvar offset = {\n\t\t\t\t\t\tstart: 0,\n\t\t\t\t\t\tcount: indices.length,\n\t\t\t\t\t\tindex: 0\n\t\t\t\t\t};\n\n\t\t\t\t\toffsets = [ offset ];\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var oi = 0, ol = offsets.length; oi < ol; ++oi ) {\n\n\t\t\t\t\tvar start = offsets[ oi ].start;\n\t\t\t\t\tvar count = offsets[ oi ].count;\n\t\t\t\t\tvar index = offsets[ oi ].index;\n\n\t\t\t\t\tfor ( var i = start, il = start + count; i < il; i ++ ) {\n\n\t\t\t\t\t\tvar a = index + indices[ i ];\n\n\t\t\t\t\t\tposition.fromArray( positions, a * 3 );\n\n\t\t\t\t\t\ttestPoint( position, a );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tvar pointCount = positions.length / 3;\n\n\t\t\t\tfor ( var i = 0; i < pointCount; i ++ ) {\n\n\t\t\t\t\tposition.set(\n\t\t\t\t\t\tpositions[ 3 * i ],\n\t\t\t\t\t\tpositions[ 3 * i + 1 ],\n\t\t\t\t\t\tpositions[ 3 * i + 2 ]\n\t\t\t\t\t);\n\n\t\t\t\t\ttestPoint( position, i );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tvar vertices = this.geometry.vertices;\n\n\t\t\tfor ( var i = 0; i < vertices.length; i ++ ) {\n\n\t\t\t\ttestPoint( vertices[ i ], i );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n}() );\n\nTHREE.PointCloud.prototype.clone = function ( object ) {\n\n\tif ( object === undefined ) object = new THREE.PointCloud( this.geometry, this.material );\n\n\tobject.sortParticles = this.sortParticles;\n\n\tTHREE.Object3D.prototype.clone.call( this, object );\n\n\treturn object;\n\n};\n\n// Backwards compatibility\n\nTHREE.ParticleSystem = function ( geometry, material ) {\n\n\tconsole.warn( 'THREE.ParticleSystem has been renamed to THREE.PointCloud.' );\n\treturn new THREE.PointCloud( geometry, material );\n\n};\n\n// File:src/objects/Line.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.Line = function ( geometry, material, mode ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.type = 'Line';\n\n\tthis.geometry = geometry !== undefined ? geometry : new THREE.Geometry();\n\tthis.material = material !== undefined ? material : new THREE.LineBasicMaterial( { color: Math.random() * 0xffffff } );\n\n\tthis.mode = ( mode !== undefined ) ? mode : THREE.LineStrip;\n\n};\n\nTHREE.LineStrip = 0;\nTHREE.LinePieces = 1;\n\nTHREE.Line.prototype = Object.create( THREE.Object3D.prototype );\n\nTHREE.Line.prototype.raycast = ( function () {\n\n\tvar inverseMatrix = new THREE.Matrix4();\n\tvar ray = new THREE.Ray();\n\tvar sphere = new THREE.Sphere();\n\n\treturn function ( raycaster, intersects ) {\n\n\t\tvar precision = raycaster.linePrecision;\n\t\tvar precisionSq = precision * precision;\n\n\t\tvar geometry = this.geometry;\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tsphere.copy( geometry.boundingSphere );\n\t\tsphere.applyMatrix4( this.matrixWorld );\n\n\t\tif ( raycaster.ray.isIntersectionSphere( sphere ) === false ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tinverseMatrix.getInverse( this.matrixWorld );\n\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\n\n\t\t/* if ( geometry instanceof THREE.BufferGeometry ) {\n\n\t\t} else */ if ( geometry instanceof THREE.Geometry ) {\n\n\t\t\tvar vertices = geometry.vertices;\n\t\t\tvar nbVertices = vertices.length;\n\t\t\tvar interSegment = new THREE.Vector3();\n\t\t\tvar interRay = new THREE.Vector3();\n\t\t\tvar step = this.mode === THREE.LineStrip ? 1 : 2;\n\n\t\t\tfor ( var i = 0; i < nbVertices - 1; i = i + step ) {\n\n\t\t\t\tvar distSq = ray.distanceSqToSegment( vertices[ i ], vertices[ i + 1 ], interRay, interSegment );\n\n\t\t\t\tif ( distSq > precisionSq ) continue;\n\n\t\t\t\tvar distance = ray.origin.distanceTo( interRay );\n\n\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\tintersects.push( {\n\n\t\t\t\t\tdistance: distance,\n\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\tface: null,\n\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\tobject: this\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n}() );\n\nTHREE.Line.prototype.clone = function ( object ) {\n\n\tif ( object === undefined ) object = new THREE.Line( this.geometry, this.material, this.mode );\n\n\tTHREE.Object3D.prototype.clone.call( this, object );\n\n\treturn object;\n\n};\n\n// File:src/objects/Mesh.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author jonobr1 / http://jonobr1.com/\n */\n\nTHREE.Mesh = function ( geometry, material ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.type = 'Mesh';\n\t\n\tthis.geometry = geometry !== undefined ? geometry : new THREE.Geometry();\n\tthis.material = material !== undefined ? material : new THREE.MeshBasicMaterial( { color: Math.random() * 0xffffff } );\n\n\tthis.updateMorphTargets();\n\n};\n\nTHREE.Mesh.prototype = Object.create( THREE.Object3D.prototype );\n\nTHREE.Mesh.prototype.updateMorphTargets = function () {\n\n\tif ( this.geometry.morphTargets !== undefined && this.geometry.morphTargets.length > 0 ) {\n\n\t\tthis.morphTargetBase = - 1;\n\t\tthis.morphTargetForcedOrder = [];\n\t\tthis.morphTargetInfluences = [];\n\t\tthis.morphTargetDictionary = {};\n\n\t\tfor ( var m = 0, ml = this.geometry.morphTargets.length; m < ml; m ++ ) {\n\n\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\tthis.morphTargetDictionary[ this.geometry.morphTargets[ m ].name ] = m;\n\n\t\t}\n\n\t}\n\n};\n\nTHREE.Mesh.prototype.getMorphTargetIndexByName = function ( name ) {\n\n\tif ( this.morphTargetDictionary[ name ] !== undefined ) {\n\n\t\treturn this.morphTargetDictionary[ name ];\n\n\t}\n\n\tconsole.log( 'THREE.Mesh.getMorphTargetIndexByName: morph target ' + name + ' does not exist. Returning 0.' );\n\n\treturn 0;\n\n};\n\n\nTHREE.Mesh.prototype.raycast = ( function () {\n\n\tvar inverseMatrix = new THREE.Matrix4();\n\tvar ray = new THREE.Ray();\n\tvar sphere = new THREE.Sphere();\n\n\tvar vA = new THREE.Vector3();\n\tvar vB = new THREE.Vector3();\n\tvar vC = new THREE.Vector3();\n\n\treturn function ( raycaster, intersects ) {\n\n\t\tvar geometry = this.geometry;\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\tsphere.copy( geometry.boundingSphere );\n\t\tsphere.applyMatrix4( this.matrixWorld );\n\n\t\tif ( raycaster.ray.isIntersectionSphere( sphere ) === false ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t// Check boundingBox before continuing\n\n\t\tinverseMatrix.getInverse( this.matrixWorld );\n\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tif ( ray.isIntersectionBox( geometry.boundingBox ) === false )  {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\n\n\t\t\tvar material = this.material;\n\n\t\t\tif ( material === undefined ) return;\n\n\t\t\tvar attributes = geometry.attributes;\n\n\t\t\tvar a, b, c;\n\t\t\tvar precision = raycaster.precision;\n\n\t\t\tif ( attributes.index !== undefined ) {\n\n\t\t\t\tvar indices = attributes.index.array;\n\t\t\t\tvar positions = attributes.position.array;\n\t\t\t\tvar offsets = geometry.offsets;\n\n\t\t\t\tif ( offsets.length === 0 ) {\n\n\t\t\t\t\toffsets = [ { start: 0, count: indices.length, index: 0 } ];\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var oi = 0, ol = offsets.length; oi < ol; ++oi ) {\n\n\t\t\t\t\tvar start = offsets[ oi ].start;\n\t\t\t\t\tvar count = offsets[ oi ].count;\n\t\t\t\t\tvar index = offsets[ oi ].index;\n\n\t\t\t\t\tfor ( var i = start, il = start + count; i < il; i += 3 ) {\n\n\t\t\t\t\t\ta = index + indices[ i ];\n\t\t\t\t\t\tb = index + indices[ i + 1 ];\n\t\t\t\t\t\tc = index + indices[ i + 2 ];\n\n\t\t\t\t\t\tvA.fromArray( positions, a * 3 );\n\t\t\t\t\t\tvB.fromArray( positions, b * 3 );\n\t\t\t\t\t\tvC.fromArray( positions, c * 3 );\n\n\t\t\t\t\t\tif ( material.side === THREE.BackSide ) {\n\n\t\t\t\t\t\t\tvar intersectionPoint = ray.intersectTriangle( vC, vB, vA, true );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tvar intersectionPoint = ray.intersectTriangle( vA, vB, vC, material.side !== THREE.DoubleSide );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( intersectionPoint === null ) continue;\n\n\t\t\t\t\t\tintersectionPoint.applyMatrix4( this.matrixWorld );\n\n\t\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectionPoint );\n\n\t\t\t\t\t\tif ( distance < precision || distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\t\tpoint: intersectionPoint,\n\t\t\t\t\t\t\tface: new THREE.Face3( a, b, c, THREE.Triangle.normal( vA, vB, vC ) ),\n\t\t\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\t\t\tobject: this\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tvar positions = attributes.position.array;\n\n\t\t\t\tfor ( var i = 0, j = 0, il = positions.length; i < il; i += 3, j += 9 ) {\n\n\t\t\t\t\ta = i;\n\t\t\t\t\tb = i + 1;\n\t\t\t\t\tc = i + 2;\n\n\t\t\t\t\tvA.fromArray( positions, j );\n\t\t\t\t\tvB.fromArray( positions, j + 3 );\n\t\t\t\t\tvC.fromArray( positions, j + 6 );\n\n\t\t\t\t\tif ( material.side === THREE.BackSide ) {\n\n\t\t\t\t\t\tvar intersectionPoint = ray.intersectTriangle( vC, vB, vA, true );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvar intersectionPoint = ray.intersectTriangle( vA, vB, vC, material.side !== THREE.DoubleSide );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( intersectionPoint === null ) continue;\n\n\t\t\t\t\tintersectionPoint.applyMatrix4( this.matrixWorld );\n\n\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectionPoint );\n\n\t\t\t\t\tif ( distance < precision || distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\tpoint: intersectionPoint,\n\t\t\t\t\t\tface: new THREE.Face3( a, b, c, THREE.Triangle.normal( vA, vB, vC ) ),\n\t\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\t\tobject: this\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( geometry instanceof THREE.Geometry ) {\n\n\t\t\tvar isFaceMaterial = this.material instanceof THREE.MeshFaceMaterial;\n\t\t\tvar objectMaterials = isFaceMaterial === true ? this.material.materials : null;\n\n\t\t\tvar a, b, c, d;\n\t\t\tvar precision = raycaster.precision;\n\n\t\t\tvar vertices = geometry.vertices;\n\n\t\t\tfor ( var f = 0, fl = geometry.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tvar face = geometry.faces[ f ];\n\n\t\t\t\tvar material = isFaceMaterial === true ? objectMaterials[ face.materialIndex ] : this.material;\n\n\t\t\t\tif ( material === undefined ) continue;\n\n\t\t\t\ta = vertices[ face.a ];\n\t\t\t\tb = vertices[ face.b ];\n\t\t\t\tc = vertices[ face.c ];\n\n\t\t\t\tif ( material.morphTargets === true ) {\n\n\t\t\t\t\tvar morphTargets = geometry.morphTargets;\n\t\t\t\t\tvar morphInfluences = this.morphTargetInfluences;\n\n\t\t\t\t\tvA.set( 0, 0, 0 );\n\t\t\t\t\tvB.set( 0, 0, 0 );\n\t\t\t\t\tvC.set( 0, 0, 0 );\n\n\t\t\t\t\tfor ( var t = 0, tl = morphTargets.length; t < tl; t ++ ) {\n\n\t\t\t\t\t\tvar influence = morphInfluences[ t ];\n\n\t\t\t\t\t\tif ( influence === 0 ) continue;\n\n\t\t\t\t\t\tvar targets = morphTargets[ t ].vertices;\n\n\t\t\t\t\t\tvA.x += ( targets[ face.a ].x - a.x ) * influence;\n\t\t\t\t\t\tvA.y += ( targets[ face.a ].y - a.y ) * influence;\n\t\t\t\t\t\tvA.z += ( targets[ face.a ].z - a.z ) * influence;\n\n\t\t\t\t\t\tvB.x += ( targets[ face.b ].x - b.x ) * influence;\n\t\t\t\t\t\tvB.y += ( targets[ face.b ].y - b.y ) * influence;\n\t\t\t\t\t\tvB.z += ( targets[ face.b ].z - b.z ) * influence;\n\n\t\t\t\t\t\tvC.x += ( targets[ face.c ].x - c.x ) * influence;\n\t\t\t\t\t\tvC.y += ( targets[ face.c ].y - c.y ) * influence;\n\t\t\t\t\t\tvC.z += ( targets[ face.c ].z - c.z ) * influence;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvA.add( a );\n\t\t\t\t\tvB.add( b );\n\t\t\t\t\tvC.add( c );\n\n\t\t\t\t\ta = vA;\n\t\t\t\t\tb = vB;\n\t\t\t\t\tc = vC;\n\n\t\t\t\t}\n\n\t\t\t\tif ( material.side === THREE.BackSide ) {\n\n\t\t\t\t\tvar intersectionPoint = ray.intersectTriangle( c, b, a, true );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tvar intersectionPoint = ray.intersectTriangle( a, b, c, material.side !== THREE.DoubleSide );\n\n\t\t\t\t}\n\n\t\t\t\tif ( intersectionPoint === null ) continue;\n\n\t\t\t\tintersectionPoint.applyMatrix4( this.matrixWorld );\n\n\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectionPoint );\n\n\t\t\t\tif ( distance < precision || distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\tintersects.push( {\n\n\t\t\t\t\tdistance: distance,\n\t\t\t\t\tpoint: intersectionPoint,\n\t\t\t\t\tface: face,\n\t\t\t\t\tfaceIndex: f,\n\t\t\t\t\tobject: this\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n}() );\n\nTHREE.Mesh.prototype.clone = function ( object, recursive ) {\n\n\tif ( object === undefined ) object = new THREE.Mesh( this.geometry, this.material );\n\n\tTHREE.Object3D.prototype.clone.call( this, object, recursive );\n\n\treturn object;\n\n};\n\n// File:src/objects/Bone.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author ikerr / http://verold.com\n */\n\nTHREE.Bone = function ( belongsToSkin ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.skin = belongsToSkin;\n\n};\n\nTHREE.Bone.prototype = Object.create( THREE.Object3D.prototype );\n\n\n// File:src/objects/Skeleton.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author michael guerrero / http://realitymeltdown.com\n * @author ikerr / http://verold.com\n */\n\nTHREE.Skeleton = function ( bones, boneInverses, useVertexTexture ) {\n\n\tthis.useVertexTexture = useVertexTexture !== undefined ? useVertexTexture : true;\n\n\tthis.identityMatrix = new THREE.Matrix4();\n\n\t// copy the bone array\n\n\tbones = bones || [];\n\n\tthis.bones = bones.slice( 0 );\n\n\t// create a bone texture or an array of floats\n\n\tif ( this.useVertexTexture ) {\n\n\t\t// layout (1 matrix = 4 pixels)\n\t\t//      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\n\t\t//  with  8x8  pixel texture max   16 bones  (8 * 8  / 4)\n\t\t//       16x16 pixel texture max   64 bones (16 * 16 / 4)\n\t\t//       32x32 pixel texture max  256 bones (32 * 32 / 4)\n\t\t//       64x64 pixel texture max 1024 bones (64 * 64 / 4)\n\n\t\tvar size;\n\n\t\tif ( this.bones.length > 256 )\n\t\t\tsize = 64;\n\t\telse if ( this.bones.length > 64 )\n\t\t\tsize = 32;\n\t\telse if ( this.bones.length > 16 )\n\t\t\tsize = 16;\n\t\telse\n\t\t\tsize = 8;\n\n\t\tthis.boneTextureWidth = size;\n\t\tthis.boneTextureHeight = size;\n\n\t\tthis.boneMatrices = new Float32Array( this.boneTextureWidth * this.boneTextureHeight * 4 ); // 4 floats per RGBA pixel\n\t\tthis.boneTexture = new THREE.DataTexture( this.boneMatrices, this.boneTextureWidth, this.boneTextureHeight, THREE.RGBAFormat, THREE.FloatType );\n\t\tthis.boneTexture.minFilter = THREE.NearestFilter;\n\t\tthis.boneTexture.magFilter = THREE.NearestFilter;\n\t\tthis.boneTexture.generateMipmaps = false;\n\t\tthis.boneTexture.flipY = false;\n\n\t} else {\n\n\t\tthis.boneMatrices = new Float32Array( 16 * this.bones.length );\n\n\t}\n\n\t// use the supplied bone inverses or calculate the inverses\n\n\tif ( boneInverses === undefined ) {\n\n\t\tthis.calculateInverses();\n\n\t} else {\n\n\t\tif ( this.bones.length === boneInverses.length ) {\n\n\t\t\tthis.boneInverses = boneInverses.slice( 0 );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.Skeleton bonInverses is the wrong length.' );\n\n\t\t\tthis.boneInverses = [];\n\n\t\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\n\n\t\t\t\tthis.boneInverses.push( new THREE.Matrix4() );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n};\n\nTHREE.Skeleton.prototype.calculateInverses = function () {\n\n\tthis.boneInverses = [];\n\n\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\n\n\t\tvar inverse = new THREE.Matrix4();\n\n\t\tif ( this.bones[ b ] ) {\n\n\t\t\tinverse.getInverse( this.bones[ b ].matrixWorld );\n\n\t\t}\n\n\t\tthis.boneInverses.push( inverse );\n\n\t}\n\n};\n\nTHREE.Skeleton.prototype.pose = function () {\n\n\tvar bone;\n\n\t// recover the bind-time world matrices\n\n\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\n\n\t\tbone = this.bones[ b ];\n\n\t\tif ( bone ) {\n\n\t\t\tbone.matrixWorld.getInverse( this.boneInverses[ b ] );\n\n\t\t}\n\n\t}\n\n\t// compute the local matrices, positions, rotations and scales\n\n\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\n\n\t\tbone = this.bones[ b ];\n\n\t\tif ( bone ) {\n\n\t\t\tif ( bone.parent ) {\n\n\t\t\t\tbone.matrix.getInverse( bone.parent.matrixWorld );\n\t\t\t\tbone.matrix.multiply( bone.matrixWorld );\n\n\t\t\t} else {\n\n\t\t\t\tbone.matrix.copy( bone.matrixWorld );\n\n\t\t\t}\n\n\t\t\tbone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\n\n\t\t}\n\n\t}\n\n};\n\nTHREE.Skeleton.prototype.update = ( function () {\n\n\tvar offsetMatrix = new THREE.Matrix4();\n\t\n\treturn function () {\n\n\t\t// flatten bone matrices to array\n\n\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\n\n\t\t\t// compute the offset between the current and the original transform\n\n\t\t\tvar matrix = this.bones[ b ] ? this.bones[ b ].matrixWorld : this.identityMatrix;\n\n\t\t\toffsetMatrix.multiplyMatrices( matrix, this.boneInverses[ b ] );\n\t\t\toffsetMatrix.flattenToArrayOffset( this.boneMatrices, b * 16 );\n\n\t\t}\n\n\t\tif ( this.useVertexTexture ) {\n\n\t\t\tthis.boneTexture.needsUpdate = true;\n\n\t\t}\n\t\t\n\t};\n\n} )();\n\n\n// File:src/objects/SkinnedMesh.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author ikerr / http://verold.com\n */\n\nTHREE.SkinnedMesh = function ( geometry, material, useVertexTexture ) {\n\n\tTHREE.Mesh.call( this, geometry, material );\n\n\tthis.type = 'SkinnedMesh';\n\n\tthis.bindMode = \"attached\";\n\tthis.bindMatrix = new THREE.Matrix4();\n\tthis.bindMatrixInverse = new THREE.Matrix4();\n\n\t// init bones\n\n\t// TODO: remove bone creation as there is no reason (other than\n\t// convenience) for THREE.SkinnedMesh to do this.\n\n\tvar bones = [];\n\n\tif ( this.geometry && this.geometry.bones !== undefined ) {\n\n\t\tvar bone, gbone, p, q, s;\n\n\t\tfor ( var b = 0, bl = this.geometry.bones.length; b < bl; ++b ) {\n\n\t\t\tgbone = this.geometry.bones[ b ];\n\n\t\t\tp = gbone.pos;\n\t\t\tq = gbone.rotq;\n\t\t\ts = gbone.scl;\n\n\t\t\tbone = new THREE.Bone( this );\n\t\t\tbones.push( bone );\n\n\t\t\tbone.name = gbone.name;\n\t\t\tbone.position.set( p[ 0 ], p[ 1 ], p[ 2 ] );\n\t\t\tbone.quaternion.set( q[ 0 ], q[ 1 ], q[ 2 ], q[ 3 ] );\n\n\t\t\tif ( s !== undefined ) {\n\n\t\t\t\tbone.scale.set( s[ 0 ], s[ 1 ], s[ 2 ] );\n\n\t\t\t} else {\n\n\t\t\t\tbone.scale.set( 1, 1, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( var b = 0, bl = this.geometry.bones.length; b < bl; ++b ) {\n\n\t\t\tgbone = this.geometry.bones[ b ];\n\n\t\t\tif ( gbone.parent !== - 1 ) {\n\n\t\t\t\tbones[ gbone.parent ].add( bones[ b ] );\n\n\t\t\t} else {\n\n\t\t\t\tthis.add( bones[ b ] );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tthis.normalizeSkinWeights();\n\n\tthis.updateMatrixWorld( true );\n\tthis.bind( new THREE.Skeleton( bones, undefined, useVertexTexture ) );\n\n};\n\n\nTHREE.SkinnedMesh.prototype = Object.create( THREE.Mesh.prototype );\n\nTHREE.SkinnedMesh.prototype.bind = function( skeleton, bindMatrix ) {\n\n\tthis.skeleton = skeleton;\n\n\tif ( bindMatrix === undefined ) {\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\tbindMatrix = this.matrixWorld;\n\n\t}\n\n\tthis.bindMatrix.copy( bindMatrix );\n\tthis.bindMatrixInverse.getInverse( bindMatrix );\n\n};\n\nTHREE.SkinnedMesh.prototype.pose = function () {\n\n\tthis.skeleton.pose();\n\n};\n\nTHREE.SkinnedMesh.prototype.normalizeSkinWeights = function () {\n\n\tif ( this.geometry instanceof THREE.Geometry ) {\n\n\t\tfor ( var i = 0; i < this.geometry.skinIndices.length; i ++ ) {\n\n\t\t\tvar sw = this.geometry.skinWeights[ i ];\n\n\t\t\tvar scale = 1.0 / sw.lengthManhattan();\n\n\t\t\tif ( scale !== Infinity ) {\n\n\t\t\t\tsw.multiplyScalar( scale );\n\n\t\t\t} else {\n\n\t\t\t\tsw.set( 1 ); // this will be normalized by the shader anyway\n\n\t\t\t}\n\n\t\t}\n\n\t} else {\n\n\t\t// skinning weights assumed to be normalized for THREE.BufferGeometry\n\n\t}\n\n};\n\nTHREE.SkinnedMesh.prototype.updateMatrixWorld = function( force ) {\n\n\tTHREE.Mesh.prototype.updateMatrixWorld.call( this, true );\n\n\tif ( this.bindMode === \"attached\" ) {\n\n\t\tthis.bindMatrixInverse.getInverse( this.matrixWorld );\n\n\t} else if ( this.bindMode === \"detached\" ) {\n\n\t\tthis.bindMatrixInverse.getInverse( this.bindMatrix );\n\n\t} else {\n\n\t\tconsole.warn( 'THREE.SkinnedMesh unreckognized bindMode: ' + this.bindMode );\n\n\t}\n\n};\n\nTHREE.SkinnedMesh.prototype.clone = function( object ) {\n\n\tif ( object === undefined ) {\n\n\t\tobject = new THREE.SkinnedMesh( this.geometry, this.material, this.useVertexTexture );\n\n\t}\n\n\tTHREE.Mesh.prototype.clone.call( this, object );\n\n\treturn object;\n\n};\n\n\n// File:src/objects/MorphAnimMesh.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.MorphAnimMesh = function ( geometry, material ) {\n\n\tTHREE.Mesh.call( this, geometry, material );\n\n\tthis.type = 'MorphAnimMesh';\n\n\t// API\n\n\tthis.duration = 1000; // milliseconds\n\tthis.mirroredLoop = false;\n\tthis.time = 0;\n\n\t// internals\n\n\tthis.lastKeyframe = 0;\n\tthis.currentKeyframe = 0;\n\n\tthis.direction = 1;\n\tthis.directionBackwards = false;\n\n\tthis.setFrameRange( 0, this.geometry.morphTargets.length - 1 );\n\n};\n\nTHREE.MorphAnimMesh.prototype = Object.create( THREE.Mesh.prototype );\n\nTHREE.MorphAnimMesh.prototype.setFrameRange = function ( start, end ) {\n\n\tthis.startKeyframe = start;\n\tthis.endKeyframe = end;\n\n\tthis.length = this.endKeyframe - this.startKeyframe + 1;\n\n};\n\nTHREE.MorphAnimMesh.prototype.setDirectionForward = function () {\n\n\tthis.direction = 1;\n\tthis.directionBackwards = false;\n\n};\n\nTHREE.MorphAnimMesh.prototype.setDirectionBackward = function () {\n\n\tthis.direction = - 1;\n\tthis.directionBackwards = true;\n\n};\n\nTHREE.MorphAnimMesh.prototype.parseAnimations = function () {\n\n\tvar geometry = this.geometry;\n\n\tif ( ! geometry.animations ) geometry.animations = {};\n\n\tvar firstAnimation, animations = geometry.animations;\n\n\tvar pattern = /([a-z]+)_?(\\d+)/;\n\n\tfor ( var i = 0, il = geometry.morphTargets.length; i < il; i ++ ) {\n\n\t\tvar morph = geometry.morphTargets[ i ];\n\t\tvar parts = morph.name.match( pattern );\n\n\t\tif ( parts && parts.length > 1 ) {\n\n\t\t\tvar label = parts[ 1 ];\n\t\t\tvar num = parts[ 2 ];\n\n\t\t\tif ( ! animations[ label ] ) animations[ label ] = { start: Infinity, end: - Infinity };\n\n\t\t\tvar animation = animations[ label ];\n\n\t\t\tif ( i < animation.start ) animation.start = i;\n\t\t\tif ( i > animation.end ) animation.end = i;\n\n\t\t\tif ( ! firstAnimation ) firstAnimation = label;\n\n\t\t}\n\n\t}\n\n\tgeometry.firstAnimation = firstAnimation;\n\n};\n\nTHREE.MorphAnimMesh.prototype.setAnimationLabel = function ( label, start, end ) {\n\n\tif ( ! this.geometry.animations ) this.geometry.animations = {};\n\n\tthis.geometry.animations[ label ] = { start: start, end: end };\n\n};\n\nTHREE.MorphAnimMesh.prototype.playAnimation = function ( label, fps ) {\n\n\tvar animation = this.geometry.animations[ label ];\n\n\tif ( animation ) {\n\n\t\tthis.setFrameRange( animation.start, animation.end );\n\t\tthis.duration = 1000 * ( ( animation.end - animation.start ) / fps );\n\t\tthis.time = 0;\n\n\t} else {\n\n\t\tconsole.warn( 'animation[' + label + '] undefined' );\n\n\t}\n\n};\n\nTHREE.MorphAnimMesh.prototype.updateAnimation = function ( delta ) {\n\n\tvar frameTime = this.duration / this.length;\n\n\tthis.time += this.direction * delta;\n\n\tif ( this.mirroredLoop ) {\n\n\t\tif ( this.time > this.duration || this.time < 0 ) {\n\n\t\t\tthis.direction *= - 1;\n\n\t\t\tif ( this.time > this.duration ) {\n\n\t\t\t\tthis.time = this.duration;\n\t\t\t\tthis.directionBackwards = true;\n\n\t\t\t}\n\n\t\t\tif ( this.time < 0 ) {\n\n\t\t\t\tthis.time = 0;\n\t\t\t\tthis.directionBackwards = false;\n\n\t\t\t}\n\n\t\t}\n\n\t} else {\n\n\t\tthis.time = this.time % this.duration;\n\n\t\tif ( this.time < 0 ) this.time += this.duration;\n\n\t}\n\n\tvar keyframe = this.startKeyframe + THREE.Math.clamp( Math.floor( this.time / frameTime ), 0, this.length - 1 );\n\n\tif ( keyframe !== this.currentKeyframe ) {\n\n\t\tthis.morphTargetInfluences[ this.lastKeyframe ] = 0;\n\t\tthis.morphTargetInfluences[ this.currentKeyframe ] = 1;\n\n\t\tthis.morphTargetInfluences[ keyframe ] = 0;\n\n\t\tthis.lastKeyframe = this.currentKeyframe;\n\t\tthis.currentKeyframe = keyframe;\n\n\t}\n\n\tvar mix = ( this.time % frameTime ) / frameTime;\n\n\tif ( this.directionBackwards ) {\n\n\t\tmix = 1 - mix;\n\n\t}\n\n\tthis.morphTargetInfluences[ this.currentKeyframe ] = mix;\n\tthis.morphTargetInfluences[ this.lastKeyframe ] = 1 - mix;\n\n};\n\nTHREE.MorphAnimMesh.prototype.interpolateTargets = function ( a, b, t ) {\n\n\tvar influences = this.morphTargetInfluences;\n\n\tfor ( var i = 0, l = influences.length; i < l; i ++ ) {\n\n\t\tinfluences[ i ] = 0;\n\n\t}\n\n\tif ( a > -1 ) influences[ a ] = 1 - t;\n\tif ( b > -1 ) influences[ b ] = t;\n\n};\n\nTHREE.MorphAnimMesh.prototype.clone = function ( object ) {\n\n\tif ( object === undefined ) object = new THREE.MorphAnimMesh( this.geometry, this.material );\n\n\tobject.duration = this.duration;\n\tobject.mirroredLoop = this.mirroredLoop;\n\tobject.time = this.time;\n\n\tobject.lastKeyframe = this.lastKeyframe;\n\tobject.currentKeyframe = this.currentKeyframe;\n\n\tobject.direction = this.direction;\n\tobject.directionBackwards = this.directionBackwards;\n\n\tTHREE.Mesh.prototype.clone.call( this, object );\n\n\treturn object;\n\n};\n\n// File:src/objects/LOD.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.LOD = function () {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.objects = [];\n\n};\n\n\nTHREE.LOD.prototype = Object.create( THREE.Object3D.prototype );\n\nTHREE.LOD.prototype.addLevel = function ( object, distance ) {\n\n\tif ( distance === undefined ) distance = 0;\n\n\tdistance = Math.abs( distance );\n\n\tfor ( var l = 0; l < this.objects.length; l ++ ) {\n\n\t\tif ( distance < this.objects[ l ].distance ) {\n\n\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tthis.objects.splice( l, 0, { distance: distance, object: object } );\n\tthis.add( object );\n\n};\n\nTHREE.LOD.prototype.getObjectForDistance = function ( distance ) {\n\n\tfor ( var i = 1, l = this.objects.length; i < l; i ++ ) {\n\n\t\tif ( distance < this.objects[ i ].distance ) {\n\n\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn this.objects[ i - 1 ].object;\n\n};\n\nTHREE.LOD.prototype.raycast = ( function () {\n\n\tvar matrixPosition = new THREE.Vector3();\n\n\treturn function ( raycaster, intersects ) {\n\n\t\tmatrixPosition.setFromMatrixPosition( this.matrixWorld );\n\n\t\tvar distance = raycaster.ray.origin.distanceTo( matrixPosition );\n\n\t\tthis.getObjectForDistance( distance ).raycast( raycaster, intersects );\n\n\t};\n\n}() );\n\nTHREE.LOD.prototype.update = function () {\n\n\tvar v1 = new THREE.Vector3();\n\tvar v2 = new THREE.Vector3();\n\n\treturn function ( camera ) {\n\n\t\tif ( this.objects.length > 1 ) {\n\n\t\t\tv1.setFromMatrixPosition( camera.matrixWorld );\n\t\t\tv2.setFromMatrixPosition( this.matrixWorld );\n\n\t\t\tvar distance = v1.distanceTo( v2 );\n\n\t\t\tthis.objects[ 0 ].object.visible = true;\n\n\t\t\tfor ( var i = 1, l = this.objects.length; i < l; i ++ ) {\n\n\t\t\t\tif ( distance >= this.objects[ i ].distance ) {\n\n\t\t\t\t\tthis.objects[ i - 1 ].object.visible = false;\n\t\t\t\t\tthis.objects[ i     ].object.visible = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfor ( ; i < l; i ++ ) {\n\n\t\t\t\tthis.objects[ i ].object.visible = false;\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n}();\n\nTHREE.LOD.prototype.clone = function ( object ) {\n\n\tif ( object === undefined ) object = new THREE.LOD();\n\n\tTHREE.Object3D.prototype.clone.call( this, object );\n\n\tfor ( var i = 0, l = this.objects.length; i < l; i ++ ) {\n\t\tvar x = this.objects[ i ].object.clone();\n\t\tx.visible = i === 0;\n\t\tobject.addLevel( x, this.objects[ i ].distance );\n\t}\n\n\treturn object;\n\n};\n\n// File:src/objects/Sprite.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.Sprite = ( function () {\n\n\tvar indices = new Uint16Array( [ 0, 1, 2,  0, 2, 3 ] );\n\tvar vertices = new Float32Array( [ - 0.5, - 0.5, 0,   0.5, - 0.5, 0,   0.5, 0.5, 0,   - 0.5, 0.5, 0 ] );\n\tvar uvs = new Float32Array( [ 0, 0,   1, 0,   1, 1,   0, 1 ] );\n\n\tvar geometry = new THREE.BufferGeometry();\n\tgeometry.addAttribute( 'index', new THREE.BufferAttribute( indices, 1 ) );\n\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\n\tgeometry.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\n\n\treturn function ( material ) {\n\n\t\tTHREE.Object3D.call( this );\n\n\t\tthis.type = 'Sprite';\n\n\t\tthis.geometry = geometry;\n\t\tthis.material = ( material !== undefined ) ? material : new THREE.SpriteMaterial();\n\n\t};\n\n} )();\n\nTHREE.Sprite.prototype = Object.create( THREE.Object3D.prototype );\n\nTHREE.Sprite.prototype.raycast = ( function () {\n\n\tvar matrixPosition = new THREE.Vector3();\n\n\treturn function ( raycaster, intersects ) {\n\n\t\tmatrixPosition.setFromMatrixPosition( this.matrixWorld );\n\n\t\tvar distance = raycaster.ray.distanceToPoint( matrixPosition );\n\n\t\tif ( distance > this.scale.x ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tintersects.push( {\n\n\t\t\tdistance: distance,\n\t\t\tpoint: this.position,\n\t\t\tface: null,\n\t\t\tobject: this\n\n\t\t} );\n\n\t};\n\n}() );\n\nTHREE.Sprite.prototype.clone = function ( object ) {\n\n\tif ( object === undefined ) object = new THREE.Sprite( this.material );\n\n\tTHREE.Object3D.prototype.clone.call( this, object );\n\n\treturn object;\n\n};\n\n// Backwards compatibility\n\nTHREE.Particle = THREE.Sprite;\n\n// File:src/objects/LensFlare.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.LensFlare = function ( texture, size, distance, blending, color ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.lensFlares = [];\n\n\tthis.positionScreen = new THREE.Vector3();\n\tthis.customUpdateCallback = undefined;\n\n\tif( texture !== undefined ) {\n\n\t\tthis.add( texture, size, distance, blending, color );\n\n\t}\n\n};\n\nTHREE.LensFlare.prototype = Object.create( THREE.Object3D.prototype );\n\n\n/*\n * Add: adds another flare\n */\n\nTHREE.LensFlare.prototype.add = function ( texture, size, distance, blending, color, opacity ) {\n\n\tif ( size === undefined ) size = - 1;\n\tif ( distance === undefined ) distance = 0;\n\tif ( opacity === undefined ) opacity = 1;\n\tif ( color === undefined ) color = new THREE.Color( 0xffffff );\n\tif ( blending === undefined ) blending = THREE.NormalBlending;\n\n\tdistance = Math.min( distance, Math.max( 0, distance ) );\n\n\tthis.lensFlares.push( {\n\t\ttexture: texture, \t\t\t// THREE.Texture\n\t\tsize: size, \t\t\t\t// size in pixels (-1 = use texture.width)\n\t\tdistance: distance, \t\t// distance (0-1) from light source (0=at light source)\n\t\tx: 0, y: 0, z: 0,\t\t\t// screen position (-1 => 1) z = 0 is ontop z = 1 is back\n\t\tscale: 1, \t\t\t\t\t// scale\n\t\trotation: 1, \t\t\t\t// rotation\n\t\topacity: opacity,\t\t\t// opacity\n\t\tcolor: color,\t\t\t\t// color\n\t\tblending: blending\t\t\t// blending\n\t} );\n\n};\n\n/*\n * Update lens flares update positions on all flares based on the screen position\n * Set myLensFlare.customUpdateCallback to alter the flares in your project specific way.\n */\n\nTHREE.LensFlare.prototype.updateLensFlares = function () {\n\n\tvar f, fl = this.lensFlares.length;\n\tvar flare;\n\tvar vecX = - this.positionScreen.x * 2;\n\tvar vecY = - this.positionScreen.y * 2;\n\n\tfor( f = 0; f < fl; f ++ ) {\n\n\t\tflare = this.lensFlares[ f ];\n\n\t\tflare.x = this.positionScreen.x + vecX * flare.distance;\n\t\tflare.y = this.positionScreen.y + vecY * flare.distance;\n\n\t\tflare.wantedRotation = flare.x * Math.PI * 0.25;\n\t\tflare.rotation += ( flare.wantedRotation - flare.rotation ) * 0.25;\n\n\t}\n\n};\n\n\n// File:src/scenes/Scene.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.Scene = function () {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.type = 'Scene';\n\n\tthis.fog = null;\n\tthis.overrideMaterial = null;\n\n\tthis.autoUpdate = true; // checked by the renderer\n\n};\n\nTHREE.Scene.prototype = Object.create( THREE.Object3D.prototype );\n\nTHREE.Scene.prototype.clone = function ( object ) {\n\n\tif ( object === undefined ) object = new THREE.Scene();\n\n\tTHREE.Object3D.prototype.clone.call( this, object );\n\n\tif ( this.fog !== null ) object.fog = this.fog.clone();\n\tif ( this.overrideMaterial !== null ) object.overrideMaterial = this.overrideMaterial.clone();\n\n\tobject.autoUpdate = this.autoUpdate;\n\tobject.matrixAutoUpdate = this.matrixAutoUpdate;\n\n\treturn object;\n\n};\n\n// File:src/scenes/Fog.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.Fog = function ( color, near, far ) {\n\n\tthis.name = '';\n\n\tthis.color = new THREE.Color( color );\n\n\tthis.near = ( near !== undefined ) ? near : 1;\n\tthis.far = ( far !== undefined ) ? far : 1000;\n\n};\n\nTHREE.Fog.prototype.clone = function () {\n\n\treturn new THREE.Fog( this.color.getHex(), this.near, this.far );\n\n};\n\n// File:src/scenes/FogExp2.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.FogExp2 = function ( color, density ) {\n\n\tthis.name = '';\n\n\tthis.color = new THREE.Color( color );\n\tthis.density = ( density !== undefined ) ? density : 0.00025;\n\n};\n\nTHREE.FogExp2.prototype.clone = function () {\n\n\treturn new THREE.FogExp2( this.color.getHex(), this.density );\n\n};\n\n// File:src/renderers/shaders/ShaderChunk.js\n\nTHREE.ShaderChunk = {};\n\n// File:src/renderers/shaders/ShaderChunk/alphatest_fragment.glsl\n\nTHREE.ShaderChunk[ 'alphatest_fragment'] = \"#ifdef ALPHATEST\\n\\n\tif ( gl_FragColor.a < ALPHATEST ) discard;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/lights_lambert_vertex.glsl\n\nTHREE.ShaderChunk[ 'lights_lambert_vertex'] = \"vLightFront = vec3( 0.0 );\\n\\n#ifdef DOUBLE_SIDED\\n\\n\tvLightBack = vec3( 0.0 );\\n\\n#endif\\n\\ntransformedNormal = normalize( transformedNormal );\\n\\n#if MAX_DIR_LIGHTS > 0\\n\\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\\n\\n\tvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\\n\tvec3 dirVector = normalize( lDirection.xyz );\\n\\n\tfloat dotProduct = dot( transformedNormal, dirVector );\\n\tvec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\\n\\n\t#ifdef DOUBLE_SIDED\\n\\n\t\tvec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\\n\\n\t\t#ifdef WRAP_AROUND\\n\\n\t\t\tvec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\\n\\n\t\t#endif\\n\\n\t#endif\\n\\n\t#ifdef WRAP_AROUND\\n\\n\t\tvec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\\n\t\tdirectionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );\\n\\n\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\tdirectionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );\\n\\n\t\t#endif\\n\\n\t#endif\\n\\n\tvLightFront += directionalLightColor[ i ] * directionalLightWeighting;\\n\\n\t#ifdef DOUBLE_SIDED\\n\\n\t\tvLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;\\n\\n\t#endif\\n\\n}\\n\\n#endif\\n\\n#if MAX_POINT_LIGHTS > 0\\n\\n\tfor( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\\n\\n\t\tvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\\n\t\tvec3 lVector = lPosition.xyz - mvPosition.xyz;\\n\\n\t\tfloat lDistance = 1.0;\\n\t\tif ( pointLightDistance[ i ] > 0.0 )\\n\t\t\tlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\\n\\n\t\tlVector = normalize( lVector );\\n\t\tfloat dotProduct = dot( transformedNormal, lVector );\\n\\n\t\tvec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );\\n\\n\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\tvec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\\n\\n\t\t\t#ifdef WRAP_AROUND\\n\\n\t\t\t\tvec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\\n\\n\t\t\t#endif\\n\\n\t\t#endif\\n\\n\t\t#ifdef WRAP_AROUND\\n\\n\t\t\tvec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\\n\t\t\tpointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );\\n\\n\t\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\t\tpointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );\\n\\n\t\t\t#endif\\n\\n\t\t#endif\\n\\n\t\tvLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;\\n\\n\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\tvLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;\\n\\n\t\t#endif\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0\\n\\n\tfor( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\\n\\n\t\tvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\\n\t\tvec3 lVector = lPosition.xyz - mvPosition.xyz;\\n\\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );\\n\\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\\n\\n\t\t\tspotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\\n\\n\t\t\tfloat lDistance = 1.0;\\n\t\t\tif ( spotLightDistance[ i ] > 0.0 )\\n\t\t\t\tlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\\n\\n\t\t\tlVector = normalize( lVector );\\n\\n\t\t\tfloat dotProduct = dot( transformedNormal, lVector );\\n\t\t\tvec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );\\n\\n\t\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\t\tvec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\\n\\n\t\t\t\t#ifdef WRAP_AROUND\\n\\n\t\t\t\t\tvec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\\n\\n\t\t\t\t#endif\\n\\n\t\t\t#endif\\n\\n\t\t\t#ifdef WRAP_AROUND\\n\\n\t\t\t\tvec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\\n\t\t\t\tspotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );\\n\\n\t\t\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\t\t\tspotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );\\n\\n\t\t\t\t#endif\\n\\n\t\t\t#endif\\n\\n\t\t\tvLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;\\n\\n\t\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\t\tvLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;\\n\\n\t\t\t#endif\\n\\n\t\t}\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_HEMI_LIGHTS > 0\\n\\n\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\\n\\n\t\tvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\\n\t\tvec3 lVector = normalize( lDirection.xyz );\\n\\n\t\tfloat dotProduct = dot( transformedNormal, lVector );\\n\\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\\n\t\tfloat hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;\\n\\n\t\tvLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\\n\\n\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\tvLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\\n\\n\t\t#endif\\n\\n\t}\\n\\n#endif\\n\\nvLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;\\n\\n#ifdef DOUBLE_SIDED\\n\\n\tvLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/map_particle_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'map_particle_pars_fragment'] = \"#ifdef USE_MAP\\n\\n\tuniform sampler2D map;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/default_vertex.glsl\n\nTHREE.ShaderChunk[ 'default_vertex'] = \"vec4 mvPosition;\\n\\n#ifdef USE_SKINNING\\n\\n\tmvPosition = modelViewMatrix * skinned;\\n\\n#endif\\n\\n#if !defined( USE_SKINNING ) && defined( USE_MORPHTARGETS )\\n\\n\tmvPosition = modelViewMatrix * vec4( morphed, 1.0 );\\n\\n#endif\\n\\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHTARGETS )\\n\\n\tmvPosition = modelViewMatrix * vec4( position, 1.0 );\\n\\n#endif\\n\\ngl_Position = projectionMatrix * mvPosition;\";\n\n// File:src/renderers/shaders/ShaderChunk/map_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'map_pars_fragment'] = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\\n\\n\tvarying vec2 vUv;\\n\\n#endif\\n\\n#ifdef USE_MAP\\n\\n\tuniform sampler2D map;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/skinnormal_vertex.glsl\n\nTHREE.ShaderChunk[ 'skinnormal_vertex'] = \"#ifdef USE_SKINNING\\n\\n\tmat4 skinMatrix = mat4( 0.0 );\\n\tskinMatrix += skinWeight.x * boneMatX;\\n\tskinMatrix += skinWeight.y * boneMatY;\\n\tskinMatrix += skinWeight.z * boneMatZ;\\n\tskinMatrix += skinWeight.w * boneMatW;\\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\n\t#ifdef USE_MORPHNORMALS\\n\\n\tvec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );\\n\\n\t#else\\n\\n\tvec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );\\n\\n\t#endif\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_pars_vertex.glsl\n\nTHREE.ShaderChunk[ 'logdepthbuf_pars_vertex'] = \"#ifdef USE_LOGDEPTHBUF\\n\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\n\t\tvarying float vFragDepth;\\n\\n\t#endif\\n\\n\tuniform float logDepthBufFC;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/lightmap_pars_vertex.glsl\n\nTHREE.ShaderChunk[ 'lightmap_pars_vertex'] = \"#ifdef USE_LIGHTMAP\\n\\n\tvarying vec2 vUv2;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/lights_phong_fragment.glsl\n\nTHREE.ShaderChunk[ 'lights_phong_fragment'] = \"vec3 normal = normalize( vNormal );\\nvec3 viewPosition = normalize( vViewPosition );\\n\\n#ifdef DOUBLE_SIDED\\n\\n\tnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\\n\\n#endif\\n\\n#ifdef USE_NORMALMAP\\n\\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\\n\\n#elif defined( USE_BUMPMAP )\\n\\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\\n\\n#endif\\n\\n#if MAX_POINT_LIGHTS > 0\\n\\n\tvec3 pointDiffuse = vec3( 0.0 );\\n\tvec3 pointSpecular = vec3( 0.0 );\\n\\n\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\\n\\n\t\tvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\\n\t\tvec3 lVector = lPosition.xyz + vViewPosition.xyz;\\n\\n\t\tfloat lDistance = 1.0;\\n\t\tif ( pointLightDistance[ i ] > 0.0 )\\n\t\t\tlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\\n\\n\t\tlVector = normalize( lVector );\\n\\n\t\t\t\t// diffuse\\n\\n\t\tfloat dotProduct = dot( normal, lVector );\\n\\n\t\t#ifdef WRAP_AROUND\\n\\n\t\t\tfloat pointDiffuseWeightFull = max( dotProduct, 0.0 );\\n\t\t\tfloat pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\\n\\n\t\t\tvec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\\n\\n\t\t#else\\n\\n\t\t\tfloat pointDiffuseWeight = max( dotProduct, 0.0 );\\n\\n\t\t#endif\\n\\n\t\tpointDiffuse += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;\\n\\n\t\t\t\t// specular\\n\\n\t\tvec3 pointHalfVector = normalize( lVector + viewPosition );\\n\t\tfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\\n\t\tfloat pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );\\n\\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\\n\\n\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, pointHalfVector ), 0.0 ), 5.0 );\\n\t\tpointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0\\n\\n\tvec3 spotDiffuse = vec3( 0.0 );\\n\tvec3 spotSpecular = vec3( 0.0 );\\n\\n\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\\n\\n\t\tvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\\n\t\tvec3 lVector = lPosition.xyz + vViewPosition.xyz;\\n\\n\t\tfloat lDistance = 1.0;\\n\t\tif ( spotLightDistance[ i ] > 0.0 )\\n\t\t\tlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\\n\\n\t\tlVector = normalize( lVector );\\n\\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\\n\\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\\n\\n\t\t\tspotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\\n\\n\t\t\t\t\t// diffuse\\n\\n\t\t\tfloat dotProduct = dot( normal, lVector );\\n\\n\t\t\t#ifdef WRAP_AROUND\\n\\n\t\t\t\tfloat spotDiffuseWeightFull = max( dotProduct, 0.0 );\\n\t\t\t\tfloat spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\\n\\n\t\t\t\tvec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\\n\\n\t\t\t#else\\n\\n\t\t\t\tfloat spotDiffuseWeight = max( dotProduct, 0.0 );\\n\\n\t\t\t#endif\\n\\n\t\t\tspotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;\\n\\n\t\t\t\t\t// specular\\n\\n\t\t\tvec3 spotHalfVector = normalize( lVector + viewPosition );\\n\t\t\tfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\\n\t\t\tfloat spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );\\n\\n\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\\n\\n\t\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, spotHalfVector ), 0.0 ), 5.0 );\\n\t\t\tspotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;\\n\\n\t\t}\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_DIR_LIGHTS > 0\\n\\n\tvec3 dirDiffuse = vec3( 0.0 );\\n\tvec3 dirSpecular = vec3( 0.0 );\\n\\n\tfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\\n\\n\t\tvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\\n\t\tvec3 dirVector = normalize( lDirection.xyz );\\n\\n\t\t\t\t// diffuse\\n\\n\t\tfloat dotProduct = dot( normal, dirVector );\\n\\n\t\t#ifdef WRAP_AROUND\\n\\n\t\t\tfloat dirDiffuseWeightFull = max( dotProduct, 0.0 );\\n\t\t\tfloat dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\\n\\n\t\t\tvec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\\n\\n\t\t#else\\n\\n\t\t\tfloat dirDiffuseWeight = max( dotProduct, 0.0 );\\n\\n\t\t#endif\\n\\n\t\tdirDiffuse += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;\\n\\n\t\t// specular\\n\\n\t\tvec3 dirHalfVector = normalize( dirVector + viewPosition );\\n\t\tfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\\n\t\tfloat dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );\\n\\n\t\t/*\\n\t\t// fresnel term from skin shader\\n\t\tconst float F0 = 0.128;\\n\\n\t\tfloat base = 1.0 - dot( viewPosition, dirHalfVector );\\n\t\tfloat exponential = pow( base, 5.0 );\\n\\n\t\tfloat fresnel = exponential + F0 * ( 1.0 - exponential );\\n\t\t*/\\n\\n\t\t/*\\n\t\t// fresnel term from fresnel shader\\n\t\tconst float mFresnelBias = 0.08;\\n\t\tconst float mFresnelScale = 0.3;\\n\t\tconst float mFresnelPower = 5.0;\\n\\n\t\tfloat fresnel = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( -viewPosition ), normal ), mFresnelPower );\\n\t\t*/\\n\\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\\n\\n\t\t// \t\tdirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization * fresnel;\\n\\n\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );\\n\t\tdirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\\n\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_HEMI_LIGHTS > 0\\n\\n\tvec3 hemiDiffuse = vec3( 0.0 );\\n\tvec3 hemiSpecular = vec3( 0.0 );\\n\\n\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\\n\\n\t\tvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\\n\t\tvec3 lVector = normalize( lDirection.xyz );\\n\\n\t\t// diffuse\\n\\n\t\tfloat dotProduct = dot( normal, lVector );\\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\\n\\n\t\tvec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\\n\\n\t\themiDiffuse += diffuse * hemiColor;\\n\\n\t\t// specular (sky light)\\n\\n\t\tvec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\\n\t\tfloat hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\\n\t\tfloat hemiSpecularWeightSky = specularStrength * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );\\n\\n\t\t// specular (ground light)\\n\\n\t\tvec3 lVectorGround = -lVector;\\n\\n\t\tvec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\\n\t\tfloat hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\\n\t\tfloat hemiSpecularWeightGround = specularStrength * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );\\n\\n\t\tfloat dotProductGround = dot( normal, lVectorGround );\\n\\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\\n\\n\t\tvec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );\\n\t\tvec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );\\n\t\themiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\\n\\n\t}\\n\\n#endif\\n\\nvec3 totalDiffuse = vec3( 0.0 );\\nvec3 totalSpecular = vec3( 0.0 );\\n\\n#if MAX_DIR_LIGHTS > 0\\n\\n\ttotalDiffuse += dirDiffuse;\\n\ttotalSpecular += dirSpecular;\\n\\n#endif\\n\\n#if MAX_HEMI_LIGHTS > 0\\n\\n\ttotalDiffuse += hemiDiffuse;\\n\ttotalSpecular += hemiSpecular;\\n\\n#endif\\n\\n#if MAX_POINT_LIGHTS > 0\\n\\n\ttotalDiffuse += pointDiffuse;\\n\ttotalSpecular += pointSpecular;\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0\\n\\n\ttotalDiffuse += spotDiffuse;\\n\ttotalSpecular += spotSpecular;\\n\\n#endif\\n\\n#ifdef METAL\\n\\n\tgl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );\\n\\n#else\\n\\n\tgl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/fog_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'fog_pars_fragment'] = \"#ifdef USE_FOG\\n\\n\tuniform vec3 fogColor;\\n\\n\t#ifdef FOG_EXP2\\n\\n\t\tuniform float fogDensity;\\n\\n\t#else\\n\\n\t\tuniform float fogNear;\\n\t\tuniform float fogFar;\\n\t#endif\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/morphnormal_vertex.glsl\n\nTHREE.ShaderChunk[ 'morphnormal_vertex'] = \"#ifdef USE_MORPHNORMALS\\n\\n\tvec3 morphedNormal = vec3( 0.0 );\\n\\n\tmorphedNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\\n\tmorphedNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\\n\tmorphedNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\\n\tmorphedNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\\n\\n\tmorphedNormal += normal;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/envmap_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'envmap_pars_fragment'] = \"#ifdef USE_ENVMAP\\n\\n\tuniform float reflectivity;\\n\tuniform samplerCube envMap;\\n\tuniform float flipEnvMap;\\n\tuniform int combine;\\n\\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\n\t\tuniform bool useRefract;\\n\t\tuniform float refractionRatio;\\n\\n\t#else\\n\\n\t\tvarying vec3 vReflect;\\n\\n\t#endif\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_fragment.glsl\n\nTHREE.ShaderChunk[ 'logdepthbuf_fragment'] = \"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\\n\\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/normalmap_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'normalmap_pars_fragment'] = \"#ifdef USE_NORMALMAP\\n\\n\tuniform sampler2D normalMap;\\n\tuniform vec2 normalScale;\\n\\n\t\t\t// Per-Pixel Tangent Space Normal Mapping\\n\t\t\t// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\\n\\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\\n\\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\\n\t\tvec2 st0 = dFdx( vUv.st );\\n\t\tvec2 st1 = dFdy( vUv.st );\\n\\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\\n\t\tvec3 N = normalize( surf_norm );\\n\\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\t\tmapN.xy = normalScale * mapN.xy;\\n\t\tmat3 tsn = mat3( S, T, N );\\n\t\treturn normalize( tsn * mapN );\\n\\n\t}\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/lights_phong_pars_vertex.glsl\n\nTHREE.ShaderChunk[ 'lights_phong_pars_vertex'] = \"#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\\n\\n\tvarying vec3 vWorldPosition;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/lightmap_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'lightmap_pars_fragment'] = \"#ifdef USE_LIGHTMAP\\n\\n\tvarying vec2 vUv2;\\n\tuniform sampler2D lightMap;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/shadowmap_vertex.glsl\n\nTHREE.ShaderChunk[ 'shadowmap_vertex'] = \"#ifdef USE_SHADOWMAP\\n\\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\\n\\n\t\tvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\\n\\n\t}\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/lights_phong_vertex.glsl\n\nTHREE.ShaderChunk[ 'lights_phong_vertex'] = \"#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\\n\\n\tvWorldPosition = worldPosition.xyz;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/map_fragment.glsl\n\nTHREE.ShaderChunk[ 'map_fragment'] = \"#ifdef USE_MAP\\n\\n\tvec4 texelColor = texture2D( map, vUv );\\n\\n\t#ifdef GAMMA_INPUT\\n\\n\t\ttexelColor.xyz *= texelColor.xyz;\\n\\n\t#endif\\n\\n\tgl_FragColor = gl_FragColor * texelColor;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/lightmap_vertex.glsl\n\nTHREE.ShaderChunk[ 'lightmap_vertex'] = \"#ifdef USE_LIGHTMAP\\n\\n\tvUv2 = uv2;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/map_particle_fragment.glsl\n\nTHREE.ShaderChunk[ 'map_particle_fragment'] = \"#ifdef USE_MAP\\n\\n\tgl_FragColor = gl_FragColor * texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/color_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'color_pars_fragment'] = \"#ifdef USE_COLOR\\n\\n\tvarying vec3 vColor;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/color_vertex.glsl\n\nTHREE.ShaderChunk[ 'color_vertex'] = \"#ifdef USE_COLOR\\n\\n\t#ifdef GAMMA_INPUT\\n\\n\t\tvColor = color * color;\\n\\n\t#else\\n\\n\t\tvColor = color;\\n\\n\t#endif\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/skinning_vertex.glsl\n\nTHREE.ShaderChunk[ 'skinning_vertex'] = \"#ifdef USE_SKINNING\\n\\n\t#ifdef USE_MORPHTARGETS\\n\\n\tvec4 skinVertex = bindMatrix * vec4( morphed, 1.0 );\\n\\n\t#else\\n\\n\tvec4 skinVertex = bindMatrix * vec4( position, 1.0 );\\n\\n\t#endif\\n\\n\tvec4 skinned = vec4( 0.0 );\\n\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\tskinned  = bindMatrixInverse * skinned;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/envmap_pars_vertex.glsl\n\nTHREE.ShaderChunk[ 'envmap_pars_vertex'] = \"#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\\n\\n\tvarying vec3 vReflect;\\n\\n\tuniform float refractionRatio;\\n\tuniform bool useRefract;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/linear_to_gamma_fragment.glsl\n\nTHREE.ShaderChunk[ 'linear_to_gamma_fragment'] = \"#ifdef GAMMA_OUTPUT\\n\\n\tgl_FragColor.xyz = sqrt( gl_FragColor.xyz );\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/color_pars_vertex.glsl\n\nTHREE.ShaderChunk[ 'color_pars_vertex'] = \"#ifdef USE_COLOR\\n\\n\tvarying vec3 vColor;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/lights_lambert_pars_vertex.glsl\n\nTHREE.ShaderChunk[ 'lights_lambert_pars_vertex'] = \"uniform vec3 ambient;\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\n\\nuniform vec3 ambientLightColor;\\n\\n#if MAX_DIR_LIGHTS > 0\\n\\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_HEMI_LIGHTS > 0\\n\\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_POINT_LIGHTS > 0\\n\\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0\\n\\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\\n\\n#endif\\n\\n#ifdef WRAP_AROUND\\n\\n\tuniform vec3 wrapRGB;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/map_pars_vertex.glsl\n\nTHREE.ShaderChunk[ 'map_pars_vertex'] = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\\n\\n\tvarying vec2 vUv;\\n\tuniform vec4 offsetRepeat;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/envmap_fragment.glsl\n\nTHREE.ShaderChunk[ 'envmap_fragment'] = \"#ifdef USE_ENVMAP\\n\\n\tvec3 reflectVec;\\n\\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\\n\\n\t\t// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\\n\t\t// Transforming Normal Vectors with the Inverse Transformation\\n\\n\t\tvec3 worldNormal = normalize( vec3( vec4( normal, 0.0 ) * viewMatrix ) );\\n\\n\t\tif ( useRefract ) {\\n\\n\t\t\treflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\n\t\t} else { \\n\\n\t\t\treflectVec = reflect( cameraToVertex, worldNormal );\\n\\n\t\t}\\n\\n\t#else\\n\\n\t\treflectVec = vReflect;\\n\\n\t#endif\\n\\n\t#ifdef DOUBLE_SIDED\\n\\n\t\tfloat flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\\n\t\tvec4 cubeColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\n\t#else\\n\\n\t\tvec4 cubeColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\n\t#endif\\n\\n\t#ifdef GAMMA_INPUT\\n\\n\t\tcubeColor.xyz *= cubeColor.xyz;\\n\\n\t#endif\\n\\n\tif ( combine == 1 ) {\\n\\n\t\tgl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularStrength * reflectivity );\\n\\n\t} else if ( combine == 2 ) {\\n\\n\t\tgl_FragColor.xyz += cubeColor.xyz * specularStrength * reflectivity;\\n\\n\t} else {\\n\\n\t\tgl_FragColor.xyz = mix( gl_FragColor.xyz, gl_FragColor.xyz * cubeColor.xyz, specularStrength * reflectivity );\\n\\n\t}\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/specularmap_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'specularmap_pars_fragment'] = \"#ifdef USE_SPECULARMAP\\n\\n\tuniform sampler2D specularMap;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_vertex.glsl\n\nTHREE.ShaderChunk[ 'logdepthbuf_vertex'] = \"#ifdef USE_LOGDEPTHBUF\\n\\n\tgl_Position.z = log2(max(1e-6, gl_Position.w + 1.0)) * logDepthBufFC;\\n\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\n\t\tvFragDepth = 1.0 + gl_Position.w;\\n\\n#else\\n\\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\\n\\n\t#endif\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/morphtarget_pars_vertex.glsl\n\nTHREE.ShaderChunk[ 'morphtarget_pars_vertex'] = \"#ifdef USE_MORPHTARGETS\\n\\n\t#ifndef USE_MORPHNORMALS\\n\\n\tuniform float morphTargetInfluences[ 8 ];\\n\\n\t#else\\n\\n\tuniform float morphTargetInfluences[ 4 ];\\n\\n\t#endif\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/specularmap_fragment.glsl\n\nTHREE.ShaderChunk[ 'specularmap_fragment'] = \"float specularStrength;\\n\\n#ifdef USE_SPECULARMAP\\n\\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\tspecularStrength = texelSpecular.r;\\n\\n#else\\n\\n\tspecularStrength = 1.0;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/fog_fragment.glsl\n\nTHREE.ShaderChunk[ 'fog_fragment'] = \"#ifdef USE_FOG\\n\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\\n\\n\t#else\\n\\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\\n\\n\t#endif\\n\\n\t#ifdef FOG_EXP2\\n\\n\t\tconst float LOG2 = 1.442695;\\n\t\tfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\\n\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\\n\\n\t#else\\n\\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\\n\\n\t#endif\\n\t\\n\tgl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/bumpmap_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'bumpmap_pars_fragment'] = \"#ifdef USE_BUMPMAP\\n\\n\tuniform sampler2D bumpMap;\\n\tuniform float bumpScale;\\n\\n\t\t\t// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\\n\t\t\t//\thttp://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\\n\\n\t\t\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\\n\\n\tvec2 dHdxy_fwd() {\\n\\n\t\tvec2 dSTdx = dFdx( vUv );\\n\t\tvec2 dSTdy = dFdy( vUv );\\n\\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\\n\t\treturn vec2( dBx, dBy );\\n\\n\t}\\n\\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\\n\\n\t\tvec3 vSigmaX = dFdx( surf_pos );\\n\t\tvec3 vSigmaY = dFdy( surf_pos );\\n\t\tvec3 vN = surf_norm;\t\t// normalized\\n\\n\t\tvec3 R1 = cross( vSigmaY, vN );\\n\t\tvec3 R2 = cross( vN, vSigmaX );\\n\\n\t\tfloat fDet = dot( vSigmaX, R1 );\\n\\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\n\t}\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/defaultnormal_vertex.glsl\n\nTHREE.ShaderChunk[ 'defaultnormal_vertex'] = \"vec3 objectNormal;\\n\\n#ifdef USE_SKINNING\\n\\n\tobjectNormal = skinnedNormal.xyz;\\n\\n#endif\\n\\n#if !defined( USE_SKINNING ) && defined( USE_MORPHNORMALS )\\n\\n\tobjectNormal = morphedNormal;\\n\\n#endif\\n\\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHNORMALS )\\n\\n\tobjectNormal = normal;\\n\\n#endif\\n\\n#ifdef FLIP_SIDED\\n\\n\tobjectNormal = -objectNormal;\\n\\n#endif\\n\\nvec3 transformedNormal = normalMatrix * objectNormal;\";\n\n// File:src/renderers/shaders/ShaderChunk/lights_phong_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'lights_phong_pars_fragment'] = \"uniform vec3 ambientLightColor;\\n\\n#if MAX_DIR_LIGHTS > 0\\n\\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_HEMI_LIGHTS > 0\\n\\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_POINT_LIGHTS > 0\\n\\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\\n\\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0\\n\\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\\n\\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\\n\\n\tvarying vec3 vWorldPosition;\\n\\n#endif\\n\\n#ifdef WRAP_AROUND\\n\\n\tuniform vec3 wrapRGB;\\n\\n#endif\\n\\nvarying vec3 vViewPosition;\\nvarying vec3 vNormal;\";\n\n// File:src/renderers/shaders/ShaderChunk/skinbase_vertex.glsl\n\nTHREE.ShaderChunk[ 'skinbase_vertex'] = \"#ifdef USE_SKINNING\\n\\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/map_vertex.glsl\n\nTHREE.ShaderChunk[ 'map_vertex'] = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\\n\\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/lightmap_fragment.glsl\n\nTHREE.ShaderChunk[ 'lightmap_fragment'] = \"#ifdef USE_LIGHTMAP\\n\\n\tgl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/shadowmap_pars_vertex.glsl\n\nTHREE.ShaderChunk[ 'shadowmap_pars_vertex'] = \"#ifdef USE_SHADOWMAP\\n\\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\\n\tuniform mat4 shadowMatrix[ MAX_SHADOWS ];\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/color_fragment.glsl\n\nTHREE.ShaderChunk[ 'color_fragment'] = \"#ifdef USE_COLOR\\n\\n\tgl_FragColor = gl_FragColor * vec4( vColor, 1.0 );\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/morphtarget_vertex.glsl\n\nTHREE.ShaderChunk[ 'morphtarget_vertex'] = \"#ifdef USE_MORPHTARGETS\\n\\n\tvec3 morphed = vec3( 0.0 );\\n\tmorphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\\n\tmorphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\\n\tmorphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\\n\tmorphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\\n\\n\t#ifndef USE_MORPHNORMALS\\n\\n\tmorphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\\n\tmorphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\\n\tmorphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\\n\tmorphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\\n\\n\t#endif\\n\\n\tmorphed += position;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/envmap_vertex.glsl\n\nTHREE.ShaderChunk[ 'envmap_vertex'] = \"#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\\n\\n\tvec3 worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;\\n\tworldNormal = normalize( worldNormal );\\n\\n\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\n\tif ( useRefract ) {\\n\\n\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\n\t} else {\\n\\n\t\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\n\t}\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/shadowmap_fragment.glsl\n\nTHREE.ShaderChunk[ 'shadowmap_fragment'] = \"#ifdef USE_SHADOWMAP\\n\\n\t#ifdef SHADOWMAP_DEBUG\\n\\n\t\tvec3 frustumColors[3];\\n\t\tfrustumColors[0] = vec3( 1.0, 0.5, 0.0 );\\n\t\tfrustumColors[1] = vec3( 0.0, 1.0, 0.8 );\\n\t\tfrustumColors[2] = vec3( 0.0, 0.5, 1.0 );\\n\\n\t#endif\\n\\n\t#ifdef SHADOWMAP_CASCADE\\n\\n\t\tint inFrustumCount = 0;\\n\\n\t#endif\\n\\n\tfloat fDepth;\\n\tvec3 shadowColor = vec3( 1.0 );\\n\\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\\n\\n\t\tvec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\\n\\n\t\t\t\t// if ( something && something ) breaks ATI OpenGL shader compiler\\n\t\t\t\t// if ( all( something, something ) ) using this instead\\n\\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\t\tbool inFrustum = all( inFrustumVec );\\n\\n\t\t\t\t// don't shadow pixels outside of light frustum\\n\t\t\t\t// use just first frustum (for cascades)\\n\t\t\t\t// don't shadow pixels behind far plane of light frustum\\n\\n\t\t#ifdef SHADOWMAP_CASCADE\\n\\n\t\t\tinFrustumCount += int( inFrustum );\\n\t\t\tbvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\\n\\n\t\t#else\\n\\n\t\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\\n\t\t#endif\\n\\n\t\tbool frustumTest = all( frustumTestVec );\\n\\n\t\tif ( frustumTest ) {\\n\\n\t\t\tshadowCoord.z += shadowBias[ i ];\\n\\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\n\t\t\t\t\t\t// Percentage-close filtering\\n\t\t\t\t\t\t// (9 pixel kernel)\\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\\n\\n\t\t\t\tfloat shadow = 0.0;\\n\\n\t\t/*\\n\t\t\t\t\t\t// nested loops breaks shader compiler / validator on some ATI cards when using OpenGL\\n\t\t\t\t\t\t// must enroll loop manually\\n\\n\t\t\t\tfor ( float y = -1.25; y <= 1.25; y += 1.25 )\\n\t\t\t\t\tfor ( float x = -1.25; x <= 1.25; x += 1.25 ) {\\n\\n\t\t\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\\n\\n\t\t\t\t\t\t\t\t// doesn't seem to produce any noticeable visual difference compared to simple texture2D lookup\\n\t\t\t\t\t\t\t\t//vec4 rgbaDepth = texture2DProj( shadowMap[ i ], vec4( vShadowCoord[ i ].w * ( vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy ), 0.05, vShadowCoord[ i ].w ) );\\n\\n\t\t\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\\n\\n\t\t\t\t\t\tif ( fDepth < shadowCoord.z )\\n\t\t\t\t\t\t\tshadow += 1.0;\\n\\n\t\t\t\t}\\n\\n\t\t\t\tshadow /= 9.0;\\n\\n\t\t*/\\n\\n\t\t\t\tconst float shadowDelta = 1.0 / 9.0;\\n\\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\\n\\n\t\t\t\tfloat dx0 = -1.25 * xPixelOffset;\\n\t\t\t\tfloat dy0 = -1.25 * yPixelOffset;\\n\t\t\t\tfloat dx1 = 1.25 * xPixelOffset;\\n\t\t\t\tfloat dy1 = 1.25 * yPixelOffset;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\\n\\n\t\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\n\t\t\t\t\t\t// Percentage-close filtering\\n\t\t\t\t\t\t// (9 pixel kernel)\\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\\n\\n\t\t\t\tfloat shadow = 0.0;\\n\\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\\n\\n\t\t\t\tfloat dx0 = -1.0 * xPixelOffset;\\n\t\t\t\tfloat dy0 = -1.0 * yPixelOffset;\\n\t\t\t\tfloat dx1 = 1.0 * xPixelOffset;\\n\t\t\t\tfloat dy1 = 1.0 * yPixelOffset;\\n\\n\t\t\t\tmat3 shadowKernel;\\n\t\t\t\tmat3 depthKernel;\\n\\n\t\t\t\tdepthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\\n\t\t\t\tdepthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\\n\t\t\t\tdepthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\\n\t\t\t\tdepthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\\n\t\t\t\tdepthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\\n\t\t\t\tdepthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\\n\t\t\t\tdepthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\\n\t\t\t\tdepthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\\n\t\t\t\tdepthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\\n\\n\t\t\t\tvec3 shadowZ = vec3( shadowCoord.z );\\n\t\t\t\tshadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\\n\t\t\t\tshadowKernel[0] *= vec3(0.25);\\n\\n\t\t\t\tshadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\\n\t\t\t\tshadowKernel[1] *= vec3(0.25);\\n\\n\t\t\t\tshadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\\n\t\t\t\tshadowKernel[2] *= vec3(0.25);\\n\\n\t\t\t\tvec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\\n\\n\t\t\t\tshadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\\n\t\t\t\tshadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\\n\\n\t\t\t\tvec4 shadowValues;\\n\t\t\t\tshadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\\n\t\t\t\tshadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\\n\t\t\t\tshadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\\n\t\t\t\tshadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\\n\\n\t\t\t\tshadow = dot( shadowValues, vec4( 1.0 ) );\\n\\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\\n\\n\t\t\t#else\\n\\n\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\\n\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\\n\\n\t\t\t\tif ( fDepth < shadowCoord.z )\\n\\n\t\t// spot with multiple shadows is darker\\n\\n\t\t\t\t\tshadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\\n\\n\t\t// spot with multiple shadows has the same color as single shadow spot\\n\\n\t\t// \t\t\t\t\tshadowColor = min( shadowColor, vec3( shadowDarkness[ i ] ) );\\n\\n\t\t\t#endif\\n\\n\t\t}\\n\\n\\n\t\t#ifdef SHADOWMAP_DEBUG\\n\\n\t\t\t#ifdef SHADOWMAP_CASCADE\\n\\n\t\t\t\tif ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];\\n\\n\t\t\t#else\\n\\n\t\t\t\tif ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];\\n\\n\t\t\t#endif\\n\\n\t\t#endif\\n\\n\t}\\n\\n\t#ifdef GAMMA_OUTPUT\\n\\n\t\tshadowColor *= shadowColor;\\n\\n\t#endif\\n\\n\tgl_FragColor.xyz = gl_FragColor.xyz * shadowColor;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/worldpos_vertex.glsl\n\nTHREE.ShaderChunk[ 'worldpos_vertex'] = \"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\\n\\n\t#ifdef USE_SKINNING\\n\\n\t\tvec4 worldPosition = modelMatrix * skinned;\\n\\n\t#endif\\n\\n\t#if defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\\n\\n\t\tvec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\\n\\n\t#endif\\n\\n\t#if ! defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\\n\\n\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\\n\\n\t#endif\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/shadowmap_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'shadowmap_pars_fragment'] = \"#ifdef USE_SHADOWMAP\\n\\n\tuniform sampler2D shadowMap[ MAX_SHADOWS ];\\n\tuniform vec2 shadowMapSize[ MAX_SHADOWS ];\\n\\n\tuniform float shadowDarkness[ MAX_SHADOWS ];\\n\tuniform float shadowBias[ MAX_SHADOWS ];\\n\\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\\n\\n\tfloat unpackDepth( const in vec4 rgba_depth ) {\\n\\n\t\tconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\\n\t\tfloat depth = dot( rgba_depth, bit_shift );\\n\t\treturn depth;\\n\\n\t}\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/skinning_pars_vertex.glsl\n\nTHREE.ShaderChunk[ 'skinning_pars_vertex'] = \"#ifdef USE_SKINNING\\n\\n\tuniform mat4 bindMatrix;\\n\tuniform mat4 bindMatrixInverse;\\n\\n\t#ifdef BONE_TEXTURE\\n\\n\t\tuniform sampler2D boneTexture;\\n\t\tuniform int boneTextureWidth;\\n\t\tuniform int boneTextureHeight;\\n\\n\t\tmat4 getBoneMatrix( const in float i ) {\\n\\n\t\t\tfloat j = i * 4.0;\\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\\n\\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\\n\\n\t\t\ty = dy * ( y + 0.5 );\\n\\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\\n\t\t\treturn bone;\\n\\n\t\t}\\n\\n\t#else\\n\\n\t\tuniform mat4 boneGlobalMatrices[ MAX_BONES ];\\n\\n\t\tmat4 getBoneMatrix( const in float i ) {\\n\\n\t\t\tmat4 bone = boneGlobalMatrices[ int(i) ];\\n\t\t\treturn bone;\\n\\n\t\t}\\n\\n\t#endif\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'logdepthbuf_pars_fragment'] = \"#ifdef USE_LOGDEPTHBUF\\n\\n\tuniform float logDepthBufFC;\\n\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\n\t\t#extension GL_EXT_frag_depth : enable\\n\t\tvarying float vFragDepth;\\n\\n\t#endif\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/alphamap_fragment.glsl\n\nTHREE.ShaderChunk[ 'alphamap_fragment'] = \"#ifdef USE_ALPHAMAP\\n\\n\tgl_FragColor.a *= texture2D( alphaMap, vUv ).g;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/alphamap_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'alphamap_pars_fragment'] = \"#ifdef USE_ALPHAMAP\\n\\n\tuniform sampler2D alphaMap;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/UniformsUtils.js\n\n/**\n * Uniform Utilities\n */\n\nTHREE.UniformsUtils = {\n\n\tmerge: function ( uniforms ) {\n\n\t\tvar merged = {};\n\n\t\tfor ( var u = 0; u < uniforms.length; u ++ ) {\n\n\t\t\tvar tmp = this.clone( uniforms[ u ] );\n\n\t\t\tfor ( var p in tmp ) {\n\n\t\t\t\tmerged[ p ] = tmp[ p ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn merged;\n\n\t},\n\n\tclone: function ( uniforms_src ) {\n\n\t\tvar uniforms_dst = {};\n\n\t\tfor ( var u in uniforms_src ) {\n\n\t\t\tuniforms_dst[ u ] = {};\n\n\t\t\tfor ( var p in uniforms_src[ u ] ) {\n\n\t\t\t\tvar parameter_src = uniforms_src[ u ][ p ];\n\n\t\t\t\tif ( parameter_src instanceof THREE.Color ||\n\t\t\t\t\t parameter_src instanceof THREE.Vector2 ||\n\t\t\t\t\t parameter_src instanceof THREE.Vector3 ||\n\t\t\t\t\t parameter_src instanceof THREE.Vector4 ||\n\t\t\t\t\t parameter_src instanceof THREE.Matrix4 ||\n\t\t\t\t\t parameter_src instanceof THREE.Texture ) {\n\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src.clone();\n\n\t\t\t\t} else if ( parameter_src instanceof Array ) {\n\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src.slice();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn uniforms_dst;\n\n\t}\n\n};\n\n// File:src/renderers/shaders/UniformsLib.js\n\n/**\n * Uniforms library for shared webgl shaders\n */\n\nTHREE.UniformsLib = {\n\n\tcommon: {\n\n\t\t\"diffuse\" : { type: \"c\", value: new THREE.Color( 0xeeeeee ) },\n\t\t\"opacity\" : { type: \"f\", value: 1.0 },\n\n\t\t\"map\" : { type: \"t\", value: null },\n\t\t\"offsetRepeat\" : { type: \"v4\", value: new THREE.Vector4( 0, 0, 1, 1 ) },\n\n\t\t\"lightMap\" : { type: \"t\", value: null },\n\t\t\"specularMap\" : { type: \"t\", value: null },\n\t\t\"alphaMap\" : { type: \"t\", value: null },\n\n\t\t\"envMap\" : { type: \"t\", value: null },\n\t\t\"flipEnvMap\" : { type: \"f\", value: - 1 },\n\t\t\"useRefract\" : { type: \"i\", value: 0 },\n\t\t\"reflectivity\" : { type: \"f\", value: 1.0 },\n\t\t\"refractionRatio\" : { type: \"f\", value: 0.98 },\n\t\t\"combine\" : { type: \"i\", value: 0 },\n\n\t\t\"morphTargetInfluences\" : { type: \"f\", value: 0 }\n\n\t},\n\n\tbump: {\n\n\t\t\"bumpMap\" : { type: \"t\", value: null },\n\t\t\"bumpScale\" : { type: \"f\", value: 1 }\n\n\t},\n\n\tnormalmap: {\n\n\t\t\"normalMap\" : { type: \"t\", value: null },\n\t\t\"normalScale\" : { type: \"v2\", value: new THREE.Vector2( 1, 1 ) }\n\t},\n\n\tfog : {\n\n\t\t\"fogDensity\" : { type: \"f\", value: 0.00025 },\n\t\t\"fogNear\" : { type: \"f\", value: 1 },\n\t\t\"fogFar\" : { type: \"f\", value: 2000 },\n\t\t\"fogColor\" : { type: \"c\", value: new THREE.Color( 0xffffff ) }\n\n\t},\n\n\tlights: {\n\n\t\t\"ambientLightColor\" : { type: \"fv\", value: [] },\n\n\t\t\"directionalLightDirection\" : { type: \"fv\", value: [] },\n\t\t\"directionalLightColor\" : { type: \"fv\", value: [] },\n\n\t\t\"hemisphereLightDirection\" : { type: \"fv\", value: [] },\n\t\t\"hemisphereLightSkyColor\" : { type: \"fv\", value: [] },\n\t\t\"hemisphereLightGroundColor\" : { type: \"fv\", value: [] },\n\n\t\t\"pointLightColor\" : { type: \"fv\", value: [] },\n\t\t\"pointLightPosition\" : { type: \"fv\", value: [] },\n\t\t\"pointLightDistance\" : { type: \"fv1\", value: [] },\n\n\t\t\"spotLightColor\" : { type: \"fv\", value: [] },\n\t\t\"spotLightPosition\" : { type: \"fv\", value: [] },\n\t\t\"spotLightDirection\" : { type: \"fv\", value: [] },\n\t\t\"spotLightDistance\" : { type: \"fv1\", value: [] },\n\t\t\"spotLightAngleCos\" : { type: \"fv1\", value: [] },\n\t\t\"spotLightExponent\" : { type: \"fv1\", value: [] }\n\n\t},\n\n\tparticle: {\n\n\t\t\"psColor\" : { type: \"c\", value: new THREE.Color( 0xeeeeee ) },\n\t\t\"opacity\" : { type: \"f\", value: 1.0 },\n\t\t\"size\" : { type: \"f\", value: 1.0 },\n\t\t\"scale\" : { type: \"f\", value: 1.0 },\n\t\t\"map\" : { type: \"t\", value: null },\n\n\t\t\"fogDensity\" : { type: \"f\", value: 0.00025 },\n\t\t\"fogNear\" : { type: \"f\", value: 1 },\n\t\t\"fogFar\" : { type: \"f\", value: 2000 },\n\t\t\"fogColor\" : { type: \"c\", value: new THREE.Color( 0xffffff ) }\n\n\t},\n\n\tshadowmap: {\n\n\t\t\"shadowMap\": { type: \"tv\", value: [] },\n\t\t\"shadowMapSize\": { type: \"v2v\", value: [] },\n\n\t\t\"shadowBias\" : { type: \"fv1\", value: [] },\n\t\t\"shadowDarkness\": { type: \"fv1\", value: [] },\n\n\t\t\"shadowMatrix\" : { type: \"m4v\", value: [] }\n\n\t}\n\n};\n\n// File:src/renderers/shaders/ShaderLib.js\n\n/**\n * Webgl Shader Library for three.js\n *\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n */\n\n\nTHREE.ShaderLib = {\n\n\t'basic': {\n\n\t\tuniforms: THREE.UniformsUtils.merge( [\n\n\t\t\tTHREE.UniformsLib[ \"common\" ],\n\t\t\tTHREE.UniformsLib[ \"fog\" ],\n\t\t\tTHREE.UniformsLib[ \"shadowmap\" ]\n\n\t\t] ),\n\n\t\tvertexShader: [\n\n\t\t\tTHREE.ShaderChunk[ \"map_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"lightmap_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"map_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"lightmap_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\n\n\t\t\t\"\t#ifdef USE_ENVMAP\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"morphnormal_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"skinnormal_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"defaultnormal_vertex\" ],\n\n\t\t\t\"\t#endif\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"skinning_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"default_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\n\n\t\t\t\tTHREE.ShaderChunk[ \"worldpos_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_vertex\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\"),\n\n\t\tfragmentShader: [\n\n\t\t\t\"uniform vec3 diffuse;\",\n\t\t\t\"uniform float opacity;\",\n\n\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"map_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"alphamap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"lightmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"specularmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\"\tgl_FragColor = vec4( diffuse, opacity );\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"map_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"alphamap_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"alphatest_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"specularmap_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"lightmap_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_fragment\" ],\n\n\t\t\t\tTHREE.ShaderChunk[ \"linear_to_gamma_fragment\" ],\n\n\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\")\n\n\t},\n\n\t'lambert': {\n\n\t\tuniforms: THREE.UniformsUtils.merge( [\n\n\t\t\tTHREE.UniformsLib[ \"common\" ],\n\t\t\tTHREE.UniformsLib[ \"fog\" ],\n\t\t\tTHREE.UniformsLib[ \"lights\" ],\n\t\t\tTHREE.UniformsLib[ \"shadowmap\" ],\n\n\t\t\t{\n\t\t\t\t\"ambient\"  : { type: \"c\", value: new THREE.Color( 0xffffff ) },\n\t\t\t\t\"emissive\" : { type: \"c\", value: new THREE.Color( 0x000000 ) },\n\t\t\t\t\"wrapRGB\"  : { type: \"v3\", value: new THREE.Vector3( 1, 1, 1 ) }\n\t\t\t}\n\n\t\t] ),\n\n\t\tvertexShader: [\n\n\t\t\t\"#define LAMBERT\",\n\n\t\t\t\"varying vec3 vLightFront;\",\n\n\t\t\t\"#ifdef DOUBLE_SIDED\",\n\n\t\t\t\"\tvarying vec3 vLightBack;\",\n\n\t\t\t\"#endif\",\n\n\t\t\tTHREE.ShaderChunk[ \"map_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"lightmap_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"lights_lambert_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"map_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"lightmap_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\n\n\t\t\t\tTHREE.ShaderChunk[ \"morphnormal_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"skinnormal_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"defaultnormal_vertex\" ],\n\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"skinning_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"default_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\n\n\t\t\t\tTHREE.ShaderChunk[ \"worldpos_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"lights_lambert_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_vertex\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\"),\n\n\t\tfragmentShader: [\n\n\t\t\t\"uniform float opacity;\",\n\n\t\t\t\"varying vec3 vLightFront;\",\n\n\t\t\t\"#ifdef DOUBLE_SIDED\",\n\n\t\t\t\"\tvarying vec3 vLightBack;\",\n\n\t\t\t\"#endif\",\n\n\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"map_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"alphamap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"lightmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"specularmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\"\tgl_FragColor = vec4( vec3( 1.0 ), opacity );\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"map_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"alphamap_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"alphatest_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"specularmap_fragment\" ],\n\n\t\t\t\"\t#ifdef DOUBLE_SIDED\",\n\n\t\t\t\t\t//\"float isFront = float( gl_FrontFacing );\",\n\t\t\t\t\t//\"gl_FragColor.xyz *= isFront * vLightFront + ( 1.0 - isFront ) * vLightBack;\",\n\n\t\t\t\"\t\tif ( gl_FrontFacing )\",\n\t\t\t\"\t\t\tgl_FragColor.xyz *= vLightFront;\",\n\t\t\t\"\t\telse\",\n\t\t\t\"\t\t\tgl_FragColor.xyz *= vLightBack;\",\n\n\t\t\t\"\t#else\",\n\n\t\t\t\"\t\tgl_FragColor.xyz *= vLightFront;\",\n\n\t\t\t\"\t#endif\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"lightmap_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_fragment\" ],\n\n\t\t\t\tTHREE.ShaderChunk[ \"linear_to_gamma_fragment\" ],\n\n\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\")\n\n\t},\n\n\t'phong': {\n\n\t\tuniforms: THREE.UniformsUtils.merge( [\n\n\t\t\tTHREE.UniformsLib[ \"common\" ],\n\t\t\tTHREE.UniformsLib[ \"bump\" ],\n\t\t\tTHREE.UniformsLib[ \"normalmap\" ],\n\t\t\tTHREE.UniformsLib[ \"fog\" ],\n\t\t\tTHREE.UniformsLib[ \"lights\" ],\n\t\t\tTHREE.UniformsLib[ \"shadowmap\" ],\n\n\t\t\t{\n\t\t\t\t\"ambient\"  : { type: \"c\", value: new THREE.Color( 0xffffff ) },\n\t\t\t\t\"emissive\" : { type: \"c\", value: new THREE.Color( 0x000000 ) },\n\t\t\t\t\"specular\" : { type: \"c\", value: new THREE.Color( 0x111111 ) },\n\t\t\t\t\"shininess\": { type: \"f\", value: 30 },\n\t\t\t\t\"wrapRGB\"  : { type: \"v3\", value: new THREE.Vector3( 1, 1, 1 ) }\n\t\t\t}\n\n\t\t] ),\n\n\t\tvertexShader: [\n\n\t\t\t\"#define PHONG\",\n\n\t\t\t\"varying vec3 vViewPosition;\",\n\t\t\t\"varying vec3 vNormal;\",\n\n\t\t\tTHREE.ShaderChunk[ \"map_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"lightmap_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"lights_phong_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"map_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"lightmap_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\n\n\t\t\t\tTHREE.ShaderChunk[ \"morphnormal_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"skinnormal_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"defaultnormal_vertex\" ],\n\n\t\t\t\"\tvNormal = normalize( transformedNormal );\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"skinning_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"default_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\n\n\t\t\t\"\tvViewPosition = -mvPosition.xyz;\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"worldpos_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"lights_phong_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_vertex\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\"),\n\n\t\tfragmentShader: [\n\n\t\t\t\"#define PHONG\",\n\n\t\t\t\"uniform vec3 diffuse;\",\n\t\t\t\"uniform float opacity;\",\n\n\t\t\t\"uniform vec3 ambient;\",\n\t\t\t\"uniform vec3 emissive;\",\n\t\t\t\"uniform vec3 specular;\",\n\t\t\t\"uniform float shininess;\",\n\n\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"map_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"alphamap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"lightmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"lights_phong_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"bumpmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"normalmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"specularmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\"\tgl_FragColor = vec4( vec3( 1.0 ), opacity );\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"map_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"alphamap_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"alphatest_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"specularmap_fragment\" ],\n\n\t\t\t\tTHREE.ShaderChunk[ \"lights_phong_fragment\" ],\n\n\t\t\t\tTHREE.ShaderChunk[ \"lightmap_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_fragment\" ],\n\n\t\t\t\tTHREE.ShaderChunk[ \"linear_to_gamma_fragment\" ],\n\n\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\")\n\n\t},\n\n\t'particle_basic': {\n\n\t\tuniforms: THREE.UniformsUtils.merge( [\n\n\t\t\tTHREE.UniformsLib[ \"particle\" ],\n\t\t\tTHREE.UniformsLib[ \"shadowmap\" ]\n\n\t\t] ),\n\n\t\tvertexShader: [\n\n\t\t\t\"uniform float size;\",\n\t\t\t\"uniform float scale;\",\n\n\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\n\n\t\t\t\"\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\",\n\n\t\t\t\"\t#ifdef USE_SIZEATTENUATION\",\n\t\t\t\"\t\tgl_PointSize = size * ( scale / length( mvPosition.xyz ) );\",\n\t\t\t\"\t#else\",\n\t\t\t\"\t\tgl_PointSize = size;\",\n\t\t\t\"\t#endif\",\n\n\t\t\t\"\tgl_Position = projectionMatrix * mvPosition;\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"worldpos_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_vertex\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\"),\n\n\t\tfragmentShader: [\n\n\t\t\t\"uniform vec3 psColor;\",\n\t\t\t\"uniform float opacity;\",\n\n\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"map_particle_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\"\tgl_FragColor = vec4( psColor, opacity );\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"map_particle_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"alphatest_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\")\n\n\t},\n\n\t'dashed': {\n\n\t\tuniforms: THREE.UniformsUtils.merge( [\n\n\t\t\tTHREE.UniformsLib[ \"common\" ],\n\t\t\tTHREE.UniformsLib[ \"fog\" ],\n\n\t\t\t{\n\t\t\t\t\"scale\"    : { type: \"f\", value: 1 },\n\t\t\t\t\"dashSize\" : { type: \"f\", value: 1 },\n\t\t\t\t\"totalSize\": { type: \"f\", value: 2 }\n\t\t\t}\n\n\t\t] ),\n\n\t\tvertexShader: [\n\n\t\t\t\"uniform float scale;\",\n\t\t\t\"attribute float lineDistance;\",\n\n\t\t\t\"varying float vLineDistance;\",\n\n\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\n\n\t\t\t\"\tvLineDistance = scale * lineDistance;\",\n\n\t\t\t\"\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\",\n\t\t\t\"\tgl_Position = projectionMatrix * mvPosition;\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\"),\n\n\t\tfragmentShader: [\n\n\t\t\t\"uniform vec3 diffuse;\",\n\t\t\t\"uniform float opacity;\",\n\n\t\t\t\"uniform float dashSize;\",\n\t\t\t\"uniform float totalSize;\",\n\n\t\t\t\"varying float vLineDistance;\",\n\n\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\"\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\",\n\n\t\t\t\"\t\tdiscard;\",\n\n\t\t\t\"\t}\",\n\n\t\t\t\"\tgl_FragColor = vec4( diffuse, opacity );\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\")\n\n\t},\n\n\t'depth': {\n\n\t\tuniforms: {\n\n\t\t\t\"mNear\": { type: \"f\", value: 1.0 },\n\t\t\t\"mFar\" : { type: \"f\", value: 2000.0 },\n\t\t\t\"opacity\" : { type: \"f\", value: 1.0 }\n\n\t\t},\n\n\t\tvertexShader: [\n\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"default_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\"),\n\n\t\tfragmentShader: [\n\n\t\t\t\"uniform float mNear;\",\n\t\t\t\"uniform float mFar;\",\n\t\t\t\"uniform float opacity;\",\n\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\n\n\t\t\t\"\t#ifdef USE_LOGDEPTHBUF_EXT\",\n\n\t\t\t\"\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\",\n\n\t\t\t\"\t#else\",\n\n\t\t\t\"\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\",\n\n\t\t\t\"\t#endif\",\n\n\t\t\t\"\tfloat color = 1.0 - smoothstep( mNear, mFar, depth );\",\n\t\t\t\"\tgl_FragColor = vec4( vec3( color ), opacity );\",\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\")\n\n\t},\n\n\t'normal': {\n\n\t\tuniforms: {\n\n\t\t\t\"opacity\" : { type: \"f\", value: 1.0 }\n\n\t\t},\n\n\t\tvertexShader: [\n\n\t\t\t\"varying vec3 vNormal;\",\n\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\"\tvNormal = normalize( normalMatrix * normal );\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"default_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\"),\n\n\t\tfragmentShader: [\n\n\t\t\t\"uniform float opacity;\",\n\t\t\t\"varying vec3 vNormal;\",\n\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\"\tgl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\")\n\n\t},\n\n\t/* -------------------------------------------------------------------------\n\t//\tNormal map shader\n\t//\t\t- Blinn-Phong\n\t//\t\t- normal + diffuse + specular + AO + displacement + reflection + shadow maps\n\t//\t\t- point and directional lights (use with \"lights: true\" material option)\n\t ------------------------------------------------------------------------- */\n\n\t'normalmap' : {\n\n\t\tuniforms: THREE.UniformsUtils.merge( [\n\n\t\t\tTHREE.UniformsLib[ \"fog\" ],\n\t\t\tTHREE.UniformsLib[ \"lights\" ],\n\t\t\tTHREE.UniformsLib[ \"shadowmap\" ],\n\n\t\t\t{\n\n\t\t\t\"enableAO\"          : { type: \"i\", value: 0 },\n\t\t\t\"enableDiffuse\"     : { type: \"i\", value: 0 },\n\t\t\t\"enableSpecular\"    : { type: \"i\", value: 0 },\n\t\t\t\"enableReflection\"  : { type: \"i\", value: 0 },\n\t\t\t\"enableDisplacement\": { type: \"i\", value: 0 },\n\n\t\t\t\"tDisplacement\": { type: \"t\", value: null }, // must go first as this is vertex texture\n\t\t\t\"tDiffuse\"     : { type: \"t\", value: null },\n\t\t\t\"tCube\"        : { type: \"t\", value: null },\n\t\t\t\"tNormal\"      : { type: \"t\", value: null },\n\t\t\t\"tSpecular\"    : { type: \"t\", value: null },\n\t\t\t\"tAO\"          : { type: \"t\", value: null },\n\n\t\t\t\"uNormalScale\": { type: \"v2\", value: new THREE.Vector2( 1, 1 ) },\n\n\t\t\t\"uDisplacementBias\": { type: \"f\", value: 0.0 },\n\t\t\t\"uDisplacementScale\": { type: \"f\", value: 1.0 },\n\n\t\t\t\"diffuse\": { type: \"c\", value: new THREE.Color( 0xffffff ) },\n\t\t\t\"specular\": { type: \"c\", value: new THREE.Color( 0x111111 ) },\n\t\t\t\"ambient\": { type: \"c\", value: new THREE.Color( 0xffffff ) },\n\t\t\t\"shininess\": { type: \"f\", value: 30 },\n\t\t\t\"opacity\": { type: \"f\", value: 1 },\n\n\t\t\t\"useRefract\": { type: \"i\", value: 0 },\n\t\t\t\"refractionRatio\": { type: \"f\", value: 0.98 },\n\t\t\t\"reflectivity\": { type: \"f\", value: 0.5 },\n\n\t\t\t\"uOffset\" : { type: \"v2\", value: new THREE.Vector2( 0, 0 ) },\n\t\t\t\"uRepeat\" : { type: \"v2\", value: new THREE.Vector2( 1, 1 ) },\n\n\t\t\t\"wrapRGB\" : { type: \"v3\", value: new THREE.Vector3( 1, 1, 1 ) }\n\n\t\t\t}\n\n\t\t] ),\n\n\t\tfragmentShader: [\n\n\t\t\t\"uniform vec3 ambient;\",\n\t\t\t\"uniform vec3 diffuse;\",\n\t\t\t\"uniform vec3 specular;\",\n\t\t\t\"uniform float shininess;\",\n\t\t\t\"uniform float opacity;\",\n\n\t\t\t\"uniform bool enableDiffuse;\",\n\t\t\t\"uniform bool enableSpecular;\",\n\t\t\t\"uniform bool enableAO;\",\n\t\t\t\"uniform bool enableReflection;\",\n\n\t\t\t\"uniform sampler2D tDiffuse;\",\n\t\t\t\"uniform sampler2D tNormal;\",\n\t\t\t\"uniform sampler2D tSpecular;\",\n\t\t\t\"uniform sampler2D tAO;\",\n\n\t\t\t\"uniform samplerCube tCube;\",\n\n\t\t\t\"uniform vec2 uNormalScale;\",\n\n\t\t\t\"uniform bool useRefract;\",\n\t\t\t\"uniform float refractionRatio;\",\n\t\t\t\"uniform float reflectivity;\",\n\n\t\t\t\"varying vec3 vTangent;\",\n\t\t\t\"varying vec3 vBinormal;\",\n\t\t\t\"varying vec3 vNormal;\",\n\t\t\t\"varying vec2 vUv;\",\n\n\t\t\t\"uniform vec3 ambientLightColor;\",\n\n\t\t\t\"#if MAX_DIR_LIGHTS > 0\",\n\n\t\t\t\"\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\",\n\t\t\t\"\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\",\n\n\t\t\t\"#endif\",\n\n\t\t\t\"#if MAX_HEMI_LIGHTS > 0\",\n\n\t\t\t\"\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\",\n\t\t\t\"\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\",\n\t\t\t\"\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\",\n\n\t\t\t\"#endif\",\n\n\t\t\t\"#if MAX_POINT_LIGHTS > 0\",\n\n\t\t\t\"\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\",\n\t\t\t\"\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\",\n\t\t\t\"\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\",\n\n\t\t\t\"#endif\",\n\n\t\t\t\"#if MAX_SPOT_LIGHTS > 0\",\n\n\t\t\t\"\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\",\n\t\t\t\"\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\",\n\t\t\t\"\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\",\n\t\t\t\"\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\",\n\t\t\t\"\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\",\n\t\t\t\"\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\",\n\n\t\t\t\"#endif\",\n\n\t\t\t\"#ifdef WRAP_AROUND\",\n\n\t\t\t\"\tuniform vec3 wrapRGB;\",\n\n\t\t\t\"#endif\",\n\n\t\t\t\"varying vec3 vWorldPosition;\",\n\t\t\t\"varying vec3 vViewPosition;\",\n\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\n\n\t\t\t\"void main() {\",\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\n\n\t\t\t\"\tgl_FragColor = vec4( vec3( 1.0 ), opacity );\",\n\n\t\t\t\"\tvec3 specularTex = vec3( 1.0 );\",\n\n\t\t\t\"\tvec3 normalTex = texture2D( tNormal, vUv ).xyz * 2.0 - 1.0;\",\n\t\t\t\"\tnormalTex.xy *= uNormalScale;\",\n\t\t\t\"\tnormalTex = normalize( normalTex );\",\n\n\t\t\t\"\tif( enableDiffuse ) {\",\n\n\t\t\t\"\t\t#ifdef GAMMA_INPUT\",\n\n\t\t\t\"\t\t\tvec4 texelColor = texture2D( tDiffuse, vUv );\",\n\t\t\t\"\t\t\ttexelColor.xyz *= texelColor.xyz;\",\n\n\t\t\t\"\t\t\tgl_FragColor = gl_FragColor * texelColor;\",\n\n\t\t\t\"\t\t#else\",\n\n\t\t\t\"\t\t\tgl_FragColor = gl_FragColor * texture2D( tDiffuse, vUv );\",\n\n\t\t\t\"\t\t#endif\",\n\n\t\t\t\"\t}\",\n\n\t\t\t\"\tif( enableAO ) {\",\n\n\t\t\t\"\t\t#ifdef GAMMA_INPUT\",\n\n\t\t\t\"\t\t\tvec4 aoColor = texture2D( tAO, vUv );\",\n\t\t\t\"\t\t\taoColor.xyz *= aoColor.xyz;\",\n\n\t\t\t\"\t\t\tgl_FragColor.xyz = gl_FragColor.xyz * aoColor.xyz;\",\n\n\t\t\t\"\t\t#else\",\n\n\t\t\t\"\t\t\tgl_FragColor.xyz = gl_FragColor.xyz * texture2D( tAO, vUv ).xyz;\",\n\n\t\t\t\"\t\t#endif\",\n\n\t\t\t\"\t}\",\n\t\t\t\n\t\t\tTHREE.ShaderChunk[ \"alphatest_fragment\" ],\n\n\t\t\t\"\tif( enableSpecular )\",\n\t\t\t\"\t\tspecularTex = texture2D( tSpecular, vUv ).xyz;\",\n\n\t\t\t\"\tmat3 tsb = mat3( normalize( vTangent ), normalize( vBinormal ), normalize( vNormal ) );\",\n\t\t\t\"\tvec3 finalNormal = tsb * normalTex;\",\n\n\t\t\t\"\t#ifdef FLIP_SIDED\",\n\n\t\t\t\"\t\tfinalNormal = -finalNormal;\",\n\n\t\t\t\"\t#endif\",\n\n\t\t\t\"\tvec3 normal = normalize( finalNormal );\",\n\t\t\t\"\tvec3 viewPosition = normalize( vViewPosition );\",\n\n\t\t\t\t// point lights\n\n\t\t\t\"\t#if MAX_POINT_LIGHTS > 0\",\n\n\t\t\t\"\t\tvec3 pointDiffuse = vec3( 0.0 );\",\n\t\t\t\"\t\tvec3 pointSpecular = vec3( 0.0 );\",\n\n\t\t\t\"\t\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\",\n\n\t\t\t\"\t\t\tvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\",\n\t\t\t\"\t\t\tvec3 pointVector = lPosition.xyz + vViewPosition.xyz;\",\n\n\t\t\t\"\t\t\tfloat pointDistance = 1.0;\",\n\t\t\t\"\t\t\tif ( pointLightDistance[ i ] > 0.0 )\",\n\t\t\t\"\t\t\t\tpointDistance = 1.0 - min( ( length( pointVector ) / pointLightDistance[ i ] ), 1.0 );\",\n\n\t\t\t\"\t\t\tpointVector = normalize( pointVector );\",\n\n\t\t\t\t\t\t// diffuse\n\n\t\t\t\"\t\t\t#ifdef WRAP_AROUND\",\n\n\t\t\t\"\t\t\t\tfloat pointDiffuseWeightFull = max( dot( normal, pointVector ), 0.0 );\",\n\t\t\t\"\t\t\t\tfloat pointDiffuseWeightHalf = max( 0.5 * dot( normal, pointVector ) + 0.5, 0.0 );\",\n\n\t\t\t\"\t\t\t\tvec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\",\n\n\t\t\t\"\t\t\t#else\",\n\n\t\t\t\"\t\t\t\tfloat pointDiffuseWeight = max( dot( normal, pointVector ), 0.0 );\",\n\n\t\t\t\"\t\t\t#endif\",\n\n\t\t\t\"\t\t\tpointDiffuse += pointDistance * pointLightColor[ i ] * diffuse * pointDiffuseWeight;\",\n\n\t\t\t\t\t\t// specular\n\n\t\t\t\"\t\t\tvec3 pointHalfVector = normalize( pointVector + viewPosition );\",\n\t\t\t\"\t\t\tfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\",\n\t\t\t\"\t\t\tfloat pointSpecularWeight = specularTex.r * max( pow( pointDotNormalHalf, shininess ), 0.0 );\",\n\n\t\t\t\"\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\",\n\n\t\t\t\"\t\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( pointVector, pointHalfVector ), 0.0 ), 5.0 );\",\n\t\t\t\"\t\t\tpointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * pointDistance * specularNormalization;\",\n\n\t\t\t\"\t\t}\",\n\n\t\t\t\"\t#endif\",\n\n\t\t\t\t// spot lights\n\n\t\t\t\"\t#if MAX_SPOT_LIGHTS > 0\",\n\n\t\t\t\"\t\tvec3 spotDiffuse = vec3( 0.0 );\",\n\t\t\t\"\t\tvec3 spotSpecular = vec3( 0.0 );\",\n\n\t\t\t\"\t\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\",\n\n\t\t\t\"\t\t\tvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\",\n\t\t\t\"\t\t\tvec3 spotVector = lPosition.xyz + vViewPosition.xyz;\",\n\n\t\t\t\"\t\t\tfloat spotDistance = 1.0;\",\n\t\t\t\"\t\t\tif ( spotLightDistance[ i ] > 0.0 )\",\n\t\t\t\"\t\t\t\tspotDistance = 1.0 - min( ( length( spotVector ) / spotLightDistance[ i ] ), 1.0 );\",\n\n\t\t\t\"\t\t\tspotVector = normalize( spotVector );\",\n\n\t\t\t\"\t\t\tfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\",\n\n\t\t\t\"\t\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\",\n\n\t\t\t\"\t\t\t\tspotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\",\n\n\t\t\t\t\t\t\t// diffuse\n\n\t\t\t\"\t\t\t\t#ifdef WRAP_AROUND\",\n\n\t\t\t\"\t\t\t\t\tfloat spotDiffuseWeightFull = max( dot( normal, spotVector ), 0.0 );\",\n\t\t\t\"\t\t\t\t\tfloat spotDiffuseWeightHalf = max( 0.5 * dot( normal, spotVector ) + 0.5, 0.0 );\",\n\n\t\t\t\"\t\t\t\t\tvec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\",\n\n\t\t\t\"\t\t\t\t#else\",\n\n\t\t\t\"\t\t\t\t\tfloat spotDiffuseWeight = max( dot( normal, spotVector ), 0.0 );\",\n\n\t\t\t\"\t\t\t\t#endif\",\n\n\t\t\t\"\t\t\t\tspotDiffuse += spotDistance * spotLightColor[ i ] * diffuse * spotDiffuseWeight * spotEffect;\",\n\n\t\t\t\t\t\t\t// specular\n\n\t\t\t\"\t\t\t\tvec3 spotHalfVector = normalize( spotVector + viewPosition );\",\n\t\t\t\"\t\t\t\tfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\",\n\t\t\t\"\t\t\t\tfloat spotSpecularWeight = specularTex.r * max( pow( spotDotNormalHalf, shininess ), 0.0 );\",\n\n\t\t\t\"\t\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\",\n\n\t\t\t\"\t\t\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( spotVector, spotHalfVector ), 0.0 ), 5.0 );\",\n\t\t\t\"\t\t\t\tspotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * spotDistance * specularNormalization * spotEffect;\",\n\n\t\t\t\"\t\t\t}\",\n\n\t\t\t\"\t\t}\",\n\n\t\t\t\"\t#endif\",\n\n\t\t\t\t// directional lights\n\n\t\t\t\"\t#if MAX_DIR_LIGHTS > 0\",\n\n\t\t\t\"\t\tvec3 dirDiffuse = vec3( 0.0 );\",\n\t\t\t\"\t\tvec3 dirSpecular = vec3( 0.0 );\",\n\n\t\t\t\"\t\tfor( int i = 0; i < MAX_DIR_LIGHTS; i++ ) {\",\n\n\t\t\t\"\t\t\tvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\",\n\t\t\t\"\t\t\tvec3 dirVector = normalize( lDirection.xyz );\",\n\n\t\t\t\t\t\t// diffuse\n\n\t\t\t\"\t\t\t#ifdef WRAP_AROUND\",\n\n\t\t\t\"\t\t\t\tfloat directionalLightWeightingFull = max( dot( normal, dirVector ), 0.0 );\",\n\t\t\t\"\t\t\t\tfloat directionalLightWeightingHalf = max( 0.5 * dot( normal, dirVector ) + 0.5, 0.0 );\",\n\n\t\t\t\"\t\t\t\tvec3 dirDiffuseWeight = mix( vec3( directionalLightWeightingFull ), vec3( directionalLightWeightingHalf ), wrapRGB );\",\n\n\t\t\t\"\t\t\t#else\",\n\n\t\t\t\"\t\t\t\tfloat dirDiffuseWeight = max( dot( normal, dirVector ), 0.0 );\",\n\n\t\t\t\"\t\t\t#endif\",\n\n\t\t\t\"\t\t\tdirDiffuse += directionalLightColor[ i ] * diffuse * dirDiffuseWeight;\",\n\n\t\t\t\t\t\t// specular\n\n\t\t\t\"\t\t\tvec3 dirHalfVector = normalize( dirVector + viewPosition );\",\n\t\t\t\"\t\t\tfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\",\n\t\t\t\"\t\t\tfloat dirSpecularWeight = specularTex.r * max( pow( dirDotNormalHalf, shininess ), 0.0 );\",\n\n\t\t\t\"\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\",\n\n\t\t\t\"\t\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );\",\n\t\t\t\"\t\t\tdirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\",\n\n\t\t\t\"\t\t}\",\n\n\t\t\t\"\t#endif\",\n\n\t\t\t\t// hemisphere lights\n\n\t\t\t\"\t#if MAX_HEMI_LIGHTS > 0\",\n\n\t\t\t\"\t\tvec3 hemiDiffuse = vec3( 0.0 );\",\n\t\t\t\"\t\tvec3 hemiSpecular = vec3( 0.0 );\" ,\n\n\t\t\t\"\t\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\",\n\n\t\t\t\"\t\t\tvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\",\n\t\t\t\"\t\t\tvec3 lVector = normalize( lDirection.xyz );\",\n\n\t\t\t\t\t\t// diffuse\n\n\t\t\t\"\t\t\tfloat dotProduct = dot( normal, lVector );\",\n\t\t\t\"\t\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\",\n\n\t\t\t\"\t\t\tvec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\",\n\n\t\t\t\"\t\t\themiDiffuse += diffuse * hemiColor;\",\n\n\t\t\t\t\t\t// specular (sky light)\n\n\n\t\t\t\"\t\t\tvec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\",\n\t\t\t\"\t\t\tfloat hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\",\n\t\t\t\"\t\t\tfloat hemiSpecularWeightSky = specularTex.r * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );\",\n\n\t\t\t\t\t\t// specular (ground light)\n\n\t\t\t\"\t\t\tvec3 lVectorGround = -lVector;\",\n\n\t\t\t\"\t\t\tvec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\",\n\t\t\t\"\t\t\tfloat hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\",\n\t\t\t\"\t\t\tfloat hemiSpecularWeightGround = specularTex.r * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );\",\n\n\t\t\t\"\t\t\tfloat dotProductGround = dot( normal, lVectorGround );\",\n\n\t\t\t\"\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\",\n\n\t\t\t\"\t\t\tvec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );\",\n\t\t\t\"\t\t\tvec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );\",\n\t\t\t\"\t\t\themiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\",\n\n\t\t\t\"\t\t}\",\n\n\t\t\t\"\t#endif\",\n\n\t\t\t\t// all lights contribution summation\n\n\t\t\t\"\tvec3 totalDiffuse = vec3( 0.0 );\",\n\t\t\t\"\tvec3 totalSpecular = vec3( 0.0 );\",\n\n\t\t\t\"\t#if MAX_DIR_LIGHTS > 0\",\n\n\t\t\t\"\t\ttotalDiffuse += dirDiffuse;\",\n\t\t\t\"\t\ttotalSpecular += dirSpecular;\",\n\n\t\t\t\"\t#endif\",\n\n\t\t\t\"\t#if MAX_HEMI_LIGHTS > 0\",\n\n\t\t\t\"\t\ttotalDiffuse += hemiDiffuse;\",\n\t\t\t\"\t\ttotalSpecular += hemiSpecular;\",\n\n\t\t\t\"\t#endif\",\n\n\t\t\t\"\t#if MAX_POINT_LIGHTS > 0\",\n\n\t\t\t\"\t\ttotalDiffuse += pointDiffuse;\",\n\t\t\t\"\t\ttotalSpecular += pointSpecular;\",\n\n\t\t\t\"\t#endif\",\n\n\t\t\t\"\t#if MAX_SPOT_LIGHTS > 0\",\n\n\t\t\t\"\t\ttotalDiffuse += spotDiffuse;\",\n\t\t\t\"\t\ttotalSpecular += spotSpecular;\",\n\n\t\t\t\"\t#endif\",\n\n\t\t\t\"\t#ifdef METAL\",\n\n\t\t\t\"\t\tgl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * ambient + totalSpecular );\",\n\n\t\t\t\"\t#else\",\n\n\t\t\t\"\t\tgl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\",\n\n\t\t\t\"\t#endif\",\n\n\t\t\t\"\tif ( enableReflection ) {\",\n\n\t\t\t\"\t\tvec3 vReflect;\",\n\t\t\t\"\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\",\n\n\t\t\t\"\t\tif ( useRefract ) {\",\n\n\t\t\t\"\t\t\tvReflect = refract( cameraToVertex, normal, refractionRatio );\",\n\n\t\t\t\"\t\t} else {\",\n\n\t\t\t\"\t\t\tvReflect = reflect( cameraToVertex, normal );\",\n\n\t\t\t\"\t\t}\",\n\n\t\t\t\"\t\tvec4 cubeColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );\",\n\n\t\t\t\"\t\t#ifdef GAMMA_INPUT\",\n\n\t\t\t\"\t\t\tcubeColor.xyz *= cubeColor.xyz;\",\n\n\t\t\t\"\t\t#endif\",\n\n\t\t\t\"\t\tgl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularTex.r * reflectivity );\",\n\n\t\t\t\"\t}\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"linear_to_gamma_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\"),\n\n\t\tvertexShader: [\n\n\t\t\t\"attribute vec4 tangent;\",\n\n\t\t\t\"uniform vec2 uOffset;\",\n\t\t\t\"uniform vec2 uRepeat;\",\n\n\t\t\t\"uniform bool enableDisplacement;\",\n\n\t\t\t\"#ifdef VERTEX_TEXTURES\",\n\n\t\t\t\"\tuniform sampler2D tDisplacement;\",\n\t\t\t\"\tuniform float uDisplacementScale;\",\n\t\t\t\"\tuniform float uDisplacementBias;\",\n\n\t\t\t\"#endif\",\n\n\t\t\t\"varying vec3 vTangent;\",\n\t\t\t\"varying vec3 vBinormal;\",\n\t\t\t\"varying vec3 vNormal;\",\n\t\t\t\"varying vec2 vUv;\",\n\n\t\t\t\"varying vec3 vWorldPosition;\",\n\t\t\t\"varying vec3 vViewPosition;\",\n\n\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"skinnormal_vertex\" ],\n\n\t\t\t\t// normal, tangent and binormal vectors\n\n\t\t\t\"\t#ifdef USE_SKINNING\",\n\n\t\t\t\"\t\tvNormal = normalize( normalMatrix * skinnedNormal.xyz );\",\n\n\t\t\t\"\t\tvec4 skinnedTangent = skinMatrix * vec4( tangent.xyz, 0.0 );\",\n\t\t\t\"\t\tvTangent = normalize( normalMatrix * skinnedTangent.xyz );\",\n\n\t\t\t\"\t#else\",\n\n\t\t\t\"\t\tvNormal = normalize( normalMatrix * normal );\",\n\t\t\t\"\t\tvTangent = normalize( normalMatrix * tangent.xyz );\",\n\n\t\t\t\"\t#endif\",\n\n\t\t\t\"\tvBinormal = normalize( cross( vNormal, vTangent ) * tangent.w );\",\n\n\t\t\t\"\tvUv = uv * uRepeat + uOffset;\",\n\n\t\t\t\t// displacement mapping\n\n\t\t\t\"\tvec3 displacedPosition;\",\n\n\t\t\t\"\t#ifdef VERTEX_TEXTURES\",\n\n\t\t\t\"\t\tif ( enableDisplacement ) {\",\n\n\t\t\t\"\t\t\tvec3 dv = texture2D( tDisplacement, uv ).xyz;\",\n\t\t\t\"\t\t\tfloat df = uDisplacementScale * dv.x + uDisplacementBias;\",\n\t\t\t\"\t\t\tdisplacedPosition = position + normalize( normal ) * df;\",\n\n\t\t\t\"\t\t} else {\",\n\n\t\t\t\"\t\t\t#ifdef USE_SKINNING\",\n\n\t\t\t\"\t\t\t\tvec4 skinVertex = bindMatrix * vec4( position, 1.0 );\",\n\n\t\t\t\"\t\t\t\tvec4 skinned = vec4( 0.0 );\",\n\t\t\t\"\t\t\t\tskinned += boneMatX * skinVertex * skinWeight.x;\",\n\t\t\t\"\t\t\t\tskinned += boneMatY * skinVertex * skinWeight.y;\",\n\t\t\t\"\t\t\t\tskinned += boneMatZ * skinVertex * skinWeight.z;\",\n\t\t\t\"\t\t\t\tskinned += boneMatW * skinVertex * skinWeight.w;\",\n\t\t\t\"\t\t\t\tskinned  = bindMatrixInverse * skinned;\",\n\n\t\t\t\"\t\t\t\tdisplacedPosition = skinned.xyz;\",\n\n\t\t\t\"\t\t\t#else\",\n\n\t\t\t\"\t\t\t\tdisplacedPosition = position;\",\n\n\t\t\t\"\t\t\t#endif\",\n\n\t\t\t\"\t\t}\",\n\n\t\t\t\"\t#else\",\n\n\t\t\t\"\t\t#ifdef USE_SKINNING\",\n\n\t\t\t\"\t\t\tvec4 skinVertex = bindMatrix * vec4( position, 1.0 );\",\n\n\t\t\t\"\t\t\tvec4 skinned = vec4( 0.0 );\",\n\t\t\t\"\t\t\tskinned += boneMatX * skinVertex * skinWeight.x;\",\n\t\t\t\"\t\t\tskinned += boneMatY * skinVertex * skinWeight.y;\",\n\t\t\t\"\t\t\tskinned += boneMatZ * skinVertex * skinWeight.z;\",\n\t\t\t\"\t\t\tskinned += boneMatW * skinVertex * skinWeight.w;\",\n\t\t\t\"\t\t\tskinned  = bindMatrixInverse * skinned;\",\n\n\t\t\t\"\t\t\tdisplacedPosition = skinned.xyz;\",\n\n\t\t\t\"\t\t#else\",\n\n\t\t\t\"\t\t\tdisplacedPosition = position;\",\n\n\t\t\t\"\t\t#endif\",\n\n\t\t\t\"\t#endif\",\n\n\t\t\t\t//\n\n\t\t\t\"\tvec4 mvPosition = modelViewMatrix * vec4( displacedPosition, 1.0 );\",\n\t\t\t\"\tvec4 worldPosition = modelMatrix * vec4( displacedPosition, 1.0 );\",\n\n\t\t\t\"\tgl_Position = projectionMatrix * mvPosition;\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\n\n\t\t\t\t//\n\n\t\t\t\"\tvWorldPosition = worldPosition.xyz;\",\n\t\t\t\"\tvViewPosition = -mvPosition.xyz;\",\n\n\t\t\t\t// shadows\n\n\t\t\t\"\t#ifdef USE_SHADOWMAP\",\n\n\t\t\t\"\t\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\",\n\n\t\t\t\"\t\t\tvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\",\n\n\t\t\t\"\t\t}\",\n\n\t\t\t\"\t#endif\",\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\")\n\n\t},\n\n\t/* -------------------------------------------------------------------------\n\t//\tCube map shader\n\t ------------------------------------------------------------------------- */\n\n\t'cube': {\n\n\t\tuniforms: { \"tCube\": { type: \"t\", value: null },\n\t\t\t\t\t\"tFlip\": { type: \"f\", value: - 1 } },\n\n\t\tvertexShader: [\n\n\t\t\t\"varying vec3 vWorldPosition;\",\n\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\"\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\",\n\t\t\t\"\tvWorldPosition = worldPosition.xyz;\",\n\n\t\t\t\"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\"),\n\n\t\tfragmentShader: [\n\n\t\t\t\"uniform samplerCube tCube;\",\n\t\t\t\"uniform float tFlip;\",\n\n\t\t\t\"varying vec3 vWorldPosition;\",\n\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\"\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\")\n\n\t},\n\n\t/* Depth encoding into RGBA texture\n\t *\n\t * based on SpiderGL shadow map example\n\t * http://spidergl.org/example.php?id=6\n\t *\n\t * originally from\n\t * http://www.gamedev.net/topic/442138-packing-a-float-into-a-a8r8g8b8-texture-shader/page__whichpage__1%25EF%25BF%25BD\n\t *\n\t * see also\n\t * http://aras-p.info/blog/2009/07/30/encoding-floats-to-rgba-the-final/\n\t */\n\n\t'depthRGBA': {\n\n\t\tuniforms: {},\n\n\t\tvertexShader: [\n\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"skinning_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"default_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\"),\n\n\t\tfragmentShader: [\n\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\n\n\t\t\t\"vec4 pack_depth( const in float depth ) {\",\n\n\t\t\t\"\tconst vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\",\n\t\t\t\"\tconst vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\",\n\t\t\t\"\tvec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );\", // \"\tvec4 res = fract( depth * bit_shift );\",\n\t\t\t\"\tres -= res.xxyz * bit_mask;\",\n\t\t\t\"\treturn res;\",\n\n\t\t\t\"}\",\n\n\t\t\t\"void main() {\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\n\n\t\t\t\"\t#ifdef USE_LOGDEPTHBUF_EXT\",\n\n\t\t\t\"\t\tgl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );\",\n\n\t\t\t\"\t#else\",\n\n\t\t\t\"\t\tgl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\",\n\n\t\t\t\"\t#endif\",\n\n\t\t\t\t//\"gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z / gl_FragCoord.w );\",\n\t\t\t\t//\"float z = ( ( gl_FragCoord.z / gl_FragCoord.w ) - 3.0 ) / ( 4000.0 - 3.0 );\",\n\t\t\t\t//\"gl_FragData[ 0 ] = pack_depth( z );\",\n\t\t\t\t//\"gl_FragData[ 0 ] = vec4( z, z, z, 1.0 );\",\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\")\n\n\t}\n\n};\n\n// File:src/renderers/WebGLRenderer.js\n\n/**\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author szimek / https://github.com/szimek/\n */\n\nTHREE.WebGLRenderer = function ( parameters ) {\n\n\tconsole.log( 'THREE.WebGLRenderer', THREE.REVISION );\n\n\tparameters = parameters || {};\n\n\tvar _canvas = parameters.canvas !== undefined ? parameters.canvas : document.createElement( 'canvas' ),\n\t_context = parameters.context !== undefined ? parameters.context : null,\n\n\t_precision = parameters.precision !== undefined ? parameters.precision : 'highp',\n\n\t_alpha = parameters.alpha !== undefined ? parameters.alpha : false,\n\t_depth = parameters.depth !== undefined ? parameters.depth : true,\n\t_stencil = parameters.stencil !== undefined ? parameters.stencil : true,\n\t_antialias = parameters.antialias !== undefined ? parameters.antialias : false,\n\t_premultipliedAlpha = parameters.premultipliedAlpha !== undefined ? parameters.premultipliedAlpha : true,\n\t_preserveDrawingBuffer = parameters.preserveDrawingBuffer !== undefined ? parameters.preserveDrawingBuffer : false,\n\t_logarithmicDepthBuffer = parameters.logarithmicDepthBuffer !== undefined ? parameters.logarithmicDepthBuffer : false,\n\n\t_clearColor = new THREE.Color( 0x000000 ),\n\t_clearAlpha = 0;\n\n\tvar lights = [];\n\n\tvar _webglObjects = {};\n\tvar _webglObjectsImmediate = [];\n\n\tvar opaqueObjects = [];\n\tvar transparentObjects = [];\n\n\tvar sprites = [];\n\tvar lensFlares = [];\n\n\t// public properties\n\n\tthis.domElement = _canvas;\n\tthis.context = null;\n\tthis.devicePixelRatio = parameters.devicePixelRatio !== undefined\n\t\t\t\t ? parameters.devicePixelRatio\n\t\t\t\t : self.devicePixelRatio !== undefined\n\t\t\t\t\t ? self.devicePixelRatio\n\t\t\t\t\t : 1;\n\n\t// clearing\n\n\tthis.autoClear = true;\n\tthis.autoClearColor = true;\n\tthis.autoClearDepth = true;\n\tthis.autoClearStencil = true;\n\n\t// scene graph\n\n\tthis.sortObjects = true;\n\n\t// physically based shading\n\n\tthis.gammaInput = false;\n\tthis.gammaOutput = false;\n\n\t// shadow map\n\n\tthis.shadowMapEnabled = false;\n\tthis.shadowMapType = THREE.PCFShadowMap;\n\tthis.shadowMapCullFace = THREE.CullFaceFront;\n\tthis.shadowMapDebug = false;\n\tthis.shadowMapCascade = false;\n\n\t// morphs\n\n\tthis.maxMorphTargets = 8;\n\tthis.maxMorphNormals = 4;\n\n\t// flags\n\n\tthis.autoScaleCubemaps = true;\n\n\t// info\n\n\tthis.info = {\n\n\t\tmemory: {\n\n\t\t\tprograms: 0,\n\t\t\tgeometries: 0,\n\t\t\ttextures: 0\n\n\t\t},\n\n\t\trender: {\n\n\t\t\tcalls: 0,\n\t\t\tvertices: 0,\n\t\t\tfaces: 0,\n\t\t\tpoints: 0\n\n\t\t}\n\n\t};\n\n\t// internal properties\n\n\tvar _this = this,\n\n\t_programs = [],\n\n\t// internal state cache\n\n\t_currentProgram = null,\n\t_currentFramebuffer = null,\n\t_currentMaterialId = - 1,\n\t_currentGeometryGroupHash = - 1,\n\t_currentCamera = null,\n\n\t_usedTextureUnits = 0,\n\n\t// GL state cache\n\n\t_oldDoubleSided = - 1,\n\t_oldFlipSided = - 1,\n\n\t_oldBlending = - 1,\n\n\t_oldBlendEquation = - 1,\n\t_oldBlendSrc = - 1,\n\t_oldBlendDst = - 1,\n\n\t_oldDepthTest = - 1,\n\t_oldDepthWrite = - 1,\n\n\t_oldPolygonOffset = null,\n\t_oldPolygonOffsetFactor = null,\n\t_oldPolygonOffsetUnits = null,\n\n\t_oldLineWidth = null,\n\n\t_viewportX = 0,\n\t_viewportY = 0,\n\t_viewportWidth = _canvas.width,\n\t_viewportHeight = _canvas.height,\n\t_currentWidth = 0,\n\t_currentHeight = 0,\n\n\t_newAttributes = new Uint8Array( 16 ),\n\t_enabledAttributes = new Uint8Array( 16 ),\n\n\t// frustum\n\n\t_frustum = new THREE.Frustum(),\n\n\t // camera matrices cache\n\n\t_projScreenMatrix = new THREE.Matrix4(),\n\t_projScreenMatrixPS = new THREE.Matrix4(),\n\n\t_vector3 = new THREE.Vector3(),\n\n\t// light arrays cache\n\n\t_direction = new THREE.Vector3(),\n\n\t_lightsNeedUpdate = true,\n\n\t_lights = {\n\n\t\tambient: [ 0, 0, 0 ],\n\t\tdirectional: { length: 0, colors:[], positions: [] },\n\t\tpoint: { length: 0, colors: [], positions: [], distances: [] },\n\t\tspot: { length: 0, colors: [], positions: [], distances: [], directions: [], anglesCos: [], exponents: [] },\n\t\themi: { length: 0, skyColors: [], groundColors: [], positions: [] }\n\n\t};\n\n\t// initialize\n\n\tvar _gl;\n\n\ttry {\n\n\t\tvar attributes = {\n\t\t\talpha: _alpha,\n\t\t\tdepth: _depth,\n\t\t\tstencil: _stencil,\n\t\t\tantialias: _antialias,\n\t\t\tpremultipliedAlpha: _premultipliedAlpha,\n\t\t\tpreserveDrawingBuffer: _preserveDrawingBuffer\n\t\t};\n\n\t\t_gl = _context || _canvas.getContext( 'webgl', attributes ) || _canvas.getContext( 'experimental-webgl', attributes );\n\n\t\tif ( _gl === null ) {\n\n\t\t\tif ( _canvas.getContext( 'webgl') !== null ) {\n\n\t\t\t\tthrow 'Error creating WebGL context with your selected attributes.';\n\n\t\t\t} else {\n\n\t\t\t\tthrow 'Error creating WebGL context.';\n\n\t\t\t}\n\n\t\t}\n\n\t} catch ( error ) {\n\n\t\tconsole.error( error );\n\n\t}\n\n\tif ( _gl.getShaderPrecisionFormat === undefined ) {\n\n\t\t_gl.getShaderPrecisionFormat = function () {\n\n\t\t\treturn {\n\t\t\t\t'rangeMin': 1,\n\t\t\t\t'rangeMax': 1,\n\t\t\t\t'precision': 1\n\t\t\t};\n\n\t\t}\n\n\t}\n\n\tvar extensions = new THREE.WebGLExtensions( _gl );\n\n\textensions.get( 'OES_texture_float' );\n\textensions.get( 'OES_texture_float_linear' );\n\textensions.get( 'OES_standard_derivatives' );\n\n\tif ( _logarithmicDepthBuffer ) {\n\n\t\textensions.get( 'EXT_frag_depth' );\n\n\t}\n\n\t//\n\n\tfunction setDefaultGLState() {\n\n\t\t_gl.clearColor( 0, 0, 0, 1 );\n\t\t_gl.clearDepth( 1 );\n\t\t_gl.clearStencil( 0 );\n\n\t\t_gl.enable( _gl.DEPTH_TEST );\n\t\t_gl.depthFunc( _gl.LEQUAL );\n\n\t\t_gl.frontFace( _gl.CCW );\n\t\t_gl.cullFace( _gl.BACK );\n\t\t_gl.enable( _gl.CULL_FACE );\n\n\t\t_gl.enable( _gl.BLEND );\n\t\t_gl.blendEquation( _gl.FUNC_ADD );\n\t\t_gl.blendFunc( _gl.SRC_ALPHA, _gl.ONE_MINUS_SRC_ALPHA );\n\n\t\t_gl.viewport( _viewportX, _viewportY, _viewportWidth, _viewportHeight );\n\n\t\t_gl.clearColor( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha );\n\n\t}\n\n\tsetDefaultGLState();\n\n\tthis.context = _gl;\n\n\t// GPU capabilities\n\n\tvar _maxTextures = _gl.getParameter( _gl.MAX_TEXTURE_IMAGE_UNITS );\n\tvar _maxVertexTextures = _gl.getParameter( _gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS );\n\tvar _maxTextureSize = _gl.getParameter( _gl.MAX_TEXTURE_SIZE );\n\tvar _maxCubemapSize = _gl.getParameter( _gl.MAX_CUBE_MAP_TEXTURE_SIZE );\n\n\tvar _supportsVertexTextures = _maxVertexTextures > 0;\n\tvar _supportsBoneTextures = _supportsVertexTextures && extensions.get( 'OES_texture_float' );\n\n\t//\n\n\tvar _vertexShaderPrecisionHighpFloat = _gl.getShaderPrecisionFormat( _gl.VERTEX_SHADER, _gl.HIGH_FLOAT );\n\tvar _vertexShaderPrecisionMediumpFloat = _gl.getShaderPrecisionFormat( _gl.VERTEX_SHADER, _gl.MEDIUM_FLOAT );\n\tvar _vertexShaderPrecisionLowpFloat = _gl.getShaderPrecisionFormat( _gl.VERTEX_SHADER, _gl.LOW_FLOAT );\n\n\tvar _fragmentShaderPrecisionHighpFloat = _gl.getShaderPrecisionFormat( _gl.FRAGMENT_SHADER, _gl.HIGH_FLOAT );\n\tvar _fragmentShaderPrecisionMediumpFloat = _gl.getShaderPrecisionFormat( _gl.FRAGMENT_SHADER, _gl.MEDIUM_FLOAT );\n\tvar _fragmentShaderPrecisionLowpFloat = _gl.getShaderPrecisionFormat( _gl.FRAGMENT_SHADER, _gl.LOW_FLOAT );\n\n\tvar getCompressedTextureFormats = ( function () {\n\n\t\tvar array;\n\n\t\treturn function () {\n\n\t\t\tif ( array !== undefined ) {\n\n\t\t\t\treturn array;\n\n\t\t\t}\n\n\t\t\tarray = [];\n\n\t\t\tif ( extensions.get( 'WEBGL_compressed_texture_pvrtc' ) || extensions.get( 'WEBGL_compressed_texture_s3tc' ) ) {\n\n\t\t\t\tvar formats = _gl.getParameter( _gl.COMPRESSED_TEXTURE_FORMATS );\n\n\t\t\t\tfor ( var i = 0; i < formats.length; i ++ ){\n\n\t\t\t\t\tarray.push( formats[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t\t\n\t\t\treturn array;\n\n\t\t};\n\n\t} )();\n\n\t// clamp precision to maximum available\n\n\tvar highpAvailable = _vertexShaderPrecisionHighpFloat.precision > 0 && _fragmentShaderPrecisionHighpFloat.precision > 0;\n\tvar mediumpAvailable = _vertexShaderPrecisionMediumpFloat.precision > 0 && _fragmentShaderPrecisionMediumpFloat.precision > 0;\n\n\tif ( _precision === 'highp' && ! highpAvailable ) {\n\n\t\tif ( mediumpAvailable ) {\n\n\t\t\t_precision = 'mediump';\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: highp not supported, using mediump.' );\n\n\t\t} else {\n\n\t\t\t_precision = 'lowp';\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: highp and mediump not supported, using lowp.' );\n\n\t\t}\n\n\t}\n\n\tif ( _precision === 'mediump' && ! mediumpAvailable ) {\n\n\t\t_precision = 'lowp';\n\t\tconsole.warn( 'THREE.WebGLRenderer: mediump not supported, using lowp.' );\n\n\t}\n\n\t// Plugins\n\n\tvar shadowMapPlugin = new THREE.ShadowMapPlugin( this, lights, _webglObjects, _webglObjectsImmediate );\n\n\tvar spritePlugin = new THREE.SpritePlugin( this, sprites );\n\tvar lensFlarePlugin = new THREE.LensFlarePlugin( this, lensFlares );\n\n\t// API\n\n\tthis.getContext = function () {\n\n\t\treturn _gl;\n\n\t};\n\n\tthis.supportsVertexTextures = function () {\n\n\t\treturn _supportsVertexTextures;\n\n\t};\n\n\tthis.supportsFloatTextures = function () {\n\n\t\treturn extensions.get( 'OES_texture_float' );\n\n\t};\n\n\tthis.supportsStandardDerivatives = function () {\n\n\t\treturn extensions.get( 'OES_standard_derivatives' );\n\n\t};\n\n\tthis.supportsCompressedTextureS3TC = function () {\n\n\t\treturn extensions.get( 'WEBGL_compressed_texture_s3tc' );\n\n\t};\n\n\tthis.supportsCompressedTexturePVRTC = function () {\n\n\t\treturn extensions.get( 'WEBGL_compressed_texture_pvrtc' );\n\n\t};\n\n\tthis.supportsBlendMinMax = function () {\n\n\t\treturn extensions.get( 'EXT_blend_minmax' );\n\n\t};\n\n\tthis.getMaxAnisotropy = ( function () {\n\n\t\tvar value;\n\n\t\treturn function () {\n\n\t\t\tif ( value !== undefined ) {\n\n\t\t\t\treturn value;\n\n\t\t\t}\n\n\t\t\tvar extension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\t\tvalue = extension !== null ? _gl.getParameter( extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT ) : 0;\n\n\t\t\treturn value;\n\n\t\t}\n\n\t} )();\n\n\tthis.getPrecision = function () {\n\n\t\treturn _precision;\n\n\t};\n\n\tthis.setSize = function ( width, height, updateStyle ) {\n\n\t\t_canvas.width = width * this.devicePixelRatio;\n\t\t_canvas.height = height * this.devicePixelRatio;\n\n\t\tif ( updateStyle !== false ) {\n\n\t\t\t_canvas.style.width = width + 'px';\n\t\t\t_canvas.style.height = height + 'px';\n\n\t\t}\n\n\t\tthis.setViewport( 0, 0, width, height );\n\n\t};\n\n\tthis.setViewport = function ( x, y, width, height ) {\n\n\t\t_viewportX = x * this.devicePixelRatio;\n\t\t_viewportY = y * this.devicePixelRatio;\n\n\t\t_viewportWidth = width * this.devicePixelRatio;\n\t\t_viewportHeight = height * this.devicePixelRatio;\n\n\t\t_gl.viewport( _viewportX, _viewportY, _viewportWidth, _viewportHeight );\n\n\t};\n\n\tthis.setScissor = function ( x, y, width, height ) {\n\n\t\t_gl.scissor(\n\t\t\tx * this.devicePixelRatio,\n\t\t\ty * this.devicePixelRatio,\n\t\t\twidth * this.devicePixelRatio,\n\t\t\theight * this.devicePixelRatio\n\t\t);\n\n\t};\n\n\tthis.enableScissorTest = function ( enable ) {\n\n\t\tenable ? _gl.enable( _gl.SCISSOR_TEST ) : _gl.disable( _gl.SCISSOR_TEST );\n\n\t};\n\n\t// Clearing\n\n\tthis.setClearColor = function ( color, alpha ) {\n\n\t\t_clearColor.set( color );\n\t\t_clearAlpha = alpha !== undefined ? alpha : 1;\n\n\t\t_gl.clearColor( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha );\n\n\t};\n\n\tthis.setClearColorHex = function ( hex, alpha ) {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .setClearColorHex() is being removed. Use .setClearColor() instead.' );\n\t\tthis.setClearColor( hex, alpha );\n\n\t};\n\n\tthis.getClearColor = function () {\n\n\t\treturn _clearColor;\n\n\t};\n\n\tthis.getClearAlpha = function () {\n\n\t\treturn _clearAlpha;\n\n\t};\n\n\tthis.clear = function ( color, depth, stencil ) {\n\n\t\tvar bits = 0;\n\n\t\tif ( color === undefined || color ) bits |= _gl.COLOR_BUFFER_BIT;\n\t\tif ( depth === undefined || depth ) bits |= _gl.DEPTH_BUFFER_BIT;\n\t\tif ( stencil === undefined || stencil ) bits |= _gl.STENCIL_BUFFER_BIT;\n\n\t\t_gl.clear( bits );\n\n\t};\n\n\tthis.clearColor = function () {\n\n\t\t_gl.clear( _gl.COLOR_BUFFER_BIT );\n\n\t};\n\n\tthis.clearDepth = function () {\n\n\t\t_gl.clear( _gl.DEPTH_BUFFER_BIT );\n\n\t};\n\n\tthis.clearStencil = function () {\n\n\t\t_gl.clear( _gl.STENCIL_BUFFER_BIT );\n\n\t};\n\n\tthis.clearTarget = function ( renderTarget, color, depth, stencil ) {\n\n\t\tthis.setRenderTarget( renderTarget );\n\t\tthis.clear( color, depth, stencil );\n\n\t};\n\n\t// Reset\n\n\tthis.resetGLState = function () {\n\n\t\t_currentProgram = null;\n\t\t_currentCamera = null;\n\n\t\t_oldBlending = - 1;\n\t\t_oldDepthTest = - 1;\n\t\t_oldDepthWrite = - 1;\n\t\t_oldDoubleSided = - 1;\n\t\t_oldFlipSided = - 1;\n\t\t_currentGeometryGroupHash = - 1;\n\t\t_currentMaterialId = - 1;\n\n\t\t_lightsNeedUpdate = true;\n\n\t};\n\n\t// Buffer allocation\n\n\tfunction createParticleBuffers ( geometry ) {\n\n\t\tgeometry.__webglVertexBuffer = _gl.createBuffer();\n\t\tgeometry.__webglColorBuffer = _gl.createBuffer();\n\n\t\t_this.info.memory.geometries ++;\n\n\t};\n\n\tfunction createLineBuffers ( geometry ) {\n\n\t\tgeometry.__webglVertexBuffer = _gl.createBuffer();\n\t\tgeometry.__webglColorBuffer = _gl.createBuffer();\n\t\tgeometry.__webglLineDistanceBuffer = _gl.createBuffer();\n\n\t\t_this.info.memory.geometries ++;\n\n\t};\n\n\tfunction createMeshBuffers ( geometryGroup ) {\n\n\t\tgeometryGroup.__webglVertexBuffer = _gl.createBuffer();\n\t\tgeometryGroup.__webglNormalBuffer = _gl.createBuffer();\n\t\tgeometryGroup.__webglTangentBuffer = _gl.createBuffer();\n\t\tgeometryGroup.__webglColorBuffer = _gl.createBuffer();\n\t\tgeometryGroup.__webglUVBuffer = _gl.createBuffer();\n\t\tgeometryGroup.__webglUV2Buffer = _gl.createBuffer();\n\n\t\tgeometryGroup.__webglSkinIndicesBuffer = _gl.createBuffer();\n\t\tgeometryGroup.__webglSkinWeightsBuffer = _gl.createBuffer();\n\n\t\tgeometryGroup.__webglFaceBuffer = _gl.createBuffer();\n\t\tgeometryGroup.__webglLineBuffer = _gl.createBuffer();\n\n\t\tvar m, ml;\n\n\t\tif ( geometryGroup.numMorphTargets ) {\n\n\t\t\tgeometryGroup.__webglMorphTargetsBuffers = [];\n\n\t\t\tfor ( m = 0, ml = geometryGroup.numMorphTargets; m < ml; m ++ ) {\n\n\t\t\t\tgeometryGroup.__webglMorphTargetsBuffers.push( _gl.createBuffer() );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( geometryGroup.numMorphNormals ) {\n\n\t\t\tgeometryGroup.__webglMorphNormalsBuffers = [];\n\n\t\t\tfor ( m = 0, ml = geometryGroup.numMorphNormals; m < ml; m ++ ) {\n\n\t\t\t\tgeometryGroup.__webglMorphNormalsBuffers.push( _gl.createBuffer() );\n\n\t\t\t}\n\n\t\t}\n\n\t\t_this.info.memory.geometries ++;\n\n\t};\n\n\t// Events\n\n\tvar onObjectRemoved = function ( event ) {\n\n\t\tvar object = event.target;\n\n\t\tobject.traverse( function ( child ) {\n\n\t\t\tchild.removeEventListener( 'remove', onObjectRemoved );\n\n\t\t\tremoveObject( child );\n\n\t\t} );\n\n\t};\n\n\tvar onGeometryDispose = function ( event ) {\n\n\t\tvar geometry = event.target;\n\n\t\tgeometry.removeEventListener( 'dispose', onGeometryDispose );\n\n\t\tdeallocateGeometry( geometry );\n\n\t};\n\n\tvar onTextureDispose = function ( event ) {\n\n\t\tvar texture = event.target;\n\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\n\n\t\tdeallocateTexture( texture );\n\n\t\t_this.info.memory.textures --;\n\n\n\t};\n\n\tvar onRenderTargetDispose = function ( event ) {\n\n\t\tvar renderTarget = event.target;\n\n\t\trenderTarget.removeEventListener( 'dispose', onRenderTargetDispose );\n\n\t\tdeallocateRenderTarget( renderTarget );\n\n\t\t_this.info.memory.textures --;\n\n\t};\n\n\tvar onMaterialDispose = function ( event ) {\n\n\t\tvar material = event.target;\n\n\t\tmaterial.removeEventListener( 'dispose', onMaterialDispose );\n\n\t\tdeallocateMaterial( material );\n\n\t};\n\n\t// Buffer deallocation\n\n\tvar deleteBuffers = function ( geometry ) {\n\t\n\t\tvar buffers = [\n\t\t\t'__webglVertexBuffer',\n\t\t\t'__webglNormalBuffer',\n\t\t\t'__webglTangentBuffer',\n\t\t\t'__webglColorBuffer',\n\t\t\t'__webglUVBuffer',\n\t\t\t'__webglUV2Buffer',\n\t\t\t\n\t\t\t'__webglSkinIndicesBuffer',\n\t\t\t'__webglSkinWeightsBuffer',\n\t\t\t\n\t\t\t'__webglFaceBuffer',\n\t\t\t'__webglLineBuffer',\n\t\t\t\n\t\t\t'__webglLineDistanceBuffer'\n\t\t];\n\n\t\tfor ( var i = 0, l = buffers.length; i < l; i ++ ) {\n\n\t\t\tvar name = buffers[ i ];\n\n\t\t\tif ( geometry[ name ] !== undefined ) {\n\n\t\t\t\t_gl.deleteBuffer( geometry[ name ] );\n\n\t\t\t\tdelete geometry[ name ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// custom attributes\n\n\t\tif ( geometry.__webglCustomAttributesList !== undefined ) {\n\n\t\t\tfor ( var name in geometry.__webglCustomAttributesList ) {\n\n\t\t\t\t_gl.deleteBuffer( geometry.__webglCustomAttributesList[ name ].buffer );\n\n\t\t\t}\n\n\t\t\tdelete geometry.__webglCustomAttributesList;\n\n\t\t}\n\n\t\t_this.info.memory.geometries --;\n\n\t};\n\n\tvar deallocateGeometry = function ( geometry ) {\n\n\t\tdelete geometry.__webglInit;\n\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\n\n\t\t\tfor ( var name in geometry.attributes ) {\n\t\t\t\n\t\t\t\tvar attribute = geometry.attributes[ name ];\n\n\t\t\t\tif ( attribute.buffer !== undefined ) {\n\n\t\t\t\t\t_gl.deleteBuffer( attribute.buffer );\n\n\t\t\t\t\tdelete attribute.buffer;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_this.info.memory.geometries --;\n\n\t\t} else {\n\n\t\t\tvar geometryGroupsList = geometryGroups[ geometry.id ];\n\n\t\t\tif ( geometryGroupsList !== undefined ) {\n\n\t\t\t\tfor ( var i = 0,l = geometryGroupsList.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar geometryGroup = geometryGroupsList[ i ];\n\n\t\t\t\t\tif ( geometryGroup.numMorphTargets !== undefined ) {\n\n\t\t\t\t\t\tfor ( var m = 0, ml = geometryGroup.numMorphTargets; m < ml; m ++ ) {\n\n\t\t\t\t\t\t\t_gl.deleteBuffer( geometryGroup.__webglMorphTargetsBuffers[ m ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdelete geometryGroup.__webglMorphTargetsBuffers;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( geometryGroup.numMorphNormals !== undefined ) {\n\n\t\t\t\t\t\tfor ( var m = 0, ml = geometryGroup.numMorphNormals; m < ml; m ++ ) {\n\n\t\t\t\t\t\t\t_gl.deleteBuffer( geometryGroup.__webglMorphNormalsBuffers[ m ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdelete geometryGroup.__webglMorphNormalsBuffers;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tdeleteBuffers( geometryGroup );\n\n\t\t\t\t}\n\n\t\t\t\tdelete geometryGroups[ geometry.id ];\n\n\t\t\t} else {\n\n\t\t\t\tdeleteBuffers( geometry );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// TOFIX: Workaround for deleted geometry being currently bound\n\n\t\t_currentGeometryGroupHash = - 1;\n\n\t};\n\n\tvar deallocateTexture = function ( texture ) {\n\n\t\tif ( texture.image && texture.image.__webglTextureCube ) {\n\n\t\t\t// cube texture\n\n\t\t\t_gl.deleteTexture( texture.image.__webglTextureCube );\n\n\t\t\tdelete texture.image.__webglTextureCube;\n\n\t\t} else {\n\n\t\t\t// 2D texture\n\n\t\t\tif ( texture.__webglInit === undefined ) return;\n\n\t\t\t_gl.deleteTexture( texture.__webglTexture );\n\n\t\t\tdelete texture.__webglTexture;\n\t\t\tdelete texture.__webglInit;\n\n\t\t}\n\n\t};\n\n\tvar deallocateRenderTarget = function ( renderTarget ) {\n\n\t\tif ( ! renderTarget || renderTarget.__webglTexture === undefined ) return;\n\n\t\t_gl.deleteTexture( renderTarget.__webglTexture );\n\n\t\tdelete renderTarget.__webglTexture;\n\n\t\tif ( renderTarget instanceof THREE.WebGLRenderTargetCube ) {\n\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t_gl.deleteFramebuffer( renderTarget.__webglFramebuffer[ i ] );\n\t\t\t\t_gl.deleteRenderbuffer( renderTarget.__webglRenderbuffer[ i ] );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t_gl.deleteFramebuffer( renderTarget.__webglFramebuffer );\n\t\t\t_gl.deleteRenderbuffer( renderTarget.__webglRenderbuffer );\n\n\t\t}\n\n\t\tdelete renderTarget.__webglFramebuffer;\n\t\tdelete renderTarget.__webglRenderbuffer;\n\n\t};\n\n\tvar deallocateMaterial = function ( material ) {\n\n\t\tvar program = material.program.program;\n\n\t\tif ( program === undefined ) return;\n\n\t\tmaterial.program = undefined;\n\n\t\t// only deallocate GL program if this was the last use of shared program\n\t\t// assumed there is only single copy of any program in the _programs list\n\t\t// (that's how it's constructed)\n\n\t\tvar i, il, programInfo;\n\t\tvar deleteProgram = false;\n\n\t\tfor ( i = 0, il = _programs.length; i < il; i ++ ) {\n\n\t\t\tprogramInfo = _programs[ i ];\n\n\t\t\tif ( programInfo.program === program ) {\n\n\t\t\t\tprogramInfo.usedTimes --;\n\n\t\t\t\tif ( programInfo.usedTimes === 0 ) {\n\n\t\t\t\t\tdeleteProgram = true;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( deleteProgram === true ) {\n\n\t\t\t// avoid using array.splice, this is costlier than creating new array from scratch\n\n\t\t\tvar newPrograms = [];\n\n\t\t\tfor ( i = 0, il = _programs.length; i < il; i ++ ) {\n\n\t\t\t\tprogramInfo = _programs[ i ];\n\n\t\t\t\tif ( programInfo.program !== program ) {\n\n\t\t\t\t\tnewPrograms.push( programInfo );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_programs = newPrograms;\n\n\t\t\t_gl.deleteProgram( program );\n\n\t\t\t_this.info.memory.programs --;\n\n\t\t}\n\n\t};\n\n\t// Buffer initialization\n\n\tfunction initCustomAttributes ( object ) {\n\n\t\tvar geometry = object.geometry;\n\t\tvar material = object.material;\n\n\t\tvar nvertices = geometry.vertices.length;\n\n\t\tif ( material.attributes ) {\n\n\t\t\tif ( geometry.__webglCustomAttributesList === undefined ) {\n\n\t\t\t\tgeometry.__webglCustomAttributesList = [];\n\n\t\t\t}\n\n\t\t\tfor ( var name in material.attributes ) {\n\n\t\t\t\tvar attribute = material.attributes[ name ];\n\n\t\t\t\tif ( ! attribute.__webglInitialized || attribute.createUniqueBuffers ) {\n\n\t\t\t\t\tattribute.__webglInitialized = true;\n\n\t\t\t\t\tvar size = 1;   // \"f\" and \"i\"\n\n\t\t\t\t\tif ( attribute.type === 'v2' ) size = 2;\n\t\t\t\t\telse if ( attribute.type === 'v3' ) size = 3;\n\t\t\t\t\telse if ( attribute.type === 'v4' ) size = 4;\n\t\t\t\t\telse if ( attribute.type === 'c'  ) size = 3;\n\n\t\t\t\t\tattribute.size = size;\n\n\t\t\t\t\tattribute.array = new Float32Array( nvertices * size );\n\n\t\t\t\t\tattribute.buffer = _gl.createBuffer();\n\t\t\t\t\tattribute.buffer.belongsToAttribute = name;\n\n\t\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.__webglCustomAttributesList.push( attribute );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tfunction initParticleBuffers ( geometry, object ) {\n\n\t\tvar nvertices = geometry.vertices.length;\n\n\t\tgeometry.__vertexArray = new Float32Array( nvertices * 3 );\n\t\tgeometry.__colorArray = new Float32Array( nvertices * 3 );\n\n\t\tgeometry.__sortArray = [];\n\n\t\tgeometry.__webglParticleCount = nvertices;\n\n\t\tinitCustomAttributes( object );\n\n\t};\n\n\tfunction initLineBuffers ( geometry, object ) {\n\n\t\tvar nvertices = geometry.vertices.length;\n\n\t\tgeometry.__vertexArray = new Float32Array( nvertices * 3 );\n\t\tgeometry.__colorArray = new Float32Array( nvertices * 3 );\n\t\tgeometry.__lineDistanceArray = new Float32Array( nvertices * 1 );\n\n\t\tgeometry.__webglLineCount = nvertices;\n\n\t\tinitCustomAttributes( object );\n\n\t};\n\n\tfunction initMeshBuffers ( geometryGroup, object ) {\n\n\t\tvar geometry = object.geometry,\n\t\t\tfaces3 = geometryGroup.faces3,\n\n\t\t\tnvertices = faces3.length * 3,\n\t\t\tntris     = faces3.length * 1,\n\t\t\tnlines    = faces3.length * 3,\n\n\t\t\tmaterial = getBufferMaterial( object, geometryGroup );\n\n\t\tgeometryGroup.__vertexArray = new Float32Array( nvertices * 3 );\n\t\tgeometryGroup.__normalArray = new Float32Array( nvertices * 3 );\n\t\tgeometryGroup.__colorArray = new Float32Array( nvertices * 3 );\n\t\tgeometryGroup.__uvArray = new Float32Array( nvertices * 2 );\n\n\t\tif ( geometry.faceVertexUvs.length > 1 ) {\n\n\t\t\tgeometryGroup.__uv2Array = new Float32Array( nvertices * 2 );\n\n\t\t}\n\n\t\tif ( geometry.hasTangents ) {\n\n\t\t\tgeometryGroup.__tangentArray = new Float32Array( nvertices * 4 );\n\n\t\t}\n\n\t\tif ( object.geometry.skinWeights.length && object.geometry.skinIndices.length ) {\n\n\t\t\tgeometryGroup.__skinIndexArray = new Float32Array( nvertices * 4 );\n\t\t\tgeometryGroup.__skinWeightArray = new Float32Array( nvertices * 4 );\n\n\t\t}\n\n\t\tvar UintArray = extensions.get( 'OES_element_index_uint' ) !== null && ntris > 21845 ? Uint32Array : Uint16Array; // 65535 / 3\n\n\t\tgeometryGroup.__typeArray = UintArray;\n\t\tgeometryGroup.__faceArray = new UintArray( ntris * 3 );\n\t\tgeometryGroup.__lineArray = new UintArray( nlines * 2 );\n\n\t\tvar m, ml;\n\n\t\tif ( geometryGroup.numMorphTargets ) {\n\n\t\t\tgeometryGroup.__morphTargetsArrays = [];\n\n\t\t\tfor ( m = 0, ml = geometryGroup.numMorphTargets; m < ml; m ++ ) {\n\n\t\t\t\tgeometryGroup.__morphTargetsArrays.push( new Float32Array( nvertices * 3 ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( geometryGroup.numMorphNormals ) {\n\n\t\t\tgeometryGroup.__morphNormalsArrays = [];\n\n\t\t\tfor ( m = 0, ml = geometryGroup.numMorphNormals; m < ml; m ++ ) {\n\n\t\t\t\tgeometryGroup.__morphNormalsArrays.push( new Float32Array( nvertices * 3 ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeometryGroup.__webglFaceCount = ntris * 3;\n\t\tgeometryGroup.__webglLineCount = nlines * 2;\n\n\n\t\t// custom attributes\n\n\t\tif ( material.attributes ) {\n\n\t\t\tif ( geometryGroup.__webglCustomAttributesList === undefined ) {\n\n\t\t\t\tgeometryGroup.__webglCustomAttributesList = [];\n\n\t\t\t}\n\n\t\t\tfor ( var name in material.attributes ) {\n\n\t\t\t\t// Do a shallow copy of the attribute object so different geometryGroup chunks use different\n\t\t\t\t// attribute buffers which are correctly indexed in the setMeshBuffers function\n\n\t\t\t\tvar originalAttribute = material.attributes[ name ];\n\n\t\t\t\tvar attribute = {};\n\n\t\t\t\tfor ( var property in originalAttribute ) {\n\n\t\t\t\t\tattribute[ property ] = originalAttribute[ property ];\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! attribute.__webglInitialized || attribute.createUniqueBuffers ) {\n\n\t\t\t\t\tattribute.__webglInitialized = true;\n\n\t\t\t\t\tvar size = 1;   // \"f\" and \"i\"\n\n\t\t\t\t\tif ( attribute.type === 'v2' ) size = 2;\n\t\t\t\t\telse if ( attribute.type === 'v3' ) size = 3;\n\t\t\t\t\telse if ( attribute.type === 'v4' ) size = 4;\n\t\t\t\t\telse if ( attribute.type === 'c'  ) size = 3;\n\n\t\t\t\t\tattribute.size = size;\n\n\t\t\t\t\tattribute.array = new Float32Array( nvertices * size );\n\n\t\t\t\t\tattribute.buffer = _gl.createBuffer();\n\t\t\t\t\tattribute.buffer.belongsToAttribute = name;\n\n\t\t\t\t\toriginalAttribute.needsUpdate = true;\n\t\t\t\t\tattribute.__original = originalAttribute;\n\n\t\t\t\t}\n\n\t\t\t\tgeometryGroup.__webglCustomAttributesList.push( attribute );\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeometryGroup.__inittedArrays = true;\n\n\t};\n\n\tfunction getBufferMaterial( object, geometryGroup ) {\n\n\t\treturn object.material instanceof THREE.MeshFaceMaterial\n\t\t\t ? object.material.materials[ geometryGroup.materialIndex ]\n\t\t\t : object.material;\n\n\t};\n\n\tfunction materialNeedsSmoothNormals ( material ) {\n\n\t\treturn material && material.shading !== undefined && material.shading === THREE.SmoothShading;\n\n\t};\n\n\t// Buffer setting\n\n\tfunction setParticleBuffers ( geometry, hint, object ) {\n\n\t\tvar v, c, vertex, offset, index, color,\n\n\t\tvertices = geometry.vertices,\n\t\tvl = vertices.length,\n\n\t\tcolors = geometry.colors,\n\t\tcl = colors.length,\n\n\t\tvertexArray = geometry.__vertexArray,\n\t\tcolorArray = geometry.__colorArray,\n\n\t\tsortArray = geometry.__sortArray,\n\n\t\tdirtyVertices = geometry.verticesNeedUpdate,\n\t\tdirtyElements = geometry.elementsNeedUpdate,\n\t\tdirtyColors = geometry.colorsNeedUpdate,\n\n\t\tcustomAttributes = geometry.__webglCustomAttributesList,\n\t\ti, il,\n\t\ta, ca, cal, value,\n\t\tcustomAttribute;\n\n\t\tif ( object.sortParticles ) {\n\n\t\t\t_projScreenMatrixPS.copy( _projScreenMatrix );\n\t\t\t_projScreenMatrixPS.multiply( object.matrixWorld );\n\n\t\t\tfor ( v = 0; v < vl; v ++ ) {\n\n\t\t\t\tvertex = vertices[ v ];\n\n\t\t\t\t_vector3.copy( vertex );\n\t\t\t\t_vector3.applyProjection( _projScreenMatrixPS );\n\n\t\t\t\tsortArray[ v ] = [ _vector3.z, v ];\n\n\t\t\t}\n\n\t\t\tsortArray.sort( numericalSort );\n\n\t\t\tfor ( v = 0; v < vl; v ++ ) {\n\n\t\t\t\tvertex = vertices[ sortArray[ v ][ 1 ] ];\n\n\t\t\t\toffset = v * 3;\n\n\t\t\t\tvertexArray[ offset ]     = vertex.x;\n\t\t\t\tvertexArray[ offset + 1 ] = vertex.y;\n\t\t\t\tvertexArray[ offset + 2 ] = vertex.z;\n\n\t\t\t}\n\n\t\t\tfor ( c = 0; c < cl; c ++ ) {\n\n\t\t\t\toffset = c * 3;\n\n\t\t\t\tcolor = colors[ sortArray[ c ][ 1 ] ];\n\n\t\t\t\tcolorArray[ offset ]     = color.r;\n\t\t\t\tcolorArray[ offset + 1 ] = color.g;\n\t\t\t\tcolorArray[ offset + 2 ] = color.b;\n\n\t\t\t}\n\n\t\t\tif ( customAttributes ) {\n\n\t\t\t\tfor ( i = 0, il = customAttributes.length; i < il; i ++ ) {\n\n\t\t\t\t\tcustomAttribute = customAttributes[ i ];\n\n\t\t\t\t\tif ( ! ( customAttribute.boundTo === undefined || customAttribute.boundTo === 'vertices' ) ) continue;\n\n\t\t\t\t\toffset = 0;\n\n\t\t\t\t\tcal = customAttribute.value.length;\n\n\t\t\t\t\tif ( customAttribute.size === 1 ) {\n\n\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\n\n\t\t\t\t\t\t\tindex = sortArray[ ca ][ 1 ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ ca ] = customAttribute.value[ index ];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( customAttribute.size === 2 ) {\n\n\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\n\n\t\t\t\t\t\t\tindex = sortArray[ ca ][ 1 ];\n\n\t\t\t\t\t\t\tvalue = customAttribute.value[ index ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset ]   = value.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1 ] = value.y;\n\n\t\t\t\t\t\t\toffset += 2;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( customAttribute.size === 3 ) {\n\n\t\t\t\t\t\tif ( customAttribute.type === 'c' ) {\n\n\t\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\n\n\t\t\t\t\t\t\t\tindex = sortArray[ ca ][ 1 ];\n\n\t\t\t\t\t\t\t\tvalue = customAttribute.value[ index ];\n\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset ]     = value.r;\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1 ] = value.g;\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 2 ] = value.b;\n\n\t\t\t\t\t\t\t\toffset += 3;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\n\n\t\t\t\t\t\t\t\tindex = sortArray[ ca ][ 1 ];\n\n\t\t\t\t\t\t\t\tvalue = customAttribute.value[ index ];\n\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset ]   = value.x;\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1 ] = value.y;\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 2 ] = value.z;\n\n\t\t\t\t\t\t\t\toffset += 3;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( customAttribute.size === 4 ) {\n\n\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\n\n\t\t\t\t\t\t\tindex = sortArray[ ca ][ 1 ];\n\n\t\t\t\t\t\t\tvalue = customAttribute.value[ index ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset ]      = value.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1  ] = value.y;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset + 2  ] = value.z;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset + 3  ] = value.w;\n\n\t\t\t\t\t\t\toffset += 4;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( dirtyVertices ) {\n\n\t\t\t\tfor ( v = 0; v < vl; v ++ ) {\n\n\t\t\t\t\tvertex = vertices[ v ];\n\n\t\t\t\t\toffset = v * 3;\n\n\t\t\t\t\tvertexArray[ offset ]     = vertex.x;\n\t\t\t\t\tvertexArray[ offset + 1 ] = vertex.y;\n\t\t\t\t\tvertexArray[ offset + 2 ] = vertex.z;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( dirtyColors ) {\n\n\t\t\t\tfor ( c = 0; c < cl; c ++ ) {\n\n\t\t\t\t\tcolor = colors[ c ];\n\n\t\t\t\t\toffset = c * 3;\n\n\t\t\t\t\tcolorArray[ offset ]     = color.r;\n\t\t\t\t\tcolorArray[ offset + 1 ] = color.g;\n\t\t\t\t\tcolorArray[ offset + 2 ] = color.b;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( customAttributes ) {\n\n\t\t\t\tfor ( i = 0, il = customAttributes.length; i < il; i ++ ) {\n\n\t\t\t\t\tcustomAttribute = customAttributes[ i ];\n\n\t\t\t\t\tif ( customAttribute.needsUpdate &&\n\t\t\t\t\t\t ( customAttribute.boundTo === undefined ||\n\t\t\t\t\t\t\t customAttribute.boundTo === 'vertices' ) ) {\n\n\t\t\t\t\t\tcal = customAttribute.value.length;\n\n\t\t\t\t\t\toffset = 0;\n\n\t\t\t\t\t\tif ( customAttribute.size === 1 ) {\n\n\t\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\n\n\t\t\t\t\t\t\t\tcustomAttribute.array[ ca ] = customAttribute.value[ ca ];\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else if ( customAttribute.size === 2 ) {\n\n\t\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\n\n\t\t\t\t\t\t\t\tvalue = customAttribute.value[ ca ];\n\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset ]   = value.x;\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1 ] = value.y;\n\n\t\t\t\t\t\t\t\toffset += 2;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else if ( customAttribute.size === 3 ) {\n\n\t\t\t\t\t\t\tif ( customAttribute.type === 'c' ) {\n\n\t\t\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\n\n\t\t\t\t\t\t\t\t\tvalue = customAttribute.value[ ca ];\n\n\t\t\t\t\t\t\t\t\tcustomAttribute.array[ offset ]   = value.r;\n\t\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1 ] = value.g;\n\t\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 2 ] = value.b;\n\n\t\t\t\t\t\t\t\t\toffset += 3;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\n\n\t\t\t\t\t\t\t\t\tvalue = customAttribute.value[ ca ];\n\n\t\t\t\t\t\t\t\t\tcustomAttribute.array[ offset ]   = value.x;\n\t\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1 ] = value.y;\n\t\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 2 ] = value.z;\n\n\t\t\t\t\t\t\t\t\toffset += 3;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else if ( customAttribute.size === 4 ) {\n\n\t\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\n\n\t\t\t\t\t\t\t\tvalue = customAttribute.value[ ca ];\n\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset ]      = value.x;\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1  ] = value.y;\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 2  ] = value.z;\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 3  ] = value.w;\n\n\t\t\t\t\t\t\t\toffset += 4;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( dirtyVertices || object.sortParticles ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometry.__webglVertexBuffer );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, vertexArray, hint );\n\n\t\t}\n\n\t\tif ( dirtyColors || object.sortParticles ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometry.__webglColorBuffer );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, colorArray, hint );\n\n\t\t}\n\n\t\tif ( customAttributes ) {\n\n\t\t\tfor ( i = 0, il = customAttributes.length; i < il; i ++ ) {\n\n\t\t\t\tcustomAttribute = customAttributes[ i ];\n\n\t\t\t\tif ( customAttribute.needsUpdate || object.sortParticles ) {\n\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, customAttribute.buffer );\n\t\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, customAttribute.array, hint );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction setLineBuffers ( geometry, hint ) {\n\n\t\tvar v, c, d, vertex, offset, color,\n\n\t\tvertices = geometry.vertices,\n\t\tcolors = geometry.colors,\n\t\tlineDistances = geometry.lineDistances,\n\n\t\tvl = vertices.length,\n\t\tcl = colors.length,\n\t\tdl = lineDistances.length,\n\n\t\tvertexArray = geometry.__vertexArray,\n\t\tcolorArray = geometry.__colorArray,\n\t\tlineDistanceArray = geometry.__lineDistanceArray,\n\n\t\tdirtyVertices = geometry.verticesNeedUpdate,\n\t\tdirtyColors = geometry.colorsNeedUpdate,\n\t\tdirtyLineDistances = geometry.lineDistancesNeedUpdate,\n\n\t\tcustomAttributes = geometry.__webglCustomAttributesList,\n\n\t\ti, il,\n\t\ta, ca, cal, value,\n\t\tcustomAttribute;\n\n\t\tif ( dirtyVertices ) {\n\n\t\t\tfor ( v = 0; v < vl; v ++ ) {\n\n\t\t\t\tvertex = vertices[ v ];\n\n\t\t\t\toffset = v * 3;\n\n\t\t\t\tvertexArray[ offset ]     = vertex.x;\n\t\t\t\tvertexArray[ offset + 1 ] = vertex.y;\n\t\t\t\tvertexArray[ offset + 2 ] = vertex.z;\n\n\t\t\t}\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometry.__webglVertexBuffer );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, vertexArray, hint );\n\n\t\t}\n\n\t\tif ( dirtyColors ) {\n\n\t\t\tfor ( c = 0; c < cl; c ++ ) {\n\n\t\t\t\tcolor = colors[ c ];\n\n\t\t\t\toffset = c * 3;\n\n\t\t\t\tcolorArray[ offset ]     = color.r;\n\t\t\t\tcolorArray[ offset + 1 ] = color.g;\n\t\t\t\tcolorArray[ offset + 2 ] = color.b;\n\n\t\t\t}\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometry.__webglColorBuffer );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, colorArray, hint );\n\n\t\t}\n\n\t\tif ( dirtyLineDistances ) {\n\n\t\t\tfor ( d = 0; d < dl; d ++ ) {\n\n\t\t\t\tlineDistanceArray[ d ] = lineDistances[ d ];\n\n\t\t\t}\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometry.__webglLineDistanceBuffer );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, lineDistanceArray, hint );\n\n\t\t}\n\n\t\tif ( customAttributes ) {\n\n\t\t\tfor ( i = 0, il = customAttributes.length; i < il; i ++ ) {\n\n\t\t\t\tcustomAttribute = customAttributes[ i ];\n\n\t\t\t\tif ( customAttribute.needsUpdate &&\n\t\t\t\t\t ( customAttribute.boundTo === undefined ||\n\t\t\t\t\t\t customAttribute.boundTo === 'vertices' ) ) {\n\n\t\t\t\t\toffset = 0;\n\n\t\t\t\t\tcal = customAttribute.value.length;\n\n\t\t\t\t\tif ( customAttribute.size === 1 ) {\n\n\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\n\n\t\t\t\t\t\t\tcustomAttribute.array[ ca ] = customAttribute.value[ ca ];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( customAttribute.size === 2 ) {\n\n\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\n\n\t\t\t\t\t\t\tvalue = customAttribute.value[ ca ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset ]   = value.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1 ] = value.y;\n\n\t\t\t\t\t\t\toffset += 2;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( customAttribute.size === 3 ) {\n\n\t\t\t\t\t\tif ( customAttribute.type === 'c' ) {\n\n\t\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\n\n\t\t\t\t\t\t\t\tvalue = customAttribute.value[ ca ];\n\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset ]   = value.r;\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1 ] = value.g;\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 2 ] = value.b;\n\n\t\t\t\t\t\t\t\toffset += 3;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\n\n\t\t\t\t\t\t\t\tvalue = customAttribute.value[ ca ];\n\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset ]   = value.x;\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1 ] = value.y;\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 2 ] = value.z;\n\n\t\t\t\t\t\t\t\toffset += 3;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( customAttribute.size === 4 ) {\n\n\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\n\n\t\t\t\t\t\t\tvalue = customAttribute.value[ ca ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset ]    = value.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1  ] = value.y;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset + 2  ] = value.z;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset + 3  ] = value.w;\n\n\t\t\t\t\t\t\toffset += 4;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, customAttribute.buffer );\n\t\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, customAttribute.array, hint );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction setMeshBuffers( geometryGroup, object, hint, dispose, material ) {\n\n\t\tif ( ! geometryGroup.__inittedArrays ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar needsSmoothNormals = materialNeedsSmoothNormals( material );\n\n\t\tvar f, fl, fi, face,\n\t\tvertexNormals, faceNormal, normal,\n\t\tvertexColors, faceColor,\n\t\tvertexTangents,\n\t\tuv, uv2, v1, v2, v3, v4, t1, t2, t3, t4, n1, n2, n3, n4,\n\t\tc1, c2, c3,\n\t\tsw1, sw2, sw3, sw4,\n\t\tsi1, si2, si3, si4,\n\t\tsa1, sa2, sa3, sa4,\n\t\tsb1, sb2, sb3, sb4,\n\t\tm, ml, i, il,\n\t\tvn, uvi, uv2i,\n\t\tvk, vkl, vka,\n\t\tnka, chf, faceVertexNormals,\n\t\ta,\n\n\t\tvertexIndex = 0,\n\n\t\toffset = 0,\n\t\toffset_uv = 0,\n\t\toffset_uv2 = 0,\n\t\toffset_face = 0,\n\t\toffset_normal = 0,\n\t\toffset_tangent = 0,\n\t\toffset_line = 0,\n\t\toffset_color = 0,\n\t\toffset_skin = 0,\n\t\toffset_morphTarget = 0,\n\t\toffset_custom = 0,\n\t\toffset_customSrc = 0,\n\n\t\tvalue,\n\n\t\tvertexArray = geometryGroup.__vertexArray,\n\t\tuvArray = geometryGroup.__uvArray,\n\t\tuv2Array = geometryGroup.__uv2Array,\n\t\tnormalArray = geometryGroup.__normalArray,\n\t\ttangentArray = geometryGroup.__tangentArray,\n\t\tcolorArray = geometryGroup.__colorArray,\n\n\t\tskinIndexArray = geometryGroup.__skinIndexArray,\n\t\tskinWeightArray = geometryGroup.__skinWeightArray,\n\n\t\tmorphTargetsArrays = geometryGroup.__morphTargetsArrays,\n\t\tmorphNormalsArrays = geometryGroup.__morphNormalsArrays,\n\n\t\tcustomAttributes = geometryGroup.__webglCustomAttributesList,\n\t\tcustomAttribute,\n\n\t\tfaceArray = geometryGroup.__faceArray,\n\t\tlineArray = geometryGroup.__lineArray,\n\n\t\tgeometry = object.geometry, // this is shared for all chunks\n\n\t\tdirtyVertices = geometry.verticesNeedUpdate,\n\t\tdirtyElements = geometry.elementsNeedUpdate,\n\t\tdirtyUvs = geometry.uvsNeedUpdate,\n\t\tdirtyNormals = geometry.normalsNeedUpdate,\n\t\tdirtyTangents = geometry.tangentsNeedUpdate,\n\t\tdirtyColors = geometry.colorsNeedUpdate,\n\t\tdirtyMorphTargets = geometry.morphTargetsNeedUpdate,\n\n\t\tvertices = geometry.vertices,\n\t\tchunk_faces3 = geometryGroup.faces3,\n\t\tobj_faces = geometry.faces,\n\n\t\tobj_uvs  = geometry.faceVertexUvs[ 0 ],\n\t\tobj_uvs2 = geometry.faceVertexUvs[ 1 ],\n\n\t\tobj_colors = geometry.colors,\n\n\t\tobj_skinIndices = geometry.skinIndices,\n\t\tobj_skinWeights = geometry.skinWeights,\n\n\t\tmorphTargets = geometry.morphTargets,\n\t\tmorphNormals = geometry.morphNormals;\n\n\t\tif ( dirtyVertices ) {\n\n\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\n\n\t\t\t\tv1 = vertices[ face.a ];\n\t\t\t\tv2 = vertices[ face.b ];\n\t\t\t\tv3 = vertices[ face.c ];\n\n\t\t\t\tvertexArray[ offset ]     = v1.x;\n\t\t\t\tvertexArray[ offset + 1 ] = v1.y;\n\t\t\t\tvertexArray[ offset + 2 ] = v1.z;\n\n\t\t\t\tvertexArray[ offset + 3 ] = v2.x;\n\t\t\t\tvertexArray[ offset + 4 ] = v2.y;\n\t\t\t\tvertexArray[ offset + 5 ] = v2.z;\n\n\t\t\t\tvertexArray[ offset + 6 ] = v3.x;\n\t\t\t\tvertexArray[ offset + 7 ] = v3.y;\n\t\t\t\tvertexArray[ offset + 8 ] = v3.z;\n\n\t\t\t\toffset += 9;\n\n\t\t\t}\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglVertexBuffer );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, vertexArray, hint );\n\n\t\t}\n\n\t\tif ( dirtyMorphTargets ) {\n\n\t\t\tfor ( vk = 0, vkl = morphTargets.length; vk < vkl; vk ++ ) {\n\n\t\t\t\toffset_morphTarget = 0;\n\n\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\t\tchf = chunk_faces3[ f ];\n\t\t\t\t\tface = obj_faces[ chf ];\n\n\t\t\t\t\t// morph positions\n\n\t\t\t\t\tv1 = morphTargets[ vk ].vertices[ face.a ];\n\t\t\t\t\tv2 = morphTargets[ vk ].vertices[ face.b ];\n\t\t\t\t\tv3 = morphTargets[ vk ].vertices[ face.c ];\n\n\t\t\t\t\tvka = morphTargetsArrays[ vk ];\n\n\t\t\t\t\tvka[ offset_morphTarget ]     = v1.x;\n\t\t\t\t\tvka[ offset_morphTarget + 1 ] = v1.y;\n\t\t\t\t\tvka[ offset_morphTarget + 2 ] = v1.z;\n\n\t\t\t\t\tvka[ offset_morphTarget + 3 ] = v2.x;\n\t\t\t\t\tvka[ offset_morphTarget + 4 ] = v2.y;\n\t\t\t\t\tvka[ offset_morphTarget + 5 ] = v2.z;\n\n\t\t\t\t\tvka[ offset_morphTarget + 6 ] = v3.x;\n\t\t\t\t\tvka[ offset_morphTarget + 7 ] = v3.y;\n\t\t\t\t\tvka[ offset_morphTarget + 8 ] = v3.z;\n\n\t\t\t\t\t// morph normals\n\n\t\t\t\t\tif ( material.morphNormals ) {\n\n\t\t\t\t\t\tif ( needsSmoothNormals ) {\n\n\t\t\t\t\t\t\tfaceVertexNormals = morphNormals[ vk ].vertexNormals[ chf ];\n\n\t\t\t\t\t\t\tn1 = faceVertexNormals.a;\n\t\t\t\t\t\t\tn2 = faceVertexNormals.b;\n\t\t\t\t\t\t\tn3 = faceVertexNormals.c;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tn1 = morphNormals[ vk ].faceNormals[ chf ];\n\t\t\t\t\t\t\tn2 = n1;\n\t\t\t\t\t\t\tn3 = n1;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tnka = morphNormalsArrays[ vk ];\n\n\t\t\t\t\t\tnka[ offset_morphTarget ]     = n1.x;\n\t\t\t\t\t\tnka[ offset_morphTarget + 1 ] = n1.y;\n\t\t\t\t\t\tnka[ offset_morphTarget + 2 ] = n1.z;\n\n\t\t\t\t\t\tnka[ offset_morphTarget + 3 ] = n2.x;\n\t\t\t\t\t\tnka[ offset_morphTarget + 4 ] = n2.y;\n\t\t\t\t\t\tnka[ offset_morphTarget + 5 ] = n2.z;\n\n\t\t\t\t\t\tnka[ offset_morphTarget + 6 ] = n3.x;\n\t\t\t\t\t\tnka[ offset_morphTarget + 7 ] = n3.y;\n\t\t\t\t\t\tnka[ offset_morphTarget + 8 ] = n3.z;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t//\n\n\t\t\t\t\toffset_morphTarget += 9;\n\n\t\t\t\t}\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglMorphTargetsBuffers[ vk ] );\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, morphTargetsArrays[ vk ], hint );\n\n\t\t\t\tif ( material.morphNormals ) {\n\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglMorphNormalsBuffers[ vk ] );\n\t\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, morphNormalsArrays[ vk ], hint );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( obj_skinWeights.length ) {\n\n\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\n\n\t\t\t\t// weights\n\n\t\t\t\tsw1 = obj_skinWeights[ face.a ];\n\t\t\t\tsw2 = obj_skinWeights[ face.b ];\n\t\t\t\tsw3 = obj_skinWeights[ face.c ];\n\n\t\t\t\tskinWeightArray[ offset_skin ]     = sw1.x;\n\t\t\t\tskinWeightArray[ offset_skin + 1 ] = sw1.y;\n\t\t\t\tskinWeightArray[ offset_skin + 2 ] = sw1.z;\n\t\t\t\tskinWeightArray[ offset_skin + 3 ] = sw1.w;\n\n\t\t\t\tskinWeightArray[ offset_skin + 4 ] = sw2.x;\n\t\t\t\tskinWeightArray[ offset_skin + 5 ] = sw2.y;\n\t\t\t\tskinWeightArray[ offset_skin + 6 ] = sw2.z;\n\t\t\t\tskinWeightArray[ offset_skin + 7 ] = sw2.w;\n\n\t\t\t\tskinWeightArray[ offset_skin + 8 ]  = sw3.x;\n\t\t\t\tskinWeightArray[ offset_skin + 9 ]  = sw3.y;\n\t\t\t\tskinWeightArray[ offset_skin + 10 ] = sw3.z;\n\t\t\t\tskinWeightArray[ offset_skin + 11 ] = sw3.w;\n\n\t\t\t\t// indices\n\n\t\t\t\tsi1 = obj_skinIndices[ face.a ];\n\t\t\t\tsi2 = obj_skinIndices[ face.b ];\n\t\t\t\tsi3 = obj_skinIndices[ face.c ];\n\n\t\t\t\tskinIndexArray[ offset_skin ]     = si1.x;\n\t\t\t\tskinIndexArray[ offset_skin + 1 ] = si1.y;\n\t\t\t\tskinIndexArray[ offset_skin + 2 ] = si1.z;\n\t\t\t\tskinIndexArray[ offset_skin + 3 ] = si1.w;\n\n\t\t\t\tskinIndexArray[ offset_skin + 4 ] = si2.x;\n\t\t\t\tskinIndexArray[ offset_skin + 5 ] = si2.y;\n\t\t\t\tskinIndexArray[ offset_skin + 6 ] = si2.z;\n\t\t\t\tskinIndexArray[ offset_skin + 7 ] = si2.w;\n\n\t\t\t\tskinIndexArray[ offset_skin + 8 ]  = si3.x;\n\t\t\t\tskinIndexArray[ offset_skin + 9 ]  = si3.y;\n\t\t\t\tskinIndexArray[ offset_skin + 10 ] = si3.z;\n\t\t\t\tskinIndexArray[ offset_skin + 11 ] = si3.w;\n\n\t\t\t\toffset_skin += 12;\n\n\t\t\t}\n\n\t\t\tif ( offset_skin > 0 ) {\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglSkinIndicesBuffer );\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, skinIndexArray, hint );\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglSkinWeightsBuffer );\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, skinWeightArray, hint );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( dirtyColors ) {\n\n\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\n\n\t\t\t\tvertexColors = face.vertexColors;\n\t\t\t\tfaceColor = face.color;\n\n\t\t\t\tif ( vertexColors.length === 3 && material.vertexColors === THREE.VertexColors ) {\n\n\t\t\t\t\tc1 = vertexColors[ 0 ];\n\t\t\t\t\tc2 = vertexColors[ 1 ];\n\t\t\t\t\tc3 = vertexColors[ 2 ];\n\n\t\t\t\t} else {\n\n\t\t\t\t\tc1 = faceColor;\n\t\t\t\t\tc2 = faceColor;\n\t\t\t\t\tc3 = faceColor;\n\n\t\t\t\t}\n\n\t\t\t\tcolorArray[ offset_color ]     = c1.r;\n\t\t\t\tcolorArray[ offset_color + 1 ] = c1.g;\n\t\t\t\tcolorArray[ offset_color + 2 ] = c1.b;\n\n\t\t\t\tcolorArray[ offset_color + 3 ] = c2.r;\n\t\t\t\tcolorArray[ offset_color + 4 ] = c2.g;\n\t\t\t\tcolorArray[ offset_color + 5 ] = c2.b;\n\n\t\t\t\tcolorArray[ offset_color + 6 ] = c3.r;\n\t\t\t\tcolorArray[ offset_color + 7 ] = c3.g;\n\t\t\t\tcolorArray[ offset_color + 8 ] = c3.b;\n\n\t\t\t\toffset_color += 9;\n\n\t\t\t}\n\n\t\t\tif ( offset_color > 0 ) {\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglColorBuffer );\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, colorArray, hint );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( dirtyTangents && geometry.hasTangents ) {\n\n\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\n\n\t\t\t\tvertexTangents = face.vertexTangents;\n\n\t\t\t\tt1 = vertexTangents[ 0 ];\n\t\t\t\tt2 = vertexTangents[ 1 ];\n\t\t\t\tt3 = vertexTangents[ 2 ];\n\n\t\t\t\ttangentArray[ offset_tangent ]     = t1.x;\n\t\t\t\ttangentArray[ offset_tangent + 1 ] = t1.y;\n\t\t\t\ttangentArray[ offset_tangent + 2 ] = t1.z;\n\t\t\t\ttangentArray[ offset_tangent + 3 ] = t1.w;\n\n\t\t\t\ttangentArray[ offset_tangent + 4 ] = t2.x;\n\t\t\t\ttangentArray[ offset_tangent + 5 ] = t2.y;\n\t\t\t\ttangentArray[ offset_tangent + 6 ] = t2.z;\n\t\t\t\ttangentArray[ offset_tangent + 7 ] = t2.w;\n\n\t\t\t\ttangentArray[ offset_tangent + 8 ]  = t3.x;\n\t\t\t\ttangentArray[ offset_tangent + 9 ]  = t3.y;\n\t\t\t\ttangentArray[ offset_tangent + 10 ] = t3.z;\n\t\t\t\ttangentArray[ offset_tangent + 11 ] = t3.w;\n\n\t\t\t\toffset_tangent += 12;\n\n\t\t\t}\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglTangentBuffer );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, tangentArray, hint );\n\n\t\t}\n\n\t\tif ( dirtyNormals ) {\n\n\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\n\n\t\t\t\tvertexNormals = face.vertexNormals;\n\t\t\t\tfaceNormal = face.normal;\n\n\t\t\t\tif ( vertexNormals.length === 3 && needsSmoothNormals ) {\n\n\t\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\n\n\t\t\t\t\t\tvn = vertexNormals[ i ];\n\n\t\t\t\t\t\tnormalArray[ offset_normal ]     = vn.x;\n\t\t\t\t\t\tnormalArray[ offset_normal + 1 ] = vn.y;\n\t\t\t\t\t\tnormalArray[ offset_normal + 2 ] = vn.z;\n\n\t\t\t\t\t\toffset_normal += 3;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\n\n\t\t\t\t\t\tnormalArray[ offset_normal ]     = faceNormal.x;\n\t\t\t\t\t\tnormalArray[ offset_normal + 1 ] = faceNormal.y;\n\t\t\t\t\t\tnormalArray[ offset_normal + 2 ] = faceNormal.z;\n\n\t\t\t\t\t\toffset_normal += 3;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglNormalBuffer );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, normalArray, hint );\n\n\t\t}\n\n\t\tif ( dirtyUvs && obj_uvs ) {\n\n\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\tfi = chunk_faces3[ f ];\n\n\t\t\t\tuv = obj_uvs[ fi ];\n\n\t\t\t\tif ( uv === undefined ) continue;\n\n\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\n\n\t\t\t\t\tuvi = uv[ i ];\n\n\t\t\t\t\tuvArray[ offset_uv ]     = uvi.x;\n\t\t\t\t\tuvArray[ offset_uv + 1 ] = uvi.y;\n\n\t\t\t\t\toffset_uv += 2;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( offset_uv > 0 ) {\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglUVBuffer );\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, uvArray, hint );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( dirtyUvs && obj_uvs2 ) {\n\n\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\tfi = chunk_faces3[ f ];\n\n\t\t\t\tuv2 = obj_uvs2[ fi ];\n\n\t\t\t\tif ( uv2 === undefined ) continue;\n\n\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\n\n\t\t\t\t\tuv2i = uv2[ i ];\n\n\t\t\t\t\tuv2Array[ offset_uv2 ]     = uv2i.x;\n\t\t\t\t\tuv2Array[ offset_uv2 + 1 ] = uv2i.y;\n\n\t\t\t\t\toffset_uv2 += 2;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( offset_uv2 > 0 ) {\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglUV2Buffer );\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, uv2Array, hint );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( dirtyElements ) {\n\n\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\tfaceArray[ offset_face ]   = vertexIndex;\n\t\t\t\tfaceArray[ offset_face + 1 ] = vertexIndex + 1;\n\t\t\t\tfaceArray[ offset_face + 2 ] = vertexIndex + 2;\n\n\t\t\t\toffset_face += 3;\n\n\t\t\t\tlineArray[ offset_line ]     = vertexIndex;\n\t\t\t\tlineArray[ offset_line + 1 ] = vertexIndex + 1;\n\n\t\t\t\tlineArray[ offset_line + 2 ] = vertexIndex;\n\t\t\t\tlineArray[ offset_line + 3 ] = vertexIndex + 2;\n\n\t\t\t\tlineArray[ offset_line + 4 ] = vertexIndex + 1;\n\t\t\t\tlineArray[ offset_line + 5 ] = vertexIndex + 2;\n\n\t\t\t\toffset_line += 6;\n\n\t\t\t\tvertexIndex += 3;\n\n\t\t\t}\n\n\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, geometryGroup.__webglFaceBuffer );\n\t\t\t_gl.bufferData( _gl.ELEMENT_ARRAY_BUFFER, faceArray, hint );\n\n\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, geometryGroup.__webglLineBuffer );\n\t\t\t_gl.bufferData( _gl.ELEMENT_ARRAY_BUFFER, lineArray, hint );\n\n\t\t}\n\n\t\tif ( customAttributes ) {\n\n\t\t\tfor ( i = 0, il = customAttributes.length; i < il; i ++ ) {\n\n\t\t\t\tcustomAttribute = customAttributes[ i ];\n\n\t\t\t\tif ( ! customAttribute.__original.needsUpdate ) continue;\n\n\t\t\t\toffset_custom = 0;\n\t\t\t\toffset_customSrc = 0;\n\n\t\t\t\tif ( customAttribute.size === 1 ) {\n\n\t\t\t\t\tif ( customAttribute.boundTo === undefined || customAttribute.boundTo === 'vertices' ) {\n\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom ]     = customAttribute.value[ face.a ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1 ] = customAttribute.value[ face.b ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2 ] = customAttribute.value[ face.c ];\n\n\t\t\t\t\t\t\toffset_custom += 3;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( customAttribute.boundTo === 'faces' ) {\n\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\t\t\t\tvalue = customAttribute.value[ chunk_faces3[ f ] ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom ]     = value;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1 ] = value;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2 ] = value;\n\n\t\t\t\t\t\t\toffset_custom += 3;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( customAttribute.size === 2 ) {\n\n\t\t\t\t\tif ( customAttribute.boundTo === undefined || customAttribute.boundTo === 'vertices' ) {\n\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\n\n\t\t\t\t\t\t\tv1 = customAttribute.value[ face.a ];\n\t\t\t\t\t\t\tv2 = customAttribute.value[ face.b ];\n\t\t\t\t\t\t\tv3 = customAttribute.value[ face.c ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom ]     = v1.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1 ] = v1.y;\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2 ] = v2.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 3 ] = v2.y;\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 4 ] = v3.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 5 ] = v3.y;\n\n\t\t\t\t\t\t\toffset_custom += 6;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( customAttribute.boundTo === 'faces' ) {\n\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\t\t\t\tvalue = customAttribute.value[ chunk_faces3[ f ] ];\n\n\t\t\t\t\t\t\tv1 = value;\n\t\t\t\t\t\t\tv2 = value;\n\t\t\t\t\t\t\tv3 = value;\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom ]     = v1.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1 ] = v1.y;\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2 ] = v2.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 3 ] = v2.y;\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 4 ] = v3.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 5 ] = v3.y;\n\n\t\t\t\t\t\t\toffset_custom += 6;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( customAttribute.size === 3 ) {\n\n\t\t\t\t\tvar pp;\n\n\t\t\t\t\tif ( customAttribute.type === 'c' ) {\n\n\t\t\t\t\t\tpp = [ 'r', 'g', 'b' ];\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tpp = [ 'x', 'y', 'z' ];\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( customAttribute.boundTo === undefined || customAttribute.boundTo === 'vertices' ) {\n\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\n\n\t\t\t\t\t\t\tv1 = customAttribute.value[ face.a ];\n\t\t\t\t\t\t\tv2 = customAttribute.value[ face.b ];\n\t\t\t\t\t\t\tv3 = customAttribute.value[ face.c ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom ]     = v1[ pp[ 0 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1 ] = v1[ pp[ 1 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2 ] = v1[ pp[ 2 ] ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 3 ] = v2[ pp[ 0 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 4 ] = v2[ pp[ 1 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 5 ] = v2[ pp[ 2 ] ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 6 ] = v3[ pp[ 0 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 7 ] = v3[ pp[ 1 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 8 ] = v3[ pp[ 2 ] ];\n\n\t\t\t\t\t\t\toffset_custom += 9;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( customAttribute.boundTo === 'faces' ) {\n\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\t\t\t\tvalue = customAttribute.value[ chunk_faces3[ f ] ];\n\n\t\t\t\t\t\t\tv1 = value;\n\t\t\t\t\t\t\tv2 = value;\n\t\t\t\t\t\t\tv3 = value;\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom ]     = v1[ pp[ 0 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1 ] = v1[ pp[ 1 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2 ] = v1[ pp[ 2 ] ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 3 ] = v2[ pp[ 0 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 4 ] = v2[ pp[ 1 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 5 ] = v2[ pp[ 2 ] ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 6 ] = v3[ pp[ 0 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 7 ] = v3[ pp[ 1 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 8 ] = v3[ pp[ 2 ] ];\n\n\t\t\t\t\t\t\toffset_custom += 9;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( customAttribute.boundTo === 'faceVertices' ) {\n\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\t\t\t\tvalue = customAttribute.value[ chunk_faces3[ f ] ];\n\n\t\t\t\t\t\t\tv1 = value[ 0 ];\n\t\t\t\t\t\t\tv2 = value[ 1 ];\n\t\t\t\t\t\t\tv3 = value[ 2 ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom ]     = v1[ pp[ 0 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1 ] = v1[ pp[ 1 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2 ] = v1[ pp[ 2 ] ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 3 ] = v2[ pp[ 0 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 4 ] = v2[ pp[ 1 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 5 ] = v2[ pp[ 2 ] ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 6 ] = v3[ pp[ 0 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 7 ] = v3[ pp[ 1 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 8 ] = v3[ pp[ 2 ] ];\n\n\t\t\t\t\t\t\toffset_custom += 9;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( customAttribute.size === 4 ) {\n\n\t\t\t\t\tif ( customAttribute.boundTo === undefined || customAttribute.boundTo === 'vertices' ) {\n\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\n\n\t\t\t\t\t\t\tv1 = customAttribute.value[ face.a ];\n\t\t\t\t\t\t\tv2 = customAttribute.value[ face.b ];\n\t\t\t\t\t\t\tv3 = customAttribute.value[ face.c ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom  ]   = v1.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1  ] = v1.y;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2  ] = v1.z;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 3  ] = v1.w;\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 4  ] = v2.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 5  ] = v2.y;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 6  ] = v2.z;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 7  ] = v2.w;\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 8  ] = v3.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 9  ] = v3.y;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 10 ] = v3.z;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 11 ] = v3.w;\n\n\t\t\t\t\t\t\toffset_custom += 12;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( customAttribute.boundTo === 'faces' ) {\n\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\t\t\t\tvalue = customAttribute.value[ chunk_faces3[ f ] ];\n\n\t\t\t\t\t\t\tv1 = value;\n\t\t\t\t\t\t\tv2 = value;\n\t\t\t\t\t\t\tv3 = value;\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom  ]   = v1.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1  ] = v1.y;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2  ] = v1.z;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 3  ] = v1.w;\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 4  ] = v2.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 5  ] = v2.y;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 6  ] = v2.z;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 7  ] = v2.w;\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 8  ] = v3.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 9  ] = v3.y;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 10 ] = v3.z;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 11 ] = v3.w;\n\n\t\t\t\t\t\t\toffset_custom += 12;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( customAttribute.boundTo === 'faceVertices' ) {\n\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\t\t\t\tvalue = customAttribute.value[ chunk_faces3[ f ] ];\n\n\t\t\t\t\t\t\tv1 = value[ 0 ];\n\t\t\t\t\t\t\tv2 = value[ 1 ];\n\t\t\t\t\t\t\tv3 = value[ 2 ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom  ]   = v1.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1  ] = v1.y;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2  ] = v1.z;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 3  ] = v1.w;\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 4  ] = v2.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 5  ] = v2.y;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 6  ] = v2.z;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 7  ] = v2.w;\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 8  ] = v3.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 9  ] = v3.y;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 10 ] = v3.z;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 11 ] = v3.w;\n\n\t\t\t\t\t\t\toffset_custom += 12;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, customAttribute.buffer );\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, customAttribute.array, hint );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( dispose ) {\n\n\t\t\tdelete geometryGroup.__inittedArrays;\n\t\t\tdelete geometryGroup.__colorArray;\n\t\t\tdelete geometryGroup.__normalArray;\n\t\t\tdelete geometryGroup.__tangentArray;\n\t\t\tdelete geometryGroup.__uvArray;\n\t\t\tdelete geometryGroup.__uv2Array;\n\t\t\tdelete geometryGroup.__faceArray;\n\t\t\tdelete geometryGroup.__vertexArray;\n\t\t\tdelete geometryGroup.__lineArray;\n\t\t\tdelete geometryGroup.__skinIndexArray;\n\t\t\tdelete geometryGroup.__skinWeightArray;\n\n\t\t}\n\n\t};\n\n\tfunction setDirectBuffers( geometry ) {\n\n\t\tvar attributes = geometry.attributes;\n\t\tvar attributesKeys = geometry.attributesKeys;\n\n\t\tfor ( var i = 0, l = attributesKeys.length; i < l; i ++ ) {\n\n\t\t\tvar key = attributesKeys[ i ];\n\t\t\tvar attribute = attributes[ key ];\n\n\t\t\tif ( attribute.buffer === undefined ) {\n\n\t\t\t\tattribute.buffer = _gl.createBuffer();\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tif ( attribute.needsUpdate === true ) {\n\n\t\t\t\tvar bufferType = ( key === 'index' ) ? _gl.ELEMENT_ARRAY_BUFFER : _gl.ARRAY_BUFFER;\n\n\t\t\t\t_gl.bindBuffer( bufferType, attribute.buffer );\n\t\t\t\t_gl.bufferData( bufferType, attribute.array, _gl.STATIC_DRAW );\n\n\t\t\t\tattribute.needsUpdate = false;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// Buffer rendering\n\n\tthis.renderBufferImmediate = function ( object, program, material ) {\n\n\t\tinitAttributes();\n\n\t\tif ( object.hasPositions && ! object.__webglVertexBuffer ) object.__webglVertexBuffer = _gl.createBuffer();\n\t\tif ( object.hasNormals && ! object.__webglNormalBuffer ) object.__webglNormalBuffer = _gl.createBuffer();\n\t\tif ( object.hasUvs && ! object.__webglUvBuffer ) object.__webglUvBuffer = _gl.createBuffer();\n\t\tif ( object.hasColors && ! object.__webglColorBuffer ) object.__webglColorBuffer = _gl.createBuffer();\n\n\t\tif ( object.hasPositions ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, object.__webglVertexBuffer );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.positionArray, _gl.DYNAMIC_DRAW );\n\t\t\tenableAttribute( program.attributes.position );\n\t\t\t_gl.vertexAttribPointer( program.attributes.position, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasNormals ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, object.__webglNormalBuffer );\n\n\t\t\tif ( material.shading === THREE.FlatShading ) {\n\n\t\t\t\tvar nx, ny, nz,\n\t\t\t\t\tnax, nbx, ncx, nay, nby, ncy, naz, nbz, ncz,\n\t\t\t\t\tnormalArray,\n\t\t\t\t\ti, il = object.count * 3;\n\n\t\t\t\tfor ( i = 0; i < il; i += 9 ) {\n\n\t\t\t\t\tnormalArray = object.normalArray;\n\n\t\t\t\t\tnax  = normalArray[ i ];\n\t\t\t\t\tnay  = normalArray[ i + 1 ];\n\t\t\t\t\tnaz  = normalArray[ i + 2 ];\n\n\t\t\t\t\tnbx  = normalArray[ i + 3 ];\n\t\t\t\t\tnby  = normalArray[ i + 4 ];\n\t\t\t\t\tnbz  = normalArray[ i + 5 ];\n\n\t\t\t\t\tncx  = normalArray[ i + 6 ];\n\t\t\t\t\tncy  = normalArray[ i + 7 ];\n\t\t\t\t\tncz  = normalArray[ i + 8 ];\n\n\t\t\t\t\tnx = ( nax + nbx + ncx ) / 3;\n\t\t\t\t\tny = ( nay + nby + ncy ) / 3;\n\t\t\t\t\tnz = ( naz + nbz + ncz ) / 3;\n\n\t\t\t\t\tnormalArray[ i ]   = nx;\n\t\t\t\t\tnormalArray[ i + 1 ] = ny;\n\t\t\t\t\tnormalArray[ i + 2 ] = nz;\n\n\t\t\t\t\tnormalArray[ i + 3 ] = nx;\n\t\t\t\t\tnormalArray[ i + 4 ] = ny;\n\t\t\t\t\tnormalArray[ i + 5 ] = nz;\n\n\t\t\t\t\tnormalArray[ i + 6 ] = nx;\n\t\t\t\t\tnormalArray[ i + 7 ] = ny;\n\t\t\t\t\tnormalArray[ i + 8 ] = nz;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.normalArray, _gl.DYNAMIC_DRAW );\n\t\t\tenableAttribute( program.attributes.normal );\n\t\t\t_gl.vertexAttribPointer( program.attributes.normal, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasUvs && material.map ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, object.__webglUvBuffer );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.uvArray, _gl.DYNAMIC_DRAW );\n\t\t\tenableAttribute( program.attributes.uv );\n\t\t\t_gl.vertexAttribPointer( program.attributes.uv, 2, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasColors && material.vertexColors !== THREE.NoColors ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, object.__webglColorBuffer );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.colorArray, _gl.DYNAMIC_DRAW );\n\t\t\tenableAttribute( program.attributes.color );\n\t\t\t_gl.vertexAttribPointer( program.attributes.color, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tdisableUnusedAttributes();\n\n\t\t_gl.drawArrays( _gl.TRIANGLES, 0, object.count );\n\n\t\tobject.count = 0;\n\n\t};\n\n\tfunction setupVertexAttributes( material, program, geometry, startIndex ) {\n\n\t\tvar geometryAttributes = geometry.attributes;\n\n\t\tvar programAttributes = program.attributes;\n\t\tvar programAttributesKeys = program.attributesKeys;\n\n\t\tfor ( var i = 0, l = programAttributesKeys.length; i < l; i ++ ) {\n\n\t\t\tvar key = programAttributesKeys[ i ];\n\t\t\tvar programAttribute = programAttributes[ key ];\n\n\t\t\tif ( programAttribute >= 0 ) {\n\n\t\t\t\tvar geometryAttribute = geometryAttributes[ key ];\n\n\t\t\t\tif ( geometryAttribute !== undefined ) {\n\n\t\t\t\t\tvar size = geometryAttribute.itemSize;\n\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryAttribute.buffer );\n\n\t\t\t\t\tenableAttribute( programAttribute );\n\n\t\t\t\t\t_gl.vertexAttribPointer( programAttribute, size, _gl.FLOAT, false, 0, startIndex * size * 4 ); // 4 bytes per Float32\n\n\t\t\t\t} else if ( material.defaultAttributeValues !== undefined ) {\n\n\t\t\t\t\tif ( material.defaultAttributeValues[ key ].length === 2 ) {\n\n\t\t\t\t\t\t_gl.vertexAttrib2fv( programAttribute, material.defaultAttributeValues[ key ] );\n\n\t\t\t\t\t} else if ( material.defaultAttributeValues[ key ].length === 3 ) {\n\n\t\t\t\t\t\t_gl.vertexAttrib3fv( programAttribute, material.defaultAttributeValues[ key ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tdisableUnusedAttributes();\n\n\t}\n\n\tthis.renderBufferDirect = function ( camera, lights, fog, material, geometry, object ) {\n\n\t\tif ( material.visible === false ) return;\n\n\t\tvar program = setProgram( camera, lights, fog, material, object );\n\n\t\tvar updateBuffers = false,\n\t\t\twireframeBit = material.wireframe ? 1 : 0,\n\t\t\tgeometryHash = ( geometry.id * 0xffffff ) + ( program.id * 2 ) + wireframeBit;\n\n\t\tif ( geometryHash !== _currentGeometryGroupHash ) {\n\n\t\t\t_currentGeometryGroupHash = geometryHash;\n\t\t\tupdateBuffers = true;\n\n\t\t}\n\n\t\tif ( updateBuffers ) {\n\n\t\t\tinitAttributes();\n\n\t\t}\n\n\t\t// render mesh\n\n\t\tif ( object instanceof THREE.Mesh ) {\n\n\t\t\tvar mode = material.wireframe === true ? _gl.LINES : _gl.TRIANGLES;\n\n\t\t\tvar index = geometry.attributes.index;\n\n\t\t\tif ( index ) {\n\n\t\t\t\t// indexed triangles\n\n\t\t\t\tvar type, size;\n\n\t\t\t\tif ( index.array instanceof Uint32Array && extensions.get( 'OES_element_index_uint' ) ) {\n\n\t\t\t\t\ttype = _gl.UNSIGNED_INT;\n\t\t\t\t\tsize = 4;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttype = _gl.UNSIGNED_SHORT;\n\t\t\t\t\tsize = 2;\n\n\t\t\t\t}\n\n\t\t\t\tvar offsets = geometry.offsets;\n\n\t\t\t\tif ( offsets.length === 0 ) {\n\n\t\t\t\t\tif ( updateBuffers ) {\n\n\t\t\t\t\t\tsetupVertexAttributes( material, program, geometry, 0 );\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, index.buffer );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_gl.drawElements( mode, index.array.length, type, 0 );\n\n\t\t\t\t\t_this.info.render.calls ++;\n\t\t\t\t\t_this.info.render.vertices += index.array.length; // not really true, here vertices can be shared\n\t\t\t\t\t_this.info.render.faces += index.array.length / 3;\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// if there is more than 1 chunk\n\t\t\t\t\t// must set attribute pointers to use new offsets for each chunk\n\t\t\t\t\t// even if geometry and materials didn't change\n\n\t\t\t\t\tupdateBuffers = true;\n\n\t\t\t\t\tfor ( var i = 0, il = offsets.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tvar startIndex = offsets[ i ].index;\n\n\t\t\t\t\t\tif ( updateBuffers ) {\n\n\t\t\t\t\t\t\tsetupVertexAttributes( material, program, geometry, startIndex );\n\t\t\t\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, index.buffer );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// render indexed triangles\n\n\t\t\t\t\t\t_gl.drawElements( mode, offsets[ i ].count, type, offsets[ i ].start * size );\n\n\t\t\t\t\t\t_this.info.render.calls ++;\n\t\t\t\t\t\t_this.info.render.vertices += offsets[ i ].count; // not really true, here vertices can be shared\n\t\t\t\t\t\t_this.info.render.faces += offsets[ i ].count / 3;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// non-indexed triangles\n\n\t\t\t\tif ( updateBuffers ) {\n\n\t\t\t\t\tsetupVertexAttributes( material, program, geometry, 0 );\n\n\t\t\t\t}\n\n\t\t\t\tvar position = geometry.attributes[ 'position' ];\n\n\t\t\t\t// render non-indexed triangles\n\n\t\t\t\t_gl.drawArrays( mode, 0, position.array.length / 3 );\n\n\t\t\t\t_this.info.render.calls ++;\n\t\t\t\t_this.info.render.vertices += position.array.length / 3;\n\t\t\t\t_this.info.render.faces += position.array.length / 9;\n\n\t\t\t}\n\n\t\t} else if ( object instanceof THREE.PointCloud ) {\n\n\t\t\t// render particles\n\n\t\t\tif ( updateBuffers ) {\n\n\t\t\t\tsetupVertexAttributes( material, program, geometry, 0 );\n\n\t\t\t}\n\n\t\t\tvar position = geometry.attributes.position;\n\n\t\t\t// render particles\n\n\t\t\t_gl.drawArrays( _gl.POINTS, 0, position.array.length / 3 );\n\n\t\t\t_this.info.render.calls ++;\n\t\t\t_this.info.render.points += position.array.length / 3;\n\n\t\t} else if ( object instanceof THREE.Line ) {\n\n\t\t\tvar mode = ( object.mode === THREE.LineStrip ) ? _gl.LINE_STRIP : _gl.LINES;\n\n\t\t\tsetLineWidth( material.linewidth );\n\n\t\t\tvar index = geometry.attributes.index;\n\n\t\t\tif ( index ) {\n\n\t\t\t\t// indexed lines\n\n\t\t\t\tvar type, size;\n\n\t\t\t\tif ( index.array instanceof Uint32Array ) {\n\n\t\t\t\t\ttype = _gl.UNSIGNED_INT;\n\t\t\t\t\tsize = 4;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttype = _gl.UNSIGNED_SHORT;\n\t\t\t\t\tsize = 2;\n\n\t\t\t\t}\n\n\t\t\t\tvar offsets = geometry.offsets;\n\n\t\t\t\tif ( offsets.length === 0 ) {\n\n\t\t\t\t\tif ( updateBuffers ) {\n\n\t\t\t\t\t\tsetupVertexAttributes( material, program, geometry, 0 );\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, index.buffer );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_gl.drawElements( mode, index.array.length, type, 0 ); // 2 bytes per Uint16Array\n\n\t\t\t\t\t_this.info.render.calls ++;\n\t\t\t\t\t_this.info.render.vertices += index.array.length; // not really true, here vertices can be shared\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// if there is more than 1 chunk\n\t\t\t\t\t// must set attribute pointers to use new offsets for each chunk\n\t\t\t\t\t// even if geometry and materials didn't change\n\n\t\t\t\t\tif ( offsets.length > 1 ) updateBuffers = true;\n\n\t\t\t\t\tfor ( var i = 0, il = offsets.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tvar startIndex = offsets[ i ].index;\n\n\t\t\t\t\t\tif ( updateBuffers ) {\n\n\t\t\t\t\t\t\tsetupVertexAttributes( material, program, geometry, startIndex );\n\t\t\t\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, index.buffer );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// render indexed lines\n\n\t\t\t\t\t\t_gl.drawElements( mode, offsets[ i ].count, type, offsets[ i ].start * size ); // 2 bytes per Uint16Array\n\n\t\t\t\t\t\t_this.info.render.calls ++;\n\t\t\t\t\t\t_this.info.render.vertices += offsets[ i ].count; // not really true, here vertices can be shared\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// non-indexed lines\n\n\t\t\t\tif ( updateBuffers ) {\n\n\t\t\t\t\tsetupVertexAttributes( material, program, geometry, 0 );\n\n\t\t\t\t}\n\n\t\t\t\tvar position = geometry.attributes.position;\n\n\t\t\t\t_gl.drawArrays( mode, 0, position.array.length / 3 );\n\n\t\t\t\t_this.info.render.calls ++;\n\t\t\t\t_this.info.render.points += position.array.length / 3;\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.renderBuffer = function ( camera, lights, fog, material, geometryGroup, object ) {\n\n\t\tif ( material.visible === false ) return;\n\n\t\tvar program = setProgram( camera, lights, fog, material, object );\n\n\t\tvar attributes = program.attributes;\n\n\t\tvar updateBuffers = false,\n\t\t\twireframeBit = material.wireframe ? 1 : 0,\n\t\t\tgeometryGroupHash = ( geometryGroup.id * 0xffffff ) + ( program.id * 2 ) + wireframeBit;\n\n\t\tif ( geometryGroupHash !== _currentGeometryGroupHash ) {\n\n\t\t\t_currentGeometryGroupHash = geometryGroupHash;\n\t\t\tupdateBuffers = true;\n\n\t\t}\n\n\t\tif ( updateBuffers ) {\n\n\t\t\tinitAttributes();\n\n\t\t}\n\n\t\t// vertices\n\n\t\tif ( ! material.morphTargets && attributes.position >= 0 ) {\n\n\t\t\tif ( updateBuffers ) {\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglVertexBuffer );\n\t\t\t\tenableAttribute( attributes.position );\n\t\t\t\t_gl.vertexAttribPointer( attributes.position, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( object.morphTargetBase ) {\n\n\t\t\t\tsetupMorphTargets( material, geometryGroup, object );\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tif ( updateBuffers ) {\n\n\t\t\t// custom attributes\n\n\t\t\t// Use the per-geometryGroup custom attribute arrays which are setup in initMeshBuffers\n\n\t\t\tif ( geometryGroup.__webglCustomAttributesList ) {\n\n\t\t\t\tfor ( var i = 0, il = geometryGroup.__webglCustomAttributesList.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar attribute = geometryGroup.__webglCustomAttributesList[ i ];\n\n\t\t\t\t\tif ( attributes[ attribute.buffer.belongsToAttribute ] >= 0 ) {\n\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, attribute.buffer );\n\t\t\t\t\t\tenableAttribute( attributes[ attribute.buffer.belongsToAttribute ] );\n\t\t\t\t\t\t_gl.vertexAttribPointer( attributes[ attribute.buffer.belongsToAttribute ], attribute.size, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\t// colors\n\n\t\t\tif ( attributes.color >= 0 ) {\n\n\t\t\t\tif ( object.geometry.colors.length > 0 || object.geometry.faces.length > 0 ) {\n\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglColorBuffer );\n\t\t\t\t\tenableAttribute( attributes.color );\n\t\t\t\t\t_gl.vertexAttribPointer( attributes.color, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t\t} else if ( material.defaultAttributeValues !== undefined ) {\n\n\n\t\t\t\t\t_gl.vertexAttrib3fv( attributes.color, material.defaultAttributeValues.color );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// normals\n\n\t\t\tif ( attributes.normal >= 0 ) {\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglNormalBuffer );\n\t\t\t\tenableAttribute( attributes.normal );\n\t\t\t\t_gl.vertexAttribPointer( attributes.normal, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t}\n\n\t\t\t// tangents\n\n\t\t\tif ( attributes.tangent >= 0 ) {\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglTangentBuffer );\n\t\t\t\tenableAttribute( attributes.tangent );\n\t\t\t\t_gl.vertexAttribPointer( attributes.tangent, 4, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t}\n\n\t\t\t// uvs\n\n\t\t\tif ( attributes.uv >= 0 ) {\n\n\t\t\t\tif ( object.geometry.faceVertexUvs[ 0 ] ) {\n\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglUVBuffer );\n\t\t\t\t\tenableAttribute( attributes.uv );\n\t\t\t\t\t_gl.vertexAttribPointer( attributes.uv, 2, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t\t} else if ( material.defaultAttributeValues !== undefined ) {\n\n\n\t\t\t\t\t_gl.vertexAttrib2fv( attributes.uv, material.defaultAttributeValues.uv );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( attributes.uv2 >= 0 ) {\n\n\t\t\t\tif ( object.geometry.faceVertexUvs[ 1 ] ) {\n\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglUV2Buffer );\n\t\t\t\t\tenableAttribute( attributes.uv2 );\n\t\t\t\t\t_gl.vertexAttribPointer( attributes.uv2, 2, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t\t} else if ( material.defaultAttributeValues !== undefined ) {\n\n\n\t\t\t\t\t_gl.vertexAttrib2fv( attributes.uv2, material.defaultAttributeValues.uv2 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( material.skinning &&\n\t\t\t\t attributes.skinIndex >= 0 && attributes.skinWeight >= 0 ) {\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglSkinIndicesBuffer );\n\t\t\t\tenableAttribute( attributes.skinIndex );\n\t\t\t\t_gl.vertexAttribPointer( attributes.skinIndex, 4, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglSkinWeightsBuffer );\n\t\t\t\tenableAttribute( attributes.skinWeight );\n\t\t\t\t_gl.vertexAttribPointer( attributes.skinWeight, 4, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t}\n\n\t\t\t// line distances\n\n\t\t\tif ( attributes.lineDistance >= 0 ) {\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglLineDistanceBuffer );\n\t\t\t\tenableAttribute( attributes.lineDistance );\n\t\t\t\t_gl.vertexAttribPointer( attributes.lineDistance, 1, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tdisableUnusedAttributes();\n\n\t\t// render mesh\n\n\t\tif ( object instanceof THREE.Mesh ) {\n\n\t\t\tvar type = geometryGroup.__typeArray === Uint32Array ? _gl.UNSIGNED_INT : _gl.UNSIGNED_SHORT;\n\n\t\t\t// wireframe\n\n\t\t\tif ( material.wireframe ) {\n\n\t\t\t\tsetLineWidth( material.wireframeLinewidth );\n\t\t\t\tif ( updateBuffers ) _gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, geometryGroup.__webglLineBuffer );\n\t\t\t\t_gl.drawElements( _gl.LINES, geometryGroup.__webglLineCount, type, 0 );\n\n\t\t\t// triangles\n\n\t\t\t} else {\n\n\t\t\t\tif ( updateBuffers ) _gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, geometryGroup.__webglFaceBuffer );\n\t\t\t\t_gl.drawElements( _gl.TRIANGLES, geometryGroup.__webglFaceCount, type, 0 );\n\n\t\t\t}\n\n\t\t\t_this.info.render.calls ++;\n\t\t\t_this.info.render.vertices += geometryGroup.__webglFaceCount;\n\t\t\t_this.info.render.faces += geometryGroup.__webglFaceCount / 3;\n\n\t\t// render lines\n\n\t\t} else if ( object instanceof THREE.Line ) {\n\n\t\t\tvar mode = ( object.mode === THREE.LineStrip ) ? _gl.LINE_STRIP : _gl.LINES;\n\n\t\t\tsetLineWidth( material.linewidth );\n\n\t\t\t_gl.drawArrays( mode, 0, geometryGroup.__webglLineCount );\n\n\t\t\t_this.info.render.calls ++;\n\n\t\t// render particles\n\n\t\t} else if ( object instanceof THREE.PointCloud ) {\n\n\t\t\t_gl.drawArrays( _gl.POINTS, 0, geometryGroup.__webglParticleCount );\n\n\t\t\t_this.info.render.calls ++;\n\t\t\t_this.info.render.points += geometryGroup.__webglParticleCount;\n\n\t\t}\n\n\t};\n\n\tfunction initAttributes() {\n\n\t\tfor ( var i = 0, l = _newAttributes.length; i < l; i ++ ) {\n\n\t\t\t_newAttributes[ i ] = 0;\n\n\t\t}\n\n\t}\n\n\tfunction enableAttribute( attribute ) {\n\n\t\t_newAttributes[ attribute ] = 1;\n\n\t\tif ( _enabledAttributes[ attribute ] === 0 ) {\n\n\t\t\t_gl.enableVertexAttribArray( attribute );\n\t\t\t_enabledAttributes[ attribute ] = 1;\n\n\t\t}\n\n\t}\n\n\tfunction disableUnusedAttributes() {\n\n\t\tfor ( var i = 0, l = _enabledAttributes.length; i < l; i ++ ) {\n\n\t\t\tif ( _enabledAttributes[ i ] !== _newAttributes[ i ] ) {\n\n\t\t\t\t_gl.disableVertexAttribArray( i );\n\t\t\t\t_enabledAttributes[ i ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction setupMorphTargets ( material, geometryGroup, object ) {\n\n\t\t// set base\n\n\t\tvar attributes = material.program.attributes;\n\n\t\tif ( object.morphTargetBase !== - 1 && attributes.position >= 0 ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglMorphTargetsBuffers[ object.morphTargetBase ] );\n\t\t\tenableAttribute( attributes.position );\n\t\t\t_gl.vertexAttribPointer( attributes.position, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t} else if ( attributes.position >= 0 ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglVertexBuffer );\n\t\t\tenableAttribute( attributes.position );\n\t\t\t_gl.vertexAttribPointer( attributes.position, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.morphTargetForcedOrder.length ) {\n\n\t\t\t// set forced order\n\n\t\t\tvar m = 0;\n\t\t\tvar order = object.morphTargetForcedOrder;\n\t\t\tvar influences = object.morphTargetInfluences;\n\n\t\t\twhile ( m < material.numSupportedMorphTargets && m < order.length ) {\n\n\t\t\t\tif ( attributes[ 'morphTarget' + m ] >= 0 ) {\n\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglMorphTargetsBuffers[ order[ m ] ] );\n\t\t\t\t\tenableAttribute( attributes[ 'morphTarget' + m ] );\n\t\t\t\t\t_gl.vertexAttribPointer( attributes[ 'morphTarget' + m ], 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t\t}\n\n\t\t\t\tif ( attributes[ 'morphNormal' + m ] >= 0 && material.morphNormals ) {\n\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglMorphNormalsBuffers[ order[ m ] ] );\n\t\t\t\t\tenableAttribute( attributes[ 'morphNormal' + m ] );\n\t\t\t\t\t_gl.vertexAttribPointer( attributes[ 'morphNormal' + m ], 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t\t}\n\n\t\t\t\tobject.__webglMorphTargetInfluences[ m ] = influences[ order[ m ] ];\n\n\t\t\t\tm ++;\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// find the most influencing\n\n\t\t\tvar influence, activeInfluenceIndices = [];\n\t\t\tvar influences = object.morphTargetInfluences;\n\t\t\tvar i, il = influences.length;\n\n\t\t\tfor ( i = 0; i < il; i ++ ) {\n\n\t\t\t\tinfluence = influences[ i ];\n\n\t\t\t\tif ( influence > 0 ) {\n\n\t\t\t\t\tactiveInfluenceIndices.push( [ influence, i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( activeInfluenceIndices.length > material.numSupportedMorphTargets ) {\n\n\t\t\t\tactiveInfluenceIndices.sort( numericalSort );\n\t\t\t\tactiveInfluenceIndices.length = material.numSupportedMorphTargets;\n\n\t\t\t} else if ( activeInfluenceIndices.length > material.numSupportedMorphNormals ) {\n\n\t\t\t\tactiveInfluenceIndices.sort( numericalSort );\n\n\t\t\t} else if ( activeInfluenceIndices.length === 0 ) {\n\n\t\t\t\tactiveInfluenceIndices.push( [ 0, 0 ] );\n\n\t\t\t};\n\n\t\t\tvar influenceIndex, m = 0;\n\n\t\t\twhile ( m < material.numSupportedMorphTargets ) {\n\n\t\t\t\tif ( activeInfluenceIndices[ m ] ) {\n\n\t\t\t\t\tinfluenceIndex = activeInfluenceIndices[ m ][ 1 ];\n\n\t\t\t\t\tif ( attributes[ 'morphTarget' + m ] >= 0 ) {\n\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglMorphTargetsBuffers[ influenceIndex ] );\n\t\t\t\t\t\tenableAttribute( attributes[ 'morphTarget' + m ] );\n\t\t\t\t\t\t_gl.vertexAttribPointer( attributes[ 'morphTarget' + m ], 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( attributes[ 'morphNormal' + m ] >= 0 && material.morphNormals ) {\n\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglMorphNormalsBuffers[ influenceIndex ] );\n\t\t\t\t\t\tenableAttribute( attributes[ 'morphNormal' + m ] );\n\t\t\t\t\t\t_gl.vertexAttribPointer( attributes[ 'morphNormal' + m ], 3, _gl.FLOAT, false, 0, 0 );\n\n\n\t\t\t\t\t}\n\n\t\t\t\t\tobject.__webglMorphTargetInfluences[ m ] = influences[ influenceIndex ];\n\n\t\t\t\t} else {\n\n\t\t\t\t\t/*\n\t\t\t\t\t_gl.vertexAttribPointer( attributes[ \"morphTarget\" + m ], 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t\t\tif ( material.morphNormals ) {\n\n\t\t\t\t\t\t_gl.vertexAttribPointer( attributes[ \"morphNormal\" + m ], 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t\t\t}\n\t\t\t\t\t*/\n\n\t\t\t\t\tobject.__webglMorphTargetInfluences[ m ] = 0;\n\n\t\t\t\t}\n\n\t\t\t\tm ++;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// load updated influences uniform\n\n\t\tif ( material.program.uniforms.morphTargetInfluences !== null ) {\n\n\t\t\t_gl.uniform1fv( material.program.uniforms.morphTargetInfluences, object.__webglMorphTargetInfluences );\n\n\t\t}\n\n\t}\n\n\t// Sorting\n\n\tfunction painterSortStable ( a, b ) {\n\n\t\tif ( a.material.id !== b.material.id ) {\n\n\t\t\treturn b.material.id - a.material.id;\n\n\t\t} else if ( a.z !== b.z ) {\n\n\t\t\treturn b.z - a.z;\n\n\t\t} else {\n\n\t\t\treturn a.id - b.id;\n\n\t\t}\n\n\t}\n\n\tfunction reversePainterSortStable ( a, b ) {\n\n\t\tif ( a.z !== b.z ) {\n\n\t\t\treturn a.z - b.z;\n\n\t\t} else {\n\n\t\t\treturn a.id - b.id;\n\n\t\t}\n\n\t}\n\n\tfunction numericalSort ( a, b ) {\n\n\t\treturn b[ 0 ] - a[ 0 ];\n\n\t}\n\n\t// Rendering\n\n\tthis.render = function ( scene, camera, renderTarget, forceClear ) {\n\n\t\tif ( camera instanceof THREE.Camera === false ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar fog = scene.fog;\n\n\t\t// reset caching for this frame\n\n\t\t_currentGeometryGroupHash = - 1;\n\t\t_currentMaterialId = - 1;\n\t\t_currentCamera = null;\n\t\t_lightsNeedUpdate = true;\n\n\t\t// update scene graph\n\n\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\n\n\t\t// update camera matrices and frustum\n\n\t\tif ( camera.parent === undefined ) camera.updateMatrixWorld();\n\n\t\t// update Skeleton objects\n\n\t\tscene.traverse( function ( object ) {\n\n\t\t\tif ( object instanceof THREE.SkinnedMesh ) {\n\n\t\t\t\tobject.skeleton.update();\n\n\t\t\t}\n\n\t\t} );\n\n\t\tcamera.matrixWorldInverse.getInverse( camera.matrixWorld );\n\n\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\n\t\t_frustum.setFromMatrix( _projScreenMatrix );\n\n\t\tlights.length = 0;\n\t\topaqueObjects.length = 0;\n\t\ttransparentObjects.length = 0;\n\n\t\tsprites.length = 0;\n\t\tlensFlares.length = 0;\n\n\t\tprojectObject( scene, scene );\n\n\t\tif ( _this.sortObjects === true ) {\n\n\t\t\topaqueObjects.sort( painterSortStable );\n\t\t\ttransparentObjects.sort( reversePainterSortStable );\n\n\t\t}\n\n\t\t// custom render plugins (pre pass)\n\n\t\tshadowMapPlugin.render( scene, camera );\n\n\t\t//\n\n\t\t_this.info.render.calls = 0;\n\t\t_this.info.render.vertices = 0;\n\t\t_this.info.render.faces = 0;\n\t\t_this.info.render.points = 0;\n\n\t\tthis.setRenderTarget( renderTarget );\n\n\t\tif ( this.autoClear || forceClear ) {\n\n\t\t\tthis.clear( this.autoClearColor, this.autoClearDepth, this.autoClearStencil );\n\n\t\t}\n\n\t\t// set matrices for immediate objects\n\n\t\tfor ( var i = 0, il = _webglObjectsImmediate.length; i < il; i ++ ) {\n\n\t\t\tvar webglObject = _webglObjectsImmediate[ i ];\n\t\t\tvar object = webglObject.object;\n\n\t\t\tif ( object.visible ) {\n\n\t\t\t\tsetupMatrices( object, camera );\n\n\t\t\t\tunrollImmediateBufferMaterial( webglObject );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( scene.overrideMaterial ) {\n\n\t\t\tvar material = scene.overrideMaterial;\n\n\t\t\tthis.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst );\n\t\t\tthis.setDepthTest( material.depthTest );\n\t\t\tthis.setDepthWrite( material.depthWrite );\n\t\t\tsetPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\n\n\t\t\trenderObjects( opaqueObjects, camera, lights, fog, true, material );\n\t\t\trenderObjects( transparentObjects, camera, lights, fog, true, material );\n\t\t\trenderObjectsImmediate( _webglObjectsImmediate, '', camera, lights, fog, false, material );\n\n\t\t} else {\n\n\t\t\tvar material = null;\n\n\t\t\t// opaque pass (front-to-back order)\n\n\t\t\tthis.setBlending( THREE.NoBlending );\n\n\t\t\trenderObjects( opaqueObjects, camera, lights, fog, false, material );\n\t\t\trenderObjectsImmediate( _webglObjectsImmediate, 'opaque', camera, lights, fog, false, material );\n\n\t\t\t// transparent pass (back-to-front order)\n\n\t\t\trenderObjects( transparentObjects, camera, lights, fog, true, material );\n\t\t\trenderObjectsImmediate( _webglObjectsImmediate, 'transparent', camera, lights, fog, true, material );\n\n\t\t}\n\n\t\t// custom render plugins (post pass)\n\n\t\tspritePlugin.render( scene, camera );\n\t\tlensFlarePlugin.render( scene, camera, _currentWidth, _currentHeight );\n\n\t\t// Generate mipmap if we're using any kind of mipmap filtering\n\n\t\tif ( renderTarget && renderTarget.generateMipmaps && renderTarget.minFilter !== THREE.NearestFilter && renderTarget.minFilter !== THREE.LinearFilter ) {\n\n\t\t\tupdateRenderTargetMipmap( renderTarget );\n\n\t\t}\n\n\t\t// Ensure depth buffer writing is enabled so it can be cleared on next render\n\n\t\tthis.setDepthTest( true );\n\t\tthis.setDepthWrite( true );\n\n\t\t// _gl.finish();\n\n\t};\n\n\tfunction projectObject( scene, object ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tif ( object instanceof THREE.Scene || object instanceof THREE.Group ) {\n\n\t\t\t// skip\n\n\t\t} else {\n\n\t\t\tinitObject( object, scene );\n\n\t\t\tif ( object instanceof THREE.Light ) {\n\n\t\t\t\tlights.push( object );\n\n\t\t\t} else if ( object instanceof THREE.Sprite ) {\n\n\t\t\t\tsprites.push( object );\n\n\t\t\t} else if ( object instanceof THREE.LensFlare ) {\n\n\t\t\t\tlensFlares.push( object );\n\n\t\t\t} else {\n\n\t\t\t\tvar webglObjects = _webglObjects[ object.id ];\n\n\t\t\t\tif ( webglObjects && ( object.frustumCulled === false || _frustum.intersectsObject( object ) === true ) ) {\n\n\t\t\t\t\tupdateObject( object, scene );\n\n\t\t\t\t\tfor ( var i = 0, l = webglObjects.length; i < l; i ++ ) {\n\n\t\t\t\t\t\tvar webglObject = webglObjects[i];\n\n\t\t\t\t\t\tunrollBufferMaterial( webglObject );\n\n\t\t\t\t\t\twebglObject.render = true;\n\n\t\t\t\t\t\tif ( _this.sortObjects === true ) {\n\n\t\t\t\t\t\t\tif ( object.renderDepth !== null ) {\n\n\t\t\t\t\t\t\t\twebglObject.z = object.renderDepth;\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld );\n\t\t\t\t\t\t\t\t_vector3.applyProjection( _projScreenMatrix );\n\n\t\t\t\t\t\t\t\twebglObject.z = _vector3.z;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( var i = 0, l = object.children.length; i < l; i ++ ) {\n\n\t\t\tprojectObject( scene, object.children[ i ] );\n\n\t\t}\n\n\t}\n\n\tfunction renderObjects( renderList, camera, lights, fog, useBlending, overrideMaterial ) {\n\n\t\tvar material;\n\n\t\tfor ( var i = renderList.length - 1; i !== - 1; i -- ) {\n\n\t\t\tvar webglObject = renderList[ i ];\n\n\t\t\tvar object = webglObject.object;\n\t\t\tvar buffer = webglObject.buffer;\n\n\t\t\tsetupMatrices( object, camera );\n\n\t\t\tif ( overrideMaterial ) {\n\n\t\t\t\tmaterial = overrideMaterial;\n\n\t\t\t} else {\n\n\t\t\t\tmaterial = webglObject.material;\n\n\t\t\t\tif ( ! material ) continue;\n\n\t\t\t\tif ( useBlending ) _this.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst );\n\n\t\t\t\t_this.setDepthTest( material.depthTest );\n\t\t\t\t_this.setDepthWrite( material.depthWrite );\n\t\t\t\tsetPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\n\n\t\t\t}\n\n\t\t\t_this.setMaterialFaces( material );\n\n\t\t\tif ( buffer instanceof THREE.BufferGeometry ) {\n\n\t\t\t\t_this.renderBufferDirect( camera, lights, fog, material, buffer, object );\n\n\t\t\t} else {\n\n\t\t\t\t_this.renderBuffer( camera, lights, fog, material, buffer, object );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction renderObjectsImmediate ( renderList, materialType, camera, lights, fog, useBlending, overrideMaterial ) {\n\n\t\tvar material;\n\n\t\tfor ( var i = 0, il = renderList.length; i < il; i ++ ) {\n\n\t\t\tvar webglObject = renderList[ i ];\n\t\t\tvar object = webglObject.object;\n\n\t\t\tif ( object.visible ) {\n\n\t\t\t\tif ( overrideMaterial ) {\n\n\t\t\t\t\tmaterial = overrideMaterial;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tmaterial = webglObject[ materialType ];\n\n\t\t\t\t\tif ( ! material ) continue;\n\n\t\t\t\t\tif ( useBlending ) _this.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst );\n\n\t\t\t\t\t_this.setDepthTest( material.depthTest );\n\t\t\t\t\t_this.setDepthWrite( material.depthWrite );\n\t\t\t\t\tsetPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\n\n\t\t\t\t}\n\n\t\t\t\t_this.renderImmediateObject( camera, lights, fog, material, object );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tthis.renderImmediateObject = function ( camera, lights, fog, material, object ) {\n\n\t\tvar program = setProgram( camera, lights, fog, material, object );\n\n\t\t_currentGeometryGroupHash = - 1;\n\n\t\t_this.setMaterialFaces( material );\n\n\t\tif ( object.immediateRenderCallback ) {\n\n\t\t\tobject.immediateRenderCallback( program, _gl, _frustum );\n\n\t\t} else {\n\n\t\t\tobject.render( function ( object ) { _this.renderBufferImmediate( object, program, material ); } );\n\n\t\t}\n\n\t};\n\n\tfunction unrollImmediateBufferMaterial ( globject ) {\n\n\t\tvar object = globject.object,\n\t\t\tmaterial = object.material;\n\n\t\tif ( material.transparent ) {\n\n\t\t\tglobject.transparent = material;\n\t\t\tglobject.opaque = null;\n\n\t\t} else {\n\n\t\t\tglobject.opaque = material;\n\t\t\tglobject.transparent = null;\n\n\t\t}\n\n\t}\n\n\tfunction unrollBufferMaterial ( globject ) {\n\n\t\tvar object = globject.object;\n\t\tvar buffer = globject.buffer;\n\n\t\tvar geometry = object.geometry;\n\t\tvar material = object.material;\n\n\t\tif ( material instanceof THREE.MeshFaceMaterial ) {\n\n\t\t\tvar materialIndex = geometry instanceof THREE.BufferGeometry ? 0 : buffer.materialIndex;\n\n\t\t\tmaterial = material.materials[ materialIndex ];\n\n\t\t\tglobject.material = material;\n\n\t\t\tif ( material.transparent ) {\n\n\t\t\t\ttransparentObjects.push( globject );\n\n\t\t\t} else {\n\n\t\t\t\topaqueObjects.push( globject );\n\n\t\t\t}\n\n\t\t} else if ( material ) {\n\n\t\t\tglobject.material = material;\n\n\t\t\tif ( material.transparent ) {\n\n\t\t\t\ttransparentObjects.push( globject );\n\n\t\t\t} else {\n\n\t\t\t\topaqueObjects.push( globject );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction initObject( object, scene ) {\n\n\t\tif ( object.__webglInit === undefined ) {\n\n\t\t\tobject.__webglInit = true;\n\t\t\tobject._modelViewMatrix = new THREE.Matrix4();\n\t\t\tobject._normalMatrix = new THREE.Matrix3();\n\n\t\t\tobject.addEventListener( 'removed', onObjectRemoved );\n\n\t\t}\n\n\t\tvar geometry = object.geometry;\n\n\t\tif ( geometry === undefined ) {\n\n\t\t\t// ImmediateRenderObject\n\n\t\t} else if ( geometry.__webglInit === undefined ) {\n\n\t\t\tgeometry.__webglInit = true;\n\t\t\tgeometry.addEventListener( 'dispose', onGeometryDispose );\n\n\t\t\tif ( geometry instanceof THREE.BufferGeometry ) {\n\n\t\t\t\t//\n\n\t\t\t} else if ( object instanceof THREE.Mesh ) {\n\n\t\t\t\tinitGeometryGroups( scene, object, geometry );\n\n\t\t\t} else if ( object instanceof THREE.Line ) {\n\n\t\t\t\tif ( geometry.__webglVertexBuffer === undefined ) {\n\n\t\t\t\t\tcreateLineBuffers( geometry );\n\t\t\t\t\tinitLineBuffers( geometry, object );\n\n\t\t\t\t\tgeometry.verticesNeedUpdate = true;\n\t\t\t\t\tgeometry.colorsNeedUpdate = true;\n\t\t\t\t\tgeometry.lineDistancesNeedUpdate = true;\n\n\t\t\t\t}\n\n\t\t\t} else if ( object instanceof THREE.PointCloud ) {\n\n\t\t\t\tif ( geometry.__webglVertexBuffer === undefined ) {\n\n\t\t\t\t\tcreateParticleBuffers( geometry );\n\t\t\t\t\tinitParticleBuffers( geometry, object );\n\n\t\t\t\t\tgeometry.verticesNeedUpdate = true;\n\t\t\t\t\tgeometry.colorsNeedUpdate = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( object.__webglActive === undefined) {\n\n\t\t\tobject.__webglActive = true;\n\n\t\t\tif ( object instanceof THREE.Mesh ) {\n\n\t\t\t\tif ( geometry instanceof THREE.BufferGeometry ) {\n\n\t\t\t\t\taddBuffer( _webglObjects, geometry, object );\n\n\t\t\t\t} else if ( geometry instanceof THREE.Geometry ) {\n\n\t\t\t\t\tvar geometryGroupsList = geometryGroups[ geometry.id ];\n\n\t\t\t\t\tfor ( var i = 0,l = geometryGroupsList.length; i < l; i ++ ) {\n\n\t\t\t\t\t\taddBuffer( _webglObjects, geometryGroupsList[ i ], object );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( object instanceof THREE.Line || object instanceof THREE.PointCloud ) {\n\n\t\t\t\taddBuffer( _webglObjects, geometry, object );\n\n\t\t\t} else if ( object instanceof THREE.ImmediateRenderObject || object.immediateRenderCallback ) {\n\n\t\t\t\taddBufferImmediate( _webglObjectsImmediate, object );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// Geometry splitting\n\n\tvar geometryGroups = {};\n\tvar geometryGroupCounter = 0;\n\n\tfunction makeGroups( geometry, usesFaceMaterial ) {\n\n\t\tvar maxVerticesInGroup = extensions.get( 'OES_element_index_uint' ) ? 4294967296 : 65535;\n\n\t\tvar groupHash, hash_map = {};\n\n\t\tvar numMorphTargets = geometry.morphTargets.length;\n\t\tvar numMorphNormals = geometry.morphNormals.length;\n\n\t\tvar group;\n\t\tvar groups = {};\n\t\tvar groupsList = [];\n\n\t\tfor ( var f = 0, fl = geometry.faces.length; f < fl; f ++ ) {\n\n\t\t\tvar face = geometry.faces[ f ];\n\t\t\tvar materialIndex = usesFaceMaterial ? face.materialIndex : 0;\n\n\t\t\tif ( ! ( materialIndex in hash_map ) ) {\n\n\t\t\t\thash_map[ materialIndex ] = { hash: materialIndex, counter: 0 };\n\n\t\t\t}\n\n\t\t\tgroupHash = hash_map[ materialIndex ].hash + '_' + hash_map[ materialIndex ].counter;\n\n\t\t\tif ( ! ( groupHash in groups ) ) {\n\n\t\t\t\tgroup = {\n\t\t\t\t\tid: geometryGroupCounter ++,\n\t\t\t\t\tfaces3: [],\n\t\t\t\t\tmaterialIndex: materialIndex,\n\t\t\t\t\tvertices: 0,\n\t\t\t\t\tnumMorphTargets: numMorphTargets,\n\t\t\t\t\tnumMorphNormals: numMorphNormals\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tgroups[ groupHash ] = group;\n\t\t\t\tgroupsList.push( group );\n\n\t\t\t}\n\n\t\t\tif ( groups[ groupHash ].vertices + 3 > maxVerticesInGroup ) {\n\n\t\t\t\thash_map[ materialIndex ].counter += 1;\n\t\t\t\tgroupHash = hash_map[ materialIndex ].hash + '_' + hash_map[ materialIndex ].counter;\n\n\t\t\t\tif ( ! ( groupHash in groups ) ) {\n\n\t\t\t\t\tgroup = {\n\t\t\t\t\t\tid: geometryGroupCounter ++,\n\t\t\t\t\t\tfaces3: [],\n\t\t\t\t\t\tmaterialIndex: materialIndex,\n\t\t\t\t\t\tvertices: 0,\n\t\t\t\t\t\tnumMorphTargets: numMorphTargets,\n\t\t\t\t\t\tnumMorphNormals: numMorphNormals\n\t\t\t\t\t};\n\t\t\t\t\t\n\t\t\t\t\tgroups[ groupHash ] = group;\n\t\t\t\t\tgroupsList.push( group );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgroups[ groupHash ].faces3.push( f );\n\t\t\tgroups[ groupHash ].vertices += 3;\n\n\t\t}\n\n\t\treturn groupsList;\n\n\t}\n\n\tfunction initGeometryGroups( scene, object, geometry ) {\n\n\t\tvar material = object.material, addBuffers = false;\n\n\t\tif ( geometryGroups[ geometry.id ] === undefined || geometry.groupsNeedUpdate === true ) {\n\n\t\t\tdelete _webglObjects[ object.id ];\n\n\t\t\tgeometryGroups[ geometry.id ] = makeGroups( geometry, material instanceof THREE.MeshFaceMaterial );\n\n\t\t\tgeometry.groupsNeedUpdate = false;\n\n\t\t}\n\n\t\tvar geometryGroupsList = geometryGroups[ geometry.id ];\n\n\t\t// create separate VBOs per geometry chunk\n\n\t\tfor ( var i = 0, il = geometryGroupsList.length; i < il; i ++ ) {\n\n\t\t\tvar geometryGroup = geometryGroupsList[ i ];\n\n\t\t\t// initialise VBO on the first access\n\n\t\t\tif ( geometryGroup.__webglVertexBuffer === undefined ) {\n\n\t\t\t\tcreateMeshBuffers( geometryGroup );\n\t\t\t\tinitMeshBuffers( geometryGroup, object );\n\n\t\t\t\tgeometry.verticesNeedUpdate = true;\n\t\t\t\tgeometry.morphTargetsNeedUpdate = true;\n\t\t\t\tgeometry.elementsNeedUpdate = true;\n\t\t\t\tgeometry.uvsNeedUpdate = true;\n\t\t\t\tgeometry.normalsNeedUpdate = true;\n\t\t\t\tgeometry.tangentsNeedUpdate = true;\n\t\t\t\tgeometry.colorsNeedUpdate = true;\n\n\t\t\t\taddBuffers = true;\n\n\t\t\t} else {\n\n\t\t\t\taddBuffers = false;\n\n\t\t\t}\n\n\t\t\tif ( addBuffers || object.__webglActive === undefined ) {\n\n\t\t\t\taddBuffer( _webglObjects, geometryGroup, object );\n\n\t\t\t}\n\n\t\t}\n\n\t\tobject.__webglActive = true;\n\n\t}\n\n\tfunction addBuffer( objlist, buffer, object ) {\n\n\t\tvar id = object.id;\n\t\tobjlist[id] = objlist[id] || [];\n\t\tobjlist[id].push(\n\t\t\t{\n\t\t\t\tid: id,\n\t\t\t\tbuffer: buffer,\n\t\t\t\tobject: object,\n\t\t\t\tmaterial: null,\n\t\t\t\tz: 0\n\t\t\t}\n\t\t);\n\n\t};\n\n\tfunction addBufferImmediate( objlist, object ) {\n\n\t\tobjlist.push(\n\t\t\t{\n\t\t\t\tid: null,\n\t\t\t\tobject: object,\n\t\t\t\topaque: null,\n\t\t\t\ttransparent: null,\n\t\t\t\tz: 0\n\t\t\t}\n\t\t);\n\n\t};\n\n\t// Objects updates\n\n\tfunction updateObject( object, scene ) {\n\n\t\tvar geometry = object.geometry, customAttributesDirty, material;\n\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\n\n\t\t\tsetDirectBuffers( geometry );\n\n\t\t} else if ( object instanceof THREE.Mesh ) {\n\n\t\t\t// check all geometry groups\n\n\t\t\tif ( geometry.groupsNeedUpdate === true ) {\n\n\t\t\t\tinitGeometryGroups( scene, object, geometry );\n\n\t\t\t}\n\n\t\t\tvar geometryGroupsList = geometryGroups[ geometry.id ];\n\n\t\t\tfor ( var i = 0, il = geometryGroupsList.length; i < il; i ++ ) {\n\n\t\t\t\tvar geometryGroup = geometryGroupsList[ i ];\n\n\t\t\t\tmaterial = getBufferMaterial( object, geometryGroup );\n\n\t\t\t\tif ( geometry.groupsNeedUpdate === true ) {\n\n\t\t\t\t\tinitMeshBuffers( geometryGroup, object );\n\n\t\t\t\t}\n\n\t\t\t\tcustomAttributesDirty = material.attributes && areCustomAttributesDirty( material );\n\n\t\t\t\tif ( geometry.verticesNeedUpdate || geometry.morphTargetsNeedUpdate || geometry.elementsNeedUpdate ||\n\t\t\t\t\t geometry.uvsNeedUpdate || geometry.normalsNeedUpdate ||\n\t\t\t\t\t geometry.colorsNeedUpdate || geometry.tangentsNeedUpdate || customAttributesDirty ) {\n\n\t\t\t\t\tsetMeshBuffers( geometryGroup, object, _gl.DYNAMIC_DRAW, ! geometry.dynamic, material );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgeometry.verticesNeedUpdate = false;\n\t\t\tgeometry.morphTargetsNeedUpdate = false;\n\t\t\tgeometry.elementsNeedUpdate = false;\n\t\t\tgeometry.uvsNeedUpdate = false;\n\t\t\tgeometry.normalsNeedUpdate = false;\n\t\t\tgeometry.colorsNeedUpdate = false;\n\t\t\tgeometry.tangentsNeedUpdate = false;\n\n\t\t\tmaterial.attributes && clearCustomAttributes( material );\n\n\t\t} else if ( object instanceof THREE.Line ) {\n\n\t\t\tmaterial = getBufferMaterial( object, geometry );\n\n\t\t\tcustomAttributesDirty = material.attributes && areCustomAttributesDirty( material );\n\n\t\t\tif ( geometry.verticesNeedUpdate || geometry.colorsNeedUpdate || geometry.lineDistancesNeedUpdate || customAttributesDirty ) {\n\n\t\t\t\tsetLineBuffers( geometry, _gl.DYNAMIC_DRAW );\n\n\t\t\t}\n\n\t\t\tgeometry.verticesNeedUpdate = false;\n\t\t\tgeometry.colorsNeedUpdate = false;\n\t\t\tgeometry.lineDistancesNeedUpdate = false;\n\n\t\t\tmaterial.attributes && clearCustomAttributes( material );\n\n\n\t\t} else if ( object instanceof THREE.PointCloud ) {\n\n\t\t\tmaterial = getBufferMaterial( object, geometry );\n\n\t\t\tcustomAttributesDirty = material.attributes && areCustomAttributesDirty( material );\n\n\t\t\tif ( geometry.verticesNeedUpdate || geometry.colorsNeedUpdate || object.sortParticles || customAttributesDirty ) {\n\n\t\t\t\tsetParticleBuffers( geometry, _gl.DYNAMIC_DRAW, object );\n\n\t\t\t}\n\n\t\t\tgeometry.verticesNeedUpdate = false;\n\t\t\tgeometry.colorsNeedUpdate = false;\n\n\t\t\tmaterial.attributes && clearCustomAttributes( material );\n\n\t\t}\n\n\t}\n\n\t// Objects updates - custom attributes check\n\n\tfunction areCustomAttributesDirty( material ) {\n\n\t\tfor ( var name in material.attributes ) {\n\n\t\t\tif ( material.attributes[ name ].needsUpdate ) return true;\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tfunction clearCustomAttributes( material ) {\n\n\t\tfor ( var name in material.attributes ) {\n\n\t\t\tmaterial.attributes[ name ].needsUpdate = false;\n\n\t\t}\n\n\t}\n\n\t// Objects removal\n\n\tfunction removeObject( object ) {\n\n\t\tif ( object instanceof THREE.Mesh  ||\n\t\t\t object instanceof THREE.PointCloud ||\n\t\t\t object instanceof THREE.Line ) {\n\n\t\t\tdelete _webglObjects[ object.id ];\n\n\t\t} else if ( object instanceof THREE.ImmediateRenderObject || object.immediateRenderCallback ) {\n\n\t\t\tremoveInstances( _webglObjectsImmediate, object );\n\n\t\t}\n\n\t\tdelete object.__webglInit;\n\t\tdelete object._modelViewMatrix;\n\t\tdelete object._normalMatrix;\n\n\t\tdelete object.__webglActive;\n\n\t}\n\n\tfunction removeInstances( objlist, object ) {\n\n\t\tfor ( var o = objlist.length - 1; o >= 0; o -- ) {\n\n\t\t\tif ( objlist[ o ].object === object ) {\n\n\t\t\t\tobjlist.splice( o, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// Materials\n\n\tfunction initMaterial( material, lights, fog, object ) {\n\n\t\tmaterial.addEventListener( 'dispose', onMaterialDispose );\n\n\t\tvar shaderID;\n\n\t\tif ( material instanceof THREE.MeshDepthMaterial ) {\n\n\t\t\tshaderID = 'depth';\n\n\t\t} else if ( material instanceof THREE.MeshNormalMaterial ) {\n\n\t\t\tshaderID = 'normal';\n\n\t\t} else if ( material instanceof THREE.MeshBasicMaterial ) {\n\n\t\t\tshaderID = 'basic';\n\n\t\t} else if ( material instanceof THREE.MeshLambertMaterial ) {\n\n\t\t\tshaderID = 'lambert';\n\n\t\t} else if ( material instanceof THREE.MeshPhongMaterial ) {\n\n\t\t\tshaderID = 'phong';\n\n\t\t} else if ( material instanceof THREE.LineBasicMaterial ) {\n\n\t\t\tshaderID = 'basic';\n\n\t\t} else if ( material instanceof THREE.LineDashedMaterial ) {\n\n\t\t\tshaderID = 'dashed';\n\n\t\t} else if ( material instanceof THREE.PointCloudMaterial ) {\n\n\t\t\tshaderID = 'particle_basic';\n\n\t\t}\n\n\t\tif ( shaderID ) {\n\n\t\t\tvar shader = THREE.ShaderLib[ shaderID ];\n\n\t\t\tmaterial.__webglShader = {\n\t\t\t\tuniforms: THREE.UniformsUtils.clone( shader.uniforms ),\n\t\t\t\tvertexShader: shader.vertexShader,\n\t\t\t\tfragmentShader: shader.fragmentShader\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tmaterial.__webglShader = {\n\t\t\t\tuniforms: material.uniforms,\n\t\t\t\tvertexShader: material.vertexShader,\n\t\t\t\tfragmentShader: material.fragmentShader\n\t\t\t}\n\n\t\t}\n\n\t\t// heuristics to create shader parameters according to lights in the scene\n\t\t// (not to blow over maxLights budget)\n\n\t\tvar maxLightCount = allocateLights( lights );\n\t\tvar maxShadows = allocateShadows( lights );\n\t\tvar maxBones = allocateBones( object );\n\n\t\tvar parameters = {\n\n\t\t\tprecision: _precision,\n\t\t\tsupportsVertexTextures: _supportsVertexTextures,\n\n\t\t\tmap: !! material.map,\n\t\t\tenvMap: !! material.envMap,\n\t\t\tlightMap: !! material.lightMap,\n\t\t\tbumpMap: !! material.bumpMap,\n\t\t\tnormalMap: !! material.normalMap,\n\t\t\tspecularMap: !! material.specularMap,\n\t\t\talphaMap: !! material.alphaMap,\n\n\t\t\tvertexColors: material.vertexColors,\n\n\t\t\tfog: fog,\n\t\t\tuseFog: material.fog,\n\t\t\tfogExp: fog instanceof THREE.FogExp2,\n\n\t\t\tsizeAttenuation: material.sizeAttenuation,\n\t\t\tlogarithmicDepthBuffer: _logarithmicDepthBuffer,\n\n\t\t\tskinning: material.skinning,\n\t\t\tmaxBones: maxBones,\n\t\t\tuseVertexTexture: _supportsBoneTextures && object && object.skeleton && object.skeleton.useVertexTexture,\n\n\t\t\tmorphTargets: material.morphTargets,\n\t\t\tmorphNormals: material.morphNormals,\n\t\t\tmaxMorphTargets: _this.maxMorphTargets,\n\t\t\tmaxMorphNormals: _this.maxMorphNormals,\n\n\t\t\tmaxDirLights: maxLightCount.directional,\n\t\t\tmaxPointLights: maxLightCount.point,\n\t\t\tmaxSpotLights: maxLightCount.spot,\n\t\t\tmaxHemiLights: maxLightCount.hemi,\n\n\t\t\tmaxShadows: maxShadows,\n\t\t\tshadowMapEnabled: _this.shadowMapEnabled && object.receiveShadow && maxShadows > 0,\n\t\t\tshadowMapType: _this.shadowMapType,\n\t\t\tshadowMapDebug: _this.shadowMapDebug,\n\t\t\tshadowMapCascade: _this.shadowMapCascade,\n\n\t\t\talphaTest: material.alphaTest,\n\t\t\tmetal: material.metal,\n\t\t\twrapAround: material.wrapAround,\n\t\t\tdoubleSided: material.side === THREE.DoubleSide,\n\t\t\tflipSided: material.side === THREE.BackSide\n\n\t\t};\n\n\t\t// Generate code\n\n\t\tvar chunks = [];\n\n\t\tif ( shaderID ) {\n\n\t\t\tchunks.push( shaderID );\n\n\t\t} else {\n\n\t\t\tchunks.push( material.fragmentShader );\n\t\t\tchunks.push( material.vertexShader );\n\n\t\t}\n\n\t\tif ( material.defines !== undefined ) {\n\n\t\t\tfor ( var name in material.defines ) {\n\n\t\t\t\tchunks.push( name );\n\t\t\t\tchunks.push( material.defines[ name ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( var name in parameters ) {\n\n\t\t\tchunks.push( name );\n\t\t\tchunks.push( parameters[ name ] );\n\n\t\t}\n\n\t\tvar code = chunks.join();\n\n\t\tvar program;\n\n\t\t// Check if code has been already compiled\n\n\t\tfor ( var p = 0, pl = _programs.length; p < pl; p ++ ) {\n\n\t\t\tvar programInfo = _programs[ p ];\n\n\t\t\tif ( programInfo.code === code ) {\n\n\t\t\t\tprogram = programInfo;\n\t\t\t\tprogram.usedTimes ++;\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( program === undefined ) {\n\n\t\t\tprogram = new THREE.WebGLProgram( _this, code, material, parameters );\n\t\t\t_programs.push( program );\n\n\t\t\t_this.info.memory.programs = _programs.length;\n\n\t\t}\n\n\t\tmaterial.program = program;\n\n\t\tvar attributes = program.attributes;\n\n\t\tif ( material.morphTargets ) {\n\n\t\t\tmaterial.numSupportedMorphTargets = 0;\n\n\t\t\tvar id, base = 'morphTarget';\n\n\t\t\tfor ( var i = 0; i < _this.maxMorphTargets; i ++ ) {\n\n\t\t\t\tid = base + i;\n\n\t\t\t\tif ( attributes[ id ] >= 0 ) {\n\n\t\t\t\t\tmaterial.numSupportedMorphTargets ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.morphNormals ) {\n\n\t\t\tmaterial.numSupportedMorphNormals = 0;\n\n\t\t\tvar id, base = 'morphNormal';\n\n\t\t\tfor ( i = 0; i < _this.maxMorphNormals; i ++ ) {\n\n\t\t\t\tid = base + i;\n\n\t\t\t\tif ( attributes[ id ] >= 0 ) {\n\n\t\t\t\t\tmaterial.numSupportedMorphNormals ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tmaterial.uniformsList = [];\n\n\t\tfor ( var u in material.__webglShader.uniforms ) {\n\n\t\t\tvar location = material.program.uniforms[ u ];\n\n\t\t\tif ( location ) {\n\t\t\t\tmaterial.uniformsList.push( [ material.__webglShader.uniforms[ u ], location ] );\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction setProgram( camera, lights, fog, material, object ) {\n\n\t\t_usedTextureUnits = 0;\n\n\t\tif ( material.needsUpdate ) {\n\n\t\t\tif ( material.program ) deallocateMaterial( material );\n\n\t\t\tinitMaterial( material, lights, fog, object );\n\t\t\tmaterial.needsUpdate = false;\n\n\t\t}\n\n\t\tif ( material.morphTargets ) {\n\n\t\t\tif ( ! object.__webglMorphTargetInfluences ) {\n\n\t\t\t\tobject.__webglMorphTargetInfluences = new Float32Array( _this.maxMorphTargets );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar refreshProgram = false;\n\t\tvar refreshMaterial = false;\n\t\tvar refreshLights = false;\n\n\t\tvar program = material.program,\n\t\t\tp_uniforms = program.uniforms,\n\t\t\tm_uniforms = material.__webglShader.uniforms;\n\n\t\tif ( program.id !== _currentProgram ) {\n\n\t\t\t_gl.useProgram( program.program );\n\t\t\t_currentProgram = program.id;\n\n\t\t\trefreshProgram = true;\n\t\t\trefreshMaterial = true;\n\t\t\trefreshLights = true;\n\n\t\t}\n\n\t\tif ( material.id !== _currentMaterialId ) {\n\n\t\t\tif ( _currentMaterialId === -1 ) refreshLights = true;\n\t\t\t_currentMaterialId = material.id;\n\n\t\t\trefreshMaterial = true;\n\n\t\t}\n\n\t\tif ( refreshProgram || camera !== _currentCamera ) {\n\n\t\t\t_gl.uniformMatrix4fv( p_uniforms.projectionMatrix, false, camera.projectionMatrix.elements );\n\n\t\t\tif ( _logarithmicDepthBuffer ) {\n\n\t\t\t\t_gl.uniform1f( p_uniforms.logDepthBufFC, 2.0 / ( Math.log( camera.far + 1.0 ) / Math.LN2 ) );\n\n\t\t\t}\n\n\n\t\t\tif ( camera !== _currentCamera ) _currentCamera = camera;\n\n\t\t\t// load material specific uniforms\n\t\t\t// (shader material also gets them for the sake of genericity)\n\n\t\t\tif ( material instanceof THREE.ShaderMaterial ||\n\t\t\t\t material instanceof THREE.MeshPhongMaterial ||\n\t\t\t\t material.envMap ) {\n\n\t\t\t\tif ( p_uniforms.cameraPosition !== null ) {\n\n\t\t\t\t\t_vector3.setFromMatrixPosition( camera.matrixWorld );\n\t\t\t\t\t_gl.uniform3f( p_uniforms.cameraPosition, _vector3.x, _vector3.y, _vector3.z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( material instanceof THREE.MeshPhongMaterial ||\n\t\t\t\t material instanceof THREE.MeshLambertMaterial ||\n\t\t\t\t material instanceof THREE.ShaderMaterial ||\n\t\t\t\t material.skinning ) {\n\n\t\t\t\tif ( p_uniforms.viewMatrix !== null ) {\n\n\t\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.viewMatrix, false, camera.matrixWorldInverse.elements );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// skinning uniforms must be set even if material didn't change\n\t\t// auto-setting of texture unit for bone texture must go before other textures\n\t\t// not sure why, but otherwise weird things happen\n\n\t\tif ( material.skinning ) {\n\n\t\t\tif ( object.bindMatrix && p_uniforms.bindMatrix !== null ) {\n\n\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.bindMatrix, false, object.bindMatrix.elements );\n\n\t\t\t}\n\n\t\t\tif ( object.bindMatrixInverse && p_uniforms.bindMatrixInverse !== null ) {\n\n\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.bindMatrixInverse, false, object.bindMatrixInverse.elements );\n\n\t\t\t}\n\n\t\t\tif ( _supportsBoneTextures && object.skeleton && object.skeleton.useVertexTexture ) {\n\n\t\t\t\tif ( p_uniforms.boneTexture !== null ) {\n\n\t\t\t\t\tvar textureUnit = getTextureUnit();\n\n\t\t\t\t\t_gl.uniform1i( p_uniforms.boneTexture, textureUnit );\n\t\t\t\t\t_this.setTexture( object.skeleton.boneTexture, textureUnit );\n\n\t\t\t\t}\n\n\t\t\t\tif ( p_uniforms.boneTextureWidth !== null ) {\n\n\t\t\t\t\t_gl.uniform1i( p_uniforms.boneTextureWidth, object.skeleton.boneTextureWidth );\n\n\t\t\t\t}\n\n\t\t\t\tif ( p_uniforms.boneTextureHeight !== null ) {\n\n\t\t\t\t\t_gl.uniform1i( p_uniforms.boneTextureHeight, object.skeleton.boneTextureHeight );\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.skeleton && object.skeleton.boneMatrices ) {\n\n\t\t\t\tif ( p_uniforms.boneGlobalMatrices !== null ) {\n\n\t\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.boneGlobalMatrices, false, object.skeleton.boneMatrices );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( refreshMaterial ) {\n\n\t\t\t// refresh uniforms common to several materials\n\n\t\t\tif ( fog && material.fog ) {\n\n\t\t\t\trefreshUniformsFog( m_uniforms, fog );\n\n\t\t\t}\n\n\t\t\tif ( material instanceof THREE.MeshPhongMaterial ||\n\t\t\t\t material instanceof THREE.MeshLambertMaterial ||\n\t\t\t\t material.lights ) {\n\n\t\t\t\tif ( _lightsNeedUpdate ) {\n\n\t\t\t\t\trefreshLights = true;\n\t\t\t\t\tsetupLights( lights );\n\t\t\t\t\t_lightsNeedUpdate = false;\n\t\t\t\t}\n\n\t\t\t\tif ( refreshLights ) {\n\t\t\t\t\trefreshUniformsLights( m_uniforms, _lights );\n\t\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, true );\n\t\t\t\t} else {\n\t\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, false );\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( material instanceof THREE.MeshBasicMaterial ||\n\t\t\t\t material instanceof THREE.MeshLambertMaterial ||\n\t\t\t\t material instanceof THREE.MeshPhongMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\n\t\t\t}\n\n\t\t\t// refresh single material specific uniforms\n\n\t\t\tif ( material instanceof THREE.LineBasicMaterial ) {\n\n\t\t\t\trefreshUniformsLine( m_uniforms, material );\n\n\t\t\t} else if ( material instanceof THREE.LineDashedMaterial ) {\n\n\t\t\t\trefreshUniformsLine( m_uniforms, material );\n\t\t\t\trefreshUniformsDash( m_uniforms, material );\n\n\t\t\t} else if ( material instanceof THREE.PointCloudMaterial ) {\n\n\t\t\t\trefreshUniformsParticle( m_uniforms, material );\n\n\t\t\t} else if ( material instanceof THREE.MeshPhongMaterial ) {\n\n\t\t\t\trefreshUniformsPhong( m_uniforms, material );\n\n\t\t\t} else if ( material instanceof THREE.MeshLambertMaterial ) {\n\n\t\t\t\trefreshUniformsLambert( m_uniforms, material );\n\n\t\t\t} else if ( material instanceof THREE.MeshDepthMaterial ) {\n\n\t\t\t\tm_uniforms.mNear.value = camera.near;\n\t\t\t\tm_uniforms.mFar.value = camera.far;\n\t\t\t\tm_uniforms.opacity.value = material.opacity;\n\n\t\t\t} else if ( material instanceof THREE.MeshNormalMaterial ) {\n\n\t\t\t\tm_uniforms.opacity.value = material.opacity;\n\n\t\t\t}\n\n\t\t\tif ( object.receiveShadow && ! material._shadowPass ) {\n\n\t\t\t\trefreshUniformsShadow( m_uniforms, lights );\n\n\t\t\t}\n\n\t\t\t// load common uniforms\n\n\t\t\tloadUniformsGeneric( material.uniformsList );\n\n\t\t}\n\n\t\tloadUniformsMatrices( p_uniforms, object );\n\n\t\tif ( p_uniforms.modelMatrix !== null ) {\n\n\t\t\t_gl.uniformMatrix4fv( p_uniforms.modelMatrix, false, object.matrixWorld.elements );\n\n\t\t}\n\n\t\treturn program;\n\n\t}\n\n\t// Uniforms (refresh uniforms objects)\n\n\tfunction refreshUniformsCommon ( uniforms, material ) {\n\n\t\tuniforms.opacity.value = material.opacity;\n\n\t\tif ( _this.gammaInput ) {\n\n\t\t\tuniforms.diffuse.value.copyGammaToLinear( material.color );\n\n\t\t} else {\n\n\t\t\tuniforms.diffuse.value = material.color;\n\n\t\t}\n\n\t\tuniforms.map.value = material.map;\n\t\tuniforms.lightMap.value = material.lightMap;\n\t\tuniforms.specularMap.value = material.specularMap;\n\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t//  1. color map\n\t\t//  2. specular map\n\t\t//  3. normal map\n\t\t//  4. bump map\n\t\t//  5. alpha map\n\n\t\tvar uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.specularMap ) {\n\n\t\t\tuvScaleMap = material.specularMap;\n\n\t\t} else if ( material.normalMap ) {\n\n\t\t\tuvScaleMap = material.normalMap;\n\n\t\t} else if ( material.bumpMap ) {\n\n\t\t\tuvScaleMap = material.bumpMap;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\tvar offset = uvScaleMap.offset;\n\t\t\tvar repeat = uvScaleMap.repeat;\n\n\t\t\tuniforms.offsetRepeat.value.set( offset.x, offset.y, repeat.x, repeat.y );\n\n\t\t}\n\n\t\tuniforms.envMap.value = material.envMap;\n\t\tuniforms.flipEnvMap.value = ( material.envMap instanceof THREE.WebGLRenderTargetCube ) ? 1 : - 1;\n\n\t\tif ( _this.gammaInput ) {\n\n\t\t\t//uniforms.reflectivity.value = material.reflectivity * material.reflectivity;\n\t\t\tuniforms.reflectivity.value = material.reflectivity;\n\n\t\t} else {\n\n\t\t\tuniforms.reflectivity.value = material.reflectivity;\n\n\t\t}\n\n\t\tuniforms.refractionRatio.value = material.refractionRatio;\n\t\tuniforms.combine.value = material.combine;\n\t\tuniforms.useRefract.value = material.envMap && material.envMap.mapping instanceof THREE.CubeRefractionMapping;\n\n\t}\n\n\tfunction refreshUniformsLine ( uniforms, material ) {\n\n\t\tuniforms.diffuse.value = material.color;\n\t\tuniforms.opacity.value = material.opacity;\n\n\t}\n\n\tfunction refreshUniformsDash ( uniforms, material ) {\n\n\t\tuniforms.dashSize.value = material.dashSize;\n\t\tuniforms.totalSize.value = material.dashSize + material.gapSize;\n\t\tuniforms.scale.value = material.scale;\n\n\t}\n\n\tfunction refreshUniformsParticle ( uniforms, material ) {\n\n\t\tuniforms.psColor.value = material.color;\n\t\tuniforms.opacity.value = material.opacity;\n\t\tuniforms.size.value = material.size;\n\t\tuniforms.scale.value = _canvas.height / 2.0; // TODO: Cache this.\n\n\t\tuniforms.map.value = material.map;\n\n\t}\n\n\tfunction refreshUniformsFog ( uniforms, fog ) {\n\n\t\tuniforms.fogColor.value = fog.color;\n\n\t\tif ( fog instanceof THREE.Fog ) {\n\n\t\t\tuniforms.fogNear.value = fog.near;\n\t\t\tuniforms.fogFar.value = fog.far;\n\n\t\t} else if ( fog instanceof THREE.FogExp2 ) {\n\n\t\t\tuniforms.fogDensity.value = fog.density;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhong ( uniforms, material ) {\n\n\t\tuniforms.shininess.value = material.shininess;\n\n\t\tif ( _this.gammaInput ) {\n\n\t\t\tuniforms.ambient.value.copyGammaToLinear( material.ambient );\n\t\t\tuniforms.emissive.value.copyGammaToLinear( material.emissive );\n\t\t\tuniforms.specular.value.copyGammaToLinear( material.specular );\n\n\t\t} else {\n\n\t\t\tuniforms.ambient.value = material.ambient;\n\t\t\tuniforms.emissive.value = material.emissive;\n\t\t\tuniforms.specular.value = material.specular;\n\n\t\t}\n\n\t\tif ( material.wrapAround ) {\n\n\t\t\tuniforms.wrapRGB.value.copy( material.wrapRGB );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsLambert ( uniforms, material ) {\n\n\t\tif ( _this.gammaInput ) {\n\n\t\t\tuniforms.ambient.value.copyGammaToLinear( material.ambient );\n\t\t\tuniforms.emissive.value.copyGammaToLinear( material.emissive );\n\n\t\t} else {\n\n\t\t\tuniforms.ambient.value = material.ambient;\n\t\t\tuniforms.emissive.value = material.emissive;\n\n\t\t}\n\n\t\tif ( material.wrapAround ) {\n\n\t\t\tuniforms.wrapRGB.value.copy( material.wrapRGB );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsLights ( uniforms, lights ) {\n\n\t\tuniforms.ambientLightColor.value = lights.ambient;\n\n\t\tuniforms.directionalLightColor.value = lights.directional.colors;\n\t\tuniforms.directionalLightDirection.value = lights.directional.positions;\n\n\t\tuniforms.pointLightColor.value = lights.point.colors;\n\t\tuniforms.pointLightPosition.value = lights.point.positions;\n\t\tuniforms.pointLightDistance.value = lights.point.distances;\n\n\t\tuniforms.spotLightColor.value = lights.spot.colors;\n\t\tuniforms.spotLightPosition.value = lights.spot.positions;\n\t\tuniforms.spotLightDistance.value = lights.spot.distances;\n\t\tuniforms.spotLightDirection.value = lights.spot.directions;\n\t\tuniforms.spotLightAngleCos.value = lights.spot.anglesCos;\n\t\tuniforms.spotLightExponent.value = lights.spot.exponents;\n\n\t\tuniforms.hemisphereLightSkyColor.value = lights.hemi.skyColors;\n\t\tuniforms.hemisphereLightGroundColor.value = lights.hemi.groundColors;\n\t\tuniforms.hemisphereLightDirection.value = lights.hemi.positions;\n\n\t}\n\n\t// If uniforms are marked as clean, they don't need to be loaded to the GPU.\n\n\tfunction markUniformsLightsNeedsUpdate ( uniforms, boolean ) {\n\n\t\tuniforms.ambientLightColor.needsUpdate = boolean;\n\n\t\tuniforms.directionalLightColor.needsUpdate = boolean;\n\t\tuniforms.directionalLightDirection.needsUpdate = boolean;\n\n\t\tuniforms.pointLightColor.needsUpdate = boolean;\n\t\tuniforms.pointLightPosition.needsUpdate = boolean;\n\t\tuniforms.pointLightDistance.needsUpdate = boolean;\n\n\t\tuniforms.spotLightColor.needsUpdate = boolean;\n\t\tuniforms.spotLightPosition.needsUpdate = boolean;\n\t\tuniforms.spotLightDistance.needsUpdate = boolean;\n\t\tuniforms.spotLightDirection.needsUpdate = boolean;\n\t\tuniforms.spotLightAngleCos.needsUpdate = boolean;\n\t\tuniforms.spotLightExponent.needsUpdate = boolean;\n\n\t\tuniforms.hemisphereLightSkyColor.needsUpdate = boolean;\n\t\tuniforms.hemisphereLightGroundColor.needsUpdate = boolean;\n\t\tuniforms.hemisphereLightDirection.needsUpdate = boolean;\n\n\t}\n\n\tfunction refreshUniformsShadow ( uniforms, lights ) {\n\n\t\tif ( uniforms.shadowMatrix ) {\n\n\t\t\tvar j = 0;\n\n\t\t\tfor ( var i = 0, il = lights.length; i < il; i ++ ) {\n\n\t\t\t\tvar light = lights[ i ];\n\n\t\t\t\tif ( ! light.castShadow ) continue;\n\n\t\t\t\tif ( light instanceof THREE.SpotLight || ( light instanceof THREE.DirectionalLight && ! light.shadowCascade ) ) {\n\n\t\t\t\t\tuniforms.shadowMap.value[ j ] = light.shadowMap;\n\t\t\t\t\tuniforms.shadowMapSize.value[ j ] = light.shadowMapSize;\n\n\t\t\t\t\tuniforms.shadowMatrix.value[ j ] = light.shadowMatrix;\n\n\t\t\t\t\tuniforms.shadowDarkness.value[ j ] = light.shadowDarkness;\n\t\t\t\t\tuniforms.shadowBias.value[ j ] = light.shadowBias;\n\n\t\t\t\t\tj ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// Uniforms (load to GPU)\n\n\tfunction loadUniformsMatrices ( uniforms, object ) {\n\n\t\t_gl.uniformMatrix4fv( uniforms.modelViewMatrix, false, object._modelViewMatrix.elements );\n\n\t\tif ( uniforms.normalMatrix ) {\n\n\t\t\t_gl.uniformMatrix3fv( uniforms.normalMatrix, false, object._normalMatrix.elements );\n\n\t\t}\n\n\t}\n\n\tfunction getTextureUnit() {\n\n\t\tvar textureUnit = _usedTextureUnits;\n\n\t\tif ( textureUnit >= _maxTextures ) {\n\n\t\t\tconsole.warn( 'WebGLRenderer: trying to use ' + textureUnit + ' texture units while this GPU supports only ' + _maxTextures );\n\n\t\t}\n\n\t\t_usedTextureUnits += 1;\n\n\t\treturn textureUnit;\n\n\t}\n\n\tfunction loadUniformsGeneric ( uniforms ) {\n\n\t\tvar texture, textureUnit, offset;\n\n\t\tfor ( var j = 0, jl = uniforms.length; j < jl; j ++ ) {\n\n\t\t\tvar uniform = uniforms[ j ][ 0 ];\n\n\t\t\t// needsUpdate property is not added to all uniforms.\n\t\t\tif ( uniform.needsUpdate === false ) continue;\n\n\t\t\tvar type = uniform.type;\n\t\t\tvar value = uniform.value;\n\t\t\tvar location = uniforms[ j ][ 1 ];\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase '1i':\n\t\t\t\t\t_gl.uniform1i( location, value );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase '1f':\n\t\t\t\t\t_gl.uniform1f( location, value );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase '2f':\n\t\t\t\t\t_gl.uniform2f( location, value[ 0 ], value[ 1 ] );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase '3f':\n\t\t\t\t\t_gl.uniform3f( location, value[ 0 ], value[ 1 ], value[ 2 ] );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase '4f':\n\t\t\t\t\t_gl.uniform4f( location, value[ 0 ], value[ 1 ], value[ 2 ], value[ 3 ] );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase '1iv':\n\t\t\t\t\t_gl.uniform1iv( location, value );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase '3iv':\n\t\t\t\t\t_gl.uniform3iv( location, value );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase '1fv':\n\t\t\t\t\t_gl.uniform1fv( location, value );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase '2fv':\n\t\t\t\t\t_gl.uniform2fv( location, value );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase '3fv':\n\t\t\t\t\t_gl.uniform3fv( location, value );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase '4fv':\n\t\t\t\t\t_gl.uniform4fv( location, value );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Matrix3fv':\n\t\t\t\t\t_gl.uniformMatrix3fv( location, false, value );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Matrix4fv':\n\t\t\t\t\t_gl.uniformMatrix4fv( location, false, value );\n\t\t\t\t\tbreak;\n\n\t\t\t\t//\n\n\t\t\t\tcase 'i':\n\n\t\t\t\t\t// single integer\n\t\t\t\t\t_gl.uniform1i( location, value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'f':\n\n\t\t\t\t\t// single float\n\t\t\t\t\t_gl.uniform1f( location, value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'v2':\n\n\t\t\t\t\t// single THREE.Vector2\n\t\t\t\t\t_gl.uniform2f( location, value.x, value.y );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'v3':\n\n\t\t\t\t\t// single THREE.Vector3\n\t\t\t\t\t_gl.uniform3f( location, value.x, value.y, value.z );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'v4':\n\n\t\t\t\t\t// single THREE.Vector4\n\t\t\t\t\t_gl.uniform4f( location, value.x, value.y, value.z, value.w );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'c':\n\n\t\t\t\t\t// single THREE.Color\n\t\t\t\t\t_gl.uniform3f( location, value.r, value.g, value.b );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'iv1':\n\n\t\t\t\t\t// flat array of integers (JS or typed array)\n\t\t\t\t\t_gl.uniform1iv( location, value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'iv':\n\n\t\t\t\t\t// flat array of integers with 3 x N size (JS or typed array)\n\t\t\t\t\t_gl.uniform3iv( location, value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'fv1':\n\n\t\t\t\t\t// flat array of floats (JS or typed array)\n\t\t\t\t\t_gl.uniform1fv( location, value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'fv':\n\n\t\t\t\t\t// flat array of floats with 3 x N size (JS or typed array)\n\t\t\t\t\t_gl.uniform3fv( location, value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'v2v':\n\n\t\t\t\t\t// array of THREE.Vector2\n\n\t\t\t\t\tif ( uniform._array === undefined ) {\n\n\t\t\t\t\t\tuniform._array = new Float32Array( 2 * value.length );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var i = 0, il = value.length; i < il; i ++ ) {\n\n\t\t\t\t\t\toffset = i * 2;\n\n\t\t\t\t\t\tuniform._array[ offset ]   = value[ i ].x;\n\t\t\t\t\t\tuniform._array[ offset + 1 ] = value[ i ].y;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_gl.uniform2fv( location, uniform._array );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'v3v':\n\n\t\t\t\t\t// array of THREE.Vector3\n\n\t\t\t\t\tif ( uniform._array === undefined ) {\n\n\t\t\t\t\t\tuniform._array = new Float32Array( 3 * value.length );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var i = 0, il = value.length; i < il; i ++ ) {\n\n\t\t\t\t\t\toffset = i * 3;\n\n\t\t\t\t\t\tuniform._array[ offset ]   = value[ i ].x;\n\t\t\t\t\t\tuniform._array[ offset + 1 ] = value[ i ].y;\n\t\t\t\t\t\tuniform._array[ offset + 2 ] = value[ i ].z;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_gl.uniform3fv( location, uniform._array );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'v4v':\n\n\t\t\t\t\t// array of THREE.Vector4\n\n\t\t\t\t\tif ( uniform._array === undefined ) {\n\n\t\t\t\t\t\tuniform._array = new Float32Array( 4 * value.length );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var i = 0, il = value.length; i < il; i ++ ) {\n\n\t\t\t\t\t\toffset = i * 4;\n\n\t\t\t\t\t\tuniform._array[ offset ]   = value[ i ].x;\n\t\t\t\t\t\tuniform._array[ offset + 1 ] = value[ i ].y;\n\t\t\t\t\t\tuniform._array[ offset + 2 ] = value[ i ].z;\n\t\t\t\t\t\tuniform._array[ offset + 3 ] = value[ i ].w;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_gl.uniform4fv( location, uniform._array );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'm3':\n\n\t\t\t\t\t// single THREE.Matrix3\n\t\t\t\t\t_gl.uniformMatrix3fv( location, false, value.elements );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'm3v':\n\n\t\t\t\t\t// array of THREE.Matrix3\n\n\t\t\t\t\tif ( uniform._array === undefined ) {\n\n\t\t\t\t\t\tuniform._array = new Float32Array( 9 * value.length );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var i = 0, il = value.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tvalue[ i ].flattenToArrayOffset( uniform._array, i * 9 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_gl.uniformMatrix3fv( location, false, uniform._array );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'm4':\n\n\t\t\t\t\t// single THREE.Matrix4\n\t\t\t\t\t_gl.uniformMatrix4fv( location, false, value.elements );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'm4v':\n\n\t\t\t\t\t// array of THREE.Matrix4\n\n\t\t\t\t\tif ( uniform._array === undefined ) {\n\n\t\t\t\t\t\tuniform._array = new Float32Array( 16 * value.length );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var i = 0, il = value.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tvalue[ i ].flattenToArrayOffset( uniform._array, i * 16 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_gl.uniformMatrix4fv( location, false, uniform._array );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 't':\n\n\t\t\t\t\t// single THREE.Texture (2d or cube)\n\n\t\t\t\t\ttexture = value;\n\t\t\t\t\ttextureUnit = getTextureUnit();\n\n\t\t\t\t\t_gl.uniform1i( location, textureUnit );\n\n\t\t\t\t\tif ( ! texture ) continue;\n\n\t\t\t\t\tif ( texture instanceof THREE.CubeTexture ||\n\t\t\t\t\t   ( texture.image instanceof Array && texture.image.length === 6 ) ) { // CompressedTexture can have Array in image :/\n\n\t\t\t\t\t\tsetCubeTexture( texture, textureUnit );\n\n\t\t\t\t\t} else if ( texture instanceof THREE.WebGLRenderTargetCube ) {\n\n\t\t\t\t\t\tsetCubeTextureDynamic( texture, textureUnit );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t_this.setTexture( texture, textureUnit );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'tv':\n\n\t\t\t\t\t// array of THREE.Texture (2d)\n\n\t\t\t\t\tif ( uniform._array === undefined ) {\n\n\t\t\t\t\t\tuniform._array = [];\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var i = 0, il = uniform.value.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tuniform._array[ i ] = getTextureUnit();\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_gl.uniform1iv( location, uniform._array );\n\n\t\t\t\t\tfor ( var i = 0, il = uniform.value.length; i < il; i ++ ) {\n\n\t\t\t\t\t\ttexture = uniform.value[ i ];\n\t\t\t\t\t\ttextureUnit = uniform._array[ i ];\n\n\t\t\t\t\t\tif ( ! texture ) continue;\n\n\t\t\t\t\t\t_this.setTexture( texture, textureUnit );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Unknown uniform type: ' + type );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction setupMatrices ( object, camera ) {\n\n\t\tobject._modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\n\t\tobject._normalMatrix.getNormalMatrix( object._modelViewMatrix );\n\n\t}\n\n\t//\n\n\tfunction setColorGamma( array, offset, color, intensitySq ) {\n\n\t\tarray[ offset ]     = color.r * color.r * intensitySq;\n\t\tarray[ offset + 1 ] = color.g * color.g * intensitySq;\n\t\tarray[ offset + 2 ] = color.b * color.b * intensitySq;\n\n\t}\n\n\tfunction setColorLinear( array, offset, color, intensity ) {\n\n\t\tarray[ offset ]     = color.r * intensity;\n\t\tarray[ offset + 1 ] = color.g * intensity;\n\t\tarray[ offset + 2 ] = color.b * intensity;\n\n\t}\n\n\tfunction setupLights ( lights ) {\n\n\t\tvar l, ll, light, n,\n\t\tr = 0, g = 0, b = 0,\n\t\tcolor, skyColor, groundColor,\n\t\tintensity,  intensitySq,\n\t\tposition,\n\t\tdistance,\n\n\t\tzlights = _lights,\n\n\t\tdirColors = zlights.directional.colors,\n\t\tdirPositions = zlights.directional.positions,\n\n\t\tpointColors = zlights.point.colors,\n\t\tpointPositions = zlights.point.positions,\n\t\tpointDistances = zlights.point.distances,\n\n\t\tspotColors = zlights.spot.colors,\n\t\tspotPositions = zlights.spot.positions,\n\t\tspotDistances = zlights.spot.distances,\n\t\tspotDirections = zlights.spot.directions,\n\t\tspotAnglesCos = zlights.spot.anglesCos,\n\t\tspotExponents = zlights.spot.exponents,\n\n\t\themiSkyColors = zlights.hemi.skyColors,\n\t\themiGroundColors = zlights.hemi.groundColors,\n\t\themiPositions = zlights.hemi.positions,\n\n\t\tdirLength = 0,\n\t\tpointLength = 0,\n\t\tspotLength = 0,\n\t\themiLength = 0,\n\n\t\tdirCount = 0,\n\t\tpointCount = 0,\n\t\tspotCount = 0,\n\t\themiCount = 0,\n\n\t\tdirOffset = 0,\n\t\tpointOffset = 0,\n\t\tspotOffset = 0,\n\t\themiOffset = 0;\n\n\t\tfor ( l = 0, ll = lights.length; l < ll; l ++ ) {\n\n\t\t\tlight = lights[ l ];\n\n\t\t\tif ( light.onlyShadow ) continue;\n\n\t\t\tcolor = light.color;\n\t\t\tintensity = light.intensity;\n\t\t\tdistance = light.distance;\n\n\t\t\tif ( light instanceof THREE.AmbientLight ) {\n\n\t\t\t\tif ( ! light.visible ) continue;\n\n\t\t\t\tif ( _this.gammaInput ) {\n\n\t\t\t\t\tr += color.r * color.r;\n\t\t\t\t\tg += color.g * color.g;\n\t\t\t\t\tb += color.b * color.b;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tr += color.r;\n\t\t\t\t\tg += color.g;\n\t\t\t\t\tb += color.b;\n\n\t\t\t\t}\n\n\t\t\t} else if ( light instanceof THREE.DirectionalLight ) {\n\n\t\t\t\tdirCount += 1;\n\n\t\t\t\tif ( ! light.visible ) continue;\n\n\t\t\t\t_direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\t_vector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\t_direction.sub( _vector3 );\n\t\t\t\t_direction.normalize();\n\n\t\t\t\tdirOffset = dirLength * 3;\n\n\t\t\t\tdirPositions[ dirOffset ]     = _direction.x;\n\t\t\t\tdirPositions[ dirOffset + 1 ] = _direction.y;\n\t\t\t\tdirPositions[ dirOffset + 2 ] = _direction.z;\n\n\t\t\t\tif ( _this.gammaInput ) {\n\n\t\t\t\t\tsetColorGamma( dirColors, dirOffset, color, intensity * intensity );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tsetColorLinear( dirColors, dirOffset, color, intensity );\n\n\t\t\t\t}\n\n\t\t\t\tdirLength += 1;\n\n\t\t\t} else if ( light instanceof THREE.PointLight ) {\n\n\t\t\t\tpointCount += 1;\n\n\t\t\t\tif ( ! light.visible ) continue;\n\n\t\t\t\tpointOffset = pointLength * 3;\n\n\t\t\t\tif ( _this.gammaInput ) {\n\n\t\t\t\t\tsetColorGamma( pointColors, pointOffset, color, intensity * intensity );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tsetColorLinear( pointColors, pointOffset, color, intensity );\n\n\t\t\t\t}\n\n\t\t\t\t_vector3.setFromMatrixPosition( light.matrixWorld );\n\n\t\t\t\tpointPositions[ pointOffset ]     = _vector3.x;\n\t\t\t\tpointPositions[ pointOffset + 1 ] = _vector3.y;\n\t\t\t\tpointPositions[ pointOffset + 2 ] = _vector3.z;\n\n\t\t\t\tpointDistances[ pointLength ] = distance;\n\n\t\t\t\tpointLength += 1;\n\n\t\t\t} else if ( light instanceof THREE.SpotLight ) {\n\n\t\t\t\tspotCount += 1;\n\n\t\t\t\tif ( ! light.visible ) continue;\n\n\t\t\t\tspotOffset = spotLength * 3;\n\n\t\t\t\tif ( _this.gammaInput ) {\n\n\t\t\t\t\tsetColorGamma( spotColors, spotOffset, color, intensity * intensity );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tsetColorLinear( spotColors, spotOffset, color, intensity );\n\n\t\t\t\t}\n\n\t\t\t\t_direction.setFromMatrixPosition( light.matrixWorld );\n\n\t\t\t\tspotPositions[ spotOffset ]     = _direction.x;\n\t\t\t\tspotPositions[ spotOffset + 1 ] = _direction.y;\n\t\t\t\tspotPositions[ spotOffset + 2 ] = _direction.z;\n\n\t\t\t\tspotDistances[ spotLength ] = distance;\n\n\t\t\t\t_vector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\t_direction.sub( _vector3 );\n\t\t\t\t_direction.normalize();\n\n\t\t\t\tspotDirections[ spotOffset ]     = _direction.x;\n\t\t\t\tspotDirections[ spotOffset + 1 ] = _direction.y;\n\t\t\t\tspotDirections[ spotOffset + 2 ] = _direction.z;\n\n\t\t\t\tspotAnglesCos[ spotLength ] = Math.cos( light.angle );\n\t\t\t\tspotExponents[ spotLength ] = light.exponent;\n\n\t\t\t\tspotLength += 1;\n\n\t\t\t} else if ( light instanceof THREE.HemisphereLight ) {\n\n\t\t\t\themiCount += 1;\n\n\t\t\t\tif ( ! light.visible ) continue;\n\n\t\t\t\t_direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\t_direction.normalize();\n\n\t\t\t\themiOffset = hemiLength * 3;\n\n\t\t\t\themiPositions[ hemiOffset ]     = _direction.x;\n\t\t\t\themiPositions[ hemiOffset + 1 ] = _direction.y;\n\t\t\t\themiPositions[ hemiOffset + 2 ] = _direction.z;\n\n\t\t\t\tskyColor = light.color;\n\t\t\t\tgroundColor = light.groundColor;\n\n\t\t\t\tif ( _this.gammaInput ) {\n\n\t\t\t\t\tintensitySq = intensity * intensity;\n\n\t\t\t\t\tsetColorGamma( hemiSkyColors, hemiOffset, skyColor, intensitySq );\n\t\t\t\t\tsetColorGamma( hemiGroundColors, hemiOffset, groundColor, intensitySq );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tsetColorLinear( hemiSkyColors, hemiOffset, skyColor, intensity );\n\t\t\t\t\tsetColorLinear( hemiGroundColors, hemiOffset, groundColor, intensity );\n\n\t\t\t\t}\n\n\t\t\t\themiLength += 1;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// null eventual remains from removed lights\n\t\t// (this is to avoid if in shader)\n\n\t\tfor ( l = dirLength * 3, ll = Math.max( dirColors.length, dirCount * 3 ); l < ll; l ++ ) dirColors[ l ] = 0.0;\n\t\tfor ( l = pointLength * 3, ll = Math.max( pointColors.length, pointCount * 3 ); l < ll; l ++ ) pointColors[ l ] = 0.0;\n\t\tfor ( l = spotLength * 3, ll = Math.max( spotColors.length, spotCount * 3 ); l < ll; l ++ ) spotColors[ l ] = 0.0;\n\t\tfor ( l = hemiLength * 3, ll = Math.max( hemiSkyColors.length, hemiCount * 3 ); l < ll; l ++ ) hemiSkyColors[ l ] = 0.0;\n\t\tfor ( l = hemiLength * 3, ll = Math.max( hemiGroundColors.length, hemiCount * 3 ); l < ll; l ++ ) hemiGroundColors[ l ] = 0.0;\n\n\t\tzlights.directional.length = dirLength;\n\t\tzlights.point.length = pointLength;\n\t\tzlights.spot.length = spotLength;\n\t\tzlights.hemi.length = hemiLength;\n\n\t\tzlights.ambient[ 0 ] = r;\n\t\tzlights.ambient[ 1 ] = g;\n\t\tzlights.ambient[ 2 ] = b;\n\n\t}\n\n\t// GL state setting\n\n\tthis.setFaceCulling = function ( cullFace, frontFaceDirection ) {\n\n\t\tif ( cullFace === THREE.CullFaceNone ) {\n\n\t\t\t_gl.disable( _gl.CULL_FACE );\n\n\t\t} else {\n\n\t\t\tif ( frontFaceDirection === THREE.FrontFaceDirectionCW ) {\n\n\t\t\t\t_gl.frontFace( _gl.CW );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.frontFace( _gl.CCW );\n\n\t\t\t}\n\n\t\t\tif ( cullFace === THREE.CullFaceBack ) {\n\n\t\t\t\t_gl.cullFace( _gl.BACK );\n\n\t\t\t} else if ( cullFace === THREE.CullFaceFront ) {\n\n\t\t\t\t_gl.cullFace( _gl.FRONT );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.cullFace( _gl.FRONT_AND_BACK );\n\n\t\t\t}\n\n\t\t\t_gl.enable( _gl.CULL_FACE );\n\n\t\t}\n\n\t};\n\n\tthis.setMaterialFaces = function ( material ) {\n\n\t\tvar doubleSided = material.side === THREE.DoubleSide;\n\t\tvar flipSided = material.side === THREE.BackSide;\n\n\t\tif ( _oldDoubleSided !== doubleSided ) {\n\n\t\t\tif ( doubleSided ) {\n\n\t\t\t\t_gl.disable( _gl.CULL_FACE );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.enable( _gl.CULL_FACE );\n\n\t\t\t}\n\n\t\t\t_oldDoubleSided = doubleSided;\n\n\t\t}\n\n\t\tif ( _oldFlipSided !== flipSided ) {\n\n\t\t\tif ( flipSided ) {\n\n\t\t\t\t_gl.frontFace( _gl.CW );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.frontFace( _gl.CCW );\n\n\t\t\t}\n\n\t\t\t_oldFlipSided = flipSided;\n\n\t\t}\n\n\t};\n\n\tthis.setDepthTest = function ( depthTest ) {\n\n\t\tif ( _oldDepthTest !== depthTest ) {\n\n\t\t\tif ( depthTest ) {\n\n\t\t\t\t_gl.enable( _gl.DEPTH_TEST );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.disable( _gl.DEPTH_TEST );\n\n\t\t\t}\n\n\t\t\t_oldDepthTest = depthTest;\n\n\t\t}\n\n\t};\n\n\tthis.setDepthWrite = function ( depthWrite ) {\n\n\t\tif ( _oldDepthWrite !== depthWrite ) {\n\n\t\t\t_gl.depthMask( depthWrite );\n\t\t\t_oldDepthWrite = depthWrite;\n\n\t\t}\n\n\t};\n\n\tfunction setLineWidth ( width ) {\n\n\t\tif ( width !== _oldLineWidth ) {\n\n\t\t\t_gl.lineWidth( width );\n\n\t\t\t_oldLineWidth = width;\n\n\t\t}\n\n\t}\n\n\tfunction setPolygonOffset ( polygonoffset, factor, units ) {\n\n\t\tif ( _oldPolygonOffset !== polygonoffset ) {\n\n\t\t\tif ( polygonoffset ) {\n\n\t\t\t\t_gl.enable( _gl.POLYGON_OFFSET_FILL );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.disable( _gl.POLYGON_OFFSET_FILL );\n\n\t\t\t}\n\n\t\t\t_oldPolygonOffset = polygonoffset;\n\n\t\t}\n\n\t\tif ( polygonoffset && ( _oldPolygonOffsetFactor !== factor || _oldPolygonOffsetUnits !== units ) ) {\n\n\t\t\t_gl.polygonOffset( factor, units );\n\n\t\t\t_oldPolygonOffsetFactor = factor;\n\t\t\t_oldPolygonOffsetUnits = units;\n\n\t\t}\n\n\t}\n\n\tthis.setBlending = function ( blending, blendEquation, blendSrc, blendDst ) {\n\n\t\tif ( blending !== _oldBlending ) {\n\n\t\t\tif ( blending === THREE.NoBlending ) {\n\n\t\t\t\t_gl.disable( _gl.BLEND );\n\n\t\t\t} else if ( blending === THREE.AdditiveBlending ) {\n\n\t\t\t\t_gl.enable( _gl.BLEND );\n\t\t\t\t_gl.blendEquation( _gl.FUNC_ADD );\n\t\t\t\t_gl.blendFunc( _gl.SRC_ALPHA, _gl.ONE );\n\n\t\t\t} else if ( blending === THREE.SubtractiveBlending ) {\n\n\t\t\t\t// TODO: Find blendFuncSeparate() combination\n\t\t\t\t_gl.enable( _gl.BLEND );\n\t\t\t\t_gl.blendEquation( _gl.FUNC_ADD );\n\t\t\t\t_gl.blendFunc( _gl.ZERO, _gl.ONE_MINUS_SRC_COLOR );\n\n\t\t\t} else if ( blending === THREE.MultiplyBlending ) {\n\n\t\t\t\t// TODO: Find blendFuncSeparate() combination\n\t\t\t\t_gl.enable( _gl.BLEND );\n\t\t\t\t_gl.blendEquation( _gl.FUNC_ADD );\n\t\t\t\t_gl.blendFunc( _gl.ZERO, _gl.SRC_COLOR );\n\n\t\t\t} else if ( blending === THREE.CustomBlending ) {\n\n\t\t\t\t_gl.enable( _gl.BLEND );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.enable( _gl.BLEND );\n\t\t\t\t_gl.blendEquationSeparate( _gl.FUNC_ADD, _gl.FUNC_ADD );\n\t\t\t\t_gl.blendFuncSeparate( _gl.SRC_ALPHA, _gl.ONE_MINUS_SRC_ALPHA, _gl.ONE, _gl.ONE_MINUS_SRC_ALPHA );\n\n\t\t\t}\n\n\t\t\t_oldBlending = blending;\n\n\t\t}\n\n\t\tif ( blending === THREE.CustomBlending ) {\n\n\t\t\tif ( blendEquation !== _oldBlendEquation ) {\n\n\t\t\t\t_gl.blendEquation( paramThreeToGL( blendEquation ) );\n\n\t\t\t\t_oldBlendEquation = blendEquation;\n\n\t\t\t}\n\n\t\t\tif ( blendSrc !== _oldBlendSrc || blendDst !== _oldBlendDst ) {\n\n\t\t\t\t_gl.blendFunc( paramThreeToGL( blendSrc ), paramThreeToGL( blendDst ) );\n\n\t\t\t\t_oldBlendSrc = blendSrc;\n\t\t\t\t_oldBlendDst = blendDst;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t_oldBlendEquation = null;\n\t\t\t_oldBlendSrc = null;\n\t\t\t_oldBlendDst = null;\n\n\t\t}\n\n\t};\n\n\t// Textures\n\n\tfunction setTextureParameters ( textureType, texture, isImagePowerOfTwo ) {\n\n\t\tvar extension;\n\n\t\tif ( isImagePowerOfTwo ) {\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, paramThreeToGL( texture.wrapS ) );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, paramThreeToGL( texture.wrapT ) );\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, paramThreeToGL( texture.magFilter ) );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, paramThreeToGL( texture.minFilter ) );\n\n\t\t} else {\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, _gl.CLAMP_TO_EDGE );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, _gl.CLAMP_TO_EDGE );\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, filterFallback( texture.magFilter ) );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, filterFallback( texture.minFilter ) );\n\n\t\t}\n\n\t\textension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\tif ( extension && texture.type !== THREE.FloatType ) {\n\n\t\t\tif ( texture.anisotropy > 1 || texture.__oldAnisotropy ) {\n\n\t\t\t\t_gl.texParameterf( textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min( texture.anisotropy, _this.getMaxAnisotropy() ) );\n\t\t\t\ttexture.__oldAnisotropy = texture.anisotropy;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tthis.uploadTexture = function ( texture ) {\n\n\t\tif ( texture.__webglInit === undefined ) {\n\n\t\t\ttexture.__webglInit = true;\n\n\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t\ttexture.__webglTexture = _gl.createTexture();\n\n\t\t\t_this.info.memory.textures ++;\n\n\t\t}\n\n\t\t_gl.bindTexture( _gl.TEXTURE_2D, texture.__webglTexture );\n\n\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\n\t\t_gl.pixelStorei( _gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, texture.premultiplyAlpha );\n\t\t_gl.pixelStorei( _gl.UNPACK_ALIGNMENT, texture.unpackAlignment );\n\n\t\ttexture.image = clampToMaxSize( texture.image, _maxTextureSize );\n\n\t\tvar image = texture.image,\n\t\tisImagePowerOfTwo = THREE.Math.isPowerOfTwo( image.width ) && THREE.Math.isPowerOfTwo( image.height ),\n\t\tglFormat = paramThreeToGL( texture.format ),\n\t\tglType = paramThreeToGL( texture.type );\n\n\t\tsetTextureParameters( _gl.TEXTURE_2D, texture, isImagePowerOfTwo );\n\n\t\tvar mipmap, mipmaps = texture.mipmaps;\n\n\t\tif ( texture instanceof THREE.DataTexture ) {\n\n\t\t\t// use manually created mipmaps if available\n\t\t\t// if there are no manual mipmaps\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\tif ( mipmaps.length > 0 && isImagePowerOfTwo ) {\n\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\tmipmap = mipmaps[ i ];\n\t\t\t\t\t_gl.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.generateMipmaps = false;\n\n\t\t\t} else {\n\n\t\t\t\t_gl.texImage2D( _gl.TEXTURE_2D, 0, glFormat, image.width, image.height, 0, glFormat, glType, image.data );\n\n\t\t\t}\n\n\t\t} else if ( texture instanceof THREE.CompressedTexture ) {\n\n\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\tmipmap = mipmaps[ i ];\n\n\t\t\t\tif ( texture.format !== THREE.RGBAFormat && texture.format !== THREE.RGBFormat ) {\n\n\t\t\t\t\tif ( getCompressedTextureFormats().indexOf( glFormat ) > -1 ) {\n\n\t\t\t\t\t\t_gl.compressedTexImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( \"Attempt to load unsupported compressed texture format\" );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_gl.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else { // regular Texture (image, video, canvas)\n\n\t\t\t// use manually created mipmaps if available\n\t\t\t// if there are no manual mipmaps\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\tif ( mipmaps.length > 0 && isImagePowerOfTwo ) {\n\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\tmipmap = mipmaps[ i ];\n\t\t\t\t\t_gl.texImage2D( _gl.TEXTURE_2D, i, glFormat, glFormat, glType, mipmap );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.generateMipmaps = false;\n\n\t\t\t} else {\n\n\t\t\t\t_gl.texImage2D( _gl.TEXTURE_2D, 0, glFormat, glFormat, glType, texture.image );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( texture.generateMipmaps && isImagePowerOfTwo ) _gl.generateMipmap( _gl.TEXTURE_2D );\n\n\t\ttexture.needsUpdate = false;\n\n\t\tif ( texture.onUpdate ) texture.onUpdate();\n\n\t};\n\n\tthis.setTexture = function ( texture, slot ) {\n\n\t\t_gl.activeTexture( _gl.TEXTURE0 + slot );\n\n\t\tif ( texture.needsUpdate ) {\n\n\t\t\t_this.uploadTexture( texture );\n\n\t\t} else {\n\n\t\t\t_gl.bindTexture( _gl.TEXTURE_2D, texture.__webglTexture );\n\n\t\t}\n\n\t};\n\n\tfunction clampToMaxSize ( image, maxSize ) {\n\n\t\tif ( image.width > maxSize || image.height > maxSize ) {\n\n\t\t\t// Warning: Scaling through the canvas will only work with images that use\n\t\t\t// premultiplied alpha.\n\n\t\t\tvar scale = maxSize / Math.max( image.width, image.height );\n\n\t\t\tvar canvas = document.createElement( 'canvas' );\n\t\t\tcanvas.width = Math.floor( image.width * scale );\n\t\t\tcanvas.height = Math.floor( image.height * scale );\n\n\t\t\tvar context = canvas.getContext( '2d' );\n\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height, 0, 0, canvas.width, canvas.height );\n\n\t\t\tconsole.log( 'THREE.WebGLRenderer:', image, 'is too big (' + image.width + 'x' + image.height + '). Resized to ' + canvas.width + 'x' + canvas.height + '.' );\n\n\t\t\treturn canvas;\n\n\t\t}\n\n\t\treturn image;\n\n\t}\n\n\tfunction setCubeTexture ( texture, slot ) {\n\n\t\tif ( texture.image.length === 6 ) {\n\n\t\t\tif ( texture.needsUpdate ) {\n\n\t\t\t\tif ( ! texture.image.__webglTextureCube ) {\n\n\t\t\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t\t\t\ttexture.image.__webglTextureCube = _gl.createTexture();\n\n\t\t\t\t\t_this.info.memory.textures ++;\n\n\t\t\t\t}\n\n\t\t\t\t_gl.activeTexture( _gl.TEXTURE0 + slot );\n\t\t\t\t_gl.bindTexture( _gl.TEXTURE_CUBE_MAP, texture.image.__webglTextureCube );\n\n\t\t\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\n\n\t\t\t\tvar isCompressed = texture instanceof THREE.CompressedTexture;\n\t\t\t\tvar isDataTexture = texture.image[ 0 ] instanceof THREE.DataTexture;\n\n\t\t\t\tvar cubeImage = [];\n\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tif ( _this.autoScaleCubemaps && ! isCompressed && ! isDataTexture ) {\n\n\t\t\t\t\t\tcubeImage[ i ] = clampToMaxSize( texture.image[ i ], _maxCubemapSize );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tcubeImage[ i ] = isDataTexture ? texture.image[ i ].image : texture.image[ i ];\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tvar image = cubeImage[ 0 ],\n\t\t\t\tisImagePowerOfTwo = THREE.Math.isPowerOfTwo( image.width ) && THREE.Math.isPowerOfTwo( image.height ),\n\t\t\t\tglFormat = paramThreeToGL( texture.format ),\n\t\t\t\tglType = paramThreeToGL( texture.type );\n\n\t\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, texture, isImagePowerOfTwo );\n\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tif ( ! isCompressed ) {\n\n\t\t\t\t\t\tif ( isDataTexture ) {\n\n\t\t\t\t\t\t\t_gl.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, cubeImage[ i ].width, cubeImage[ i ].height, 0, glFormat, glType, cubeImage[ i ].data );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t_gl.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, glFormat, glType, cubeImage[ i ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvar mipmap, mipmaps = cubeImage[ i ].mipmaps;\n\n\t\t\t\t\t\tfor ( var j = 0, jl = mipmaps.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tmipmap = mipmaps[ j ];\n\n\t\t\t\t\t\t\tif ( texture.format !== THREE.RGBAFormat && texture.format !== THREE.RGBFormat ) {\n\n\t\t\t\t\t\t\t\tif ( getCompressedTextureFormats().indexOf( glFormat ) > -1 ) {\n\n\t\t\t\t\t\t\t\t\t_gl.compressedTexImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\tconsole.warn( \"Attempt to load unsupported compressed texture format\" );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t_gl.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( texture.generateMipmaps && isImagePowerOfTwo ) {\n\n\t\t\t\t\t_gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.needsUpdate = false;\n\n\t\t\t\tif ( texture.onUpdate ) texture.onUpdate();\n\n\t\t\t} else {\n\n\t\t\t\t_gl.activeTexture( _gl.TEXTURE0 + slot );\n\t\t\t\t_gl.bindTexture( _gl.TEXTURE_CUBE_MAP, texture.image.__webglTextureCube );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction setCubeTextureDynamic ( texture, slot ) {\n\n\t\t_gl.activeTexture( _gl.TEXTURE0 + slot );\n\t\t_gl.bindTexture( _gl.TEXTURE_CUBE_MAP, texture.__webglTexture );\n\n\t}\n\n\t// Render targets\n\n\tfunction setupFrameBuffer ( framebuffer, renderTarget, textureTarget ) {\n\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, textureTarget, renderTarget.__webglTexture, 0 );\n\n\t}\n\n\tfunction setupRenderBuffer ( renderbuffer, renderTarget  ) {\n\n\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, renderbuffer );\n\n\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\n\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_COMPONENT16, renderTarget.width, renderTarget.height );\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\n\n\t\t/* For some reason this is not working. Defaulting to RGBA4.\n\t\t} else if ( ! renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\n\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.STENCIL_INDEX8, renderTarget.width, renderTarget.height );\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\n\t\t*/\n\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\n\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_STENCIL, renderTarget.width, renderTarget.height );\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\n\n\t\t} else {\n\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.RGBA4, renderTarget.width, renderTarget.height );\n\n\t\t}\n\n\t}\n\n\tthis.setRenderTarget = function ( renderTarget ) {\n\n\t\tvar isCube = ( renderTarget instanceof THREE.WebGLRenderTargetCube );\n\n\t\tif ( renderTarget && renderTarget.__webglFramebuffer === undefined ) {\n\n\t\t\tif ( renderTarget.depthBuffer === undefined ) renderTarget.depthBuffer = true;\n\t\t\tif ( renderTarget.stencilBuffer === undefined ) renderTarget.stencilBuffer = true;\n\n\t\t\trenderTarget.addEventListener( 'dispose', onRenderTargetDispose );\n\n\t\t\trenderTarget.__webglTexture = _gl.createTexture();\n\n\t\t\t_this.info.memory.textures ++;\n\n\t\t\t// Setup texture, create render and frame buffers\n\n\t\t\tvar isTargetPowerOfTwo = THREE.Math.isPowerOfTwo( renderTarget.width ) && THREE.Math.isPowerOfTwo( renderTarget.height ),\n\t\t\t\tglFormat = paramThreeToGL( renderTarget.format ),\n\t\t\t\tglType = paramThreeToGL( renderTarget.type );\n\n\t\t\tif ( isCube ) {\n\n\t\t\t\trenderTarget.__webglFramebuffer = [];\n\t\t\t\trenderTarget.__webglRenderbuffer = [];\n\n\t\t\t\t_gl.bindTexture( _gl.TEXTURE_CUBE_MAP, renderTarget.__webglTexture );\n\t\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, renderTarget, isTargetPowerOfTwo );\n\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\trenderTarget.__webglFramebuffer[ i ] = _gl.createFramebuffer();\n\t\t\t\t\trenderTarget.__webglRenderbuffer[ i ] = _gl.createRenderbuffer();\n\n\t\t\t\t\t_gl.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\n\n\t\t\t\t\tsetupFrameBuffer( renderTarget.__webglFramebuffer[ i ], renderTarget, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i );\n\t\t\t\t\tsetupRenderBuffer( renderTarget.__webglRenderbuffer[ i ], renderTarget );\n\n\t\t\t\t}\n\n\t\t\t\tif ( isTargetPowerOfTwo ) _gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\n\n\t\t\t} else {\n\n\t\t\t\trenderTarget.__webglFramebuffer = _gl.createFramebuffer();\n\n\t\t\t\tif ( renderTarget.shareDepthFrom ) {\n\n\t\t\t\t\trenderTarget.__webglRenderbuffer = renderTarget.shareDepthFrom.__webglRenderbuffer;\n\n\t\t\t\t} else {\n\n\t\t\t\t\trenderTarget.__webglRenderbuffer = _gl.createRenderbuffer();\n\n\t\t\t\t}\n\n\t\t\t\t_gl.bindTexture( _gl.TEXTURE_2D, renderTarget.__webglTexture );\n\t\t\t\tsetTextureParameters( _gl.TEXTURE_2D, renderTarget, isTargetPowerOfTwo );\n\n\t\t\t\t_gl.texImage2D( _gl.TEXTURE_2D, 0, glFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\n\n\t\t\t\tsetupFrameBuffer( renderTarget.__webglFramebuffer, renderTarget, _gl.TEXTURE_2D );\n\n\t\t\t\tif ( renderTarget.shareDepthFrom ) {\n\n\t\t\t\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\n\n\t\t\t\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.RENDERBUFFER, renderTarget.__webglRenderbuffer );\n\n\t\t\t\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\n\n\t\t\t\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderTarget.__webglRenderbuffer );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tsetupRenderBuffer( renderTarget.__webglRenderbuffer, renderTarget );\n\n\t\t\t\t}\n\n\t\t\t\tif ( isTargetPowerOfTwo ) _gl.generateMipmap( _gl.TEXTURE_2D );\n\n\t\t\t}\n\n\t\t\t// Release everything\n\n\t\t\tif ( isCube ) {\n\n\t\t\t\t_gl.bindTexture( _gl.TEXTURE_CUBE_MAP, null );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.bindTexture( _gl.TEXTURE_2D, null );\n\n\t\t\t}\n\n\t\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, null );\n\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\n\n\t\t}\n\n\t\tvar framebuffer, width, height, vx, vy;\n\n\t\tif ( renderTarget ) {\n\n\t\t\tif ( isCube ) {\n\n\t\t\t\tframebuffer = renderTarget.__webglFramebuffer[ renderTarget.activeCubeFace ];\n\n\t\t\t} else {\n\n\t\t\t\tframebuffer = renderTarget.__webglFramebuffer;\n\n\t\t\t}\n\n\t\t\twidth = renderTarget.width;\n\t\t\theight = renderTarget.height;\n\n\t\t\tvx = 0;\n\t\t\tvy = 0;\n\n\t\t} else {\n\n\t\t\tframebuffer = null;\n\n\t\t\twidth = _viewportWidth;\n\t\t\theight = _viewportHeight;\n\n\t\t\tvx = _viewportX;\n\t\t\tvy = _viewportY;\n\n\t\t}\n\n\t\tif ( framebuffer !== _currentFramebuffer ) {\n\n\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\t\t\t_gl.viewport( vx, vy, width, height );\n\n\t\t\t_currentFramebuffer = framebuffer;\n\n\t\t}\n\n\t\t_currentWidth = width;\n\t\t_currentHeight = height;\n\n\t};\n\n\tfunction updateRenderTargetMipmap ( renderTarget ) {\n\n\t\tif ( renderTarget instanceof THREE.WebGLRenderTargetCube ) {\n\n\t\t\t_gl.bindTexture( _gl.TEXTURE_CUBE_MAP, renderTarget.__webglTexture );\n\t\t\t_gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\n\t\t\t_gl.bindTexture( _gl.TEXTURE_CUBE_MAP, null );\n\n\t\t} else {\n\n\t\t\t_gl.bindTexture( _gl.TEXTURE_2D, renderTarget.__webglTexture );\n\t\t\t_gl.generateMipmap( _gl.TEXTURE_2D );\n\t\t\t_gl.bindTexture( _gl.TEXTURE_2D, null );\n\n\t\t}\n\n\t}\n\n\t// Fallback filters for non-power-of-2 textures\n\n\tfunction filterFallback ( f ) {\n\n\t\tif ( f === THREE.NearestFilter || f === THREE.NearestMipMapNearestFilter || f === THREE.NearestMipMapLinearFilter ) {\n\n\t\t\treturn _gl.NEAREST;\n\n\t\t}\n\n\t\treturn _gl.LINEAR;\n\n\t}\n\n\t// Map three.js constants to WebGL constants\n\n\tfunction paramThreeToGL ( p ) {\n\n\t\tvar extension;\n\n\t\tif ( p === THREE.RepeatWrapping ) return _gl.REPEAT;\n\t\tif ( p === THREE.ClampToEdgeWrapping ) return _gl.CLAMP_TO_EDGE;\n\t\tif ( p === THREE.MirroredRepeatWrapping ) return _gl.MIRRORED_REPEAT;\n\n\t\tif ( p === THREE.NearestFilter ) return _gl.NEAREST;\n\t\tif ( p === THREE.NearestMipMapNearestFilter ) return _gl.NEAREST_MIPMAP_NEAREST;\n\t\tif ( p === THREE.NearestMipMapLinearFilter ) return _gl.NEAREST_MIPMAP_LINEAR;\n\n\t\tif ( p === THREE.LinearFilter ) return _gl.LINEAR;\n\t\tif ( p === THREE.LinearMipMapNearestFilter ) return _gl.LINEAR_MIPMAP_NEAREST;\n\t\tif ( p === THREE.LinearMipMapLinearFilter ) return _gl.LINEAR_MIPMAP_LINEAR;\n\n\t\tif ( p === THREE.UnsignedByteType ) return _gl.UNSIGNED_BYTE;\n\t\tif ( p === THREE.UnsignedShort4444Type ) return _gl.UNSIGNED_SHORT_4_4_4_4;\n\t\tif ( p === THREE.UnsignedShort5551Type ) return _gl.UNSIGNED_SHORT_5_5_5_1;\n\t\tif ( p === THREE.UnsignedShort565Type ) return _gl.UNSIGNED_SHORT_5_6_5;\n\n\t\tif ( p === THREE.ByteType ) return _gl.BYTE;\n\t\tif ( p === THREE.ShortType ) return _gl.SHORT;\n\t\tif ( p === THREE.UnsignedShortType ) return _gl.UNSIGNED_SHORT;\n\t\tif ( p === THREE.IntType ) return _gl.INT;\n\t\tif ( p === THREE.UnsignedIntType ) return _gl.UNSIGNED_INT;\n\t\tif ( p === THREE.FloatType ) return _gl.FLOAT;\n\n\t\tif ( p === THREE.AlphaFormat ) return _gl.ALPHA;\n\t\tif ( p === THREE.RGBFormat ) return _gl.RGB;\n\t\tif ( p === THREE.RGBAFormat ) return _gl.RGBA;\n\t\tif ( p === THREE.LuminanceFormat ) return _gl.LUMINANCE;\n\t\tif ( p === THREE.LuminanceAlphaFormat ) return _gl.LUMINANCE_ALPHA;\n\n\t\tif ( p === THREE.AddEquation ) return _gl.FUNC_ADD;\n\t\tif ( p === THREE.SubtractEquation ) return _gl.FUNC_SUBTRACT;\n\t\tif ( p === THREE.ReverseSubtractEquation ) return _gl.FUNC_REVERSE_SUBTRACT;\n\n\t\tif ( p === THREE.ZeroFactor ) return _gl.ZERO;\n\t\tif ( p === THREE.OneFactor ) return _gl.ONE;\n\t\tif ( p === THREE.SrcColorFactor ) return _gl.SRC_COLOR;\n\t\tif ( p === THREE.OneMinusSrcColorFactor ) return _gl.ONE_MINUS_SRC_COLOR;\n\t\tif ( p === THREE.SrcAlphaFactor ) return _gl.SRC_ALPHA;\n\t\tif ( p === THREE.OneMinusSrcAlphaFactor ) return _gl.ONE_MINUS_SRC_ALPHA;\n\t\tif ( p === THREE.DstAlphaFactor ) return _gl.DST_ALPHA;\n\t\tif ( p === THREE.OneMinusDstAlphaFactor ) return _gl.ONE_MINUS_DST_ALPHA;\n\n\t\tif ( p === THREE.DstColorFactor ) return _gl.DST_COLOR;\n\t\tif ( p === THREE.OneMinusDstColorFactor ) return _gl.ONE_MINUS_DST_COLOR;\n\t\tif ( p === THREE.SrcAlphaSaturateFactor ) return _gl.SRC_ALPHA_SATURATE;\n\n\t\textension = extensions.get( 'WEBGL_compressed_texture_s3tc' );\n\n\t\tif ( extension !== null ) {\n\n\t\t\tif ( p === THREE.RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\n\t\t\tif ( p === THREE.RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\n\t\t\tif ( p === THREE.RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\n\t\t\tif ( p === THREE.RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\n\n\t\t}\n\n\t\textension = extensions.get( 'WEBGL_compressed_texture_pvrtc' );\n\n\t\tif ( extension !== null ) {\n\n\t\t\tif ( p === THREE.RGB_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\n\t\t\tif ( p === THREE.RGB_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\n\t\t\tif ( p === THREE.RGBA_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\n\t\t\tif ( p === THREE.RGBA_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\n\n\t\t}\n\n\t\textension = extensions.get( 'EXT_blend_minmax' );\n\n\t\tif ( extension !== null ) {\n\n\t\t\tif ( p === THREE.MinEquation ) return extension.MIN_EXT;\n\t\t\tif ( p === THREE.MaxEquation ) return extension.MAX_EXT;\n\n\t\t}\n\n\t\treturn 0;\n\n\t}\n\n\t// Allocations\n\n\tfunction allocateBones ( object ) {\n\n\t\tif ( _supportsBoneTextures && object && object.skeleton && object.skeleton.useVertexTexture ) {\n\n\t\t\treturn 1024;\n\n\t\t} else {\n\n\t\t\t// default for when object is not specified\n\t\t\t// ( for example when prebuilding shader\n\t\t\t//   to be used with multiple objects )\n\t\t\t//\n\t\t\t//  - leave some extra space for other uniforms\n\t\t\t//  - limit here is ANGLE's 254 max uniform vectors\n\t\t\t//    (up to 54 should be safe)\n\n\t\t\tvar nVertexUniforms = _gl.getParameter( _gl.MAX_VERTEX_UNIFORM_VECTORS );\n\t\t\tvar nVertexMatrices = Math.floor( ( nVertexUniforms - 20 ) / 4 );\n\n\t\t\tvar maxBones = nVertexMatrices;\n\n\t\t\tif ( object !== undefined && object instanceof THREE.SkinnedMesh ) {\n\n\t\t\t\tmaxBones = Math.min( object.skeleton.bones.length, maxBones );\n\n\t\t\t\tif ( maxBones < object.skeleton.bones.length ) {\n\n\t\t\t\t\tconsole.warn( 'WebGLRenderer: too many bones - ' + object.skeleton.bones.length + ', this GPU supports just ' + maxBones + ' (try OpenGL instead of ANGLE)' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn maxBones;\n\n\t\t}\n\n\t}\n\n\tfunction allocateLights( lights ) {\n\n\t\tvar dirLights = 0;\n\t\tvar pointLights = 0;\n\t\tvar spotLights = 0;\n\t\tvar hemiLights = 0;\n\n\t\tfor ( var l = 0, ll = lights.length; l < ll; l ++ ) {\n\n\t\t\tvar light = lights[ l ];\n\n\t\t\tif ( light.onlyShadow || light.visible === false ) continue;\n\n\t\t\tif ( light instanceof THREE.DirectionalLight ) dirLights ++;\n\t\t\tif ( light instanceof THREE.PointLight ) pointLights ++;\n\t\t\tif ( light instanceof THREE.SpotLight ) spotLights ++;\n\t\t\tif ( light instanceof THREE.HemisphereLight ) hemiLights ++;\n\n\t\t}\n\n\t\treturn { 'directional': dirLights, 'point': pointLights, 'spot': spotLights, 'hemi': hemiLights };\n\n\t}\n\n\tfunction allocateShadows( lights ) {\n\n\t\tvar maxShadows = 0;\n\n\t\tfor ( var l = 0, ll = lights.length; l < ll; l ++ ) {\n\n\t\t\tvar light = lights[ l ];\n\n\t\t\tif ( ! light.castShadow ) continue;\n\n\t\t\tif ( light instanceof THREE.SpotLight ) maxShadows ++;\n\t\t\tif ( light instanceof THREE.DirectionalLight && ! light.shadowCascade ) maxShadows ++;\n\n\t\t}\n\n\t\treturn maxShadows;\n\n\t}\n\n\t// DEPRECATED\n\t\n\tthis.initMaterial = function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .initMaterial() has been removed.' );\n\n\t};\n\n\tthis.addPrePlugin = function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .addPrePlugin() has been removed.' );\n\n\t};\n\n\tthis.addPostPlugin = function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .addPostPlugin() has been removed.' );\n\n\t};\n\n\tthis.updateShadowMap = function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .updateShadowMap() has been removed.' );\n\n\t};\n\n};\n\n// File:src/renderers/WebGLRenderTarget.js\n\n/**\n * @author szimek / https://github.com/szimek/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.WebGLRenderTarget = function ( width, height, options ) {\n\n\tthis.width = width;\n\tthis.height = height;\n\n\toptions = options || {};\n\n\tthis.wrapS = options.wrapS !== undefined ? options.wrapS : THREE.ClampToEdgeWrapping;\n\tthis.wrapT = options.wrapT !== undefined ? options.wrapT : THREE.ClampToEdgeWrapping;\n\n\tthis.magFilter = options.magFilter !== undefined ? options.magFilter : THREE.LinearFilter;\n\tthis.minFilter = options.minFilter !== undefined ? options.minFilter : THREE.LinearMipMapLinearFilter;\n\n\tthis.anisotropy = options.anisotropy !== undefined ? options.anisotropy : 1;\n\n\tthis.offset = new THREE.Vector2( 0, 0 );\n\tthis.repeat = new THREE.Vector2( 1, 1 );\n\n\tthis.format = options.format !== undefined ? options.format : THREE.RGBAFormat;\n\tthis.type = options.type !== undefined ? options.type : THREE.UnsignedByteType;\n\n\tthis.depthBuffer = options.depthBuffer !== undefined ? options.depthBuffer : true;\n\tthis.stencilBuffer = options.stencilBuffer !== undefined ? options.stencilBuffer : true;\n\n\tthis.generateMipmaps = true;\n\n\tthis.shareDepthFrom = null;\n\n};\n\nTHREE.WebGLRenderTarget.prototype = {\n\n\tconstructor: THREE.WebGLRenderTarget,\n\n\tsetSize: function ( width, height ) {\n\n\t\tthis.width = width;\n\t\tthis.height = height;\n\n\t},\n\n\tclone: function () {\n\n\t\tvar tmp = new THREE.WebGLRenderTarget( this.width, this.height );\n\n\t\ttmp.wrapS = this.wrapS;\n\t\ttmp.wrapT = this.wrapT;\n\n\t\ttmp.magFilter = this.magFilter;\n\t\ttmp.minFilter = this.minFilter;\n\n\t\ttmp.anisotropy = this.anisotropy;\n\n\t\ttmp.offset.copy( this.offset );\n\t\ttmp.repeat.copy( this.repeat );\n\n\t\ttmp.format = this.format;\n\t\ttmp.type = this.type;\n\n\t\ttmp.depthBuffer = this.depthBuffer;\n\t\ttmp.stencilBuffer = this.stencilBuffer;\n\n\t\ttmp.generateMipmaps = this.generateMipmaps;\n\n\t\ttmp.shareDepthFrom = this.shareDepthFrom;\n\n\t\treturn tmp;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n};\n\nTHREE.EventDispatcher.prototype.apply( THREE.WebGLRenderTarget.prototype );\n\n// File:src/renderers/WebGLRenderTargetCube.js\n\n/**\n * @author alteredq / http://alteredqualia.com\n */\n\nTHREE.WebGLRenderTargetCube = function ( width, height, options ) {\n\n\tTHREE.WebGLRenderTarget.call( this, width, height, options );\n\n\tthis.activeCubeFace = 0; // PX 0, NX 1, PY 2, NY 3, PZ 4, NZ 5\n\n};\n\nTHREE.WebGLRenderTargetCube.prototype = Object.create( THREE.WebGLRenderTarget.prototype );\n\n// File:src/renderers/webgl/WebGLExtensions.js\n\nTHREE.WebGLExtensions = function ( gl ) {\n\n\tvar extensions = {};\n\n\tthis.get = function ( name ) {\n\n\t\tif ( extensions[ name ] !== undefined ) {\n\n\t\t\treturn extensions[ name ];\n\n\t\t}\n\n\t\tvar extension;\n\n\t\tswitch ( name ) {\n\t\t\n\t\t\tcase 'OES_texture_float':\n\t\t\t\textension = gl.getExtension( 'OES_texture_float' );\n\t\t\t\tbreak;\n\n\t\t\tcase 'OES_texture_float_linear':\n\t\t\t\textension = gl.getExtension( 'OES_texture_float_linear' );\n\t\t\t\tbreak;\n\n\t\t\tcase 'OES_standard_derivatives':\n\t\t\t\textension = gl.getExtension( 'OES_standard_derivatives' );\n\t\t\t\tbreak;\n\n\t\t\tcase 'EXT_texture_filter_anisotropic':\n\t\t\t\textension = gl.getExtension( 'EXT_texture_filter_anisotropic' ) || gl.getExtension( 'MOZ_EXT_texture_filter_anisotropic' ) || gl.getExtension( 'WEBKIT_EXT_texture_filter_anisotropic' );\n\t\t\t\tbreak;\n\n\t\t\tcase 'WEBGL_compressed_texture_s3tc':\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'MOZ_WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_s3tc' );\n\t\t\t\tbreak;\n\n\t\t\tcase 'WEBGL_compressed_texture_pvrtc':\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_pvrtc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_pvrtc' );\n\t\t\t\tbreak;\n\n\t\t\tcase 'OES_element_index_uint':\n\t\t\t\textension = gl.getExtension( 'OES_element_index_uint' );\n\t\t\t\tbreak;\n\n\t\t\tcase 'EXT_blend_minmax':\n\t\t\t\textension = gl.getExtension( 'EXT_blend_minmax' );\n\t\t\t\tbreak;\n\n\t\t\tcase 'EXT_frag_depth':\n\t\t\t\textension = gl.getExtension( 'EXT_frag_depth' );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( extension === null ) {\n\n\t\t\tconsole.log( 'THREE.WebGLRenderer: ' + name + ' extension not supported.' );\n\n\t\t}\n\n\t\textensions[ name ] = extension;\n\n\t\treturn extension;\n\n\t};\n\n};\n\n// File:src/renderers/webgl/WebGLProgram.js\n\nTHREE.WebGLProgram = ( function () {\n\n\tvar programIdCount = 0;\n\n\tvar generateDefines = function ( defines ) {\n\n\t\tvar value, chunk, chunks = [];\n\n\t\tfor ( var d in defines ) {\n\n\t\t\tvalue = defines[ d ];\n\t\t\tif ( value === false ) continue;\n\n\t\t\tchunk = \"#define \" + d + \" \" + value;\n\t\t\tchunks.push( chunk );\n\n\t\t}\n\n\t\treturn chunks.join( \"\\n\" );\n\n\t};\n\n\tvar cacheUniformLocations = function ( gl, program, identifiers ) {\n\n\t\tvar uniforms = {};\n\n\t\tfor ( var i = 0, l = identifiers.length; i < l; i ++ ) {\n\n\t\t\tvar id = identifiers[ i ];\n\t\t\tuniforms[ id ] = gl.getUniformLocation( program, id );\n\n\t\t}\n\n\t\treturn uniforms;\n\n\t};\n\n\tvar cacheAttributeLocations = function ( gl, program, identifiers ) {\n\n\t\tvar attributes = {};\n\n\t\tfor ( var i = 0, l = identifiers.length; i < l; i ++ ) {\n\n\t\t\tvar id = identifiers[ i ];\n\t\t\tattributes[ id ] = gl.getAttribLocation( program, id );\n\n\t\t}\n\n\t\treturn attributes;\n\n\t};\n\n\treturn function ( renderer, code, material, parameters ) {\n\n\t\tvar _this = renderer;\n\t\tvar _gl = _this.context;\n\n\t\tvar defines = material.defines;\n\t\tvar uniforms = material.__webglShader.uniforms;\n\t\tvar attributes = material.attributes;\n\n\t\tvar vertexShader = material.__webglShader.vertexShader;\n\t\tvar fragmentShader = material.__webglShader.fragmentShader;\n\n\t\tvar index0AttributeName = material.index0AttributeName;\n\n\t\tif ( index0AttributeName === undefined && parameters.morphTargets === true ) {\n\n\t\t\t// programs with morphTargets displace position out of attribute 0\n\n\t\t\tindex0AttributeName = 'position';\n\n\t\t}\n\n\t\tvar shadowMapTypeDefine = \"SHADOWMAP_TYPE_BASIC\";\n\n\t\tif ( parameters.shadowMapType === THREE.PCFShadowMap ) {\n\n\t\t\tshadowMapTypeDefine = \"SHADOWMAP_TYPE_PCF\";\n\n\t\t} else if ( parameters.shadowMapType === THREE.PCFSoftShadowMap ) {\n\n\t\t\tshadowMapTypeDefine = \"SHADOWMAP_TYPE_PCF_SOFT\";\n\n\t\t}\n\n\t\t// console.log( \"building new program \" );\n\n\t\t//\n\n\t\tvar customDefines = generateDefines( defines );\n\n\t\t//\n\n\t\tvar program = _gl.createProgram();\n\n\t\tvar prefix_vertex, prefix_fragment;\n\n\t\tif ( material instanceof THREE.RawShaderMaterial ) {\n\n\t\t\tprefix_vertex = '';\n\t\t\tprefix_fragment = '';\n\n\t\t} else {\n\n\t\t\tprefix_vertex = [\n\n\t\t\t\t\"precision \" + parameters.precision + \" float;\",\n\t\t\t\t\"precision \" + parameters.precision + \" int;\",\n\n\t\t\t\tcustomDefines,\n\n\t\t\t\tparameters.supportsVertexTextures ? \"#define VERTEX_TEXTURES\" : \"\",\n\n\t\t\t\t_this.gammaInput ? \"#define GAMMA_INPUT\" : \"\",\n\t\t\t\t_this.gammaOutput ? \"#define GAMMA_OUTPUT\" : \"\",\n\n\t\t\t\t\"#define MAX_DIR_LIGHTS \" + parameters.maxDirLights,\n\t\t\t\t\"#define MAX_POINT_LIGHTS \" + parameters.maxPointLights,\n\t\t\t\t\"#define MAX_SPOT_LIGHTS \" + parameters.maxSpotLights,\n\t\t\t\t\"#define MAX_HEMI_LIGHTS \" + parameters.maxHemiLights,\n\n\t\t\t\t\"#define MAX_SHADOWS \" + parameters.maxShadows,\n\n\t\t\t\t\"#define MAX_BONES \" + parameters.maxBones,\n\n\t\t\t\tparameters.map ? \"#define USE_MAP\" : \"\",\n\t\t\t\tparameters.envMap ? \"#define USE_ENVMAP\" : \"\",\n\t\t\t\tparameters.lightMap ? \"#define USE_LIGHTMAP\" : \"\",\n\t\t\t\tparameters.bumpMap ? \"#define USE_BUMPMAP\" : \"\",\n\t\t\t\tparameters.normalMap ? \"#define USE_NORMALMAP\" : \"\",\n\t\t\t\tparameters.specularMap ? \"#define USE_SPECULARMAP\" : \"\",\n\t\t\t\tparameters.alphaMap ? \"#define USE_ALPHAMAP\" : \"\",\n\t\t\t\tparameters.vertexColors ? \"#define USE_COLOR\" : \"\",\n\n\t\t\t\tparameters.skinning ? \"#define USE_SKINNING\" : \"\",\n\t\t\t\tparameters.useVertexTexture ? \"#define BONE_TEXTURE\" : \"\",\n\n\t\t\t\tparameters.morphTargets ? \"#define USE_MORPHTARGETS\" : \"\",\n\t\t\t\tparameters.morphNormals ? \"#define USE_MORPHNORMALS\" : \"\",\n\t\t\t\tparameters.wrapAround ? \"#define WRAP_AROUND\" : \"\",\n\t\t\t\tparameters.doubleSided ? \"#define DOUBLE_SIDED\" : \"\",\n\t\t\t\tparameters.flipSided ? \"#define FLIP_SIDED\" : \"\",\n\n\t\t\t\tparameters.shadowMapEnabled ? \"#define USE_SHADOWMAP\" : \"\",\n\t\t\t\tparameters.shadowMapEnabled ? \"#define \" + shadowMapTypeDefine : \"\",\n\t\t\t\tparameters.shadowMapDebug ? \"#define SHADOWMAP_DEBUG\" : \"\",\n\t\t\t\tparameters.shadowMapCascade ? \"#define SHADOWMAP_CASCADE\" : \"\",\n\n\t\t\t\tparameters.sizeAttenuation ? \"#define USE_SIZEATTENUATION\" : \"\",\n\n\t\t\t\tparameters.logarithmicDepthBuffer ? \"#define USE_LOGDEPTHBUF\" : \"\",\n\t\t\t\t//_this._glExtensionFragDepth ? \"#define USE_LOGDEPTHBUF_EXT\" : \"\",\n\n\n\t\t\t\t\"uniform mat4 modelMatrix;\",\n\t\t\t\t\"uniform mat4 modelViewMatrix;\",\n\t\t\t\t\"uniform mat4 projectionMatrix;\",\n\t\t\t\t\"uniform mat4 viewMatrix;\",\n\t\t\t\t\"uniform mat3 normalMatrix;\",\n\t\t\t\t\"uniform vec3 cameraPosition;\",\n\n\t\t\t\t\"attribute vec3 position;\",\n\t\t\t\t\"attribute vec3 normal;\",\n\t\t\t\t\"attribute vec2 uv;\",\n\t\t\t\t\"attribute vec2 uv2;\",\n\n\t\t\t\t\"#ifdef USE_COLOR\",\n\n\t\t\t\t\"\tattribute vec3 color;\",\n\n\t\t\t\t\"#endif\",\n\n\t\t\t\t\"#ifdef USE_MORPHTARGETS\",\n\n\t\t\t\t\"\tattribute vec3 morphTarget0;\",\n\t\t\t\t\"\tattribute vec3 morphTarget1;\",\n\t\t\t\t\"\tattribute vec3 morphTarget2;\",\n\t\t\t\t\"\tattribute vec3 morphTarget3;\",\n\n\t\t\t\t\"\t#ifdef USE_MORPHNORMALS\",\n\n\t\t\t\t\"\t\tattribute vec3 morphNormal0;\",\n\t\t\t\t\"\t\tattribute vec3 morphNormal1;\",\n\t\t\t\t\"\t\tattribute vec3 morphNormal2;\",\n\t\t\t\t\"\t\tattribute vec3 morphNormal3;\",\n\n\t\t\t\t\"\t#else\",\n\n\t\t\t\t\"\t\tattribute vec3 morphTarget4;\",\n\t\t\t\t\"\t\tattribute vec3 morphTarget5;\",\n\t\t\t\t\"\t\tattribute vec3 morphTarget6;\",\n\t\t\t\t\"\t\tattribute vec3 morphTarget7;\",\n\n\t\t\t\t\"\t#endif\",\n\n\t\t\t\t\"#endif\",\n\n\t\t\t\t\"#ifdef USE_SKINNING\",\n\n\t\t\t\t\"\tattribute vec4 skinIndex;\",\n\t\t\t\t\"\tattribute vec4 skinWeight;\",\n\n\t\t\t\t\"#endif\",\n\n\t\t\t\t\"\"\n\n\t\t\t].join( '\\n' );\n\n\t\t\tprefix_fragment = [\n\n\t\t\t\t\"precision \" + parameters.precision + \" float;\",\n\t\t\t\t\"precision \" + parameters.precision + \" int;\",\n\n\t\t\t\t( parameters.bumpMap || parameters.normalMap ) ? \"#extension GL_OES_standard_derivatives : enable\" : \"\",\n\n\t\t\t\tcustomDefines,\n\n\t\t\t\t\"#define MAX_DIR_LIGHTS \" + parameters.maxDirLights,\n\t\t\t\t\"#define MAX_POINT_LIGHTS \" + parameters.maxPointLights,\n\t\t\t\t\"#define MAX_SPOT_LIGHTS \" + parameters.maxSpotLights,\n\t\t\t\t\"#define MAX_HEMI_LIGHTS \" + parameters.maxHemiLights,\n\n\t\t\t\t\"#define MAX_SHADOWS \" + parameters.maxShadows,\n\n\t\t\t\tparameters.alphaTest ? \"#define ALPHATEST \" + parameters.alphaTest: \"\",\n\n\t\t\t\t_this.gammaInput ? \"#define GAMMA_INPUT\" : \"\",\n\t\t\t\t_this.gammaOutput ? \"#define GAMMA_OUTPUT\" : \"\",\n\n\t\t\t\t( parameters.useFog && parameters.fog ) ? \"#define USE_FOG\" : \"\",\n\t\t\t\t( parameters.useFog && parameters.fogExp ) ? \"#define FOG_EXP2\" : \"\",\n\n\t\t\t\tparameters.map ? \"#define USE_MAP\" : \"\",\n\t\t\t\tparameters.envMap ? \"#define USE_ENVMAP\" : \"\",\n\t\t\t\tparameters.lightMap ? \"#define USE_LIGHTMAP\" : \"\",\n\t\t\t\tparameters.bumpMap ? \"#define USE_BUMPMAP\" : \"\",\n\t\t\t\tparameters.normalMap ? \"#define USE_NORMALMAP\" : \"\",\n\t\t\t\tparameters.specularMap ? \"#define USE_SPECULARMAP\" : \"\",\n\t\t\t\tparameters.alphaMap ? \"#define USE_ALPHAMAP\" : \"\",\n\t\t\t\tparameters.vertexColors ? \"#define USE_COLOR\" : \"\",\n\n\t\t\t\tparameters.metal ? \"#define METAL\" : \"\",\n\t\t\t\tparameters.wrapAround ? \"#define WRAP_AROUND\" : \"\",\n\t\t\t\tparameters.doubleSided ? \"#define DOUBLE_SIDED\" : \"\",\n\t\t\t\tparameters.flipSided ? \"#define FLIP_SIDED\" : \"\",\n\n\t\t\t\tparameters.shadowMapEnabled ? \"#define USE_SHADOWMAP\" : \"\",\n\t\t\t\tparameters.shadowMapEnabled ? \"#define \" + shadowMapTypeDefine : \"\",\n\t\t\t\tparameters.shadowMapDebug ? \"#define SHADOWMAP_DEBUG\" : \"\",\n\t\t\t\tparameters.shadowMapCascade ? \"#define SHADOWMAP_CASCADE\" : \"\",\n\n\t\t\t\tparameters.logarithmicDepthBuffer ? \"#define USE_LOGDEPTHBUF\" : \"\",\n\t\t\t\t//_this._glExtensionFragDepth ? \"#define USE_LOGDEPTHBUF_EXT\" : \"\",\n\n\t\t\t\t\"uniform mat4 viewMatrix;\",\n\t\t\t\t\"uniform vec3 cameraPosition;\",\n\t\t\t\t\"\"\n\n\t\t\t].join( '\\n' );\n\n\t\t}\n\n\t\tvar glVertexShader = new THREE.WebGLShader( _gl, _gl.VERTEX_SHADER, prefix_vertex + vertexShader );\n\t\tvar glFragmentShader = new THREE.WebGLShader( _gl, _gl.FRAGMENT_SHADER, prefix_fragment + fragmentShader );\n\n\t\t_gl.attachShader( program, glVertexShader );\n\t\t_gl.attachShader( program, glFragmentShader );\n\n\t\tif ( index0AttributeName !== undefined ) {\n\n\t\t\t// Force a particular attribute to index 0.\n\t\t\t// because potentially expensive emulation is done by browser if attribute 0 is disabled.\n\t\t\t// And, color, for example is often automatically bound to index 0 so disabling it\n\n\t\t\t_gl.bindAttribLocation( program, 0, index0AttributeName );\n\n\t\t}\n\n\t\t_gl.linkProgram( program );\n\n\t\tif ( _gl.getProgramParameter( program, _gl.LINK_STATUS ) === false ) {\n\n\t\t\tconsole.error( 'THREE.WebGLProgram: Could not initialise shader.' );\n\t\t\tconsole.error( 'gl.VALIDATE_STATUS', _gl.getProgramParameter( program, _gl.VALIDATE_STATUS ) );\n\t\t\tconsole.error( 'gl.getError()', _gl.getError() );\n\n\t\t}\n\n\t\tif ( _gl.getProgramInfoLog( program ) !== '' ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLProgram: gl.getProgramInfoLog()', _gl.getProgramInfoLog( program ) );\n\n\t\t}\n\n\t\t// clean up\n\n\t\t_gl.deleteShader( glVertexShader );\n\t\t_gl.deleteShader( glFragmentShader );\n\n\t\t// cache uniform locations\n\n\t\tvar identifiers = [\n\n\t\t\t'viewMatrix', 'modelViewMatrix', 'projectionMatrix', 'normalMatrix', 'modelMatrix', 'cameraPosition', 'morphTargetInfluences', 'bindMatrix', 'bindMatrixInverse'\n\n\t\t];\n\n\t\tif ( parameters.useVertexTexture ) {\n\n\t\t\tidentifiers.push( 'boneTexture' );\n\t\t\tidentifiers.push( 'boneTextureWidth' );\n\t\t\tidentifiers.push( 'boneTextureHeight' );\n\n\t\t} else {\n\n\t\t\tidentifiers.push( 'boneGlobalMatrices' );\n\n\t\t}\n\n\t\tif ( parameters.logarithmicDepthBuffer ) {\n\n\t\t\tidentifiers.push('logDepthBufFC');\n\n\t\t}\n\n\n\t\tfor ( var u in uniforms ) {\n\n\t\t\tidentifiers.push( u );\n\n\t\t}\n\n\t\tthis.uniforms = cacheUniformLocations( _gl, program, identifiers );\n\n\t\t// cache attributes locations\n\n\t\tidentifiers = [\n\n\t\t\t\"position\", \"normal\", \"uv\", \"uv2\", \"tangent\", \"color\",\n\t\t\t\"skinIndex\", \"skinWeight\", \"lineDistance\"\n\n\t\t];\n\n\t\tfor ( var i = 0; i < parameters.maxMorphTargets; i ++ ) {\n\n\t\t\tidentifiers.push( \"morphTarget\" + i );\n\n\t\t}\n\n\t\tfor ( var i = 0; i < parameters.maxMorphNormals; i ++ ) {\n\n\t\t\tidentifiers.push( \"morphNormal\" + i );\n\n\t\t}\n\n\t\tfor ( var a in attributes ) {\n\n\t\t\tidentifiers.push( a );\n\n\t\t}\n\n\t\tthis.attributes = cacheAttributeLocations( _gl, program, identifiers );\n\t\tthis.attributesKeys = Object.keys( this.attributes );\n\n\t\t//\n\n\t\tthis.id = programIdCount ++;\n\t\tthis.code = code;\n\t\tthis.usedTimes = 1;\n\t\tthis.program = program;\n\t\tthis.vertexShader = glVertexShader;\n\t\tthis.fragmentShader = glFragmentShader;\n\n\t\treturn this;\n\n\t};\n\n} )();\n\n// File:src/renderers/webgl/WebGLShader.js\n\nTHREE.WebGLShader = ( function () {\n\n\tvar addLineNumbers = function ( string ) {\n\n\t\tvar lines = string.split( '\\n' );\n\n\t\tfor ( var i = 0; i < lines.length; i ++ ) {\n\n\t\t\tlines[ i ] = ( i + 1 ) + ': ' + lines[ i ];\n\n\t\t}\n\n\t\treturn lines.join( '\\n' );\n\n\t};\n\n\treturn function ( gl, type, string ) {\n\n\t\tvar shader = gl.createShader( type ); \n\n\t\tgl.shaderSource( shader, string );\n\t\tgl.compileShader( shader );\n\n\t\tif ( gl.getShaderParameter( shader, gl.COMPILE_STATUS ) === false ) {\n\n\t\t\tconsole.error( 'THREE.WebGLShader: Shader couldn\\'t compile.' );\n\n\t\t}\n\n\t\tif ( gl.getShaderInfoLog( shader ) !== '' ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLShader: gl.getShaderInfoLog()', gl.getShaderInfoLog( shader ) );\n\t\t\tconsole.warn( addLineNumbers( string ) );\n\n\t\t}\n\n\t\t// --enable-privileged-webgl-extension\n\t\t// console.log( type, gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\n\n\t\treturn shader;\n\n\t};\n\n} )();\n\n// File:src/renderers/webgl/plugins/LensFlarePlugin.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.LensFlarePlugin = function ( renderer, flares ) {\n\n\tvar gl = renderer.context;\n\n\tvar vertexBuffer, elementBuffer;\n\tvar program, attributes, uniforms;\n\tvar hasVertexTexture;\n\n\tvar tempTexture, occlusionTexture;\n\n\tvar init = function () {\n\n\t\tvar vertices = new Float32Array( [\n\t\t\t-1, -1,  0, 0,\n\t\t\t 1, -1,  1, 0,\n\t\t\t 1,  1,  1, 1,\n\t\t\t-1,  1,  0, 1\n\t\t] );\n\n\t\tvar faces = new Uint16Array( [\n\t\t\t0, 1, 2,\n\t\t\t0, 2, 3\n\t\t] );\n\n\t\t// buffers\n\n\t\tvertexBuffer     = gl.createBuffer();\n\t\telementBuffer    = gl.createBuffer();\n\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\n\t\tgl.bufferData( gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW );\n\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\n\t\tgl.bufferData( gl.ELEMENT_ARRAY_BUFFER, faces, gl.STATIC_DRAW );\n\n\t\t// textures\n\n\t\ttempTexture      = gl.createTexture();\n\t\tocclusionTexture = gl.createTexture();\n\n\t\tgl.bindTexture( gl.TEXTURE_2D, tempTexture );\n\t\tgl.texImage2D( gl.TEXTURE_2D, 0, gl.RGB, 16, 16, 0, gl.RGB, gl.UNSIGNED_BYTE, null );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\n\n\t\tgl.bindTexture( gl.TEXTURE_2D, occlusionTexture );\n\t\tgl.texImage2D( gl.TEXTURE_2D, 0, gl.RGBA, 16, 16, 0, gl.RGBA, gl.UNSIGNED_BYTE, null );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\n\n\t\thasVertexTexture = gl.getParameter( gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS ) > 0;\n\n\t\tvar shader;\n\n\t\tif ( hasVertexTexture ) {\n\n\t\t\tshader = {\n\n\t\t\t\tvertexShader: [\n\n\t\t\t\t\t\"uniform lowp int renderType;\",\n\n\t\t\t\t\t\"uniform vec3 screenPosition;\",\n\t\t\t\t\t\"uniform vec2 scale;\",\n\t\t\t\t\t\"uniform float rotation;\",\n\n\t\t\t\t\t\"uniform sampler2D occlusionMap;\",\n\n\t\t\t\t\t\"attribute vec2 position;\",\n\t\t\t\t\t\"attribute vec2 uv;\",\n\n\t\t\t\t\t\"varying vec2 vUV;\",\n\t\t\t\t\t\"varying float vVisibility;\",\n\n\t\t\t\t\t\"void main() {\",\n\n\t\t\t\t\t\t\"vUV = uv;\",\n\n\t\t\t\t\t\t\"vec2 pos = position;\",\n\n\t\t\t\t\t\t\"if( renderType == 2 ) {\",\n\n\t\t\t\t\t\t\t\"vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\",\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\",\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\",\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\",\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\",\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\",\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\",\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\",\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\",\n\n\t\t\t\t\t\t\t\"vVisibility =        visibility.r / 9.0;\",\n\t\t\t\t\t\t\t\"vVisibility *= 1.0 - visibility.g / 9.0;\",\n\t\t\t\t\t\t\t\"vVisibility *=       visibility.b / 9.0;\",\n\t\t\t\t\t\t\t\"vVisibility *= 1.0 - visibility.a / 9.0;\",\n\n\t\t\t\t\t\t\t\"pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\",\n\t\t\t\t\t\t\t\"pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\",\n\n\t\t\t\t\t\t\"}\",\n\n\t\t\t\t\t\t\"gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\",\n\n\t\t\t\t\t\"}\"\n\n\t\t\t\t].join( \"\\n\" ),\n\n\t\t\t\tfragmentShader: [\n\n\t\t\t\t\t\"uniform lowp int renderType;\",\n\n\t\t\t\t\t\"uniform sampler2D map;\",\n\t\t\t\t\t\"uniform float opacity;\",\n\t\t\t\t\t\"uniform vec3 color;\",\n\n\t\t\t\t\t\"varying vec2 vUV;\",\n\t\t\t\t\t\"varying float vVisibility;\",\n\n\t\t\t\t\t\"void main() {\",\n\n\t\t\t\t\t\t// pink square\n\n\t\t\t\t\t\t\"if( renderType == 0 ) {\",\n\n\t\t\t\t\t\t\t\"gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\",\n\n\t\t\t\t\t\t// restore\n\n\t\t\t\t\t\t\"} else if( renderType == 1 ) {\",\n\n\t\t\t\t\t\t\t\"gl_FragColor = texture2D( map, vUV );\",\n\n\t\t\t\t\t\t// flare\n\n\t\t\t\t\t\t\"} else {\",\n\n\t\t\t\t\t\t\t\"vec4 texture = texture2D( map, vUV );\",\n\t\t\t\t\t\t\t\"texture.a *= opacity * vVisibility;\",\n\t\t\t\t\t\t\t\"gl_FragColor = texture;\",\n\t\t\t\t\t\t\t\"gl_FragColor.rgb *= color;\",\n\n\t\t\t\t\t\t\"}\",\n\n\t\t\t\t\t\"}\"\n\n\t\t\t\t].join( \"\\n\" )\n\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tshader = {\n\n\t\t\t\tvertexShader: [\n\n\t\t\t\t\t\"uniform lowp int renderType;\",\n\n\t\t\t\t\t\"uniform vec3 screenPosition;\",\n\t\t\t\t\t\"uniform vec2 scale;\",\n\t\t\t\t\t\"uniform float rotation;\",\n\n\t\t\t\t\t\"attribute vec2 position;\",\n\t\t\t\t\t\"attribute vec2 uv;\",\n\n\t\t\t\t\t\"varying vec2 vUV;\",\n\n\t\t\t\t\t\"void main() {\",\n\n\t\t\t\t\t\t\"vUV = uv;\",\n\n\t\t\t\t\t\t\"vec2 pos = position;\",\n\n\t\t\t\t\t\t\"if( renderType == 2 ) {\",\n\n\t\t\t\t\t\t\t\"pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\",\n\t\t\t\t\t\t\t\"pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\",\n\n\t\t\t\t\t\t\"}\",\n\n\t\t\t\t\t\t\"gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\",\n\n\t\t\t\t\t\"}\"\n\n\t\t\t\t].join( \"\\n\" ),\n\n\t\t\t\tfragmentShader: [\n\n\t\t\t\t\t\"precision mediump float;\",\n\n\t\t\t\t\t\"uniform lowp int renderType;\",\n\n\t\t\t\t\t\"uniform sampler2D map;\",\n\t\t\t\t\t\"uniform sampler2D occlusionMap;\",\n\t\t\t\t\t\"uniform float opacity;\",\n\t\t\t\t\t\"uniform vec3 color;\",\n\n\t\t\t\t\t\"varying vec2 vUV;\",\n\n\t\t\t\t\t\"void main() {\",\n\n\t\t\t\t\t\t// pink square\n\n\t\t\t\t\t\t\"if( renderType == 0 ) {\",\n\n\t\t\t\t\t\t\t\"gl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );\",\n\n\t\t\t\t\t\t// restore\n\n\t\t\t\t\t\t\"} else if( renderType == 1 ) {\",\n\n\t\t\t\t\t\t\t\"gl_FragColor = texture2D( map, vUV );\",\n\n\t\t\t\t\t\t// flare\n\n\t\t\t\t\t\t\"} else {\",\n\n\t\t\t\t\t\t\t\"float visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;\",\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;\",\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;\",\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;\",\n\t\t\t\t\t\t\t\"visibility = ( 1.0 - visibility / 4.0 );\",\n\n\t\t\t\t\t\t\t\"vec4 texture = texture2D( map, vUV );\",\n\t\t\t\t\t\t\t\"texture.a *= opacity * visibility;\",\n\t\t\t\t\t\t\t\"gl_FragColor = texture;\",\n\t\t\t\t\t\t\t\"gl_FragColor.rgb *= color;\",\n\n\t\t\t\t\t\t\"}\",\n\n\t\t\t\t\t\"}\"\n\n\t\t\t\t].join( \"\\n\" )\n\n\t\t\t};\n\n\t\t}\n\n\t\tprogram = createProgram( shader );\n\n\t\tattributes = {\n\t\t\tvertex: gl.getAttribLocation ( program, \"position\" ),\n\t\t\tuv:     gl.getAttribLocation ( program, \"uv\" )\n\t\t}\n\n\t\tuniforms = {\n\t\t\trenderType:     gl.getUniformLocation( program, \"renderType\" ),\n\t\t\tmap:            gl.getUniformLocation( program, \"map\" ),\n\t\t\tocclusionMap:   gl.getUniformLocation( program, \"occlusionMap\" ),\n\t\t\topacity:        gl.getUniformLocation( program, \"opacity\" ),\n\t\t\tcolor:          gl.getUniformLocation( program, \"color\" ),\n\t\t\tscale:          gl.getUniformLocation( program, \"scale\" ),\n\t\t\trotation:       gl.getUniformLocation( program, \"rotation\" ),\n\t\t\tscreenPosition: gl.getUniformLocation( program, \"screenPosition\" )\n\t\t};\n\n\t};\n\n\t/*\n\t * Render lens flares\n\t * Method: renders 16x16 0xff00ff-colored points scattered over the light source area,\n\t *         reads these back and calculates occlusion.\n\t */\n\n\tthis.render = function ( scene, camera, viewportWidth, viewportHeight ) {\n\n\t\tif ( flares.length === 0 ) return;\n\n\t\tvar tempPosition = new THREE.Vector3();\n\n\t\tvar invAspect = viewportHeight / viewportWidth,\n\t\t\thalfViewportWidth = viewportWidth * 0.5,\n\t\t\thalfViewportHeight = viewportHeight * 0.5;\n\n\t\tvar size = 16 / viewportHeight,\n\t\t\tscale = new THREE.Vector2( size * invAspect, size );\n\n\t\tvar screenPosition = new THREE.Vector3( 1, 1, 0 ),\n\t\t\tscreenPositionPixels = new THREE.Vector2( 1, 1 );\n\n\t\tif ( program === undefined ) {\n\n\t\t\tinit();\n\n\t\t}\n\n\t\tgl.useProgram( program );\n\n\t\tgl.enableVertexAttribArray( attributes.vertex );\n\t\tgl.enableVertexAttribArray( attributes.uv );\n\n\t\t// loop through all lens flares to update their occlusion and positions\n\t\t// setup gl and common used attribs/unforms\n\n\t\tgl.uniform1i( uniforms.occlusionMap, 0 );\n\t\tgl.uniform1i( uniforms.map, 1 );\n\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\n\t\tgl.vertexAttribPointer( attributes.vertex, 2, gl.FLOAT, false, 2 * 8, 0 );\n\t\tgl.vertexAttribPointer( attributes.uv, 2, gl.FLOAT, false, 2 * 8, 8 );\n\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\n\n\t\tgl.disable( gl.CULL_FACE );\n\t\tgl.depthMask( false );\n\n\t\tfor ( var i = 0, l = flares.length; i < l; i ++ ) {\n\n\t\t\tsize = 16 / viewportHeight;\n\t\t\tscale.set( size * invAspect, size );\n\n\t\t\t// calc object screen position\n\n\t\t\tvar flare = flares[ i ];\n\t\t\t\n\t\t\ttempPosition.set( flare.matrixWorld.elements[12], flare.matrixWorld.elements[13], flare.matrixWorld.elements[14] );\n\n\t\t\ttempPosition.applyMatrix4( camera.matrixWorldInverse );\n\t\t\ttempPosition.applyProjection( camera.projectionMatrix );\n\n\t\t\t// setup arrays for gl programs\n\n\t\t\tscreenPosition.copy( tempPosition )\n\n\t\t\tscreenPositionPixels.x = screenPosition.x * halfViewportWidth + halfViewportWidth;\n\t\t\tscreenPositionPixels.y = screenPosition.y * halfViewportHeight + halfViewportHeight;\n\n\t\t\t// screen cull\n\n\t\t\tif ( hasVertexTexture || (\n\t\t\t\tscreenPositionPixels.x > 0 &&\n\t\t\t\tscreenPositionPixels.x < viewportWidth &&\n\t\t\t\tscreenPositionPixels.y > 0 &&\n\t\t\t\tscreenPositionPixels.y < viewportHeight ) ) {\n\n\t\t\t\t// save current RGB to temp texture\n\n\t\t\t\tgl.activeTexture( gl.TEXTURE1 );\n\t\t\t\tgl.bindTexture( gl.TEXTURE_2D, tempTexture );\n\t\t\t\tgl.copyTexImage2D( gl.TEXTURE_2D, 0, gl.RGB, screenPositionPixels.x - 8, screenPositionPixels.y - 8, 16, 16, 0 );\n\n\n\t\t\t\t// render pink quad\n\n\t\t\t\tgl.uniform1i( uniforms.renderType, 0 );\n\t\t\t\tgl.uniform2f( uniforms.scale, scale.x, scale.y );\n\t\t\t\tgl.uniform3f( uniforms.screenPosition, screenPosition.x, screenPosition.y, screenPosition.z );\n\n\t\t\t\tgl.disable( gl.BLEND );\n\t\t\t\tgl.enable( gl.DEPTH_TEST );\n\n\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\n\n\n\t\t\t\t// copy result to occlusionMap\n\n\t\t\t\tgl.activeTexture( gl.TEXTURE0 );\n\t\t\t\tgl.bindTexture( gl.TEXTURE_2D, occlusionTexture );\n\t\t\t\tgl.copyTexImage2D( gl.TEXTURE_2D, 0, gl.RGBA, screenPositionPixels.x - 8, screenPositionPixels.y - 8, 16, 16, 0 );\n\n\n\t\t\t\t// restore graphics\n\n\t\t\t\tgl.uniform1i( uniforms.renderType, 1 );\n\t\t\t\tgl.disable( gl.DEPTH_TEST );\n\n\t\t\t\tgl.activeTexture( gl.TEXTURE1 );\n\t\t\t\tgl.bindTexture( gl.TEXTURE_2D, tempTexture );\n\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\n\n\n\t\t\t\t// update object positions\n\n\t\t\t\tflare.positionScreen.copy( screenPosition )\n\n\t\t\t\tif ( flare.customUpdateCallback ) {\n\n\t\t\t\t\tflare.customUpdateCallback( flare );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tflare.updateLensFlares();\n\n\t\t\t\t}\n\n\t\t\t\t// render flares\n\n\t\t\t\tgl.uniform1i( uniforms.renderType, 2 );\n\t\t\t\tgl.enable( gl.BLEND );\n\n\t\t\t\tfor ( var j = 0, jl = flare.lensFlares.length; j < jl; j ++ ) {\n\n\t\t\t\t\tvar sprite = flare.lensFlares[ j ];\n\n\t\t\t\t\tif ( sprite.opacity > 0.001 && sprite.scale > 0.001 ) {\n\n\t\t\t\t\t\tscreenPosition.x = sprite.x;\n\t\t\t\t\t\tscreenPosition.y = sprite.y;\n\t\t\t\t\t\tscreenPosition.z = sprite.z;\n\n\t\t\t\t\t\tsize = sprite.size * sprite.scale / viewportHeight;\n\n\t\t\t\t\t\tscale.x = size * invAspect;\n\t\t\t\t\t\tscale.y = size;\n\n\t\t\t\t\t\tgl.uniform3f( uniforms.screenPosition, screenPosition.x, screenPosition.y, screenPosition.z );\n\t\t\t\t\t\tgl.uniform2f( uniforms.scale, scale.x, scale.y );\n\t\t\t\t\t\tgl.uniform1f( uniforms.rotation, sprite.rotation );\n\n\t\t\t\t\t\tgl.uniform1f( uniforms.opacity, sprite.opacity );\n\t\t\t\t\t\tgl.uniform3f( uniforms.color, sprite.color.r, sprite.color.g, sprite.color.b );\n\n\t\t\t\t\t\trenderer.setBlending( sprite.blending, sprite.blendEquation, sprite.blendSrc, sprite.blendDst );\n\t\t\t\t\t\trenderer.setTexture( sprite.texture, 1 );\n\n\t\t\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// restore gl\n\n\t\tgl.enable( gl.CULL_FACE );\n\t\tgl.enable( gl.DEPTH_TEST );\n\t\tgl.depthMask( true );\n\n\t\trenderer.resetGLState();\n\n\t};\n\n\tfunction createProgram ( shader ) {\n\n\t\tvar program = gl.createProgram();\n\n\t\tvar fragmentShader = gl.createShader( gl.FRAGMENT_SHADER );\n\t\tvar vertexShader = gl.createShader( gl.VERTEX_SHADER );\n\n\t\tvar prefix = \"precision \" + renderer.getPrecision() + \" float;\\n\";\n\n\t\tgl.shaderSource( fragmentShader, prefix + shader.fragmentShader );\n\t\tgl.shaderSource( vertexShader, prefix + shader.vertexShader );\n\n\t\tgl.compileShader( fragmentShader );\n\t\tgl.compileShader( vertexShader );\n\n\t\tgl.attachShader( program, fragmentShader );\n\t\tgl.attachShader( program, vertexShader );\n\n\t\tgl.linkProgram( program );\n\n\t\treturn program;\n\n\t}\n\n};\n\n// File:src/renderers/webgl/plugins/ShadowMapPlugin.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.ShadowMapPlugin = function ( _renderer, _lights, _webglObjects, _webglObjectsImmediate ) {\n\n\tvar _gl = _renderer.context;\n\n\tvar _depthMaterial, _depthMaterialMorph, _depthMaterialSkin, _depthMaterialMorphSkin,\n\n\t_frustum = new THREE.Frustum(),\n\t_projScreenMatrix = new THREE.Matrix4(),\n\n\t_min = new THREE.Vector3(),\n\t_max = new THREE.Vector3(),\n\n\t_matrixPosition = new THREE.Vector3(),\n\t\n\t_renderList = [];\n\n\t// init\n\n\tvar depthShader = THREE.ShaderLib[ \"depthRGBA\" ];\n\tvar depthUniforms = THREE.UniformsUtils.clone( depthShader.uniforms );\n\n\t_depthMaterial = new THREE.ShaderMaterial( {\n\t\tuniforms: depthUniforms,\n\t\tvertexShader: depthShader.vertexShader,\n\t\tfragmentShader: depthShader.fragmentShader\n\t } );\n\n\t_depthMaterialMorph = new THREE.ShaderMaterial( {\n\t\tuniforms: depthUniforms,\n\t\tvertexShader: depthShader.vertexShader,\n\t\tfragmentShader: depthShader.fragmentShader,\n\t\tmorphTargets: true\n\t} );\n\n\t_depthMaterialSkin = new THREE.ShaderMaterial( {\n\t\tuniforms: depthUniforms,\n\t\tvertexShader: depthShader.vertexShader,\n\t\tfragmentShader: depthShader.fragmentShader,\n\t\tskinning: true\n\t} );\n\n\t_depthMaterialMorphSkin = new THREE.ShaderMaterial( {\n\t\tuniforms: depthUniforms,\n\t\tvertexShader: depthShader.vertexShader,\n\t\tfragmentShader: depthShader.fragmentShader,\n\t\tmorphTargets: true,\n\t\tskinning: true\n\t} );\n\n\t_depthMaterial._shadowPass = true;\n\t_depthMaterialMorph._shadowPass = true;\n\t_depthMaterialSkin._shadowPass = true;\n\t_depthMaterialMorphSkin._shadowPass = true;\n\n\tthis.render = function ( scene, camera ) {\n\n\t\tif ( _renderer.shadowMapEnabled === false ) return;\n\n\t\tvar i, il, j, jl, n,\n\n\t\tshadowMap, shadowMatrix, shadowCamera,\n\t\tprogram, buffer, material,\n\t\twebglObject, object, light,\n\n\t\tlights = [],\n\t\tk = 0,\n\n\t\tfog = null;\n\n\t\t// set GL state for depth map\n\n\t\t_gl.clearColor( 1, 1, 1, 1 );\n\t\t_gl.disable( _gl.BLEND );\n\n\t\t_gl.enable( _gl.CULL_FACE );\n\t\t_gl.frontFace( _gl.CCW );\n\n\t\tif ( _renderer.shadowMapCullFace === THREE.CullFaceFront ) {\n\n\t\t\t_gl.cullFace( _gl.FRONT );\n\n\t\t} else {\n\n\t\t\t_gl.cullFace( _gl.BACK );\n\n\t\t}\n\n\t\t_renderer.setDepthTest( true );\n\n\t\t// preprocess lights\n\t\t// \t- skip lights that are not casting shadows\n\t\t//\t- create virtual lights for cascaded shadow maps\n\n\t\tfor ( i = 0, il = _lights.length; i < il; i ++ ) {\n\n\t\t\tlight = _lights[ i ];\n\n\t\t\tif ( ! light.castShadow ) continue;\n\n\t\t\tif ( ( light instanceof THREE.DirectionalLight ) && light.shadowCascade ) {\n\n\t\t\t\tfor ( n = 0; n < light.shadowCascadeCount; n ++ ) {\n\n\t\t\t\t\tvar virtualLight;\n\n\t\t\t\t\tif ( ! light.shadowCascadeArray[ n ] ) {\n\n\t\t\t\t\t\tvirtualLight = createVirtualLight( light, n );\n\t\t\t\t\t\tvirtualLight.originalCamera = camera;\n\n\t\t\t\t\t\tvar gyro = new THREE.Gyroscope();\n\t\t\t\t\t\tgyro.position.copy( light.shadowCascadeOffset );\n\n\t\t\t\t\t\tgyro.add( virtualLight );\n\t\t\t\t\t\tgyro.add( virtualLight.target );\n\n\t\t\t\t\t\tcamera.add( gyro );\n\n\t\t\t\t\t\tlight.shadowCascadeArray[ n ] = virtualLight;\n\n\t\t\t\t\t\tconsole.log( \"Created virtualLight\", virtualLight );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvirtualLight = light.shadowCascadeArray[ n ];\n\n\t\t\t\t\t}\n\n\t\t\t\t\tupdateVirtualLight( light, n );\n\n\t\t\t\t\tlights[ k ] = virtualLight;\n\t\t\t\t\tk ++;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tlights[ k ] = light;\n\t\t\t\tk ++;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// render depth map\n\n\t\tfor ( i = 0, il = lights.length; i < il; i ++ ) {\n\n\t\t\tlight = lights[ i ];\n\n\t\t\tif ( ! light.shadowMap ) {\n\n\t\t\t\tvar shadowFilter = THREE.LinearFilter;\n\n\t\t\t\tif ( _renderer.shadowMapType === THREE.PCFSoftShadowMap ) {\n\n\t\t\t\t\tshadowFilter = THREE.NearestFilter;\n\n\t\t\t\t}\n\n\t\t\t\tvar pars = { minFilter: shadowFilter, magFilter: shadowFilter, format: THREE.RGBAFormat };\n\n\t\t\t\tlight.shadowMap = new THREE.WebGLRenderTarget( light.shadowMapWidth, light.shadowMapHeight, pars );\n\t\t\t\tlight.shadowMapSize = new THREE.Vector2( light.shadowMapWidth, light.shadowMapHeight );\n\n\t\t\t\tlight.shadowMatrix = new THREE.Matrix4();\n\n\t\t\t}\n\n\t\t\tif ( ! light.shadowCamera ) {\n\n\t\t\t\tif ( light instanceof THREE.SpotLight ) {\n\n\t\t\t\t\tlight.shadowCamera = new THREE.PerspectiveCamera( light.shadowCameraFov, light.shadowMapWidth / light.shadowMapHeight, light.shadowCameraNear, light.shadowCameraFar );\n\n\t\t\t\t} else if ( light instanceof THREE.DirectionalLight ) {\n\n\t\t\t\t\tlight.shadowCamera = new THREE.OrthographicCamera( light.shadowCameraLeft, light.shadowCameraRight, light.shadowCameraTop, light.shadowCameraBottom, light.shadowCameraNear, light.shadowCameraFar );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( \"Unsupported light type for shadow\" );\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\tscene.add( light.shadowCamera );\n\n\t\t\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\n\n\t\t\t}\n\n\t\t\tif ( light.shadowCameraVisible && ! light.cameraHelper ) {\n\n\t\t\t\tlight.cameraHelper = new THREE.CameraHelper( light.shadowCamera );\n\t\t\t\tscene.add( light.cameraHelper );\n\n\t\t\t}\n\n\t\t\tif ( light.isVirtual && virtualLight.originalCamera == camera ) {\n\n\t\t\t\tupdateShadowCamera( camera, light );\n\n\t\t\t}\n\n\t\t\tshadowMap = light.shadowMap;\n\t\t\tshadowMatrix = light.shadowMatrix;\n\t\t\tshadowCamera = light.shadowCamera;\n\n\t\t\t//\n\n\t\t\tshadowCamera.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t_matrixPosition.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\tshadowCamera.lookAt( _matrixPosition );\n\t\t\tshadowCamera.updateMatrixWorld();\n\n\t\t\tshadowCamera.matrixWorldInverse.getInverse( shadowCamera.matrixWorld );\n\n\t\t\t//\n\n\t\t\tif ( light.cameraHelper ) light.cameraHelper.visible = light.shadowCameraVisible;\n\t\t\tif ( light.shadowCameraVisible ) light.cameraHelper.update();\n\n\t\t\t// compute shadow matrix\n\n\t\t\tshadowMatrix.set(\n\t\t\t\t0.5, 0.0, 0.0, 0.5,\n\t\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t\t0.0, 0.0, 0.0, 1.0\n\t\t\t);\n\n\t\t\tshadowMatrix.multiply( shadowCamera.projectionMatrix );\n\t\t\tshadowMatrix.multiply( shadowCamera.matrixWorldInverse );\n\n\t\t\t// update camera matrices and frustum\n\n\t\t\t_projScreenMatrix.multiplyMatrices( shadowCamera.projectionMatrix, shadowCamera.matrixWorldInverse );\n\t\t\t_frustum.setFromMatrix( _projScreenMatrix );\n\n\t\t\t// render shadow map\n\n\t\t\t_renderer.setRenderTarget( shadowMap );\n\t\t\t_renderer.clear();\n\n\t\t\t// set object matrices & frustum culling\n\n\t\t\t_renderList.length = 0;\n\n\t\t\tprojectObject( scene, scene, shadowCamera );\n\n\n\t\t\t// render regular objects\n\n\t\t\tvar objectMaterial, useMorphing, useSkinning;\n\n\t\t\tfor ( j = 0, jl = _renderList.length; j < jl; j ++ ) {\n\n\t\t\t\twebglObject = _renderList[ j ];\n\n\t\t\t\tobject = webglObject.object;\n\t\t\t\tbuffer = webglObject.buffer;\n\n\t\t\t\t// culling is overriden globally for all objects\n\t\t\t\t// while rendering depth map\n\n\t\t\t\t// need to deal with MeshFaceMaterial somehow\n\t\t\t\t// in that case just use the first of material.materials for now\n\t\t\t\t// (proper solution would require to break objects by materials\n\t\t\t\t//  similarly to regular rendering and then set corresponding\n\t\t\t\t//  depth materials per each chunk instead of just once per object)\n\n\t\t\t\tobjectMaterial = getObjectMaterial( object );\n\n\t\t\t\tuseMorphing = object.geometry.morphTargets !== undefined && object.geometry.morphTargets.length > 0 && objectMaterial.morphTargets;\n\t\t\t\tuseSkinning = object instanceof THREE.SkinnedMesh && objectMaterial.skinning;\n\n\t\t\t\tif ( object.customDepthMaterial ) {\n\n\t\t\t\t\tmaterial = object.customDepthMaterial;\n\n\t\t\t\t} else if ( useSkinning ) {\n\n\t\t\t\t\tmaterial = useMorphing ? _depthMaterialMorphSkin : _depthMaterialSkin;\n\n\t\t\t\t} else if ( useMorphing ) {\n\n\t\t\t\t\tmaterial = _depthMaterialMorph;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tmaterial = _depthMaterial;\n\n\t\t\t\t}\n\n\t\t\t\t_renderer.setMaterialFaces( objectMaterial );\n\n\t\t\t\tif ( buffer instanceof THREE.BufferGeometry ) {\n\n\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, _lights, fog, material, buffer, object );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_renderer.renderBuffer( shadowCamera, _lights, fog, material, buffer, object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// set matrices and render immediate objects\n\n\t\t\tfor ( j = 0, jl = _webglObjectsImmediate.length; j < jl; j ++ ) {\n\n\t\t\t\twebglObject = _webglObjectsImmediate[ j ];\n\t\t\t\tobject = webglObject.object;\n\n\t\t\t\tif ( object.visible && object.castShadow ) {\n\n\t\t\t\t\tobject._modelViewMatrix.multiplyMatrices( shadowCamera.matrixWorldInverse, object.matrixWorld );\n\n\t\t\t\t\t_renderer.renderImmediateObject( shadowCamera, _lights, fog, _depthMaterial, object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// restore GL state\n\n\t\tvar clearColor = _renderer.getClearColor(),\n\t\tclearAlpha = _renderer.getClearAlpha();\n\n\t\t_gl.clearColor( clearColor.r, clearColor.g, clearColor.b, clearAlpha );\n\t\t_gl.enable( _gl.BLEND );\n\n\t\tif ( _renderer.shadowMapCullFace === THREE.CullFaceFront ) {\n\n\t\t\t_gl.cullFace( _gl.BACK );\n\n\t\t}\n\n\t\t_renderer.resetGLState();\n\n\t};\n\n\tfunction projectObject( scene, object, shadowCamera ){\n\n\t\tif ( object.visible ) {\n\n\t\t\tvar webglObjects = _webglObjects[ object.id ];\n\n\t\t\tif ( webglObjects && object.castShadow && (object.frustumCulled === false || _frustum.intersectsObject( object ) === true) ) {\n\n\t\t\t\tfor ( var i = 0, l = webglObjects.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar webglObject = webglObjects[ i ];\n\n\t\t\t\t\tobject._modelViewMatrix.multiplyMatrices( shadowCamera.matrixWorldInverse, object.matrixWorld );\n\t\t\t\t\t_renderList.push( webglObject );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfor ( var i = 0, l = object.children.length; i < l; i ++ ) {\n\n\t\t\t\tprojectObject( scene, object.children[ i ], shadowCamera );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction createVirtualLight( light, cascade ) {\n\n\t\tvar virtualLight = new THREE.DirectionalLight();\n\n\t\tvirtualLight.isVirtual = true;\n\n\t\tvirtualLight.onlyShadow = true;\n\t\tvirtualLight.castShadow = true;\n\n\t\tvirtualLight.shadowCameraNear = light.shadowCameraNear;\n\t\tvirtualLight.shadowCameraFar = light.shadowCameraFar;\n\n\t\tvirtualLight.shadowCameraLeft = light.shadowCameraLeft;\n\t\tvirtualLight.shadowCameraRight = light.shadowCameraRight;\n\t\tvirtualLight.shadowCameraBottom = light.shadowCameraBottom;\n\t\tvirtualLight.shadowCameraTop = light.shadowCameraTop;\n\n\t\tvirtualLight.shadowCameraVisible = light.shadowCameraVisible;\n\n\t\tvirtualLight.shadowDarkness = light.shadowDarkness;\n\n\t\tvirtualLight.shadowBias = light.shadowCascadeBias[ cascade ];\n\t\tvirtualLight.shadowMapWidth = light.shadowCascadeWidth[ cascade ];\n\t\tvirtualLight.shadowMapHeight = light.shadowCascadeHeight[ cascade ];\n\n\t\tvirtualLight.pointsWorld = [];\n\t\tvirtualLight.pointsFrustum = [];\n\n\t\tvar pointsWorld = virtualLight.pointsWorld,\n\t\t\tpointsFrustum = virtualLight.pointsFrustum;\n\n\t\tfor ( var i = 0; i < 8; i ++ ) {\n\n\t\t\tpointsWorld[ i ] = new THREE.Vector3();\n\t\t\tpointsFrustum[ i ] = new THREE.Vector3();\n\n\t\t}\n\n\t\tvar nearZ = light.shadowCascadeNearZ[ cascade ];\n\t\tvar farZ = light.shadowCascadeFarZ[ cascade ];\n\n\t\tpointsFrustum[ 0 ].set( - 1, - 1, nearZ );\n\t\tpointsFrustum[ 1 ].set(  1, - 1, nearZ );\n\t\tpointsFrustum[ 2 ].set( - 1,  1, nearZ );\n\t\tpointsFrustum[ 3 ].set(  1,  1, nearZ );\n\n\t\tpointsFrustum[ 4 ].set( - 1, - 1, farZ );\n\t\tpointsFrustum[ 5 ].set(  1, - 1, farZ );\n\t\tpointsFrustum[ 6 ].set( - 1,  1, farZ );\n\t\tpointsFrustum[ 7 ].set(  1,  1, farZ );\n\n\t\treturn virtualLight;\n\n\t}\n\n\t// Synchronize virtual light with the original light\n\n\tfunction updateVirtualLight( light, cascade ) {\n\n\t\tvar virtualLight = light.shadowCascadeArray[ cascade ];\n\n\t\tvirtualLight.position.copy( light.position );\n\t\tvirtualLight.target.position.copy( light.target.position );\n\t\tvirtualLight.lookAt( virtualLight.target );\n\n\t\tvirtualLight.shadowCameraVisible = light.shadowCameraVisible;\n\t\tvirtualLight.shadowDarkness = light.shadowDarkness;\n\n\t\tvirtualLight.shadowBias = light.shadowCascadeBias[ cascade ];\n\n\t\tvar nearZ = light.shadowCascadeNearZ[ cascade ];\n\t\tvar farZ = light.shadowCascadeFarZ[ cascade ];\n\n\t\tvar pointsFrustum = virtualLight.pointsFrustum;\n\n\t\tpointsFrustum[ 0 ].z = nearZ;\n\t\tpointsFrustum[ 1 ].z = nearZ;\n\t\tpointsFrustum[ 2 ].z = nearZ;\n\t\tpointsFrustum[ 3 ].z = nearZ;\n\n\t\tpointsFrustum[ 4 ].z = farZ;\n\t\tpointsFrustum[ 5 ].z = farZ;\n\t\tpointsFrustum[ 6 ].z = farZ;\n\t\tpointsFrustum[ 7 ].z = farZ;\n\n\t}\n\n\t// Fit shadow camera's ortho frustum to camera frustum\n\n\tfunction updateShadowCamera( camera, light ) {\n\n\t\tvar shadowCamera = light.shadowCamera,\n\t\t\tpointsFrustum = light.pointsFrustum,\n\t\t\tpointsWorld = light.pointsWorld;\n\n\t\t_min.set( Infinity, Infinity, Infinity );\n\t\t_max.set( - Infinity, - Infinity, - Infinity );\n\n\t\tfor ( var i = 0; i < 8; i ++ ) {\n\n\t\t\tvar p = pointsWorld[ i ];\n\n\t\t\tp.copy( pointsFrustum[ i ] );\n\t\t\tp.unproject( camera );\n\n\t\t\tp.applyMatrix4( shadowCamera.matrixWorldInverse );\n\n\t\t\tif ( p.x < _min.x ) _min.x = p.x;\n\t\t\tif ( p.x > _max.x ) _max.x = p.x;\n\n\t\t\tif ( p.y < _min.y ) _min.y = p.y;\n\t\t\tif ( p.y > _max.y ) _max.y = p.y;\n\n\t\t\tif ( p.z < _min.z ) _min.z = p.z;\n\t\t\tif ( p.z > _max.z ) _max.z = p.z;\n\n\t\t}\n\n\t\tshadowCamera.left = _min.x;\n\t\tshadowCamera.right = _max.x;\n\t\tshadowCamera.top = _max.y;\n\t\tshadowCamera.bottom = _min.y;\n\n\t\t// can't really fit near/far\n\t\t//shadowCamera.near = _min.z;\n\t\t//shadowCamera.far = _max.z;\n\n\t\tshadowCamera.updateProjectionMatrix();\n\n\t}\n\n\t// For the moment just ignore objects that have multiple materials with different animation methods\n\t// Only the first material will be taken into account for deciding which depth material to use for shadow maps\n\n\tfunction getObjectMaterial( object ) {\n\n\t\treturn object.material instanceof THREE.MeshFaceMaterial\n\t\t\t? object.material.materials[ 0 ]\n\t\t\t: object.material;\n\n\t};\n\n};\n\n// File:src/renderers/webgl/plugins/SpritePlugin.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.SpritePlugin = function ( renderer, sprites ) {\n\n\tvar gl = renderer.context;\n\n\tvar vertexBuffer, elementBuffer;\n\tvar program, attributes, uniforms;\n\n\tvar texture;\n\t\n\tvar init = function () {\n\n\t\tvar vertices = new Float32Array( [\n\t\t\t- 0.5, - 0.5,  0, 0,\n\t\t\t  0.5, - 0.5,  1, 0,\n\t\t\t  0.5,   0.5,  1, 1,\n\t\t\t- 0.5,   0.5,  0, 1\n\t\t] );\n\n\t\tvar faces = new Uint16Array( [\n\t\t\t0, 1, 2,\n\t\t\t0, 2, 3\n\t\t] );\n\n\t\tvertexBuffer  = gl.createBuffer();\n\t\telementBuffer = gl.createBuffer();\n\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\n\t\tgl.bufferData( gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW );\n\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\n\t\tgl.bufferData( gl.ELEMENT_ARRAY_BUFFER, faces, gl.STATIC_DRAW );\n\n\t\tprogram = createProgram();\n\n\t\tattributes = {\n\t\t\tposition:\t\t\tgl.getAttribLocation ( program, 'position' ),\n\t\t\tuv:\t\t\t\t\tgl.getAttribLocation ( program, 'uv' )\n\t\t};\n\n\t\tuniforms = {\n\t\t\tuvOffset:\t\t\tgl.getUniformLocation( program, 'uvOffset' ),\n\t\t\tuvScale:\t\t\tgl.getUniformLocation( program, 'uvScale' ),\n\n\t\t\trotation:\t\t\tgl.getUniformLocation( program, 'rotation' ),\n\t\t\tscale:\t\t\t\tgl.getUniformLocation( program, 'scale' ),\n\n\t\t\tcolor:\t\t\t\tgl.getUniformLocation( program, 'color' ),\n\t\t\tmap:\t\t\t\tgl.getUniformLocation( program, 'map' ),\n\t\t\topacity:\t\t\tgl.getUniformLocation( program, 'opacity' ),\n\n\t\t\tmodelViewMatrix: \tgl.getUniformLocation( program, 'modelViewMatrix' ),\n\t\t\tprojectionMatrix:\tgl.getUniformLocation( program, 'projectionMatrix' ),\n\n\t\t\tfogType:\t\t\tgl.getUniformLocation( program, 'fogType' ),\n\t\t\tfogDensity:\t\t\tgl.getUniformLocation( program, 'fogDensity' ),\n\t\t\tfogNear:\t\t\tgl.getUniformLocation( program, 'fogNear' ),\n\t\t\tfogFar:\t\t\t\tgl.getUniformLocation( program, 'fogFar' ),\n\t\t\tfogColor:\t\t\tgl.getUniformLocation( program, 'fogColor' ),\n\n\t\t\talphaTest:\t\t\tgl.getUniformLocation( program, 'alphaTest' )\n\t\t};\n\n\t\tvar canvas = document.createElement( 'canvas' );\n\t\tcanvas.width = 8;\n\t\tcanvas.height = 8;\n\n\t\tvar context = canvas.getContext( '2d' );\n\t\tcontext.fillStyle = 'white';\n\t\tcontext.fillRect( 0, 0, 8, 8 );\n\n\t\ttexture = new THREE.Texture( canvas );\n\t\ttexture.needsUpdate = true;\n\n\t};\n\n\tthis.render = function ( scene, camera ) {\n\n\t\tif ( sprites.length === 0 ) return;\n\n\t\t// setup gl\n\n\t\tif ( program === undefined ) {\n\n\t\t\tinit();\n\n\t\t}\n\n\t\tgl.useProgram( program );\n\n\t\tgl.enableVertexAttribArray( attributes.position );\n\t\tgl.enableVertexAttribArray( attributes.uv );\n\n\t\tgl.disable( gl.CULL_FACE );\n\t\tgl.enable( gl.BLEND );\n\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\n\t\tgl.vertexAttribPointer( attributes.position, 2, gl.FLOAT, false, 2 * 8, 0 );\n\t\tgl.vertexAttribPointer( attributes.uv, 2, gl.FLOAT, false, 2 * 8, 8 );\n\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\n\n\t\tgl.uniformMatrix4fv( uniforms.projectionMatrix, false, camera.projectionMatrix.elements );\n\n\t\tgl.activeTexture( gl.TEXTURE0 );\n\t\tgl.uniform1i( uniforms.map, 0 );\n\n\t\tvar oldFogType = 0;\n\t\tvar sceneFogType = 0;\n\t\tvar fog = scene.fog;\n\n\t\tif ( fog ) {\n\n\t\t\tgl.uniform3f( uniforms.fogColor, fog.color.r, fog.color.g, fog.color.b );\n\n\t\t\tif ( fog instanceof THREE.Fog ) {\n\n\t\t\t\tgl.uniform1f( uniforms.fogNear, fog.near );\n\t\t\t\tgl.uniform1f( uniforms.fogFar, fog.far );\n\n\t\t\t\tgl.uniform1i( uniforms.fogType, 1 );\n\t\t\t\toldFogType = 1;\n\t\t\t\tsceneFogType = 1;\n\n\t\t\t} else if ( fog instanceof THREE.FogExp2 ) {\n\n\t\t\t\tgl.uniform1f( uniforms.fogDensity, fog.density );\n\n\t\t\t\tgl.uniform1i( uniforms.fogType, 2 );\n\t\t\t\toldFogType = 2;\n\t\t\t\tsceneFogType = 2;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tgl.uniform1i( uniforms.fogType, 0 );\n\t\t\toldFogType = 0;\n\t\t\tsceneFogType = 0;\n\n\t\t}\n\n\n\t\t// update positions and sort\n\n\t\tfor ( var i = 0, l = sprites.length; i < l; i ++ ) {\n\n\t\t\tvar sprite = sprites[ i ];\n\n\t\t\tsprite._modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, sprite.matrixWorld );\n\n\t\t\tif ( sprite.renderDepth === null ) {\n\n\t\t\t\tsprite.z = - sprite._modelViewMatrix.elements[ 14 ];\n\n\t\t\t} else {\n\n\t\t\t\tsprite.z = sprite.renderDepth;\n\n\t\t\t}\n\n\t\t}\n\n\t\tsprites.sort( painterSortStable );\n\n\t\t// render all sprites\n\n\t\tvar scale = [];\n\n\t\tfor ( var i = 0, l = sprites.length; i < l; i ++ ) {\n\n\t\t\tvar sprite = sprites[ i ];\n\t\t\tvar material = sprite.material;\n\n\t\t\tgl.uniform1f( uniforms.alphaTest, material.alphaTest );\n\t\t\tgl.uniformMatrix4fv( uniforms.modelViewMatrix, false, sprite._modelViewMatrix.elements );\n\n\t\t\tscale[ 0 ] = sprite.scale.x;\n\t\t\tscale[ 1 ] = sprite.scale.y;\n\n\t\t\tvar fogType = 0;\n\n\t\t\tif ( scene.fog && material.fog ) {\n\n\t\t\t\tfogType = sceneFogType;\n\n\t\t\t}\n\n\t\t\tif ( oldFogType !== fogType ) {\n\n\t\t\t\tgl.uniform1i( uniforms.fogType, fogType );\n\t\t\t\toldFogType = fogType;\n\n\t\t\t}\n\n\t\t\tif ( material.map !== null ) {\n\n\t\t\t\tgl.uniform2f( uniforms.uvOffset, material.map.offset.x, material.map.offset.y );\n\t\t\t\tgl.uniform2f( uniforms.uvScale, material.map.repeat.x, material.map.repeat.y );\n\n\t\t\t} else {\n\n\t\t\t\tgl.uniform2f( uniforms.uvOffset, 0, 0 );\n\t\t\t\tgl.uniform2f( uniforms.uvScale, 1, 1 );\n\n\t\t\t}\n\n\t\t\tgl.uniform1f( uniforms.opacity, material.opacity );\n\t\t\tgl.uniform3f( uniforms.color, material.color.r, material.color.g, material.color.b );\n\n\t\t\tgl.uniform1f( uniforms.rotation, material.rotation );\n\t\t\tgl.uniform2fv( uniforms.scale, scale );\n\n\t\t\trenderer.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst );\n\t\t\trenderer.setDepthTest( material.depthTest );\n\t\t\trenderer.setDepthWrite( material.depthWrite );\n\n\t\t\tif ( material.map && material.map.image && material.map.image.width ) {\n\n\t\t\t\trenderer.setTexture( material.map, 0 );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setTexture( texture, 0 );\n\n\t\t\t}\n\n\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\n\n\t\t}\n\n\t\t// restore gl\n\n\t\tgl.enable( gl.CULL_FACE );\n\t\t\n\t\trenderer.resetGLState();\n\n\t};\n\n\tfunction createProgram () {\n\n\t\tvar program = gl.createProgram();\n\n\t\tvar vertexShader = gl.createShader( gl.VERTEX_SHADER );\n\t\tvar fragmentShader = gl.createShader( gl.FRAGMENT_SHADER );\n\n\t\tgl.shaderSource( vertexShader, [\n\n\t\t\t'precision ' + renderer.getPrecision() + ' float;',\n\n\t\t\t'uniform mat4 modelViewMatrix;',\n\t\t\t'uniform mat4 projectionMatrix;',\n\t\t\t'uniform float rotation;',\n\t\t\t'uniform vec2 scale;',\n\t\t\t'uniform vec2 uvOffset;',\n\t\t\t'uniform vec2 uvScale;',\n\n\t\t\t'attribute vec2 position;',\n\t\t\t'attribute vec2 uv;',\n\n\t\t\t'varying vec2 vUV;',\n\n\t\t\t'void main() {',\n\n\t\t\t\t'vUV = uvOffset + uv * uvScale;',\n\n\t\t\t\t'vec2 alignedPosition = position * scale;',\n\n\t\t\t\t'vec2 rotatedPosition;',\n\t\t\t\t'rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;',\n\t\t\t\t'rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;',\n\n\t\t\t\t'vec4 finalPosition;',\n\n\t\t\t\t'finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );',\n\t\t\t\t'finalPosition.xy += rotatedPosition;',\n\t\t\t\t'finalPosition = projectionMatrix * finalPosition;',\n\n\t\t\t\t'gl_Position = finalPosition;',\n\n\t\t\t'}'\n\n\t\t].join( '\\n' ) );\n\n\t\tgl.shaderSource( fragmentShader, [\n\n\t\t\t'precision ' + renderer.getPrecision() + ' float;',\n\n\t\t\t'uniform vec3 color;',\n\t\t\t'uniform sampler2D map;',\n\t\t\t'uniform float opacity;',\n\n\t\t\t'uniform int fogType;',\n\t\t\t'uniform vec3 fogColor;',\n\t\t\t'uniform float fogDensity;',\n\t\t\t'uniform float fogNear;',\n\t\t\t'uniform float fogFar;',\n\t\t\t'uniform float alphaTest;',\n\n\t\t\t'varying vec2 vUV;',\n\n\t\t\t'void main() {',\n\n\t\t\t\t'vec4 texture = texture2D( map, vUV );',\n\n\t\t\t\t'if ( texture.a < alphaTest ) discard;',\n\n\t\t\t\t'gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );',\n\n\t\t\t\t'if ( fogType > 0 ) {',\n\n\t\t\t\t\t'float depth = gl_FragCoord.z / gl_FragCoord.w;',\n\t\t\t\t\t'float fogFactor = 0.0;',\n\n\t\t\t\t\t'if ( fogType == 1 ) {',\n\n\t\t\t\t\t\t'fogFactor = smoothstep( fogNear, fogFar, depth );',\n\n\t\t\t\t\t'} else {',\n\n\t\t\t\t\t\t'const float LOG2 = 1.442695;',\n\t\t\t\t\t\t'float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );',\n\t\t\t\t\t\t'fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );',\n\n\t\t\t\t\t'}',\n\n\t\t\t\t\t'gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );',\n\n\t\t\t\t'}',\n\n\t\t\t'}'\n\n\t\t].join( '\\n' ) );\n\n\t\tgl.compileShader( vertexShader );\n\t\tgl.compileShader( fragmentShader );\n\n\t\tgl.attachShader( program, vertexShader );\n\t\tgl.attachShader( program, fragmentShader );\n\n\t\tgl.linkProgram( program );\n\n\t\treturn program;\n\n\t};\n\n\tfunction painterSortStable ( a, b ) {\n\n\t\tif ( a.z !== b.z ) {\n\n\t\t\treturn b.z - a.z;\n\n\t\t} else {\n\n\t\t\treturn b.id - a.id;\n\n\t\t}\n\n\t};\n\n};\n\n// File:src/extras/GeometryUtils.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.GeometryUtils = {\n\n\tmerge: function ( geometry1, geometry2, materialIndexOffset ) {\n\n\t\tconsole.warn( 'THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.' );\n\n\t\tvar matrix;\n\n\t\tif ( geometry2 instanceof THREE.Mesh ) {\n\n\t\t\tgeometry2.matrixAutoUpdate && geometry2.updateMatrix();\n\n\t\t\tmatrix = geometry2.matrix;\n\t\t\tgeometry2 = geometry2.geometry;\n\n\t\t}\n\n\t\tgeometry1.merge( geometry2, matrix, materialIndexOffset );\n\n\t},\n\n\tcenter: function ( geometry ) {\n\n\t\tconsole.warn( 'THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.' );\n\t\treturn geometry.center();\n\n\t}\n\n};\n\n// File:src/extras/ImageUtils.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n * @author Daosheng Mu / https://github.com/DaoshengMu/\n */\n\nTHREE.ImageUtils = {\n\n\tcrossOrigin: undefined,\n\n\tloadTexture: function ( url, mapping, onLoad, onError ) {\n\n\t\tvar loader = new THREE.ImageLoader();\n\t\tloader.crossOrigin = this.crossOrigin;\n\n\t\tvar texture = new THREE.Texture( undefined, mapping );\n\n\t\tloader.load( url, function ( image ) {\n\n\t\t\ttexture.image = image;\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t}, undefined, function ( event ) {\n\n\t\t\tif ( onError ) onError( event );\n\n\t\t} );\n\n\t\ttexture.sourceFile = url;\n\n\t\treturn texture;\n\n\t},\n\n\tloadTextureCube: function ( array, mapping, onLoad, onError ) {\n\n\t\tvar images = [];\n\n\t\tvar loader = new THREE.ImageLoader();\n\t\tloader.crossOrigin = this.crossOrigin;\n\n\t\tvar texture = new THREE.CubeTexture( images, mapping );\n\n\t\t// no flipping needed for cube textures\n\n\t\ttexture.flipY = false;\n\n\t\tvar loaded = 0;\n\n\t\tvar loadTexture = function ( i ) {\n\n\t\t\tloader.load( array[ i ], function ( image ) {\n\n\t\t\t\ttexture.images[ i ] = image;\n\n\t\t\t\tloaded += 1;\n\n\t\t\t\tif ( loaded === 6 ) {\n\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t}\n\n\t\tfor ( var i = 0, il = array.length; i < il; ++ i ) {\n\n\t\t\tloadTexture( i );\n\n\t\t}\n\n\t\treturn texture;\n\n\t},\n\n\tloadCompressedTexture: function () {\n\n\t\tconsole.error( 'THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.' )\n\n\t},\n\n\tloadCompressedTextureCube: function () {\n\n\t\tconsole.error( 'THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.' )\n\n\t},\n\n\tgetNormalMap: function ( image, depth ) {\n\n\t\t// Adapted from http://www.paulbrunt.co.uk/lab/heightnormal/\n\n\t\tvar cross = function ( a, b ) {\n\n\t\t\treturn [ a[ 1 ] * b[ 2 ] - a[ 2 ] * b[ 1 ], a[ 2 ] * b[ 0 ] - a[ 0 ] * b[ 2 ], a[ 0 ] * b[ 1 ] - a[ 1 ] * b[ 0 ] ];\n\n\t\t}\n\n\t\tvar subtract = function ( a, b ) {\n\n\t\t\treturn [ a[ 0 ] - b[ 0 ], a[ 1 ] - b[ 1 ], a[ 2 ] - b[ 2 ] ];\n\n\t\t}\n\n\t\tvar normalize = function ( a ) {\n\n\t\t\tvar l = Math.sqrt( a[ 0 ] * a[ 0 ] + a[ 1 ] * a[ 1 ] + a[ 2 ] * a[ 2 ] );\n\t\t\treturn [ a[ 0 ] / l, a[ 1 ] / l, a[ 2 ] / l ];\n\n\t\t}\n\n\t\tdepth = depth | 1;\n\n\t\tvar width = image.width;\n\t\tvar height = image.height;\n\n\t\tvar canvas = document.createElement( 'canvas' );\n\t\tcanvas.width = width;\n\t\tcanvas.height = height;\n\n\t\tvar context = canvas.getContext( '2d' );\n\t\tcontext.drawImage( image, 0, 0 );\n\n\t\tvar data = context.getImageData( 0, 0, width, height ).data;\n\t\tvar imageData = context.createImageData( width, height );\n\t\tvar output = imageData.data;\n\n\t\tfor ( var x = 0; x < width; x ++ ) {\n\n\t\t\tfor ( var y = 0; y < height; y ++ ) {\n\n\t\t\t\tvar ly = y - 1 < 0 ? 0 : y - 1;\n\t\t\t\tvar uy = y + 1 > height - 1 ? height - 1 : y + 1;\n\t\t\t\tvar lx = x - 1 < 0 ? 0 : x - 1;\n\t\t\t\tvar ux = x + 1 > width - 1 ? width - 1 : x + 1;\n\n\t\t\t\tvar points = [];\n\t\t\t\tvar origin = [ 0, 0, data[ ( y * width + x ) * 4 ] / 255 * depth ];\n\t\t\t\tpoints.push( [ - 1, 0, data[ ( y * width + lx ) * 4 ] / 255 * depth ] );\n\t\t\t\tpoints.push( [ - 1, - 1, data[ ( ly * width + lx ) * 4 ] / 255 * depth ] );\n\t\t\t\tpoints.push( [ 0, - 1, data[ ( ly * width + x ) * 4 ] / 255 * depth ] );\n\t\t\t\tpoints.push( [  1, - 1, data[ ( ly * width + ux ) * 4 ] / 255 * depth ] );\n\t\t\t\tpoints.push( [ 1, 0, data[ ( y * width + ux ) * 4 ] / 255 * depth ] );\n\t\t\t\tpoints.push( [ 1, 1, data[ ( uy * width + ux ) * 4 ] / 255 * depth ] );\n\t\t\t\tpoints.push( [ 0, 1, data[ ( uy * width + x ) * 4 ] / 255 * depth ] );\n\t\t\t\tpoints.push( [ - 1, 1, data[ ( uy * width + lx ) * 4 ] / 255 * depth ] );\n\n\t\t\t\tvar normals = [];\n\t\t\t\tvar num_points = points.length;\n\n\t\t\t\tfor ( var i = 0; i < num_points; i ++ ) {\n\n\t\t\t\t\tvar v1 = points[ i ];\n\t\t\t\t\tvar v2 = points[ ( i + 1 ) % num_points ];\n\t\t\t\t\tv1 = subtract( v1, origin );\n\t\t\t\t\tv2 = subtract( v2, origin );\n\t\t\t\t\tnormals.push( normalize( cross( v1, v2 ) ) );\n\n\t\t\t\t}\n\n\t\t\t\tvar normal = [ 0, 0, 0 ];\n\n\t\t\t\tfor ( var i = 0; i < normals.length; i ++ ) {\n\n\t\t\t\t\tnormal[ 0 ] += normals[ i ][ 0 ];\n\t\t\t\t\tnormal[ 1 ] += normals[ i ][ 1 ];\n\t\t\t\t\tnormal[ 2 ] += normals[ i ][ 2 ];\n\n\t\t\t\t}\n\n\t\t\t\tnormal[ 0 ] /= normals.length;\n\t\t\t\tnormal[ 1 ] /= normals.length;\n\t\t\t\tnormal[ 2 ] /= normals.length;\n\n\t\t\t\tvar idx = ( y * width + x ) * 4;\n\n\t\t\t\toutput[ idx ] = ( ( normal[ 0 ] + 1.0 ) / 2.0 * 255 ) | 0;\n\t\t\t\toutput[ idx + 1 ] = ( ( normal[ 1 ] + 1.0 ) / 2.0 * 255 ) | 0;\n\t\t\t\toutput[ idx + 2 ] = ( normal[ 2 ] * 255 ) | 0;\n\t\t\t\toutput[ idx + 3 ] = 255;\n\n\t\t\t}\n\n\t\t}\n\n\t\tcontext.putImageData( imageData, 0, 0 );\n\n\t\treturn canvas;\n\n\t},\n\n\tgenerateDataTexture: function ( width, height, color ) {\n\n\t\tvar size = width * height;\n\t\tvar data = new Uint8Array( 3 * size );\n\n\t\tvar r = Math.floor( color.r * 255 );\n\t\tvar g = Math.floor( color.g * 255 );\n\t\tvar b = Math.floor( color.b * 255 );\n\n\t\tfor ( var i = 0; i < size; i ++ ) {\n\n\t\t\tdata[ i * 3 ] \t   = r;\n\t\t\tdata[ i * 3 + 1 ] = g;\n\t\t\tdata[ i * 3 + 2 ] = b;\n\n\t\t}\n\n\t\tvar texture = new THREE.DataTexture( data, width, height, THREE.RGBFormat );\n\t\ttexture.needsUpdate = true;\n\n\t\treturn texture;\n\n\t}\n\n};\n\n// File:src/extras/SceneUtils.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.SceneUtils = {\n\n\tcreateMultiMaterialObject: function ( geometry, materials ) {\n\n\t\tvar group = new THREE.Object3D();\n\n\t\tfor ( var i = 0, l = materials.length; i < l; i ++ ) {\n\n\t\t\tgroup.add( new THREE.Mesh( geometry, materials[ i ] ) );\n\n\t\t}\n\n\t\treturn group;\n\n\t},\n\n\tdetach: function ( child, parent, scene ) {\n\n\t\tchild.applyMatrix( parent.matrixWorld );\n\t\tparent.remove( child );\n\t\tscene.add( child );\n\n\t},\n\n\tattach: function ( child, scene, parent ) {\n\n\t\tvar matrixWorldInverse = new THREE.Matrix4();\n\t\tmatrixWorldInverse.getInverse( parent.matrixWorld );\n\t\tchild.applyMatrix( matrixWorldInverse );\n\n\t\tscene.remove( child );\n\t\tparent.add( child );\n\n\t}\n\n};\n\n// File:src/extras/FontUtils.js\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author alteredq / http://alteredqualia.com/\n *\n * For Text operations in three.js (See TextGeometry)\n *\n * It uses techniques used in:\n *\n * \ttypeface.js and canvastext\n * \t\tFor converting fonts and rendering with javascript\n *\t\thttp://typeface.neocracy.org\n *\n *\tTriangulation ported from AS3\n *\t\tSimple Polygon Triangulation\n *\t\thttp://actionsnippet.com/?p=1462\n *\n * \tA Method to triangulate shapes with holes\n *\t\thttp://www.sakri.net/blog/2009/06/12/an-approach-to-triangulating-polygons-with-holes/\n *\n */\n\nTHREE.FontUtils = {\n\n\tfaces: {},\n\n\t// Just for now. face[weight][style]\n\n\tface: 'helvetiker',\n\tweight: 'normal',\n\tstyle: 'normal',\n\tsize: 150,\n\tdivisions: 10,\n\n\tgetFace: function () {\n\n\t\ttry {\n\n\t\t\treturn this.faces[ this.face ][ this.weight ][ this.style ];\n\n\t\t} catch (e) {\n\n\t\t\tthrow \"The font \" + this.face + \" with \" + this.weight + \" weight and \" + this.style + \" style is missing.\"\n\n\t\t};\n\n\t},\n\n\tloadFace: function ( data ) {\n\n\t\tvar family = data.familyName.toLowerCase();\n\n\t\tvar ThreeFont = this;\n\n\t\tThreeFont.faces[ family ] = ThreeFont.faces[ family ] || {};\n\n\t\tThreeFont.faces[ family ][ data.cssFontWeight ] = ThreeFont.faces[ family ][ data.cssFontWeight ] || {};\n\t\tThreeFont.faces[ family ][ data.cssFontWeight ][ data.cssFontStyle ] = data;\n\n\t\tvar face = ThreeFont.faces[ family ][ data.cssFontWeight ][ data.cssFontStyle ] = data;\n\n\t\treturn data;\n\n\t},\n\n\tdrawText: function ( text ) {\n\n\t\tvar characterPts = [], allPts = [];\n\n\t\t// RenderText\n\n\t\tvar i, p,\n\t\t\tface = this.getFace(),\n\t\t\tscale = this.size / face.resolution,\n\t\t\toffset = 0,\n\t\t\tchars = String( text ).split( '' ),\n\t\t\tlength = chars.length;\n\n\t\tvar fontPaths = [];\n\n\t\tfor ( i = 0; i < length; i ++ ) {\n\n\t\t\tvar path = new THREE.Path();\n\n\t\t\tvar ret = this.extractGlyphPoints( chars[ i ], face, scale, offset, path );\n\t\t\toffset += ret.offset;\n\n\t\t\tfontPaths.push( ret.path );\n\n\t\t}\n\n\t\t// get the width\n\n\t\tvar width = offset / 2;\n\t\t//\n\t\t// for ( p = 0; p < allPts.length; p++ ) {\n\t\t//\n\t\t// \tallPts[ p ].x -= width;\n\t\t//\n\t\t// }\n\n\t\t//var extract = this.extractPoints( allPts, characterPts );\n\t\t//extract.contour = allPts;\n\n\t\t//extract.paths = fontPaths;\n\t\t//extract.offset = width;\n\n\t\treturn { paths: fontPaths, offset: width };\n\n\t},\n\n\n\n\n\textractGlyphPoints: function ( c, face, scale, offset, path ) {\n\n\t\tvar pts = [];\n\n\t\tvar i, i2, divisions,\n\t\t\toutline, action, length,\n\t\t\tscaleX, scaleY,\n\t\t\tx, y, cpx, cpy, cpx0, cpy0, cpx1, cpy1, cpx2, cpy2,\n\t\t\tlaste,\n\t\t\tglyph = face.glyphs[ c ] || face.glyphs[ '?' ];\n\n\t\tif ( ! glyph ) return;\n\n\t\tif ( glyph.o ) {\n\n\t\t\toutline = glyph._cachedOutline || ( glyph._cachedOutline = glyph.o.split( ' ' ) );\n\t\t\tlength = outline.length;\n\n\t\t\tscaleX = scale;\n\t\t\tscaleY = scale;\n\n\t\t\tfor ( i = 0; i < length; ) {\n\n\t\t\t\taction = outline[ i ++ ];\n\n\t\t\t\t//console.log( action );\n\n\t\t\t\tswitch ( action ) {\n\n\t\t\t\tcase 'm':\n\n\t\t\t\t\t// Move To\n\n\t\t\t\t\tx = outline[ i ++ ] * scaleX + offset;\n\t\t\t\t\ty = outline[ i ++ ] * scaleY;\n\n\t\t\t\t\tpath.moveTo( x, y );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'l':\n\n\t\t\t\t\t// Line To\n\n\t\t\t\t\tx = outline[ i ++ ] * scaleX + offset;\n\t\t\t\t\ty = outline[ i ++ ] * scaleY;\n\t\t\t\t\tpath.lineTo( x,y );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'q':\n\n\t\t\t\t\t// QuadraticCurveTo\n\n\t\t\t\t\tcpx  = outline[ i ++ ] * scaleX + offset;\n\t\t\t\t\tcpy  = outline[ i ++ ] * scaleY;\n\t\t\t\t\tcpx1 = outline[ i ++ ] * scaleX + offset;\n\t\t\t\t\tcpy1 = outline[ i ++ ] * scaleY;\n\n\t\t\t\t\tpath.quadraticCurveTo( cpx1, cpy1, cpx, cpy );\n\n\t\t\t\t\tlaste = pts[ pts.length - 1 ];\n\n\t\t\t\t\tif ( laste ) {\n\n\t\t\t\t\t\tcpx0 = laste.x;\n\t\t\t\t\t\tcpy0 = laste.y;\n\n\t\t\t\t\t\tfor ( i2 = 1, divisions = this.divisions; i2 <= divisions; i2 ++ ) {\n\n\t\t\t\t\t\t\tvar t = i2 / divisions;\n\t\t\t\t\t\t\tvar tx = THREE.Shape.Utils.b2( t, cpx0, cpx1, cpx );\n\t\t\t\t\t\t\tvar ty = THREE.Shape.Utils.b2( t, cpy0, cpy1, cpy );\n\t\t\t\t\t  }\n\n\t\t\t\t  }\n\n\t\t\t\t  break;\n\n\t\t\t\tcase 'b':\n\n\t\t\t\t\t// Cubic Bezier Curve\n\n\t\t\t\t\tcpx  = outline[ i ++ ] *  scaleX + offset;\n\t\t\t\t\tcpy  = outline[ i ++ ] *  scaleY;\n\t\t\t\t\tcpx1 = outline[ i ++ ] *  scaleX + offset;\n\t\t\t\t\tcpy1 = outline[ i ++ ] *  scaleY;\n\t\t\t\t\tcpx2 = outline[ i ++ ] *  scaleX + offset;\n\t\t\t\t\tcpy2 = outline[ i ++ ] *  scaleY;\n\n\t\t\t\t\tpath.bezierCurveTo( cpx1, cpy1, cpx2, cpy2, cpx, cpy );\n\n\t\t\t\t\tlaste = pts[ pts.length - 1 ];\n\n\t\t\t\t\tif ( laste ) {\n\n\t\t\t\t\t\tcpx0 = laste.x;\n\t\t\t\t\t\tcpy0 = laste.y;\n\n\t\t\t\t\t\tfor ( i2 = 1, divisions = this.divisions; i2 <= divisions; i2 ++ ) {\n\n\t\t\t\t\t\t\tvar t = i2 / divisions;\n\t\t\t\t\t\t\tvar tx = THREE.Shape.Utils.b3( t, cpx0, cpx1, cpx2, cpx );\n\t\t\t\t\t\t\tvar ty = THREE.Shape.Utils.b3( t, cpy0, cpy1, cpy2, cpy );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\n\n\t\treturn { offset: glyph.ha * scale, path:path };\n\t}\n\n};\n\n\nTHREE.FontUtils.generateShapes = function ( text, parameters ) {\n\n\t// Parameters \n\n\tparameters = parameters || {};\n\n\tvar size = parameters.size !== undefined ? parameters.size : 100;\n\tvar curveSegments = parameters.curveSegments !== undefined ? parameters.curveSegments : 4;\n\n\tvar font = parameters.font !== undefined ? parameters.font : 'helvetiker';\n\tvar weight = parameters.weight !== undefined ? parameters.weight : 'normal';\n\tvar style = parameters.style !== undefined ? parameters.style : 'normal';\n\n\tTHREE.FontUtils.size = size;\n\tTHREE.FontUtils.divisions = curveSegments;\n\n\tTHREE.FontUtils.face = font;\n\tTHREE.FontUtils.weight = weight;\n\tTHREE.FontUtils.style = style;\n\n\t// Get a Font data json object\n\n\tvar data = THREE.FontUtils.drawText( text );\n\n\tvar paths = data.paths;\n\tvar shapes = [];\n\n\tfor ( var p = 0, pl = paths.length; p < pl; p ++ ) {\n\n\t\tArray.prototype.push.apply( shapes, paths[ p ].toShapes() );\n\n\t}\n\n\treturn shapes;\n\n};\n\n\n/**\n * This code is a quick port of code written in C++ which was submitted to\n * flipcode.com by John W. Ratcliff  // July 22, 2000\n * See original code and more information here:\n * http://www.flipcode.com/archives/Efficient_Polygon_Triangulation.shtml\n *\n * ported to actionscript by Zevan Rosser\n * www.actionsnippet.com\n *\n * ported to javascript by Joshua Koo\n * http://www.lab4games.net/zz85/blog\n *\n */\n\n\n( function ( namespace ) {\n\n\tvar EPSILON = 0.0000000001;\n\n\t// takes in an contour array and returns\n\n\tvar process = function ( contour, indices ) {\n\n\t\tvar n = contour.length;\n\n\t\tif ( n < 3 ) return null;\n\n\t\tvar result = [],\n\t\t\tverts = [],\n\t\t\tvertIndices = [];\n\n\t\t/* we want a counter-clockwise polygon in verts */\n\n\t\tvar u, v, w;\n\n\t\tif ( area( contour ) > 0.0 ) {\n\n\t\t\tfor ( v = 0; v < n; v ++ ) verts[ v ] = v;\n\n\t\t} else {\n\n\t\t\tfor ( v = 0; v < n; v ++ ) verts[ v ] = ( n - 1 ) - v;\n\n\t\t}\n\n\t\tvar nv = n;\n\n\t\t/*  remove nv - 2 vertices, creating 1 triangle every time */\n\n\t\tvar count = 2 * nv;   /* error detection */\n\n\t\tfor ( v = nv - 1; nv > 2; ) {\n\n\t\t\t/* if we loop, it is probably a non-simple polygon */\n\n\t\t\tif ( ( count -- ) <= 0 ) {\n\n\t\t\t\t//** Triangulate: ERROR - probable bad polygon!\n\n\t\t\t\t//throw ( \"Warning, unable to triangulate polygon!\" );\n\t\t\t\t//return null;\n\t\t\t\t// Sometimes warning is fine, especially polygons are triangulated in reverse.\n\t\t\t\tconsole.log( 'Warning, unable to triangulate polygon!' );\n\n\t\t\t\tif ( indices ) return vertIndices;\n\t\t\t\treturn result;\n\n\t\t\t}\n\n\t\t\t/* three consecutive vertices in current polygon, <u,v,w> */\n\n\t\t\tu = v; \t \tif ( nv <= u ) u = 0;     /* previous */\n\t\t\tv = u + 1;  if ( nv <= v ) v = 0;     /* new v    */\n\t\t\tw = v + 1;  if ( nv <= w ) w = 0;     /* next     */\n\n\t\t\tif ( snip( contour, u, v, w, nv, verts ) ) {\n\n\t\t\t\tvar a, b, c, s, t;\n\n\t\t\t\t/* true names of the vertices */\n\n\t\t\t\ta = verts[ u ];\n\t\t\t\tb = verts[ v ];\n\t\t\t\tc = verts[ w ];\n\n\t\t\t\t/* output Triangle */\n\n\t\t\t\tresult.push( [ contour[ a ],\n\t\t\t\t\tcontour[ b ],\n\t\t\t\t\tcontour[ c ] ] );\n\n\n\t\t\t\tvertIndices.push( [ verts[ u ], verts[ v ], verts[ w ] ] );\n\n\t\t\t\t/* remove v from the remaining polygon */\n\n\t\t\t\tfor ( s = v, t = v + 1; t < nv; s++, t++ ) {\n\n\t\t\t\t\tverts[ s ] = verts[ t ];\n\n\t\t\t\t}\n\n\t\t\t\tnv --;\n\n\t\t\t\t/* reset error detection counter */\n\n\t\t\t\tcount = 2 * nv;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( indices ) return vertIndices;\n\t\treturn result;\n\n\t};\n\n\t// calculate area of the contour polygon\n\n\tvar area = function ( contour ) {\n\n\t\tvar n = contour.length;\n\t\tvar a = 0.0;\n\n\t\tfor ( var p = n - 1, q = 0; q < n; p = q ++ ) {\n\n\t\t\ta += contour[ p ].x * contour[ q ].y - contour[ q ].x * contour[ p ].y;\n\n\t\t}\n\n\t\treturn a * 0.5;\n\n\t};\n\n\tvar snip = function ( contour, u, v, w, n, verts ) {\n\n\t\tvar p;\n\t\tvar ax, ay, bx, by;\n\t\tvar cx, cy, px, py;\n\n\t\tax = contour[ verts[ u ] ].x;\n\t\tay = contour[ verts[ u ] ].y;\n\n\t\tbx = contour[ verts[ v ] ].x;\n\t\tby = contour[ verts[ v ] ].y;\n\n\t\tcx = contour[ verts[ w ] ].x;\n\t\tcy = contour[ verts[ w ] ].y;\n\n\t\tif ( EPSILON > ( ( ( bx - ax ) * ( cy - ay ) ) - ( ( by - ay ) * ( cx - ax ) ) ) ) return false;\n\n\t\tvar aX, aY, bX, bY, cX, cY;\n\t\tvar apx, apy, bpx, bpy, cpx, cpy;\n\t\tvar cCROSSap, bCROSScp, aCROSSbp;\n\n\t\taX = cx - bx;  aY = cy - by;\n\t\tbX = ax - cx;  bY = ay - cy;\n\t\tcX = bx - ax;  cY = by - ay;\n\n\t\tfor ( p = 0; p < n; p ++ ) {\n\n\t\t\tpx = contour[ verts[ p ] ].x\n\t\t\tpy = contour[ verts[ p ] ].y\n\n\t\t\tif ( ( ( px === ax ) && ( py === ay ) ) ||\n\t\t\t\t ( ( px === bx ) && ( py === by ) ) ||\n\t\t\t\t ( ( px === cx ) && ( py === cy ) ) )\tcontinue;\n\n\t\t\tapx = px - ax;  apy = py - ay;\n\t\t\tbpx = px - bx;  bpy = py - by;\n\t\t\tcpx = px - cx;  cpy = py - cy;\n\n\t\t\t// see if p is inside triangle abc\n\n\t\t\taCROSSbp = aX * bpy - aY * bpx;\n\t\t\tcCROSSap = cX * apy - cY * apx;\n\t\t\tbCROSScp = bX * cpy - bY * cpx;\n\n\t\t\tif ( ( aCROSSbp >= - EPSILON ) && ( bCROSScp >= - EPSILON ) && ( cCROSSap >= - EPSILON ) ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t};\n\n\n\tnamespace.Triangulate = process;\n\tnamespace.Triangulate.area = area;\n\n\treturn namespace;\n\n} )( THREE.FontUtils );\n\n// To use the typeface.js face files, hook up the API\nself._typeface_js = { faces: THREE.FontUtils.faces, loadFace: THREE.FontUtils.loadFace };\nTHREE.typeface_js = self._typeface_js;\n\n// File:src/extras/audio/Audio.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.Audio = function ( listener ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.type = 'Audio';\n\n\tthis.context = listener.context;\n\tthis.source = this.context.createBufferSource();\n\n\tthis.gain = this.context.createGain();\n\tthis.gain.connect( this.context.destination );\n\n\tthis.panner = this.context.createPanner();\n\tthis.panner.connect( this.gain );\n\n};\n\nTHREE.Audio.prototype = Object.create( THREE.Object3D.prototype );\n\nTHREE.Audio.prototype.load = function ( file ) {\n\n\tvar scope = this;\n\n\tvar request = new XMLHttpRequest();\n\trequest.open( 'GET', file, true );\n\trequest.responseType = 'arraybuffer';\n\trequest.onload = function ( e ) {\n\n\t\tscope.context.decodeAudioData( this.response, function ( buffer ) {\n\n\t\t\tscope.source.buffer = buffer;\n\t\t\tscope.source.connect( scope.panner );\n\t\t\tscope.source.start( 0 );\n\n\t\t} );\n\n\t};\n\trequest.send();\n\n\treturn this;\n\n};\n\nTHREE.Audio.prototype.setLoop = function ( value ) {\n\n\tthis.source.loop = value;\n\n};\n\nTHREE.Audio.prototype.setRefDistance = function ( value ) {\n\n\tthis.panner.refDistance = value;\n\n};\n\nTHREE.Audio.prototype.setRolloffFactor = function ( value ) {\n\n\tthis.panner.rolloffFactor = value;\n\n};\n\nTHREE.Audio.prototype.updateMatrixWorld = ( function () {\n\n\tvar position = new THREE.Vector3();\n\n\treturn function ( force ) {\n\n\t\tTHREE.Object3D.prototype.updateMatrixWorld.call( this, force );\n\n\t\tposition.setFromMatrixPosition( this.matrixWorld );\n\n\t\tthis.panner.setPosition( position.x, position.y, position.z );\n\n\t};\n\n} )();\n\n// File:src/extras/audio/AudioListener.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.AudioListener = function () {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.type = 'AudioListener';\n\n\tthis.context = new ( window.AudioContext || window.webkitAudioContext )();\n\n};\n\nTHREE.AudioListener.prototype = Object.create( THREE.Object3D.prototype );\n\nTHREE.AudioListener.prototype.updateMatrixWorld = ( function () {\n\n\tvar position = new THREE.Vector3();\n\tvar quaternion = new THREE.Quaternion();\n\tvar scale = new THREE.Vector3();\n\n\tvar orientation = new THREE.Vector3();\n\tvar velocity = new THREE.Vector3();\n\n\tvar positionPrev = new THREE.Vector3();\n\n\treturn function ( force ) {\n\n\t\tTHREE.Object3D.prototype.updateMatrixWorld.call( this, force );\n\n\t\tvar listener = this.context.listener;\n\n\t\tthis.matrixWorld.decompose( position, quaternion, scale );\n\n\t\torientation.set( 0, 0, -1 ).applyQuaternion( quaternion );\n\t\tvelocity.subVectors( position, positionPrev );\n\n\t\tlistener.setPosition( position.x, position.y, position.z );\n\t\tlistener.setOrientation( orientation.x, orientation.y, orientation.z, this.up.x, this.up.y, this.up.z );\n\t\tlistener.setVelocity( velocity.x, velocity.y, velocity.z );\n\n\t\tpositionPrev.copy( position );\n\n\t};\n\n} )();\n\n// File:src/extras/core/Curve.js\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * Extensible curve object\n *\n * Some common of Curve methods\n * .getPoint(t), getTangent(t)\n * .getPointAt(u), getTagentAt(u)\n * .getPoints(), .getSpacedPoints()\n * .getLength()\n * .updateArcLengths()\n *\n * This following classes subclasses THREE.Curve:\n *\n * -- 2d classes --\n * THREE.LineCurve\n * THREE.QuadraticBezierCurve\n * THREE.CubicBezierCurve\n * THREE.SplineCurve\n * THREE.ArcCurve\n * THREE.EllipseCurve\n *\n * -- 3d classes --\n * THREE.LineCurve3\n * THREE.QuadraticBezierCurve3\n * THREE.CubicBezierCurve3\n * THREE.SplineCurve3\n * THREE.ClosedSplineCurve3\n *\n * A series of curves can be represented as a THREE.CurvePath\n *\n **/\n\n/**************************************************************\n *\tAbstract Curve base class\n **************************************************************/\n\nTHREE.Curve = function () {\n\n};\n\n// Virtual base class method to overwrite and implement in subclasses\n//\t- t [0 .. 1]\n\nTHREE.Curve.prototype.getPoint = function ( t ) {\n\n\tconsole.log( \"Warning, getPoint() not implemented!\" );\n\treturn null;\n\n};\n\n// Get point at relative position in curve according to arc length\n// - u [0 .. 1]\n\nTHREE.Curve.prototype.getPointAt = function ( u ) {\n\n\tvar t = this.getUtoTmapping( u );\n\treturn this.getPoint( t );\n\n};\n\n// Get sequence of points using getPoint( t )\n\nTHREE.Curve.prototype.getPoints = function ( divisions ) {\n\n\tif ( ! divisions ) divisions = 5;\n\n\tvar d, pts = [];\n\n\tfor ( d = 0; d <= divisions; d ++ ) {\n\n\t\tpts.push( this.getPoint( d / divisions ) );\n\n\t}\n\n\treturn pts;\n\n};\n\n// Get sequence of points using getPointAt( u )\n\nTHREE.Curve.prototype.getSpacedPoints = function ( divisions ) {\n\n\tif ( ! divisions ) divisions = 5;\n\n\tvar d, pts = [];\n\n\tfor ( d = 0; d <= divisions; d ++ ) {\n\n\t\tpts.push( this.getPointAt( d / divisions ) );\n\n\t}\n\n\treturn pts;\n\n};\n\n// Get total curve arc length\n\nTHREE.Curve.prototype.getLength = function () {\n\n\tvar lengths = this.getLengths();\n\treturn lengths[ lengths.length - 1 ];\n\n};\n\n// Get list of cumulative segment lengths\n\nTHREE.Curve.prototype.getLengths = function ( divisions ) {\n\n\tif ( ! divisions ) divisions = (this.__arcLengthDivisions) ? (this.__arcLengthDivisions): 200;\n\n\tif ( this.cacheArcLengths\n\t\t&& ( this.cacheArcLengths.length == divisions + 1 )\n\t\t&& ! this.needsUpdate) {\n\n\t\t//console.log( \"cached\", this.cacheArcLengths );\n\t\treturn this.cacheArcLengths;\n\n\t}\n\n\tthis.needsUpdate = false;\n\n\tvar cache = [];\n\tvar current, last = this.getPoint( 0 );\n\tvar p, sum = 0;\n\n\tcache.push( 0 );\n\n\tfor ( p = 1; p <= divisions; p ++ ) {\n\n\t\tcurrent = this.getPoint ( p / divisions );\n\t\tsum += current.distanceTo( last );\n\t\tcache.push( sum );\n\t\tlast = current;\n\n\t}\n\n\tthis.cacheArcLengths = cache;\n\n\treturn cache; // { sums: cache, sum:sum }; Sum is in the last element.\n\n};\n\n\nTHREE.Curve.prototype.updateArcLengths = function() {\n\tthis.needsUpdate = true;\n\tthis.getLengths();\n};\n\n// Given u ( 0 .. 1 ), get a t to find p. This gives you points which are equi distance\n\nTHREE.Curve.prototype.getUtoTmapping = function ( u, distance ) {\n\n\tvar arcLengths = this.getLengths();\n\n\tvar i = 0, il = arcLengths.length;\n\n\tvar targetArcLength; // The targeted u distance value to get\n\n\tif ( distance ) {\n\n\t\ttargetArcLength = distance;\n\n\t} else {\n\n\t\ttargetArcLength = u * arcLengths[ il - 1 ];\n\n\t}\n\n\t//var time = Date.now();\n\n\t// binary search for the index with largest value smaller than target u distance\n\n\tvar low = 0, high = il - 1, comparison;\n\n\twhile ( low <= high ) {\n\n\t\ti = Math.floor( low + ( high - low ) / 2 ); // less likely to overflow, though probably not issue here, JS doesn't really have integers, all numbers are floats\n\n\t\tcomparison = arcLengths[ i ] - targetArcLength;\n\n\t\tif ( comparison < 0 ) {\n\n\t\t\tlow = i + 1;\n\t\t\tcontinue;\n\n\t\t} else if ( comparison > 0 ) {\n\n\t\t\thigh = i - 1;\n\t\t\tcontinue;\n\n\t\t} else {\n\n\t\t\thigh = i;\n\t\t\tbreak;\n\n\t\t\t// DONE\n\n\t\t}\n\n\t}\n\n\ti = high;\n\n\t//console.log('b' , i, low, high, Date.now()- time);\n\n\tif ( arcLengths[ i ] == targetArcLength ) {\n\n\t\tvar t = i / ( il - 1 );\n\t\treturn t;\n\n\t}\n\n\t// we could get finer grain at lengths, or use simple interpolatation between two points\n\n\tvar lengthBefore = arcLengths[ i ];\n    var lengthAfter = arcLengths[ i + 1 ];\n\n    var segmentLength = lengthAfter - lengthBefore;\n\n    // determine where we are between the 'before' and 'after' points\n\n    var segmentFraction = ( targetArcLength - lengthBefore ) / segmentLength;\n\n    // add that fractional amount to t\n\n    var t = ( i + segmentFraction ) / ( il -1 );\n\n\treturn t;\n\n};\n\n// Returns a unit vector tangent at t\n// In case any sub curve does not implement its tangent derivation,\n// 2 points a small delta apart will be used to find its gradient\n// which seems to give a reasonable approximation\n\nTHREE.Curve.prototype.getTangent = function( t ) {\n\n\tvar delta = 0.0001;\n\tvar t1 = t - delta;\n\tvar t2 = t + delta;\n\n\t// Capping in case of danger\n\n\tif ( t1 < 0 ) t1 = 0;\n\tif ( t2 > 1 ) t2 = 1;\n\n\tvar pt1 = this.getPoint( t1 );\n\tvar pt2 = this.getPoint( t2 );\n\n\tvar vec = pt2.clone().sub(pt1);\n\treturn vec.normalize();\n\n};\n\n\nTHREE.Curve.prototype.getTangentAt = function ( u ) {\n\n\tvar t = this.getUtoTmapping( u );\n\treturn this.getTangent( t );\n\n};\n\n\n\n\n\n/**************************************************************\n *\tUtils\n **************************************************************/\n\nTHREE.Curve.Utils = {\n\n\ttangentQuadraticBezier: function ( t, p0, p1, p2 ) {\n\n\t\treturn 2 * ( 1 - t ) * ( p1 - p0 ) + 2 * t * ( p2 - p1 );\n\n\t},\n\n\t// Puay Bing, thanks for helping with this derivative!\n\n\ttangentCubicBezier: function (t, p0, p1, p2, p3 ) {\n\n\t\treturn - 3 * p0 * (1 - t) * (1 - t)  +\n\t\t\t3 * p1 * (1 - t) * (1-t) - 6 *t *p1 * (1-t) +\n\t\t\t6 * t *  p2 * (1-t) - 3 * t * t * p2 +\n\t\t\t3 * t * t * p3;\n\n\t},\n\n\ttangentSpline: function ( t, p0, p1, p2, p3 ) {\n\n\t\t// To check if my formulas are correct\n\n\t\tvar h00 = 6 * t * t - 6 * t; \t// derived from 2t^3 − 3t^2 + 1\n\t\tvar h10 = 3 * t * t - 4 * t + 1; // t^3 − 2t^2 + t\n\t\tvar h01 = - 6 * t * t + 6 * t; \t// − 2t3 + 3t2\n\t\tvar h11 = 3 * t * t - 2 * t;\t// t3 − t2\n\n\t\treturn h00 + h10 + h01 + h11;\n\n\t},\n\n\t// Catmull-Rom\n\n\tinterpolate: function( p0, p1, p2, p3, t ) {\n\n\t\tvar v0 = ( p2 - p0 ) * 0.5;\n\t\tvar v1 = ( p3 - p1 ) * 0.5;\n\t\tvar t2 = t * t;\n\t\tvar t3 = t * t2;\n\t\treturn ( 2 * p1 - 2 * p2 + v0 + v1 ) * t3 + ( - 3 * p1 + 3 * p2 - 2 * v0 - v1 ) * t2 + v0 * t + p1;\n\n\t}\n\n};\n\n\n// TODO: Transformation for Curves?\n\n/**************************************************************\n *\t3D Curves\n **************************************************************/\n\n// A Factory method for creating new curve subclasses\n\nTHREE.Curve.create = function ( constructor, getPointFunc ) {\n\n\tconstructor.prototype = Object.create( THREE.Curve.prototype );\n\tconstructor.prototype.getPoint = getPointFunc;\n\n\treturn constructor;\n\n};\n\n// File:src/extras/core/CurvePath.js\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n *\n **/\n\n/**************************************************************\n *\tCurved Path - a curve path is simply a array of connected\n *  curves, but retains the api of a curve\n **************************************************************/\n\nTHREE.CurvePath = function () {\n\n\tthis.curves = [];\n\tthis.bends = [];\n\t\n\tthis.autoClose = false; // Automatically closes the path\n};\n\nTHREE.CurvePath.prototype = Object.create( THREE.Curve.prototype );\n\nTHREE.CurvePath.prototype.add = function ( curve ) {\n\n\tthis.curves.push( curve );\n\n};\n\nTHREE.CurvePath.prototype.checkConnection = function() {\n\t// TODO\n\t// If the ending of curve is not connected to the starting\n\t// or the next curve, then, this is not a real path\n};\n\nTHREE.CurvePath.prototype.closePath = function() {\n\t// TODO Test\n\t// and verify for vector3 (needs to implement equals)\n\t// Add a line curve if start and end of lines are not connected\n\tvar startPoint = this.curves[0].getPoint(0);\n\tvar endPoint = this.curves[this.curves.length-1].getPoint(1);\n\t\n\tif (! startPoint.equals(endPoint)) {\n\t\tthis.curves.push( new THREE.LineCurve(endPoint, startPoint) );\n\t}\n\t\n};\n\n// To get accurate point with reference to\n// entire path distance at time t,\n// following has to be done:\n\n// 1. Length of each sub path have to be known\n// 2. Locate and identify type of curve\n// 3. Get t for the curve\n// 4. Return curve.getPointAt(t')\n\nTHREE.CurvePath.prototype.getPoint = function( t ) {\n\n\tvar d = t * this.getLength();\n\tvar curveLengths = this.getCurveLengths();\n\tvar i = 0, diff, curve;\n\n\t// To think about boundaries points.\n\n\twhile ( i < curveLengths.length ) {\n\n\t\tif ( curveLengths[ i ] >= d ) {\n\n\t\t\tdiff = curveLengths[ i ] - d;\n\t\t\tcurve = this.curves[ i ];\n\n\t\t\tvar u = 1 - diff / curve.getLength();\n\n\t\t\treturn curve.getPointAt( u );\n\n\t\t\tbreak;\n\t\t}\n\n\t\ti ++;\n\n\t}\n\n\treturn null;\n\n\t// loop where sum != 0, sum > d , sum+1 <d\n\n};\n\n/*\nTHREE.CurvePath.prototype.getTangent = function( t ) {\n};*/\n\n\n// We cannot use the default THREE.Curve getPoint() with getLength() because in\n// THREE.Curve, getLength() depends on getPoint() but in THREE.CurvePath\n// getPoint() depends on getLength\n\nTHREE.CurvePath.prototype.getLength = function() {\n\n\tvar lens = this.getCurveLengths();\n\treturn lens[ lens.length - 1 ];\n\n};\n\n// Compute lengths and cache them\n// We cannot overwrite getLengths() because UtoT mapping uses it.\n\nTHREE.CurvePath.prototype.getCurveLengths = function() {\n\n\t// We use cache values if curves and cache array are same length\n\n\tif ( this.cacheLengths && this.cacheLengths.length == this.curves.length ) {\n\n\t\treturn this.cacheLengths;\n\n\t};\n\n\t// Get length of subsurve\n\t// Push sums into cached array\n\n\tvar lengths = [], sums = 0;\n\tvar i, il = this.curves.length;\n\n\tfor ( i = 0; i < il; i ++ ) {\n\n\t\tsums += this.curves[ i ].getLength();\n\t\tlengths.push( sums );\n\n\t}\n\n\tthis.cacheLengths = lengths;\n\n\treturn lengths;\n\n};\n\n\n\n// Returns min and max coordinates\n\nTHREE.CurvePath.prototype.getBoundingBox = function () {\n\n\tvar points = this.getPoints();\n\n\tvar maxX, maxY, maxZ;\n\tvar minX, minY, minZ;\n\n\tmaxX = maxY = Number.NEGATIVE_INFINITY;\n\tminX = minY = Number.POSITIVE_INFINITY;\n\n\tvar p, i, il, sum;\n\n\tvar v3 = points[0] instanceof THREE.Vector3;\n\n\tsum = v3 ? new THREE.Vector3() : new THREE.Vector2();\n\n\tfor ( i = 0, il = points.length; i < il; i ++ ) {\n\n\t\tp = points[ i ];\n\n\t\tif ( p.x > maxX ) maxX = p.x;\n\t\telse if ( p.x < minX ) minX = p.x;\n\n\t\tif ( p.y > maxY ) maxY = p.y;\n\t\telse if ( p.y < minY ) minY = p.y;\n\n\t\tif ( v3 ) {\n\n\t\t\tif ( p.z > maxZ ) maxZ = p.z;\n\t\t\telse if ( p.z < minZ ) minZ = p.z;\n\n\t\t}\n\n\t\tsum.add( p );\n\n\t}\n\n\tvar ret = {\n\n\t\tminX: minX,\n\t\tminY: minY,\n\t\tmaxX: maxX,\n\t\tmaxY: maxY\n\n\t};\n\n\tif ( v3 ) {\n\n\t\tret.maxZ = maxZ;\n\t\tret.minZ = minZ;\n\n\t}\n\n\treturn ret;\n\n};\n\n/**************************************************************\n *\tCreate Geometries Helpers\n **************************************************************/\n\n/// Generate geometry from path points (for Line or Points objects)\n\nTHREE.CurvePath.prototype.createPointsGeometry = function( divisions ) {\n\n\tvar pts = this.getPoints( divisions, true );\n\treturn this.createGeometry( pts );\n\n};\n\n// Generate geometry from equidistance sampling along the path\n\nTHREE.CurvePath.prototype.createSpacedPointsGeometry = function( divisions ) {\n\n\tvar pts = this.getSpacedPoints( divisions, true );\n\treturn this.createGeometry( pts );\n\n};\n\nTHREE.CurvePath.prototype.createGeometry = function( points ) {\n\n\tvar geometry = new THREE.Geometry();\n\n\tfor ( var i = 0; i < points.length; i ++ ) {\n\n\t\tgeometry.vertices.push( new THREE.Vector3( points[ i ].x, points[ i ].y, points[ i ].z || 0) );\n\n\t}\n\n\treturn geometry;\n\n};\n\n\n/**************************************************************\n *\tBend / Wrap Helper Methods\n **************************************************************/\n\n// Wrap path / Bend modifiers?\n\nTHREE.CurvePath.prototype.addWrapPath = function ( bendpath ) {\n\n\tthis.bends.push( bendpath );\n\n};\n\nTHREE.CurvePath.prototype.getTransformedPoints = function( segments, bends ) {\n\n\tvar oldPts = this.getPoints( segments ); // getPoints getSpacedPoints\n\tvar i, il;\n\n\tif ( ! bends ) {\n\n\t\tbends = this.bends;\n\n\t}\n\n\tfor ( i = 0, il = bends.length; i < il; i ++ ) {\n\n\t\toldPts = this.getWrapPoints( oldPts, bends[ i ] );\n\n\t}\n\n\treturn oldPts;\n\n};\n\nTHREE.CurvePath.prototype.getTransformedSpacedPoints = function( segments, bends ) {\n\n\tvar oldPts = this.getSpacedPoints( segments );\n\n\tvar i, il;\n\n\tif ( ! bends ) {\n\n\t\tbends = this.bends;\n\n\t}\n\n\tfor ( i = 0, il = bends.length; i < il; i ++ ) {\n\n\t\toldPts = this.getWrapPoints( oldPts, bends[ i ] );\n\n\t}\n\n\treturn oldPts;\n\n};\n\n// This returns getPoints() bend/wrapped around the contour of a path.\n// Read http://www.planetclegg.com/projects/WarpingTextToSplines.html\n\nTHREE.CurvePath.prototype.getWrapPoints = function ( oldPts, path ) {\n\n\tvar bounds = this.getBoundingBox();\n\n\tvar i, il, p, oldX, oldY, xNorm;\n\n\tfor ( i = 0, il = oldPts.length; i < il; i ++ ) {\n\n\t\tp = oldPts[ i ];\n\n\t\toldX = p.x;\n\t\toldY = p.y;\n\n\t\txNorm = oldX / bounds.maxX;\n\n\t\t// If using actual distance, for length > path, requires line extrusions\n\t\t//xNorm = path.getUtoTmapping(xNorm, oldX); // 3 styles. 1) wrap stretched. 2) wrap stretch by arc length 3) warp by actual distance\n\n\t\txNorm = path.getUtoTmapping( xNorm, oldX );\n\n\t\t// check for out of bounds?\n\n\t\tvar pathPt = path.getPoint( xNorm );\n\t\tvar normal = path.getTangent( xNorm );\n\t\tnormal.set( - normal.y, normal.x ).multiplyScalar( oldY );\n\n\t\tp.x = pathPt.x + normal.x;\n\t\tp.y = pathPt.y + normal.y;\n\n\t}\n\n\treturn oldPts;\n\n};\n\n\n// File:src/extras/core/Gyroscope.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.Gyroscope = function () {\n\n\tTHREE.Object3D.call( this );\n\n};\n\nTHREE.Gyroscope.prototype = Object.create( THREE.Object3D.prototype );\n\nTHREE.Gyroscope.prototype.updateMatrixWorld = ( function () {\n\n\tvar translationObject = new THREE.Vector3();\n\tvar quaternionObject = new THREE.Quaternion();\n\tvar scaleObject = new THREE.Vector3();\n\n\tvar translationWorld = new THREE.Vector3();\n\tvar quaternionWorld = new THREE.Quaternion();\n\tvar scaleWorld = new THREE.Vector3();\n\n\treturn function ( force ) {\n\n\t\tthis.matrixAutoUpdate && this.updateMatrix();\n\n\t\t// update matrixWorld\n\n\t\tif ( this.matrixWorldNeedsUpdate || force ) {\n\n\t\t\tif ( this.parent ) {\n\n\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t\t\tthis.matrixWorld.decompose( translationWorld, quaternionWorld, scaleWorld );\n\t\t\t\tthis.matrix.decompose( translationObject, quaternionObject, scaleObject );\n\n\t\t\t\tthis.matrixWorld.compose( translationWorld, quaternionObject, scaleWorld );\n\n\n\t\t\t} else {\n\n\t\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t\t}\n\n\n\t\t\tthis.matrixWorldNeedsUpdate = false;\n\n\t\t\tforce = true;\n\n\t\t}\n\n\t\t// update children\n\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\n\n\t\t\tthis.children[ i ].updateMatrixWorld( force );\n\n\t\t}\n\n\t};\n\t\n}() );\n\n// File:src/extras/core/Path.js\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * Creates free form 2d path using series of points, lines or curves.\n *\n **/\n\nTHREE.Path = function ( points ) {\n\n\tTHREE.CurvePath.call(this);\n\n\tthis.actions = [];\n\n\tif ( points ) {\n\n\t\tthis.fromPoints( points );\n\n\t}\n\n};\n\nTHREE.Path.prototype = Object.create( THREE.CurvePath.prototype );\n\nTHREE.PathActions = {\n\n\tMOVE_TO: 'moveTo',\n\tLINE_TO: 'lineTo',\n\tQUADRATIC_CURVE_TO: 'quadraticCurveTo', // Bezier quadratic curve\n\tBEZIER_CURVE_TO: 'bezierCurveTo', \t\t// Bezier cubic curve\n\tCSPLINE_THRU: 'splineThru',\t\t\t\t// Catmull-rom spline\n\tARC: 'arc',\t\t\t\t\t\t\t\t// Circle\n\tELLIPSE: 'ellipse'\n};\n\n// TODO Clean up PATH API\n\n// Create path using straight lines to connect all points\n// - vectors: array of Vector2\n\nTHREE.Path.prototype.fromPoints = function ( vectors ) {\n\n\tthis.moveTo( vectors[ 0 ].x, vectors[ 0 ].y );\n\n\tfor ( var v = 1, vlen = vectors.length; v < vlen; v ++ ) {\n\n\t\tthis.lineTo( vectors[ v ].x, vectors[ v ].y );\n\n\t};\n\n};\n\n// startPath() endPath()?\n\nTHREE.Path.prototype.moveTo = function ( x, y ) {\n\n\tvar args = Array.prototype.slice.call( arguments );\n\tthis.actions.push( { action: THREE.PathActions.MOVE_TO, args: args } );\n\n};\n\nTHREE.Path.prototype.lineTo = function ( x, y ) {\n\n\tvar args = Array.prototype.slice.call( arguments );\n\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\n\n\tvar x0 = lastargs[ lastargs.length - 2 ];\n\tvar y0 = lastargs[ lastargs.length - 1 ];\n\n\tvar curve = new THREE.LineCurve( new THREE.Vector2( x0, y0 ), new THREE.Vector2( x, y ) );\n\tthis.curves.push( curve );\n\n\tthis.actions.push( { action: THREE.PathActions.LINE_TO, args: args } );\n\n};\n\nTHREE.Path.prototype.quadraticCurveTo = function( aCPx, aCPy, aX, aY ) {\n\n\tvar args = Array.prototype.slice.call( arguments );\n\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\n\n\tvar x0 = lastargs[ lastargs.length - 2 ];\n\tvar y0 = lastargs[ lastargs.length - 1 ];\n\n\tvar curve = new THREE.QuadraticBezierCurve( new THREE.Vector2( x0, y0 ),\n\t\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aCPx, aCPy ),\n\t\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aX, aY ) );\n\tthis.curves.push( curve );\n\n\tthis.actions.push( { action: THREE.PathActions.QUADRATIC_CURVE_TO, args: args } );\n\n};\n\nTHREE.Path.prototype.bezierCurveTo = function( aCP1x, aCP1y,\n\t\t\t\t\t\t\t\t\t\t\t   aCP2x, aCP2y,\n\t\t\t\t\t\t\t\t\t\t\t   aX, aY ) {\n\n\tvar args = Array.prototype.slice.call( arguments );\n\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\n\n\tvar x0 = lastargs[ lastargs.length - 2 ];\n\tvar y0 = lastargs[ lastargs.length - 1 ];\n\n\tvar curve = new THREE.CubicBezierCurve( new THREE.Vector2( x0, y0 ),\n\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aCP1x, aCP1y ),\n\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aCP2x, aCP2y ),\n\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aX, aY ) );\n\tthis.curves.push( curve );\n\n\tthis.actions.push( { action: THREE.PathActions.BEZIER_CURVE_TO, args: args } );\n\n};\n\nTHREE.Path.prototype.splineThru = function( pts /*Array of Vector*/ ) {\n\n\tvar args = Array.prototype.slice.call( arguments );\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\n\n\tvar x0 = lastargs[ lastargs.length - 2 ];\n\tvar y0 = lastargs[ lastargs.length - 1 ];\n//---\n\tvar npts = [ new THREE.Vector2( x0, y0 ) ];\n\tArray.prototype.push.apply( npts, pts );\n\n\tvar curve = new THREE.SplineCurve( npts );\n\tthis.curves.push( curve );\n\n\tthis.actions.push( { action: THREE.PathActions.CSPLINE_THRU, args: args } );\n\n};\n\n// FUTURE: Change the API or follow canvas API?\n\nTHREE.Path.prototype.arc = function ( aX, aY, aRadius,\n\t\t\t\t\t\t\t\t\t  aStartAngle, aEndAngle, aClockwise ) {\n\n\tvar lastargs = this.actions[ this.actions.length - 1].args;\n\tvar x0 = lastargs[ lastargs.length - 2 ];\n\tvar y0 = lastargs[ lastargs.length - 1 ];\n\n\tthis.absarc(aX + x0, aY + y0, aRadius,\n\t\taStartAngle, aEndAngle, aClockwise );\n\n };\n\n THREE.Path.prototype.absarc = function ( aX, aY, aRadius,\n\t\t\t\t\t\t\t\t\t  aStartAngle, aEndAngle, aClockwise ) {\n\tthis.absellipse(aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise);\n };\n\nTHREE.Path.prototype.ellipse = function ( aX, aY, xRadius, yRadius,\n\t\t\t\t\t\t\t\t\t  aStartAngle, aEndAngle, aClockwise ) {\n\n\tvar lastargs = this.actions[ this.actions.length - 1].args;\n\tvar x0 = lastargs[ lastargs.length - 2 ];\n\tvar y0 = lastargs[ lastargs.length - 1 ];\n\n\tthis.absellipse(aX + x0, aY + y0, xRadius, yRadius,\n\t\taStartAngle, aEndAngle, aClockwise );\n\n };\n\n\nTHREE.Path.prototype.absellipse = function ( aX, aY, xRadius, yRadius,\n\t\t\t\t\t\t\t\t\t  aStartAngle, aEndAngle, aClockwise ) {\n\n\tvar args = Array.prototype.slice.call( arguments );\n\tvar curve = new THREE.EllipseCurve( aX, aY, xRadius, yRadius,\n\t\t\t\t\t\t\t\t\taStartAngle, aEndAngle, aClockwise );\n\tthis.curves.push( curve );\n\n\tvar lastPoint = curve.getPoint(1);\n\targs.push(lastPoint.x);\n\targs.push(lastPoint.y);\n\n\tthis.actions.push( { action: THREE.PathActions.ELLIPSE, args: args } );\n\n };\n\nTHREE.Path.prototype.getSpacedPoints = function ( divisions, closedPath ) {\n\n\tif ( ! divisions ) divisions = 40;\n\n\tvar points = [];\n\n\tfor ( var i = 0; i < divisions; i ++ ) {\n\n\t\tpoints.push( this.getPoint( i / divisions ) );\n\n\t\t//if( !this.getPoint( i / divisions ) ) throw \"DIE\";\n\n\t}\n\n\t// if ( closedPath ) {\n\t//\n\t// \tpoints.push( points[ 0 ] );\n\t//\n\t// }\n\n\treturn points;\n\n};\n\n/* Return an array of vectors based on contour of the path */\n\nTHREE.Path.prototype.getPoints = function( divisions, closedPath ) {\n\n\tif (this.useSpacedPoints) {\n\t\tconsole.log('tata');\n\t\treturn this.getSpacedPoints( divisions, closedPath );\n\t}\n\n\tdivisions = divisions || 12;\n\n\tvar points = [];\n\n\tvar i, il, item, action, args;\n\tvar cpx, cpy, cpx2, cpy2, cpx1, cpy1, cpx0, cpy0,\n\t\tlaste, j,\n\t\tt, tx, ty;\n\n\tfor ( i = 0, il = this.actions.length; i < il; i ++ ) {\n\n\t\titem = this.actions[ i ];\n\n\t\taction = item.action;\n\t\targs = item.args;\n\n\t\tswitch( action ) {\n\n\t\tcase THREE.PathActions.MOVE_TO:\n\n\t\t\tpoints.push( new THREE.Vector2( args[ 0 ], args[ 1 ] ) );\n\n\t\t\tbreak;\n\n\t\tcase THREE.PathActions.LINE_TO:\n\n\t\t\tpoints.push( new THREE.Vector2( args[ 0 ], args[ 1 ] ) );\n\n\t\t\tbreak;\n\n\t\tcase THREE.PathActions.QUADRATIC_CURVE_TO:\n\n\t\t\tcpx  = args[ 2 ];\n\t\t\tcpy  = args[ 3 ];\n\n\t\t\tcpx1 = args[ 0 ];\n\t\t\tcpy1 = args[ 1 ];\n\n\t\t\tif ( points.length > 0 ) {\n\n\t\t\t\tlaste = points[ points.length - 1 ];\n\n\t\t\t\tcpx0 = laste.x;\n\t\t\t\tcpy0 = laste.y;\n\n\t\t\t} else {\n\n\t\t\t\tlaste = this.actions[ i - 1 ].args;\n\n\t\t\t\tcpx0 = laste[ laste.length - 2 ];\n\t\t\t\tcpy0 = laste[ laste.length - 1 ];\n\n\t\t\t}\n\n\t\t\tfor ( j = 1; j <= divisions; j ++ ) {\n\n\t\t\t\tt = j / divisions;\n\n\t\t\t\ttx = THREE.Shape.Utils.b2( t, cpx0, cpx1, cpx );\n\t\t\t\tty = THREE.Shape.Utils.b2( t, cpy0, cpy1, cpy );\n\n\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\tcase THREE.PathActions.BEZIER_CURVE_TO:\n\n\t\t\tcpx  = args[ 4 ];\n\t\t\tcpy  = args[ 5 ];\n\n\t\t\tcpx1 = args[ 0 ];\n\t\t\tcpy1 = args[ 1 ];\n\n\t\t\tcpx2 = args[ 2 ];\n\t\t\tcpy2 = args[ 3 ];\n\n\t\t\tif ( points.length > 0 ) {\n\n\t\t\t\tlaste = points[ points.length - 1 ];\n\n\t\t\t\tcpx0 = laste.x;\n\t\t\t\tcpy0 = laste.y;\n\n\t\t\t} else {\n\n\t\t\t\tlaste = this.actions[ i - 1 ].args;\n\n\t\t\t\tcpx0 = laste[ laste.length - 2 ];\n\t\t\t\tcpy0 = laste[ laste.length - 1 ];\n\n\t\t\t}\n\n\n\t\t\tfor ( j = 1; j <= divisions; j ++ ) {\n\n\t\t\t\tt = j / divisions;\n\n\t\t\t\ttx = THREE.Shape.Utils.b3( t, cpx0, cpx1, cpx2, cpx );\n\t\t\t\tty = THREE.Shape.Utils.b3( t, cpy0, cpy1, cpy2, cpy );\n\n\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\tcase THREE.PathActions.CSPLINE_THRU:\n\n\t\t\tlaste = this.actions[ i - 1 ].args;\n\n\t\t\tvar last = new THREE.Vector2( laste[ laste.length - 2 ], laste[ laste.length - 1 ] );\n\t\t\tvar spts = [ last ];\n\n\t\t\tvar n = divisions * args[ 0 ].length;\n\n\t\t\tspts = spts.concat( args[ 0 ] );\n\n\t\t\tvar spline = new THREE.SplineCurve( spts );\n\n\t\t\tfor ( j = 1; j <= n; j ++ ) {\n\n\t\t\t\tpoints.push( spline.getPointAt( j / n ) ) ;\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\tcase THREE.PathActions.ARC:\n\n\t\t\tvar aX = args[ 0 ], aY = args[ 1 ],\n\t\t\t\taRadius = args[ 2 ],\n\t\t\t\taStartAngle = args[ 3 ], aEndAngle = args[ 4 ],\n\t\t\t\taClockwise = !! args[ 5 ];\n\n\t\t\tvar deltaAngle = aEndAngle - aStartAngle;\n\t\t\tvar angle;\n\t\t\tvar tdivisions = divisions * 2;\n\n\t\t\tfor ( j = 1; j <= tdivisions; j ++ ) {\n\n\t\t\t\tt = j / tdivisions;\n\n\t\t\t\tif ( ! aClockwise ) {\n\n\t\t\t\t\tt = 1 - t;\n\n\t\t\t\t}\n\n\t\t\t\tangle = aStartAngle + t * deltaAngle;\n\n\t\t\t\ttx = aX + aRadius * Math.cos( angle );\n\t\t\t\tty = aY + aRadius * Math.sin( angle );\n\n\t\t\t\t//console.log('t', t, 'angle', angle, 'tx', tx, 'ty', ty);\n\n\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\n\n\t\t\t}\n\n\t\t\t//console.log(points);\n\n\t\t  break;\n\t\t  \n\t\tcase THREE.PathActions.ELLIPSE:\n\n\t\t\tvar aX = args[ 0 ], aY = args[ 1 ],\n\t\t\t\txRadius = args[ 2 ],\n\t\t\t\tyRadius = args[ 3 ],\n\t\t\t\taStartAngle = args[ 4 ], aEndAngle = args[ 5 ],\n\t\t\t\taClockwise = !! args[ 6 ];\n\n\n\t\t\tvar deltaAngle = aEndAngle - aStartAngle;\n\t\t\tvar angle;\n\t\t\tvar tdivisions = divisions * 2;\n\n\t\t\tfor ( j = 1; j <= tdivisions; j ++ ) {\n\n\t\t\t\tt = j / tdivisions;\n\n\t\t\t\tif ( ! aClockwise ) {\n\n\t\t\t\t\tt = 1 - t;\n\n\t\t\t\t}\n\n\t\t\t\tangle = aStartAngle + t * deltaAngle;\n\n\t\t\t\ttx = aX + xRadius * Math.cos( angle );\n\t\t\t\tty = aY + yRadius * Math.sin( angle );\n\n\t\t\t\t//console.log('t', t, 'angle', angle, 'tx', tx, 'ty', ty);\n\n\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\n\n\t\t\t}\n\n\t\t\t//console.log(points);\n\n\t\t  break;\n\n\t\t} // end switch\n\n\t}\n\n\n\n\t// Normalize to remove the closing point by default.\n\tvar lastPoint = points[ points.length - 1];\n\tvar EPSILON = 0.0000000001;\n\tif ( Math.abs(lastPoint.x - points[ 0 ].x) < EPSILON &&\n\t\t\t Math.abs(lastPoint.y - points[ 0 ].y) < EPSILON)\n\t\tpoints.splice( points.length - 1, 1);\n\tif ( closedPath ) {\n\n\t\tpoints.push( points[ 0 ] );\n\n\t}\n\n\treturn points;\n\n};\n\n//\n// Breaks path into shapes\n//\n//\tAssumptions (if parameter isCCW==true the opposite holds):\n//\t- solid shapes are defined clockwise (CW)\n//\t- holes are defined counterclockwise (CCW)\n//\n//\tIf parameter noHoles==true:\n//  - all subPaths are regarded as solid shapes\n//  - definition order CW/CCW has no relevance\n//\n\nTHREE.Path.prototype.toShapes = function( isCCW, noHoles ) {\n\n\tfunction extractSubpaths( inActions ) {\n\n\t\tvar i, il, item, action, args;\n\n\t\tvar subPaths = [], lastPath = new THREE.Path();\n\n\t\tfor ( i = 0, il = inActions.length; i < il; i ++ ) {\n\n\t\t\titem = inActions[ i ];\n\n\t\t\targs = item.args;\n\t\t\taction = item.action;\n\n\t\t\tif ( action == THREE.PathActions.MOVE_TO ) {\n\n\t\t\t\tif ( lastPath.actions.length != 0 ) {\n\n\t\t\t\t\tsubPaths.push( lastPath );\n\t\t\t\t\tlastPath = new THREE.Path();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tlastPath[ action ].apply( lastPath, args );\n\n\t\t}\n\n\t\tif ( lastPath.actions.length != 0 ) {\n\n\t\t\tsubPaths.push( lastPath );\n\n\t\t}\n\n\t\t// console.log(subPaths);\n\n\t\treturn\tsubPaths;\n\t}\n\n\tfunction toShapesNoHoles( inSubpaths ) {\n\n\t\tvar shapes = [];\n\n\t\tfor ( var i = 0, il = inSubpaths.length; i < il; i ++ ) {\n\n\t\t\tvar tmpPath = inSubpaths[ i ];\n\n\t\t\tvar tmpShape = new THREE.Shape();\n\t\t\ttmpShape.actions = tmpPath.actions;\n\t\t\ttmpShape.curves = tmpPath.curves;\n\n\t\t\tshapes.push( tmpShape );\n\t\t}\n\n\t\t//console.log(\"shape\", shapes);\n\n\t\treturn shapes;\n\t};\n\n\tfunction isPointInsidePolygon( inPt, inPolygon ) {\n\t\tvar EPSILON = 0.0000000001;\n\n\t\tvar polyLen = inPolygon.length;\n\n\t\t// inPt on polygon contour => immediate success    or\n\t\t// toggling of inside/outside at every single! intersection point of an edge\n\t\t//  with the horizontal line through inPt, left of inPt\n\t\t//  not counting lowerY endpoints of edges and whole edges on that line\n\t\tvar inside = false;\n\t\tfor( var p = polyLen - 1, q = 0; q < polyLen; p = q ++ ) {\n\t\t\tvar edgeLowPt  = inPolygon[ p ];\n\t\t\tvar edgeHighPt = inPolygon[ q ];\n\n\t\t\tvar edgeDx = edgeHighPt.x - edgeLowPt.x;\n\t\t\tvar edgeDy = edgeHighPt.y - edgeLowPt.y;\n\n\t\t\tif ( Math.abs(edgeDy) > EPSILON ) {\t\t\t// not parallel\n\t\t\t\tif ( edgeDy < 0 ) {\n\t\t\t\t\tedgeLowPt  = inPolygon[ q ]; edgeDx = - edgeDx;\n\t\t\t\t\tedgeHighPt = inPolygon[ p ]; edgeDy = - edgeDy;\n\t\t\t\t}\n\t\t\t\tif ( ( inPt.y < edgeLowPt.y ) || ( inPt.y > edgeHighPt.y ) ) \t\tcontinue;\n\n\t\t\t\tif ( inPt.y == edgeLowPt.y ) {\n\t\t\t\t\tif ( inPt.x == edgeLowPt.x )\t\treturn\ttrue;\t\t// inPt is on contour ?\n\t\t\t\t\t// continue;\t\t\t\t// no intersection or edgeLowPt => doesn't count !!!\n\t\t\t\t} else {\n\t\t\t\t\tvar perpEdge = edgeDy * (inPt.x - edgeLowPt.x) - edgeDx * (inPt.y - edgeLowPt.y);\n\t\t\t\t\tif ( perpEdge == 0 )\t\t\t\treturn\ttrue;\t\t// inPt is on contour ?\n\t\t\t\t\tif ( perpEdge < 0 ) \t\t\t\tcontinue;\n\t\t\t\t\tinside = ! inside;\t\t// true intersection left of inPt\n\t\t\t\t}\n\t\t\t} else {\t\t// parallel or colinear\n\t\t\t\tif ( inPt.y != edgeLowPt.y ) \t\tcontinue;\t\t\t// parallel\n\t\t\t\t// egde lies on the same horizontal line as inPt\n\t\t\t\tif ( ( ( edgeHighPt.x <= inPt.x ) && ( inPt.x <= edgeLowPt.x ) ) ||\n\t\t\t\t\t ( ( edgeLowPt.x <= inPt.x ) && ( inPt.x <= edgeHighPt.x ) ) )\t\treturn\ttrue;\t// inPt: Point on contour !\n\t\t\t\t// continue;\n\t\t\t}\n\t\t}\n\n\t\treturn\tinside;\n\t}\n\n\n\tvar subPaths = extractSubpaths( this.actions );\n\tif ( subPaths.length == 0 ) return [];\n\n\tif ( noHoles === true )\treturn\ttoShapesNoHoles( subPaths );\n\n\n\tvar solid, tmpPath, tmpShape, shapes = [];\n\n\tif ( subPaths.length == 1) {\n\n\t\ttmpPath = subPaths[0];\n\t\ttmpShape = new THREE.Shape();\n\t\ttmpShape.actions = tmpPath.actions;\n\t\ttmpShape.curves = tmpPath.curves;\n\t\tshapes.push( tmpShape );\n\t\treturn shapes;\n\n\t}\n\n\tvar holesFirst = ! THREE.Shape.Utils.isClockWise( subPaths[ 0 ].getPoints() );\n\tholesFirst = isCCW ? ! holesFirst : holesFirst;\n\n\t// console.log(\"Holes first\", holesFirst);\n\t\n\tvar betterShapeHoles = [];\n\tvar newShapes = [];\n\tvar newShapeHoles = [];\n\tvar mainIdx = 0;\n\tvar tmpPoints;\n\n\tnewShapes[mainIdx] = undefined;\n\tnewShapeHoles[mainIdx] = [];\n\n\tvar i, il;\n\n\tfor ( i = 0, il = subPaths.length; i < il; i ++ ) {\n\n\t\ttmpPath = subPaths[ i ];\n\t\ttmpPoints = tmpPath.getPoints();\n\t\tsolid = THREE.Shape.Utils.isClockWise( tmpPoints );\n\t\tsolid = isCCW ? ! solid : solid;\n\n\t\tif ( solid ) {\n\n\t\t\tif ( (! holesFirst ) && ( newShapes[mainIdx] ) )\tmainIdx ++;\n\n\t\t\tnewShapes[mainIdx] = { s: new THREE.Shape(), p: tmpPoints };\n\t\t\tnewShapes[mainIdx].s.actions = tmpPath.actions;\n\t\t\tnewShapes[mainIdx].s.curves = tmpPath.curves;\n\t\t\t\n\t\t\tif ( holesFirst )\tmainIdx ++;\n\t\t\tnewShapeHoles[mainIdx] = [];\n\n\t\t\t//console.log('cw', i);\n\n\t\t} else {\n\n\t\t\tnewShapeHoles[mainIdx].push( { h: tmpPath, p: tmpPoints[0] } );\n\n\t\t\t//console.log('ccw', i);\n\n\t\t}\n\n\t}\n\n\t// only Holes? -> probably all Shapes with wrong orientation\n\tif ( ! newShapes[0] )\treturn\ttoShapesNoHoles( subPaths );\n\n\n\tif ( newShapes.length > 1 ) {\n\t\tvar ambigious = false;\n\t\tvar toChange = [];\n\n\t\tfor (var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\n\t\t\tbetterShapeHoles[sIdx] = [];\n\t\t}\n\t\tfor (var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\n\t\t\tvar sh = newShapes[sIdx];\n\t\t\tvar sho = newShapeHoles[sIdx];\n\t\t\tfor (var hIdx = 0; hIdx < sho.length; hIdx ++ ) {\n\t\t\t\tvar ho = sho[hIdx];\n\t\t\t\tvar hole_unassigned = true;\n\t\t\t\tfor (var s2Idx = 0; s2Idx < newShapes.length; s2Idx ++ ) {\n\t\t\t\t\tif ( isPointInsidePolygon( ho.p, newShapes[s2Idx].p ) ) {\n\t\t\t\t\t\tif ( sIdx != s2Idx )\t\ttoChange.push( { froms: sIdx, tos: s2Idx, hole: hIdx } );\n\t\t\t\t\t\tif ( hole_unassigned ) {\n\t\t\t\t\t\t\thole_unassigned = false;\n\t\t\t\t\t\t\tbetterShapeHoles[s2Idx].push( ho );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tambigious = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif ( hole_unassigned ) { betterShapeHoles[sIdx].push( ho ); }\n\t\t\t}\n\t\t}\n\t\t// console.log(\"ambigious: \", ambigious);\n\t\tif ( toChange.length > 0 ) {\n\t\t\t// console.log(\"to change: \", toChange);\n\t\t\tif (! ambigious)\tnewShapeHoles = betterShapeHoles;\n\t\t}\n\t}\n\n\tvar tmpHoles, j, jl;\n\tfor ( i = 0, il = newShapes.length; i < il; i ++ ) {\n\t\ttmpShape = newShapes[i].s;\n\t\tshapes.push( tmpShape );\n\t\ttmpHoles = newShapeHoles[i];\n\t\tfor ( j = 0, jl = tmpHoles.length; j < jl; j ++ ) {\n\t\t\ttmpShape.holes.push( tmpHoles[j].h );\n\t\t}\n\t}\n\n\t//console.log(\"shape\", shapes);\n\n\treturn shapes;\n\n};\n\n// File:src/extras/core/Shape.js\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * Defines a 2d shape plane using paths.\n **/\n\n// STEP 1 Create a path.\n// STEP 2 Turn path into shape.\n// STEP 3 ExtrudeGeometry takes in Shape/Shapes\n// STEP 3a - Extract points from each shape, turn to vertices\n// STEP 3b - Triangulate each shape, add faces.\n\nTHREE.Shape = function () {\n\n\tTHREE.Path.apply( this, arguments );\n\tthis.holes = [];\n\n};\n\nTHREE.Shape.prototype = Object.create( THREE.Path.prototype );\n\n// Convenience method to return ExtrudeGeometry\n\nTHREE.Shape.prototype.extrude = function ( options ) {\n\n\tvar extruded = new THREE.ExtrudeGeometry( this, options );\n\treturn extruded;\n\n};\n\n// Convenience method to return ShapeGeometry\n\nTHREE.Shape.prototype.makeGeometry = function ( options ) {\n\n\tvar geometry = new THREE.ShapeGeometry( this, options );\n\treturn geometry;\n\n};\n\n// Get points of holes\n\nTHREE.Shape.prototype.getPointsHoles = function ( divisions ) {\n\n\tvar i, il = this.holes.length, holesPts = [];\n\n\tfor ( i = 0; i < il; i ++ ) {\n\n\t\tholesPts[ i ] = this.holes[ i ].getTransformedPoints( divisions, this.bends );\n\n\t}\n\n\treturn holesPts;\n\n};\n\n// Get points of holes (spaced by regular distance)\n\nTHREE.Shape.prototype.getSpacedPointsHoles = function ( divisions ) {\n\n\tvar i, il = this.holes.length, holesPts = [];\n\n\tfor ( i = 0; i < il; i ++ ) {\n\n\t\tholesPts[ i ] = this.holes[ i ].getTransformedSpacedPoints( divisions, this.bends );\n\n\t}\n\n\treturn holesPts;\n\n};\n\n\n// Get points of shape and holes (keypoints based on segments parameter)\n\nTHREE.Shape.prototype.extractAllPoints = function ( divisions ) {\n\n\treturn {\n\n\t\tshape: this.getTransformedPoints( divisions ),\n\t\tholes: this.getPointsHoles( divisions )\n\n\t};\n\n};\n\nTHREE.Shape.prototype.extractPoints = function ( divisions ) {\n\n\tif (this.useSpacedPoints) {\n\t\treturn this.extractAllSpacedPoints(divisions);\n\t}\n\n\treturn this.extractAllPoints(divisions);\n\n};\n\n//\n// THREE.Shape.prototype.extractAllPointsWithBend = function ( divisions, bend ) {\n//\n// \treturn {\n//\n// \t\tshape: this.transform( bend, divisions ),\n// \t\tholes: this.getPointsHoles( divisions, bend )\n//\n// \t};\n//\n// };\n\n// Get points of shape and holes (spaced by regular distance)\n\nTHREE.Shape.prototype.extractAllSpacedPoints = function ( divisions ) {\n\n\treturn {\n\n\t\tshape: this.getTransformedSpacedPoints( divisions ),\n\t\tholes: this.getSpacedPointsHoles( divisions )\n\n\t};\n\n};\n\n/**************************************************************\n *\tUtils\n **************************************************************/\n\nTHREE.Shape.Utils = {\n\n\ttriangulateShape: function ( contour, holes ) {\n\n\t\tfunction point_in_segment_2D_colin( inSegPt1, inSegPt2, inOtherPt ) {\n\t\t\t// inOtherPt needs to be colinear to the inSegment\n\t\t\tif ( inSegPt1.x != inSegPt2.x ) {\n\t\t\t\tif ( inSegPt1.x < inSegPt2.x ) {\n\t\t\t\t\treturn\t( ( inSegPt1.x <= inOtherPt.x ) && ( inOtherPt.x <= inSegPt2.x ) );\n\t\t\t\t} else {\n\t\t\t\t\treturn\t( ( inSegPt2.x <= inOtherPt.x ) && ( inOtherPt.x <= inSegPt1.x ) );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ( inSegPt1.y < inSegPt2.y ) {\n\t\t\t\t\treturn\t( ( inSegPt1.y <= inOtherPt.y ) && ( inOtherPt.y <= inSegPt2.y ) );\n\t\t\t\t} else {\n\t\t\t\t\treturn\t( ( inSegPt2.y <= inOtherPt.y ) && ( inOtherPt.y <= inSegPt1.y ) );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction intersect_segments_2D( inSeg1Pt1, inSeg1Pt2, inSeg2Pt1, inSeg2Pt2, inExcludeAdjacentSegs ) {\n\t\t\tvar EPSILON = 0.0000000001;\n\n\t\t\tvar seg1dx = inSeg1Pt2.x - inSeg1Pt1.x,   seg1dy = inSeg1Pt2.y - inSeg1Pt1.y;\n\t\t\tvar seg2dx = inSeg2Pt2.x - inSeg2Pt1.x,   seg2dy = inSeg2Pt2.y - inSeg2Pt1.y;\n\n\t\t\tvar seg1seg2dx = inSeg1Pt1.x - inSeg2Pt1.x;\n\t\t\tvar seg1seg2dy = inSeg1Pt1.y - inSeg2Pt1.y;\n\n\t\t\tvar limit\t\t= seg1dy * seg2dx - seg1dx * seg2dy;\n\t\t\tvar perpSeg1\t= seg1dy * seg1seg2dx - seg1dx * seg1seg2dy;\n\n\t\t\tif ( Math.abs(limit) > EPSILON ) {\t\t\t// not parallel\n\n\t\t\t\tvar perpSeg2;\n\t\t\t\tif ( limit > 0 ) {\n\t\t\t\t\tif ( ( perpSeg1 < 0 ) || ( perpSeg1 > limit ) ) \t\treturn [];\n\t\t\t\t\tperpSeg2 = seg2dy * seg1seg2dx - seg2dx * seg1seg2dy;\n\t\t\t\t\tif ( ( perpSeg2 < 0 ) || ( perpSeg2 > limit ) ) \t\treturn [];\n\t\t\t\t} else {\n\t\t\t\t\tif ( ( perpSeg1 > 0 ) || ( perpSeg1 < limit ) ) \t\treturn [];\n\t\t\t\t\tperpSeg2 = seg2dy * seg1seg2dx - seg2dx * seg1seg2dy;\n\t\t\t\t\tif ( ( perpSeg2 > 0 ) || ( perpSeg2 < limit ) ) \t\treturn [];\n\t\t\t\t}\n\n\t\t\t\t// i.e. to reduce rounding errors\n\t\t\t\t// intersection at endpoint of segment#1?\n\t\t\t\tif ( perpSeg2 == 0 ) {\n\t\t\t\t\tif ( ( inExcludeAdjacentSegs ) &&\n\t\t\t\t\t\t ( ( perpSeg1 == 0 ) || ( perpSeg1 == limit ) ) )\t\treturn [];\n\t\t\t\t\treturn  [ inSeg1Pt1 ];\n\t\t\t\t}\n\t\t\t\tif ( perpSeg2 == limit ) {\n\t\t\t\t\tif ( ( inExcludeAdjacentSegs ) &&\n\t\t\t\t\t\t ( ( perpSeg1 == 0 ) || ( perpSeg1 == limit ) ) )\t\treturn [];\n\t\t\t\t\treturn  [ inSeg1Pt2 ];\n\t\t\t\t}\n\t\t\t\t// intersection at endpoint of segment#2?\n\t\t\t\tif ( perpSeg1 == 0 )\t\treturn  [ inSeg2Pt1 ];\n\t\t\t\tif ( perpSeg1 == limit )\treturn  [ inSeg2Pt2 ];\n\n\t\t\t\t// return real intersection point\n\t\t\t\tvar factorSeg1 = perpSeg2 / limit;\n\t\t\t\treturn\t[ { x: inSeg1Pt1.x + factorSeg1 * seg1dx,\n\t\t\t\t\t\t\ty: inSeg1Pt1.y + factorSeg1 * seg1dy } ];\n\n\t\t\t} else {\t\t// parallel or colinear\n\t\t\t\tif ( ( perpSeg1 != 0 ) ||\n\t\t\t\t\t ( seg2dy * seg1seg2dx != seg2dx * seg1seg2dy ) ) \t\t\treturn [];\n\n\t\t\t\t// they are collinear or degenerate\n\t\t\t\tvar seg1Pt = ( (seg1dx == 0) && (seg1dy == 0) );\t// segment1 ist just a point?\n\t\t\t\tvar seg2Pt = ( (seg2dx == 0) && (seg2dy == 0) );\t// segment2 ist just a point?\n\t\t\t\t// both segments are points\n\t\t\t\tif ( seg1Pt && seg2Pt ) {\n\t\t\t\t\tif ( (inSeg1Pt1.x != inSeg2Pt1.x) ||\n\t\t\t\t\t\t (inSeg1Pt1.y != inSeg2Pt1.y) )\t\treturn [];   \t// they are distinct  points\n\t\t\t\t\treturn  [ inSeg1Pt1 ];                 \t\t\t\t\t// they are the same point\n\t\t\t\t}\n\t\t\t\t// segment#1  is a single point\n\t\t\t\tif ( seg1Pt ) {\n\t\t\t\t\tif (! point_in_segment_2D_colin( inSeg2Pt1, inSeg2Pt2, inSeg1Pt1 ) )\t\treturn [];\t\t// but not in segment#2\n\t\t\t\t\treturn  [ inSeg1Pt1 ];\n\t\t\t\t}\n\t\t\t\t// segment#2  is a single point\n\t\t\t\tif ( seg2Pt ) {\n\t\t\t\t\tif (! point_in_segment_2D_colin( inSeg1Pt1, inSeg1Pt2, inSeg2Pt1 ) )\t\treturn [];\t\t// but not in segment#1\n\t\t\t\t\treturn  [ inSeg2Pt1 ];\n\t\t\t\t}\n\n\t\t\t\t// they are collinear segments, which might overlap\n\t\t\t\tvar seg1min, seg1max, seg1minVal, seg1maxVal;\n\t\t\t\tvar seg2min, seg2max, seg2minVal, seg2maxVal;\n\t\t\t\tif (seg1dx != 0) {\t\t// the segments are NOT on a vertical line\n\t\t\t\t\tif ( inSeg1Pt1.x < inSeg1Pt2.x ) {\n\t\t\t\t\t\tseg1min = inSeg1Pt1; seg1minVal = inSeg1Pt1.x;\n\t\t\t\t\t\tseg1max = inSeg1Pt2; seg1maxVal = inSeg1Pt2.x;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tseg1min = inSeg1Pt2; seg1minVal = inSeg1Pt2.x;\n\t\t\t\t\t\tseg1max = inSeg1Pt1; seg1maxVal = inSeg1Pt1.x;\n\t\t\t\t\t}\n\t\t\t\t\tif ( inSeg2Pt1.x < inSeg2Pt2.x ) {\n\t\t\t\t\t\tseg2min = inSeg2Pt1; seg2minVal = inSeg2Pt1.x;\n\t\t\t\t\t\tseg2max = inSeg2Pt2; seg2maxVal = inSeg2Pt2.x;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tseg2min = inSeg2Pt2; seg2minVal = inSeg2Pt2.x;\n\t\t\t\t\t\tseg2max = inSeg2Pt1; seg2maxVal = inSeg2Pt1.x;\n\t\t\t\t\t}\n\t\t\t\t} else {\t\t\t\t// the segments are on a vertical line\n\t\t\t\t\tif ( inSeg1Pt1.y < inSeg1Pt2.y ) {\n\t\t\t\t\t\tseg1min = inSeg1Pt1; seg1minVal = inSeg1Pt1.y;\n\t\t\t\t\t\tseg1max = inSeg1Pt2; seg1maxVal = inSeg1Pt2.y;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tseg1min = inSeg1Pt2; seg1minVal = inSeg1Pt2.y;\n\t\t\t\t\t\tseg1max = inSeg1Pt1; seg1maxVal = inSeg1Pt1.y;\n\t\t\t\t\t}\n\t\t\t\t\tif ( inSeg2Pt1.y < inSeg2Pt2.y ) {\n\t\t\t\t\t\tseg2min = inSeg2Pt1; seg2minVal = inSeg2Pt1.y;\n\t\t\t\t\t\tseg2max = inSeg2Pt2; seg2maxVal = inSeg2Pt2.y;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tseg2min = inSeg2Pt2; seg2minVal = inSeg2Pt2.y;\n\t\t\t\t\t\tseg2max = inSeg2Pt1; seg2maxVal = inSeg2Pt1.y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif ( seg1minVal <= seg2minVal ) {\n\t\t\t\t\tif ( seg1maxVal <  seg2minVal )\treturn [];\n\t\t\t\t\tif ( seg1maxVal == seg2minVal )\t{\n\t\t\t\t\t\tif ( inExcludeAdjacentSegs )\t\treturn [];\n\t\t\t\t\t\treturn [ seg2min ];\n\t\t\t\t\t}\n\t\t\t\t\tif ( seg1maxVal <= seg2maxVal )\treturn [ seg2min, seg1max ];\n\t\t\t\t\treturn\t[ seg2min, seg2max ];\n\t\t\t\t} else {\n\t\t\t\t\tif ( seg1minVal >  seg2maxVal )\treturn [];\n\t\t\t\t\tif ( seg1minVal == seg2maxVal )\t{\n\t\t\t\t\t\tif ( inExcludeAdjacentSegs )\t\treturn [];\n\t\t\t\t\t\treturn [ seg1min ];\n\t\t\t\t\t}\n\t\t\t\t\tif ( seg1maxVal <= seg2maxVal )\treturn [ seg1min, seg1max ];\n\t\t\t\t\treturn\t[ seg1min, seg2max ];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction isPointInsideAngle( inVertex, inLegFromPt, inLegToPt, inOtherPt ) {\n\t\t\t// The order of legs is important\n\n\t\t\tvar EPSILON = 0.0000000001;\n\n\t\t\t// translation of all points, so that Vertex is at (0,0)\n\t\t\tvar legFromPtX\t= inLegFromPt.x - inVertex.x,  legFromPtY\t= inLegFromPt.y - inVertex.y;\n\t\t\tvar legToPtX\t= inLegToPt.x\t- inVertex.x,  legToPtY\t\t= inLegToPt.y\t- inVertex.y;\n\t\t\tvar otherPtX\t= inOtherPt.x\t- inVertex.x,  otherPtY\t\t= inOtherPt.y\t- inVertex.y;\n\n\t\t\t// main angle >0: < 180 deg.; 0: 180 deg.; <0: > 180 deg.\n\t\t\tvar from2toAngle\t= legFromPtX * legToPtY - legFromPtY * legToPtX;\n\t\t\tvar from2otherAngle\t= legFromPtX * otherPtY - legFromPtY * otherPtX;\n\n\t\t\tif ( Math.abs(from2toAngle) > EPSILON ) {\t\t\t// angle != 180 deg.\n\n\t\t\t\tvar other2toAngle\t\t= otherPtX * legToPtY - otherPtY * legToPtX;\n\t\t\t\t// console.log( \"from2to: \" + from2toAngle + \", from2other: \" + from2otherAngle + \", other2to: \" + other2toAngle );\n\n\t\t\t\tif ( from2toAngle > 0 ) {\t\t\t\t// main angle < 180 deg.\n\t\t\t\t\treturn\t( ( from2otherAngle >= 0 ) && ( other2toAngle >= 0 ) );\n\t\t\t\t} else {\t\t\t\t\t\t\t\t// main angle > 180 deg.\n\t\t\t\t\treturn\t( ( from2otherAngle >= 0 ) || ( other2toAngle >= 0 ) );\n\t\t\t\t}\n\t\t\t} else {\t\t\t\t\t\t\t\t\t\t// angle == 180 deg.\n\t\t\t\t// console.log( \"from2to: 180 deg., from2other: \" + from2otherAngle  );\n\t\t\t\treturn\t( from2otherAngle > 0 );\n\t\t\t}\n\t\t}\n\n\n\t\tfunction removeHoles( contour, holes ) {\n\n\t\t\tvar shape = contour.concat(); // work on this shape\n\t\t\tvar hole;\n\n\t\t\tfunction isCutLineInsideAngles( inShapeIdx, inHoleIdx ) {\n\t\t\t\t// Check if hole point lies within angle around shape point\n\t\t\t\tvar lastShapeIdx = shape.length - 1;\n\n\t\t\t\tvar prevShapeIdx = inShapeIdx - 1;\n\t\t\t\tif ( prevShapeIdx < 0 )\t\t\tprevShapeIdx = lastShapeIdx;\n\n\t\t\t\tvar nextShapeIdx = inShapeIdx + 1;\n\t\t\t\tif ( nextShapeIdx > lastShapeIdx )\tnextShapeIdx = 0;\n\n\t\t\t\tvar insideAngle = isPointInsideAngle( shape[inShapeIdx], shape[ prevShapeIdx ], shape[ nextShapeIdx ], hole[inHoleIdx] );\n\t\t\t\tif (! insideAngle ) {\n\t\t\t\t\t// console.log( \"Vertex (Shape): \" + inShapeIdx + \", Point: \" + hole[inHoleIdx].x + \"/\" + hole[inHoleIdx].y );\n\t\t\t\t\treturn\tfalse;\n\t\t\t\t}\n\n\t\t\t\t// Check if shape point lies within angle around hole point\n\t\t\t\tvar lastHoleIdx = hole.length - 1;\n\n\t\t\t\tvar prevHoleIdx = inHoleIdx - 1;\n\t\t\t\tif ( prevHoleIdx < 0 )\t\t\tprevHoleIdx = lastHoleIdx;\n\n\t\t\t\tvar nextHoleIdx = inHoleIdx + 1;\n\t\t\t\tif ( nextHoleIdx > lastHoleIdx )\tnextHoleIdx = 0;\n\n\t\t\t\tinsideAngle = isPointInsideAngle( hole[inHoleIdx], hole[ prevHoleIdx ], hole[ nextHoleIdx ], shape[inShapeIdx] );\n\t\t\t\tif (! insideAngle ) {\n\t\t\t\t\t// console.log( \"Vertex (Hole): \" + inHoleIdx + \", Point: \" + shape[inShapeIdx].x + \"/\" + shape[inShapeIdx].y );\n\t\t\t\t\treturn\tfalse;\n\t\t\t\t}\n\n\t\t\t\treturn\ttrue;\n\t\t\t}\n\n\t\t\tfunction intersectsShapeEdge( inShapePt, inHolePt ) {\n\t\t\t\t// checks for intersections with shape edges\n\t\t\t\tvar sIdx, nextIdx, intersection;\n\t\t\t\tfor ( sIdx = 0; sIdx < shape.length; sIdx ++ ) {\n\t\t\t\t\tnextIdx = sIdx+1; nextIdx %= shape.length;\n\t\t\t\t\tintersection = intersect_segments_2D( inShapePt, inHolePt, shape[sIdx], shape[nextIdx], true );\n\t\t\t\t\tif ( intersection.length > 0 )\t\treturn\ttrue;\n\t\t\t\t}\n\n\t\t\t\treturn\tfalse;\n\t\t\t}\n\n\t\t\tvar indepHoles = [];\n\n\t\t\tfunction intersectsHoleEdge( inShapePt, inHolePt ) {\n\t\t\t\t// checks for intersections with hole edges\n\t\t\t\tvar ihIdx, chkHole,\n\t\t\t\t\thIdx, nextIdx, intersection;\n\t\t\t\tfor ( ihIdx = 0; ihIdx < indepHoles.length; ihIdx ++ ) {\n\t\t\t\t\tchkHole = holes[indepHoles[ihIdx]];\n\t\t\t\t\tfor ( hIdx = 0; hIdx < chkHole.length; hIdx ++ ) {\n\t\t\t\t\t\tnextIdx = hIdx+1; nextIdx %= chkHole.length;\n\t\t\t\t\t\tintersection = intersect_segments_2D( inShapePt, inHolePt, chkHole[hIdx], chkHole[nextIdx], true );\n\t\t\t\t\t\tif ( intersection.length > 0 )\t\treturn\ttrue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn\tfalse;\n\t\t\t}\n\n\t\t\tvar holeIndex, shapeIndex,\n\t\t\t\tshapePt, holePt,\n\t\t\t\tholeIdx, cutKey, failedCuts = [],\n\t\t\t\ttmpShape1, tmpShape2,\n\t\t\t\ttmpHole1, tmpHole2;\n\n\t\t\tfor ( var h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tindepHoles.push( h );\n\n\t\t\t}\n\n\t\t\tvar minShapeIndex = 0;\n\t\t\tvar counter = indepHoles.length * 2;\n\t\t\twhile ( indepHoles.length > 0 ) {\n\t\t\t\tcounter --;\n\t\t\t\tif ( counter < 0 ) {\n\t\t\t\t\tconsole.log( \"Infinite Loop! Holes left:\" + indepHoles.length + \", Probably Hole outside Shape!\" );\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\t// search for shape-vertex and hole-vertex,\n\t\t\t\t// which can be connected without intersections\n\t\t\t\tfor ( shapeIndex = minShapeIndex; shapeIndex < shape.length; shapeIndex ++ ) {\n\n\t\t\t\t\tshapePt = shape[ shapeIndex ];\n\t\t\t\t\tholeIndex\t= - 1;\n\n\t\t\t\t\t// search for hole which can be reached without intersections\n\t\t\t\t\tfor ( var h = 0; h < indepHoles.length; h ++ ) {\n\t\t\t\t\t\tholeIdx = indepHoles[h];\n\n\t\t\t\t\t\t// prevent multiple checks\n\t\t\t\t\t\tcutKey = shapePt.x + \":\" + shapePt.y + \":\" + holeIdx;\n\t\t\t\t\t\tif ( failedCuts[cutKey] !== undefined )\t\t\tcontinue;\n\n\t\t\t\t\t\thole = holes[holeIdx];\n\t\t\t\t\t\tfor ( var h2 = 0; h2 < hole.length; h2 ++ ) {\n\t\t\t\t\t\t\tholePt = hole[ h2 ];\n\t\t\t\t\t\t\tif (! isCutLineInsideAngles( shapeIndex, h2 ) )\t\tcontinue;\n\t\t\t\t\t\t\tif ( intersectsShapeEdge( shapePt, holePt ) )\t\tcontinue;\n\t\t\t\t\t\t\tif ( intersectsHoleEdge( shapePt, holePt ) )\t\tcontinue;\n\n\t\t\t\t\t\t\tholeIndex = h2;\n\t\t\t\t\t\t\tindepHoles.splice(h,1);\n\n\t\t\t\t\t\t\ttmpShape1 = shape.slice( 0, shapeIndex+1 );\n\t\t\t\t\t\t\ttmpShape2 = shape.slice( shapeIndex );\n\t\t\t\t\t\t\ttmpHole1 = hole.slice( holeIndex );\n\t\t\t\t\t\t\ttmpHole2 = hole.slice( 0, holeIndex+1 );\n\n\t\t\t\t\t\t\tshape = tmpShape1.concat( tmpHole1 ).concat( tmpHole2 ).concat( tmpShape2 );\n\n\t\t\t\t\t\t\tminShapeIndex = shapeIndex;\n\n\t\t\t\t\t\t\t// Debug only, to show the selected cuts\n\t\t\t\t\t\t\t// glob_CutLines.push( [ shapePt, holePt ] );\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( holeIndex >= 0 )\tbreak;\t\t// hole-vertex found\n\n\t\t\t\t\t\tfailedCuts[cutKey] = true;\t\t\t// remember failure\n\t\t\t\t\t}\n\t\t\t\t\tif ( holeIndex >= 0 )\tbreak;\t\t// hole-vertex found\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn shape; \t\t\t/* shape with no holes */\n\t\t}\n\n\n\t\tvar i, il, f, face,\n\t\t\tkey, index,\n\t\t\tallPointsMap = {};\n\n\t\t// To maintain reference to old shape, one must match coordinates, or offset the indices from original arrays. It's probably easier to do the first.\n\n\t\tvar allpoints = contour.concat();\n\n\t\tfor ( var h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\tArray.prototype.push.apply( allpoints, holes[h] );\n\n\t\t}\n\n\t\t//console.log( \"allpoints\",allpoints, allpoints.length );\n\n\t\t// prepare all points map\n\n\t\tfor ( i = 0, il = allpoints.length; i < il; i ++ ) {\n\n\t\t\tkey = allpoints[ i ].x + \":\" + allpoints[ i ].y;\n\n\t\t\tif ( allPointsMap[ key ] !== undefined ) {\n\n\t\t\t\tconsole.log( \"Duplicate point\", key );\n\n\t\t\t}\n\n\t\t\tallPointsMap[ key ] = i;\n\n\t\t}\n\n\t\t// remove holes by cutting paths to holes and adding them to the shape\n\t\tvar shapeWithoutHoles = removeHoles( contour, holes );\n\n\t\tvar triangles = THREE.FontUtils.Triangulate( shapeWithoutHoles, false ); // True returns indices for points of spooled shape\n\t\t//console.log( \"triangles\",triangles, triangles.length );\n\n\t\t// check all face vertices against all points map\n\n\t\tfor ( i = 0, il = triangles.length; i < il; i ++ ) {\n\n\t\t\tface = triangles[ i ];\n\n\t\t\tfor ( f = 0; f < 3; f ++ ) {\n\n\t\t\t\tkey = face[ f ].x + \":\" + face[ f ].y;\n\n\t\t\t\tindex = allPointsMap[ key ];\n\n\t\t\t\tif ( index !== undefined ) {\n\n\t\t\t\t\tface[ f ] = index;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn triangles.concat();\n\n\t},\n\n\tisClockWise: function ( pts ) {\n\n\t\treturn THREE.FontUtils.Triangulate.area( pts ) < 0;\n\n\t},\n\n\t// Bezier Curves formulas obtained from\n\t// http://en.wikipedia.org/wiki/B%C3%A9zier_curve\n\n\t// Quad Bezier Functions\n\n\tb2p0: function ( t, p ) {\n\n\t\tvar k = 1 - t;\n\t\treturn k * k * p;\n\n\t},\n\n\tb2p1: function ( t, p ) {\n\n\t\treturn 2 * ( 1 - t ) * t * p;\n\n\t},\n\n\tb2p2: function ( t, p ) {\n\n\t\treturn t * t * p;\n\n\t},\n\n\tb2: function ( t, p0, p1, p2 ) {\n\n\t\treturn this.b2p0( t, p0 ) + this.b2p1( t, p1 ) + this.b2p2( t, p2 );\n\n\t},\n\n\t// Cubic Bezier Functions\n\n\tb3p0: function ( t, p ) {\n\n\t\tvar k = 1 - t;\n\t\treturn k * k * k * p;\n\n\t},\n\n\tb3p1: function ( t, p ) {\n\n\t\tvar k = 1 - t;\n\t\treturn 3 * k * k * t * p;\n\n\t},\n\n\tb3p2: function ( t, p ) {\n\n\t\tvar k = 1 - t;\n\t\treturn 3 * k * t * t * p;\n\n\t},\n\n\tb3p3: function ( t, p ) {\n\n\t\treturn t * t * t * p;\n\n\t},\n\n\tb3: function ( t, p0, p1, p2, p3 ) {\n\n\t\treturn this.b3p0( t, p0 ) + this.b3p1( t, p1 ) + this.b3p2( t, p2 ) +  this.b3p3( t, p3 );\n\n\t}\n\n};\n\n\n// File:src/extras/curves/LineCurve.js\n\n/**************************************************************\n *\tLine\n **************************************************************/\n\nTHREE.LineCurve = function ( v1, v2 ) {\n\n\tthis.v1 = v1;\n\tthis.v2 = v2;\n\n};\n\nTHREE.LineCurve.prototype = Object.create( THREE.Curve.prototype );\n\nTHREE.LineCurve.prototype.getPoint = function ( t ) {\n\n\tvar point = this.v2.clone().sub(this.v1);\n\tpoint.multiplyScalar( t ).add( this.v1 );\n\n\treturn point;\n\n};\n\n// Line curve is linear, so we can overwrite default getPointAt\n\nTHREE.LineCurve.prototype.getPointAt = function ( u ) {\n\n\treturn this.getPoint( u );\n\n};\n\nTHREE.LineCurve.prototype.getTangent = function( t ) {\n\n\tvar tangent = this.v2.clone().sub(this.v1);\n\n\treturn tangent.normalize();\n\n};\n\n// File:src/extras/curves/QuadraticBezierCurve.js\n\n/**************************************************************\n *\tQuadratic Bezier curve\n **************************************************************/\n\n\nTHREE.QuadraticBezierCurve = function ( v0, v1, v2 ) {\n\n\tthis.v0 = v0;\n\tthis.v1 = v1;\n\tthis.v2 = v2;\n\n};\n\nTHREE.QuadraticBezierCurve.prototype = Object.create( THREE.Curve.prototype );\n\n\nTHREE.QuadraticBezierCurve.prototype.getPoint = function ( t ) {\n\n\tvar vector = new THREE.Vector2();\n\n\tvector.x = THREE.Shape.Utils.b2( t, this.v0.x, this.v1.x, this.v2.x );\n\tvector.y = THREE.Shape.Utils.b2( t, this.v0.y, this.v1.y, this.v2.y );\n\n\treturn vector;\n\n};\n\n\nTHREE.QuadraticBezierCurve.prototype.getTangent = function( t ) {\n\n\tvar vector = new THREE.Vector2();\n\n\tvector.x = THREE.Curve.Utils.tangentQuadraticBezier( t, this.v0.x, this.v1.x, this.v2.x );\n\tvector.y = THREE.Curve.Utils.tangentQuadraticBezier( t, this.v0.y, this.v1.y, this.v2.y );\n\n\t// returns unit vector\n\n\treturn vector.normalize();\n\n};\n\n// File:src/extras/curves/CubicBezierCurve.js\n\n/**************************************************************\n *\tCubic Bezier curve\n **************************************************************/\n\nTHREE.CubicBezierCurve = function ( v0, v1, v2, v3 ) {\n\n\tthis.v0 = v0;\n\tthis.v1 = v1;\n\tthis.v2 = v2;\n\tthis.v3 = v3;\n\n};\n\nTHREE.CubicBezierCurve.prototype = Object.create( THREE.Curve.prototype );\n\nTHREE.CubicBezierCurve.prototype.getPoint = function ( t ) {\n\n\tvar tx, ty;\n\n\ttx = THREE.Shape.Utils.b3( t, this.v0.x, this.v1.x, this.v2.x, this.v3.x );\n\tty = THREE.Shape.Utils.b3( t, this.v0.y, this.v1.y, this.v2.y, this.v3.y );\n\n\treturn new THREE.Vector2( tx, ty );\n\n};\n\nTHREE.CubicBezierCurve.prototype.getTangent = function( t ) {\n\n\tvar tx, ty;\n\n\ttx = THREE.Curve.Utils.tangentCubicBezier( t, this.v0.x, this.v1.x, this.v2.x, this.v3.x );\n\tty = THREE.Curve.Utils.tangentCubicBezier( t, this.v0.y, this.v1.y, this.v2.y, this.v3.y );\n\n\tvar tangent = new THREE.Vector2( tx, ty );\n\ttangent.normalize();\n\n\treturn tangent;\n\n};\n\n// File:src/extras/curves/SplineCurve.js\n\n/**************************************************************\n *\tSpline curve\n **************************************************************/\n\nTHREE.SplineCurve = function ( points /* array of Vector2 */ ) {\n\n\tthis.points = ( points == undefined ) ? [] : points;\n\n};\n\nTHREE.SplineCurve.prototype = Object.create( THREE.Curve.prototype );\n\nTHREE.SplineCurve.prototype.getPoint = function ( t ) {\n\n\tvar points = this.points;\n\tvar point = ( points.length - 1 ) * t;\n\n\tvar intPoint = Math.floor( point );\n\tvar weight = point - intPoint;\n\n\tvar point0 = points[ intPoint == 0 ? intPoint : intPoint - 1 ]\n\tvar point1 = points[ intPoint ]\n\tvar point2 = points[ intPoint > points.length - 2 ? points.length -1 : intPoint + 1 ]\n\tvar point3 = points[ intPoint > points.length - 3 ? points.length -1 : intPoint + 2 ]\n\n\tvar vector = new THREE.Vector2();\n\n\tvector.x = THREE.Curve.Utils.interpolate( point0.x, point1.x, point2.x, point3.x, weight );\n\tvector.y = THREE.Curve.Utils.interpolate( point0.y, point1.y, point2.y, point3.y, weight );\n\n\treturn vector;\n\n};\n\n// File:src/extras/curves/EllipseCurve.js\n\n/**************************************************************\n *\tEllipse curve\n **************************************************************/\n\nTHREE.EllipseCurve = function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\tthis.aX = aX;\n\tthis.aY = aY;\n\n\tthis.xRadius = xRadius;\n\tthis.yRadius = yRadius;\n\n\tthis.aStartAngle = aStartAngle;\n\tthis.aEndAngle = aEndAngle;\n\n\tthis.aClockwise = aClockwise;\n\n};\n\nTHREE.EllipseCurve.prototype = Object.create( THREE.Curve.prototype );\n\nTHREE.EllipseCurve.prototype.getPoint = function ( t ) {\n\n\tvar deltaAngle = this.aEndAngle - this.aStartAngle;\n\n\tif ( deltaAngle < 0 ) deltaAngle += Math.PI * 2;\n\tif ( deltaAngle > Math.PI * 2 ) deltaAngle -= Math.PI * 2;\n\n\tvar angle;\n\n\tif ( this.aClockwise === true ) {\n\n\t\tangle = this.aEndAngle + ( 1 - t ) * ( Math.PI * 2 - deltaAngle );\n\n\t} else {\n\n\t\tangle = this.aStartAngle + t * deltaAngle;\n\n\t}\n\t\n\tvar vector = new THREE.Vector2();\n\n\tvector.x = this.aX + this.xRadius * Math.cos( angle );\n\tvector.y = this.aY + this.yRadius * Math.sin( angle );\n\n\treturn vector;\n\n};\n\n// File:src/extras/curves/ArcCurve.js\n\n/**************************************************************\n *\tArc curve\n **************************************************************/\n\nTHREE.ArcCurve = function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\tTHREE.EllipseCurve.call( this, aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\n};\n\nTHREE.ArcCurve.prototype = Object.create( THREE.EllipseCurve.prototype );\n\n// File:src/extras/curves/LineCurve3.js\n\n/**************************************************************\n *\tLine3D\n **************************************************************/\n\nTHREE.LineCurve3 = THREE.Curve.create(\n\n\tfunction ( v1, v2 ) {\n\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\n\t},\n\n\tfunction ( t ) {\n\n\t\tvar vector = new THREE.Vector3();\n\n\t\tvector.subVectors( this.v2, this.v1 ); // diff\n\t\tvector.multiplyScalar( t );\n\t\tvector.add( this.v1 );\n\n\t\treturn vector;\n\n\t}\n\n);\n\n// File:src/extras/curves/QuadraticBezierCurve3.js\n\n/**************************************************************\n *\tQuadratic Bezier 3D curve\n **************************************************************/\n\nTHREE.QuadraticBezierCurve3 = THREE.Curve.create(\n\n\tfunction ( v0, v1, v2 ) {\n\n\t\tthis.v0 = v0;\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\n\t},\n\n\tfunction ( t ) {\n\n\t\tvar vector = new THREE.Vector3();\n\n\t\tvector.x = THREE.Shape.Utils.b2( t, this.v0.x, this.v1.x, this.v2.x );\n\t\tvector.y = THREE.Shape.Utils.b2( t, this.v0.y, this.v1.y, this.v2.y );\n\t\tvector.z = THREE.Shape.Utils.b2( t, this.v0.z, this.v1.z, this.v2.z );\n\n\t\treturn vector;\n\n\t}\n\n);\n\n// File:src/extras/curves/CubicBezierCurve3.js\n\n/**************************************************************\n *\tCubic Bezier 3D curve\n **************************************************************/\n\nTHREE.CubicBezierCurve3 = THREE.Curve.create(\n\n\tfunction ( v0, v1, v2, v3 ) {\n\n\t\tthis.v0 = v0;\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\t\tthis.v3 = v3;\n\n\t},\n\n\tfunction ( t ) {\n\n\t\tvar vector = new THREE.Vector3();\n\n\t\tvector.x = THREE.Shape.Utils.b3( t, this.v0.x, this.v1.x, this.v2.x, this.v3.x );\n\t\tvector.y = THREE.Shape.Utils.b3( t, this.v0.y, this.v1.y, this.v2.y, this.v3.y );\n\t\tvector.z = THREE.Shape.Utils.b3( t, this.v0.z, this.v1.z, this.v2.z, this.v3.z );\n\n\t\treturn vector;\n\n\t}\n\n);\n\n// File:src/extras/curves/SplineCurve3.js\n\n/**************************************************************\n *\tSpline 3D curve\n **************************************************************/\n\n\nTHREE.SplineCurve3 = THREE.Curve.create(\n\n\tfunction ( points /* array of Vector3 */) {\n\n\t\tthis.points = ( points == undefined ) ? [] : points;\n\n\t},\n\n\tfunction ( t ) {\n\n\t\tvar points = this.points;\n\t\tvar point = ( points.length - 1 ) * t;\n\n\t\tvar intPoint = Math.floor( point );\n\t\tvar weight = point - intPoint;\n\n\t\tvar point0 = points[ intPoint == 0 ? intPoint : intPoint - 1 ];\n\t\tvar point1 = points[ intPoint ];\n\t\tvar point2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\n\t\tvar point3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\n\n\t\tvar vector = new THREE.Vector3();\n\n\t\tvector.x = THREE.Curve.Utils.interpolate( point0.x, point1.x, point2.x, point3.x, weight );\n\t\tvector.y = THREE.Curve.Utils.interpolate( point0.y, point1.y, point2.y, point3.y, weight );\n\t\tvector.z = THREE.Curve.Utils.interpolate( point0.z, point1.z, point2.z, point3.z, weight );\n\n\t\treturn vector;\n\n\t}\n\n);\n\n// File:src/extras/curves/ClosedSplineCurve3.js\n\n/**************************************************************\n *\tClosed Spline 3D curve\n **************************************************************/\n\n\nTHREE.ClosedSplineCurve3 = THREE.Curve.create(\n\n\tfunction ( points /* array of Vector3 */) {\n\n\t\tthis.points = ( points == undefined ) ? [] : points;\n\n\t},\n\n\tfunction ( t ) {\n\n\t\tvar points = this.points;\n\t\tvar point = ( points.length - 0 ) * t; // This needs to be from 0-length +1\n\n\t\tvar intPoint = Math.floor( point );\n\t\tvar weight = point - intPoint;\n\n\t\tintPoint += intPoint > 0 ? 0 : ( Math.floor( Math.abs( intPoint ) / points.length ) + 1 ) * points.length;\n\n\t\tvar point0 = points[ ( intPoint - 1 ) % points.length ];\n\t\tvar point1 = points[ ( intPoint     ) % points.length ];\n\t\tvar point2 = points[ ( intPoint + 1 ) % points.length ];\n\t\tvar point3 = points[ ( intPoint + 2 ) % points.length ];\n\n\t\tvar vector = new THREE.Vector3();\n\n\t\tvector.x = THREE.Curve.Utils.interpolate( point0.x, point1.x, point2.x, point3.x, weight );\n\t\tvector.y = THREE.Curve.Utils.interpolate( point0.y, point1.y, point2.y, point3.y, weight );\n\t\tvector.z = THREE.Curve.Utils.interpolate( point0.z, point1.z, point2.z, point3.z, weight );\n\n\t\treturn vector;\n\n\t}\n\n);\n\n// File:src/extras/animation/AnimationHandler.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n */\n\nTHREE.AnimationHandler = {\n\n\tLINEAR: 0,\n\tCATMULLROM: 1,\n\tCATMULLROM_FORWARD: 2,\n\n\t//\n\n\tadd: function () { console.warn( 'THREE.AnimationHandler.add() has been deprecated.' ); },\n\tget: function () { console.warn( 'THREE.AnimationHandler.get() has been deprecated.' ); },\n\tremove: function () { console.warn( 'THREE.AnimationHandler.remove() has been deprecated.' ); },\n\n\t//\n\n\tanimations: [],\n\n\tinit: function ( data ) {\n\n\t\tif ( data.initialized === true ) return;\n\n\t\t// loop through all keys\n\n\t\tfor ( var h = 0; h < data.hierarchy.length; h ++ ) {\n\n\t\t\tfor ( var k = 0; k < data.hierarchy[ h ].keys.length; k ++ ) {\n\n\t\t\t\t// remove minus times\n\n\t\t\t\tif ( data.hierarchy[ h ].keys[ k ].time < 0 ) {\n\n\t\t\t\t\t data.hierarchy[ h ].keys[ k ].time = 0;\n\n\t\t\t\t}\n\n\t\t\t\t// create quaternions\n\n\t\t\t\tif ( data.hierarchy[ h ].keys[ k ].rot !== undefined &&\n\t\t\t\t  ! ( data.hierarchy[ h ].keys[ k ].rot instanceof THREE.Quaternion ) ) {\n\n\t\t\t\t\tvar quat = data.hierarchy[ h ].keys[ k ].rot;\n\t\t\t\t\tdata.hierarchy[ h ].keys[ k ].rot = new THREE.Quaternion().fromArray( quat );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// prepare morph target keys\n\n\t\t\tif ( data.hierarchy[ h ].keys.length && data.hierarchy[ h ].keys[ 0 ].morphTargets !== undefined ) {\n\n\t\t\t\t// get all used\n\n\t\t\t\tvar usedMorphTargets = {};\n\n\t\t\t\tfor ( var k = 0; k < data.hierarchy[ h ].keys.length; k ++ ) {\n\n\t\t\t\t\tfor ( var m = 0; m < data.hierarchy[ h ].keys[ k ].morphTargets.length; m ++ ) {\n\n\t\t\t\t\t\tvar morphTargetName = data.hierarchy[ h ].keys[ k ].morphTargets[ m ];\n\t\t\t\t\t\tusedMorphTargets[ morphTargetName ] = - 1;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tdata.hierarchy[ h ].usedMorphTargets = usedMorphTargets;\n\n\n\t\t\t\t// set all used on all frames\n\n\t\t\t\tfor ( var k = 0; k < data.hierarchy[ h ].keys.length; k ++ ) {\n\n\t\t\t\t\tvar influences = {};\n\n\t\t\t\t\tfor ( var morphTargetName in usedMorphTargets ) {\n\n\t\t\t\t\t\tfor ( var m = 0; m < data.hierarchy[ h ].keys[ k ].morphTargets.length; m ++ ) {\n\n\t\t\t\t\t\t\tif ( data.hierarchy[ h ].keys[ k ].morphTargets[ m ] === morphTargetName ) {\n\n\t\t\t\t\t\t\t\tinfluences[ morphTargetName ] = data.hierarchy[ h ].keys[ k ].morphTargetsInfluences[ m ];\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( m === data.hierarchy[ h ].keys[ k ].morphTargets.length ) {\n\n\t\t\t\t\t\t\tinfluences[ morphTargetName ] = 0;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tdata.hierarchy[ h ].keys[ k ].morphTargetsInfluences = influences;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\t// remove all keys that are on the same time\n\n\t\t\tfor ( var k = 1; k < data.hierarchy[ h ].keys.length; k ++ ) {\n\n\t\t\t\tif ( data.hierarchy[ h ].keys[ k ].time === data.hierarchy[ h ].keys[ k - 1 ].time ) {\n\n\t\t\t\t\tdata.hierarchy[ h ].keys.splice( k, 1 );\n\t\t\t\t\tk --;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\t// set index\n\n\t\t\tfor ( var k = 0; k < data.hierarchy[ h ].keys.length; k ++ ) {\n\n\t\t\t\tdata.hierarchy[ h ].keys[ k ].index = k;\n\n\t\t\t}\n\n\t\t}\n\n\t\tdata.initialized = true;\n\n\t\treturn data;\n\n\t},\n\n\tparse: function ( root ) {\n\n\t\tvar parseRecurseHierarchy = function ( root, hierarchy ) {\n\n\t\t\thierarchy.push( root );\n\n\t\t\tfor ( var c = 0; c < root.children.length; c ++ )\n\t\t\t\tparseRecurseHierarchy( root.children[ c ], hierarchy );\n\n\t\t};\n\n\t\t// setup hierarchy\n\n\t\tvar hierarchy = [];\n\n\t\tif ( root instanceof THREE.SkinnedMesh ) {\n\n\t\t\tfor ( var b = 0; b < root.skeleton.bones.length; b ++ ) {\n\n\t\t\t\thierarchy.push( root.skeleton.bones[ b ] );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tparseRecurseHierarchy( root, hierarchy );\n\n\t\t}\n\n\t\treturn hierarchy;\n\n\t},\n\n\tplay: function ( animation ) {\n\n\t\tif ( this.animations.indexOf( animation ) === - 1 ) {\n\n\t\t\tthis.animations.push( animation );\n\n\t\t}\n\n\t},\n\n\tstop: function ( animation ) {\n\n\t\tvar index = this.animations.indexOf( animation );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\tthis.animations.splice( index, 1 );\n\n\t\t}\n\n\t},\n\n\tupdate: function ( deltaTimeMS ) {\n\n\t\tfor ( var i = 0; i < this.animations.length; i ++ ) {\n\n\t\t\tthis.animations[ i ].resetBlendWeights( );\n\n\t\t}\n\n\t\tfor ( var i = 0; i < this.animations.length; i ++ ) {\n\n\t\t\tthis.animations[ i ].update( deltaTimeMS );\n\n\t\t}\n\n\t}\n\n};\n\n// File:src/extras/animation/Animation.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.Animation = function ( root, data ) {\n\n\tthis.root = root;\n\tthis.data = THREE.AnimationHandler.init( data );\n\tthis.hierarchy = THREE.AnimationHandler.parse( root );\n\n\tthis.currentTime = 0;\n\tthis.timeScale = 1;\n\n\tthis.isPlaying = false;\n\tthis.loop = true;\n\tthis.weight = 0;\n\n\tthis.interpolationType = THREE.AnimationHandler.LINEAR;\n\n};\n\n\nTHREE.Animation.prototype.keyTypes = [ \"pos\", \"rot\", \"scl\" ];\n\n\nTHREE.Animation.prototype.play = function ( startTime, weight ) {\n\n\tthis.currentTime = startTime !== undefined ? startTime : 0;\n\tthis.weight = weight !== undefined ? weight: 1;\n\n\tthis.isPlaying = true;\n\n\tthis.reset();\n\n\tTHREE.AnimationHandler.play( this );\n\n};\n\n\nTHREE.Animation.prototype.stop = function() {\n\n\tthis.isPlaying = false;\n\n\tTHREE.AnimationHandler.stop( this );\n\n};\n\nTHREE.Animation.prototype.reset = function () {\n\n\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\n\n\t\tvar object = this.hierarchy[ h ];\n\n\t\tobject.matrixAutoUpdate = true;\n\n\t\tif ( object.animationCache === undefined ) {\n\n\t\t\tobject.animationCache = {\n\t\t\t\tanimations: {},\n\t\t\t\tblending: {\n\t\t\t\t\tpositionWeight: 0.0,\n\t\t\t\t\tquaternionWeight: 0.0,\n\t\t\t\t\tscaleWeight: 0.0\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tif ( object.animationCache.animations[this.data.name] === undefined ) {\n\n\t\t\tobject.animationCache.animations[this.data.name] = {};\n\t\t\tobject.animationCache.animations[this.data.name].prevKey = { pos: 0, rot: 0, scl: 0 };\n\t\t\tobject.animationCache.animations[this.data.name].nextKey = { pos: 0, rot: 0, scl: 0 };\n\t\t\tobject.animationCache.animations[this.data.name].originalMatrix = object.matrix;\n\n\t\t}\n\n\t\tvar animationCache = object.animationCache.animations[this.data.name];\n\n\t\t// Get keys to match our current time\n\n\t\tfor ( var t = 0; t < 3; t ++ ) {\n\n\t\t\tvar type = this.keyTypes[ t ];\n\n\t\t\tvar prevKey = this.data.hierarchy[ h ].keys[ 0 ];\n\t\t\tvar nextKey = this.getNextKeyWith( type, h, 1 );\n\n\t\t\twhile ( nextKey.time < this.currentTime && nextKey.index > prevKey.index ) {\n\n\t\t\t\tprevKey = nextKey;\n\t\t\t\tnextKey = this.getNextKeyWith( type, h, nextKey.index + 1 );\n\n\t\t\t}\n\n\t\t\tanimationCache.prevKey[ type ] = prevKey;\n\t\t\tanimationCache.nextKey[ type ] = nextKey;\n\n\t\t}\n\n\t}\n\n};\n\nTHREE.Animation.prototype.resetBlendWeights = function () {\n\n\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\n\n\t\tvar object = this.hierarchy[ h ];\n\n\t\tif ( object.animationCache !== undefined ) {\n\n\t\t\tobject.animationCache.blending.positionWeight = 0.0;\n\t\t\tobject.animationCache.blending.quaternionWeight = 0.0;\n\t\t\tobject.animationCache.blending.scaleWeight = 0.0;\n\n\t\t}\n\n\t}\n\n};\n\nTHREE.Animation.prototype.update = (function(){\n\n\tvar points = [];\n\tvar target = new THREE.Vector3();\n\tvar newVector = new THREE.Vector3();\n\tvar newQuat = new THREE.Quaternion();\n\n\t// Catmull-Rom spline\n\n\tvar interpolateCatmullRom = function ( points, scale ) {\n\n\t\tvar c = [], v3 = [],\n\t\tpoint, intPoint, weight, w2, w3,\n\t\tpa, pb, pc, pd;\n\n\t\tpoint = ( points.length - 1 ) * scale;\n\t\tintPoint = Math.floor( point );\n\t\tweight = point - intPoint;\n\n\t\tc[ 0 ] = intPoint === 0 ? intPoint : intPoint - 1;\n\t\tc[ 1 ] = intPoint;\n\t\tc[ 2 ] = intPoint > points.length - 2 ? intPoint : intPoint + 1;\n\t\tc[ 3 ] = intPoint > points.length - 3 ? intPoint : intPoint + 2;\n\n\t\tpa = points[ c[ 0 ] ];\n\t\tpb = points[ c[ 1 ] ];\n\t\tpc = points[ c[ 2 ] ];\n\t\tpd = points[ c[ 3 ] ];\n\n\t\tw2 = weight * weight;\n\t\tw3 = weight * w2;\n\n\t\tv3[ 0 ] = interpolate( pa[ 0 ], pb[ 0 ], pc[ 0 ], pd[ 0 ], weight, w2, w3 );\n\t\tv3[ 1 ] = interpolate( pa[ 1 ], pb[ 1 ], pc[ 1 ], pd[ 1 ], weight, w2, w3 );\n\t\tv3[ 2 ] = interpolate( pa[ 2 ], pb[ 2 ], pc[ 2 ], pd[ 2 ], weight, w2, w3 );\n\n\t\treturn v3;\n\n\t};\n\n\tvar interpolate = function ( p0, p1, p2, p3, t, t2, t3 ) {\n\n\t\tvar v0 = ( p2 - p0 ) * 0.5,\n\t\t\tv1 = ( p3 - p1 ) * 0.5;\n\n\t\treturn ( 2 * ( p1 - p2 ) + v0 + v1 ) * t3 + ( - 3 * ( p1 - p2 ) - 2 * v0 - v1 ) * t2 + v0 * t + p1;\n\n\t};\n\n\treturn function ( delta ) {\n\n\t\tif ( this.isPlaying === false ) return;\n\n\t\tthis.currentTime += delta * this.timeScale;\n\n\t\tif ( this.weight === 0 )\n\t\t\treturn;\n\n\t\t//\n\n\t\tvar duration = this.data.length;\n\n\t\tif ( this.currentTime > duration || this.currentTime < 0 ) {\n\n\t\t\tif ( this.loop ) {\n\n\t\t\t\tthis.currentTime %= duration;\n\n\t\t\t\tif ( this.currentTime < 0 )\n\t\t\t\t\tthis.currentTime += duration;\n\n\t\t\t\tthis.reset();\n\n\t\t\t} else {\n\n\t\t\t\tthis.stop();\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\n\n\t\t\tvar object = this.hierarchy[ h ];\n\t\t\tvar animationCache = object.animationCache.animations[this.data.name];\n\t\t\tvar blending = object.animationCache.blending;\n\n\t\t\t// loop through pos/rot/scl\n\n\t\t\tfor ( var t = 0; t < 3; t ++ ) {\n\n\t\t\t\t// get keys\n\n\t\t\t\tvar type    = this.keyTypes[ t ];\n\t\t\t\tvar prevKey = animationCache.prevKey[ type ];\n\t\t\t\tvar nextKey = animationCache.nextKey[ type ];\n\n\t\t\t\tif ( ( this.timeScale > 0 && nextKey.time <= this.currentTime ) ||\n\t\t\t\t\t( this.timeScale < 0 && prevKey.time >= this.currentTime ) ) {\n\n\t\t\t\t\tprevKey = this.data.hierarchy[ h ].keys[ 0 ];\n\t\t\t\t\tnextKey = this.getNextKeyWith( type, h, 1 );\n\n\t\t\t\t\twhile ( nextKey.time < this.currentTime && nextKey.index > prevKey.index ) {\n\n\t\t\t\t\t\tprevKey = nextKey;\n\t\t\t\t\t\tnextKey = this.getNextKeyWith( type, h, nextKey.index + 1 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tanimationCache.prevKey[ type ] = prevKey;\n\t\t\t\t\tanimationCache.nextKey[ type ] = nextKey;\n\n\t\t\t\t}\n\n\t\t\t\tobject.matrixAutoUpdate = true;\n\t\t\t\tobject.matrixWorldNeedsUpdate = true;\n\n\t\t\t\tvar scale = ( this.currentTime - prevKey.time ) / ( nextKey.time - prevKey.time );\n\n\t\t\t\tvar prevXYZ = prevKey[ type ];\n\t\t\t\tvar nextXYZ = nextKey[ type ];\n\n\t\t\t\tif ( scale < 0 ) scale = 0;\n\t\t\t\tif ( scale > 1 ) scale = 1;\n\n\t\t\t\t// interpolate\n\n\t\t\t\tif ( type === \"pos\" ) {\n\n\t\t\t\t\tif ( this.interpolationType === THREE.AnimationHandler.LINEAR ) {\n\n\t\t\t\t\t\tnewVector.x = prevXYZ[ 0 ] + ( nextXYZ[ 0 ] - prevXYZ[ 0 ] ) * scale;\n\t\t\t\t\t\tnewVector.y = prevXYZ[ 1 ] + ( nextXYZ[ 1 ] - prevXYZ[ 1 ] ) * scale;\n\t\t\t\t\t\tnewVector.z = prevXYZ[ 2 ] + ( nextXYZ[ 2 ] - prevXYZ[ 2 ] ) * scale;\n\n\t\t\t\t\t\t// blend\n\t\t\t\t\t\tvar proportionalWeight = this.weight / ( this.weight + blending.positionWeight );\n\t\t\t\t\t\tobject.position.lerp( newVector, proportionalWeight );\n\t\t\t\t\t\tblending.positionWeight += this.weight;\n\n\t\t\t\t\t} else if ( this.interpolationType === THREE.AnimationHandler.CATMULLROM ||\n\t\t\t\t\t\t\t\tthis.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ) {\n\n\t\t\t\t\t\tpoints[ 0 ] = this.getPrevKeyWith( \"pos\", h, prevKey.index - 1 )[ \"pos\" ];\n\t\t\t\t\t\tpoints[ 1 ] = prevXYZ;\n\t\t\t\t\t\tpoints[ 2 ] = nextXYZ;\n\t\t\t\t\t\tpoints[ 3 ] = this.getNextKeyWith( \"pos\", h, nextKey.index + 1 )[ \"pos\" ];\n\n\t\t\t\t\t\tscale = scale * 0.33 + 0.33;\n\n\t\t\t\t\t\tvar currentPoint = interpolateCatmullRom( points, scale );\n\t\t\t\t\t\tvar proportionalWeight = this.weight / ( this.weight + blending.positionWeight );\n\t\t\t\t\t\tblending.positionWeight += this.weight;\n\n\t\t\t\t\t\t// blend\n\n\t\t\t\t\t\tvar vector = object.position;\n\t\t\t\t\t\t\n\t\t\t\t\t\tvector.x = vector.x + ( currentPoint[ 0 ] - vector.x ) * proportionalWeight;\n\t\t\t\t\t\tvector.y = vector.y + ( currentPoint[ 1 ] - vector.y ) * proportionalWeight;\n\t\t\t\t\t\tvector.z = vector.z + ( currentPoint[ 2 ] - vector.z ) * proportionalWeight;\n\n\t\t\t\t\t\tif ( this.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ) {\n\n\t\t\t\t\t\t\tvar forwardPoint = interpolateCatmullRom( points, scale * 1.01 );\n\n\t\t\t\t\t\t\ttarget.set( forwardPoint[ 0 ], forwardPoint[ 1 ], forwardPoint[ 2 ] );\n\t\t\t\t\t\t\ttarget.sub( vector );\n\t\t\t\t\t\t\ttarget.y = 0;\n\t\t\t\t\t\t\ttarget.normalize();\n\n\t\t\t\t\t\t\tvar angle = Math.atan2( target.x, target.z );\n\t\t\t\t\t\t\tobject.rotation.set( 0, angle, 0 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( type === \"rot\" ) {\n\n\t\t\t\t\tTHREE.Quaternion.slerp( prevXYZ, nextXYZ, newQuat, scale );\n\n\t\t\t\t\t// Avoid paying the cost of an additional slerp if we don't have to\n\t\t\t\t\tif ( blending.quaternionWeight === 0 ) {\n\n\t\t\t\t\t\tobject.quaternion.copy(newQuat);\n\t\t\t\t\t\tblending.quaternionWeight = this.weight;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvar proportionalWeight = this.weight / ( this.weight + blending.quaternionWeight );\n\t\t\t\t\t\tTHREE.Quaternion.slerp( object.quaternion, newQuat, object.quaternion, proportionalWeight );\n\t\t\t\t\t\tblending.quaternionWeight += this.weight;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( type === \"scl\" ) {\n\n\t\t\t\t\tnewVector.x = prevXYZ[ 0 ] + ( nextXYZ[ 0 ] - prevXYZ[ 0 ] ) * scale;\n\t\t\t\t\tnewVector.y = prevXYZ[ 1 ] + ( nextXYZ[ 1 ] - prevXYZ[ 1 ] ) * scale;\n\t\t\t\t\tnewVector.z = prevXYZ[ 2 ] + ( nextXYZ[ 2 ] - prevXYZ[ 2 ] ) * scale;\n\n\t\t\t\t\tvar proportionalWeight = this.weight / ( this.weight + blending.scaleWeight );\n\t\t\t\t\tobject.scale.lerp( newVector, proportionalWeight );\n\t\t\t\t\tblending.scaleWeight += this.weight;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t};\n\n})();\n\n\n\n\n\n// Get next key with\n\nTHREE.Animation.prototype.getNextKeyWith = function ( type, h, key ) {\n\n\tvar keys = this.data.hierarchy[ h ].keys;\n\n\tif ( this.interpolationType === THREE.AnimationHandler.CATMULLROM ||\n\t\t this.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ) {\n\n\t\tkey = key < keys.length - 1 ? key : keys.length - 1;\n\n\t} else {\n\n\t\tkey = key % keys.length;\n\n\t}\n\n\tfor ( ; key < keys.length; key ++ ) {\n\n\t\tif ( keys[ key ][ type ] !== undefined ) {\n\n\t\t\treturn keys[ key ];\n\n\t\t}\n\n\t}\n\n\treturn this.data.hierarchy[ h ].keys[ 0 ];\n\n};\n\n// Get previous key with\n\nTHREE.Animation.prototype.getPrevKeyWith = function ( type, h, key ) {\n\n\tvar keys = this.data.hierarchy[ h ].keys;\n\n\tif ( this.interpolationType === THREE.AnimationHandler.CATMULLROM ||\n\t\tthis.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ) {\n\n\t\tkey = key > 0 ? key : 0;\n\n\t} else {\n\n\t\tkey = key >= 0 ? key : key + keys.length;\n\n\t}\n\n\n\tfor ( ; key >= 0; key -- ) {\n\n\t\tif ( keys[ key ][ type ] !== undefined ) {\n\n\t\t\treturn keys[ key ];\n\n\t\t}\n\n\t}\n\n\treturn this.data.hierarchy[ h ].keys[ keys.length - 1 ];\n\n};\n\n// File:src/extras/animation/KeyFrameAnimation.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author khang duong\n * @author erik kitson\n */\n\nTHREE.KeyFrameAnimation = function ( data ) {\n\n\tthis.root = data.node;\n\tthis.data = THREE.AnimationHandler.init( data );\n\tthis.hierarchy = THREE.AnimationHandler.parse( this.root );\n\tthis.currentTime = 0;\n\tthis.timeScale = 0.001;\n\tthis.isPlaying = false;\n\tthis.isPaused = true;\n\tthis.loop = true;\n\n\t// initialize to first keyframes\n\n\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\n\n\t\tvar keys = this.data.hierarchy[h].keys,\n\t\t\tsids = this.data.hierarchy[h].sids,\n\t\t\tobj = this.hierarchy[h];\n\n\t\tif ( keys.length && sids ) {\n\n\t\t\tfor ( var s = 0; s < sids.length; s ++ ) {\n\n\t\t\t\tvar sid = sids[ s ],\n\t\t\t\t\tnext = this.getNextKeyWith( sid, h, 0 );\n\n\t\t\t\tif ( next ) {\n\n\t\t\t\t\tnext.apply( sid );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tobj.matrixAutoUpdate = false;\n\t\t\tthis.data.hierarchy[h].node.updateMatrix();\n\t\t\tobj.matrixWorldNeedsUpdate = true;\n\n\t\t}\n\n\t}\n\n};\n\n\nTHREE.KeyFrameAnimation.prototype.play = function ( startTime ) {\n\n\tthis.currentTime = startTime !== undefined ? startTime : 0;\n\n\tif ( this.isPlaying === false ) {\n\n\t\tthis.isPlaying = true;\n\n\t\t// reset key cache\n\n\t\tvar h, hl = this.hierarchy.length,\n\t\t\tobject,\n\t\t\tnode;\n\n\t\tfor ( h = 0; h < hl; h ++ ) {\n\n\t\t\tobject = this.hierarchy[ h ];\n\t\t\tnode = this.data.hierarchy[ h ];\n\n\t\t\tif ( node.animationCache === undefined ) {\n\n\t\t\t\tnode.animationCache = {};\n\t\t\t\tnode.animationCache.prevKey = null;\n\t\t\t\tnode.animationCache.nextKey = null;\n\t\t\t\tnode.animationCache.originalMatrix = object.matrix;\n\n\t\t\t}\n\n\t\t\tvar keys = this.data.hierarchy[h].keys;\n\n\t\t\tif (keys.length) {\n\n\t\t\t\tnode.animationCache.prevKey = keys[ 0 ];\n\t\t\t\tnode.animationCache.nextKey = keys[ 1 ];\n\n\t\t\t\tthis.startTime = Math.min( keys[0].time, this.startTime );\n\t\t\t\tthis.endTime = Math.max( keys[keys.length - 1].time, this.endTime );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.update( 0 );\n\n\t}\n\n\tthis.isPaused = false;\n\n\tTHREE.AnimationHandler.play( this );\n\n};\n\n\nTHREE.KeyFrameAnimation.prototype.stop = function() {\n\n\tthis.isPlaying = false;\n\tthis.isPaused  = false;\n\n\tTHREE.AnimationHandler.stop( this );\n\n\t// reset JIT matrix and remove cache\n\n\tfor ( var h = 0; h < this.data.hierarchy.length; h ++ ) {\n\t\t\n\t\tvar obj = this.hierarchy[ h ];\n\t\tvar node = this.data.hierarchy[ h ];\n\n\t\tif ( node.animationCache !== undefined ) {\n\n\t\t\tvar original = node.animationCache.originalMatrix;\n\n\t\t\toriginal.copy( obj.matrix );\n\t\t\tobj.matrix = original;\n\n\t\t\tdelete node.animationCache;\n\n\t\t}\n\n\t}\n\n};\n\n\n// Update\n\nTHREE.KeyFrameAnimation.prototype.update = function ( delta ) {\n\n\tif ( this.isPlaying === false ) return;\n\n\tthis.currentTime += delta * this.timeScale;\n\n\t//\n\n\tvar duration = this.data.length;\n\n\tif ( this.loop === true && this.currentTime > duration ) {\n\n\t\tthis.currentTime %= duration;\n\n\t}\n\n\tthis.currentTime = Math.min( this.currentTime, duration );\n\n\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\n\n\t\tvar object = this.hierarchy[ h ];\n\t\tvar node = this.data.hierarchy[ h ];\n\n\t\tvar keys = node.keys,\n\t\t\tanimationCache = node.animationCache;\n\n\n\t\tif ( keys.length ) {\n\n\t\t\tvar prevKey = animationCache.prevKey;\n\t\t\tvar nextKey = animationCache.nextKey;\n\n\t\t\tif ( nextKey.time <= this.currentTime ) {\n\n\t\t\t\twhile ( nextKey.time < this.currentTime && nextKey.index > prevKey.index ) {\n\n\t\t\t\t\tprevKey = nextKey;\n\t\t\t\t\tnextKey = keys[ prevKey.index + 1 ];\n\n\t\t\t\t}\n\n\t\t\t\tanimationCache.prevKey = prevKey;\n\t\t\t\tanimationCache.nextKey = nextKey;\n\n\t\t\t}\n\n\t\t\tif ( nextKey.time >= this.currentTime ) {\n\n\t\t\t\tprevKey.interpolate( nextKey, this.currentTime );\n\n\t\t\t} else {\n\n\t\t\t\tprevKey.interpolate( nextKey, nextKey.time );\n\n\t\t\t}\n\n\t\t\tthis.data.hierarchy[ h ].node.updateMatrix();\n\t\t\tobject.matrixWorldNeedsUpdate = true;\n\n\t\t}\n\n\t}\n\n};\n\n// Get next key with\n\nTHREE.KeyFrameAnimation.prototype.getNextKeyWith = function( sid, h, key ) {\n\n\tvar keys = this.data.hierarchy[ h ].keys;\n\tkey = key % keys.length;\n\n\tfor ( ; key < keys.length; key ++ ) {\n\n\t\tif ( keys[ key ].hasTarget( sid ) ) {\n\n\t\t\treturn keys[ key ];\n\n\t\t}\n\n\t}\n\n\treturn keys[ 0 ];\n\n};\n\n// Get previous key with\n\nTHREE.KeyFrameAnimation.prototype.getPrevKeyWith = function( sid, h, key ) {\n\n\tvar keys = this.data.hierarchy[ h ].keys;\n\tkey = key >= 0 ? key : key + keys.length;\n\n\tfor ( ; key >= 0; key -- ) {\n\n\t\tif ( keys[ key ].hasTarget( sid ) ) {\n\n\t\t\treturn keys[ key ];\n\n\t\t}\n\n\t}\n\n\treturn keys[ keys.length - 1 ];\n\n};\n\n// File:src/extras/animation/MorphAnimation.js\n\n/**\n * @author mrdoob / http://mrdoob.com\n */\n\nTHREE.MorphAnimation = function ( mesh ) {\n\n\tthis.mesh = mesh;\n\tthis.frames = mesh.morphTargetInfluences.length;\n\tthis.currentTime = 0;\n\tthis.duration = 1000;\n\tthis.loop = true;\n\n\tthis.isPlaying = false;\n\n};\n\nTHREE.MorphAnimation.prototype = {\n\n\tplay: function () {\n\n\t\tthis.isPlaying = true;\n\n\t},\n\n\tpause: function () {\n\n\t\tthis.isPlaying = false;\n\n\t},\n\n\tupdate: ( function () {\n\n\t\tvar lastFrame = 0;\n\t\tvar currentFrame = 0;\n\n\t\treturn function ( delta ) {\n\n\t\t\tif ( this.isPlaying === false ) return;\n\n\t\t\tthis.currentTime += delta;\n\n\t\t\tif ( this.loop === true && this.currentTime > this.duration ) {\n\n\t\t\t\tthis.currentTime %= this.duration;\n\n\t\t\t}\n\n\t\t\tthis.currentTime = Math.min( this.currentTime, this.duration );\n\n\t\t\tvar interpolation = this.duration / this.frames;\n\t\t\tvar frame = Math.floor( this.currentTime / interpolation );\n\n\t\t\tif ( frame != currentFrame ) {\n\n\t\t\t\tthis.mesh.morphTargetInfluences[ lastFrame ] = 0;\n\t\t\t\tthis.mesh.morphTargetInfluences[ currentFrame ] = 1;\n\t\t\t\tthis.mesh.morphTargetInfluences[ frame ] = 0;\n\n\t\t\t\tlastFrame = currentFrame;\n\t\t\t\tcurrentFrame = frame;\n\n\t\t\t}\n\n\t\t\tthis.mesh.morphTargetInfluences[ frame ] = ( this.currentTime % interpolation ) / interpolation;\n\t\t\tthis.mesh.morphTargetInfluences[ lastFrame ] = 1 - this.mesh.morphTargetInfluences[ frame ];\n\n\t\t}\n\n\t} )()\n\n};\n\n// File:src/extras/geometries/BoxGeometry.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Cube.as\n */\n\nTHREE.BoxGeometry = function ( width, height, depth, widthSegments, heightSegments, depthSegments ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'BoxGeometry';\n\n\tthis.parameters = {\n\t\twidth: width,\n\t\theight: height,\n\t\tdepth: depth,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments,\n\t\tdepthSegments: depthSegments\n\t};\n\n\tthis.widthSegments = widthSegments || 1;\n\tthis.heightSegments = heightSegments || 1;\n\tthis.depthSegments = depthSegments || 1;\n\n\tvar scope = this;\n\n\tvar width_half = width / 2;\n\tvar height_half = height / 2;\n\tvar depth_half = depth / 2;\n\n\tbuildPlane( 'z', 'y', - 1, - 1, depth, height, width_half, 0 ); // px\n\tbuildPlane( 'z', 'y',   1, - 1, depth, height, - width_half, 1 ); // nx\n\tbuildPlane( 'x', 'z',   1,   1, width, depth, height_half, 2 ); // py\n\tbuildPlane( 'x', 'z',   1, - 1, width, depth, - height_half, 3 ); // ny\n\tbuildPlane( 'x', 'y',   1, - 1, width, height, depth_half, 4 ); // pz\n\tbuildPlane( 'x', 'y', - 1, - 1, width, height, - depth_half, 5 ); // nz\n\n\tfunction buildPlane( u, v, udir, vdir, width, height, depth, materialIndex ) {\n\n\t\tvar w, ix, iy,\n\t\tgridX = scope.widthSegments,\n\t\tgridY = scope.heightSegments,\n\t\twidth_half = width / 2,\n\t\theight_half = height / 2,\n\t\toffset = scope.vertices.length;\n\n\t\tif ( ( u === 'x' && v === 'y' ) || ( u === 'y' && v === 'x' ) ) {\n\n\t\t\tw = 'z';\n\n\t\t} else if ( ( u === 'x' && v === 'z' ) || ( u === 'z' && v === 'x' ) ) {\n\n\t\t\tw = 'y';\n\t\t\tgridY = scope.depthSegments;\n\n\t\t} else if ( ( u === 'z' && v === 'y' ) || ( u === 'y' && v === 'z' ) ) {\n\n\t\t\tw = 'x';\n\t\t\tgridX = scope.depthSegments;\n\n\t\t}\n\n\t\tvar gridX1 = gridX + 1,\n\t\tgridY1 = gridY + 1,\n\t\tsegment_width = width / gridX,\n\t\tsegment_height = height / gridY,\n\t\tnormal = new THREE.Vector3();\n\n\t\tnormal[ w ] = depth > 0 ? 1 : - 1;\n\n\t\tfor ( iy = 0; iy < gridY1; iy ++ ) {\n\n\t\t\tfor ( ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\t\tvar vector = new THREE.Vector3();\n\t\t\t\tvector[ u ] = ( ix * segment_width - width_half ) * udir;\n\t\t\t\tvector[ v ] = ( iy * segment_height - height_half ) * vdir;\n\t\t\t\tvector[ w ] = depth;\n\n\t\t\t\tscope.vertices.push( vector );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( iy = 0; iy < gridY; iy ++ ) {\n\n\t\t\tfor ( ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\t\tvar a = ix + gridX1 * iy;\n\t\t\t\tvar b = ix + gridX1 * ( iy + 1 );\n\t\t\t\tvar c = ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\t\tvar d = ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t\tvar uva = new THREE.Vector2( ix / gridX, 1 - iy / gridY );\n\t\t\t\tvar uvb = new THREE.Vector2( ix / gridX, 1 - ( iy + 1 ) / gridY );\n\t\t\t\tvar uvc = new THREE.Vector2( ( ix + 1 ) / gridX, 1 - ( iy + 1 ) / gridY );\n\t\t\t\tvar uvd = new THREE.Vector2( ( ix + 1 ) / gridX, 1 - iy / gridY );\n\n\t\t\t\tvar face = new THREE.Face3( a + offset, b + offset, d + offset );\n\t\t\t\tface.normal.copy( normal );\n\t\t\t\tface.vertexNormals.push( normal.clone(), normal.clone(), normal.clone() );\n\t\t\t\tface.materialIndex = materialIndex;\n\n\t\t\t\tscope.faces.push( face );\n\t\t\t\tscope.faceVertexUvs[ 0 ].push( [ uva, uvb, uvd ] );\n\n\t\t\t\tface = new THREE.Face3( b + offset, c + offset, d + offset );\n\t\t\t\tface.normal.copy( normal );\n\t\t\t\tface.vertexNormals.push( normal.clone(), normal.clone(), normal.clone() );\n\t\t\t\tface.materialIndex = materialIndex;\n\n\t\t\t\tscope.faces.push( face );\n\t\t\t\tscope.faceVertexUvs[ 0 ].push( [ uvb.clone(), uvc, uvd.clone() ] );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tthis.mergeVertices();\n\n};\n\nTHREE.BoxGeometry.prototype = Object.create( THREE.Geometry.prototype );\n\n// File:src/extras/geometries/CircleGeometry.js\n\n/**\n * @author hughes\n */\n\nTHREE.CircleGeometry = function ( radius, segments, thetaStart, thetaLength ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'CircleGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tsegments: segments,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tradius = radius || 50;\n\tsegments = segments !== undefined ? Math.max( 3, segments ) : 8;\n\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\n\n\tvar i, uvs = [],\n\tcenter = new THREE.Vector3(), centerUV = new THREE.Vector2( 0.5, 0.5 );\n\n\tthis.vertices.push(center);\n\tuvs.push( centerUV );\n\n\tfor ( i = 0; i <= segments; i ++ ) {\n\n\t\tvar vertex = new THREE.Vector3();\n\t\tvar segment = thetaStart + i / segments * thetaLength;\n\n\t\tvertex.x = radius * Math.cos( segment );\n\t\tvertex.y = radius * Math.sin( segment );\n\n\t\tthis.vertices.push( vertex );\n\t\tuvs.push( new THREE.Vector2( ( vertex.x / radius + 1 ) / 2, ( vertex.y / radius + 1 ) / 2 ) );\n\n\t}\n\n\tvar n = new THREE.Vector3( 0, 0, 1 );\n\n\tfor ( i = 1; i <= segments; i ++ ) {\n\n\t\tthis.faces.push( new THREE.Face3( i, i + 1, 0, [ n.clone(), n.clone(), n.clone() ] ) );\n\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ i ].clone(), uvs[ i + 1 ].clone(), centerUV.clone() ] );\n\n\t}\n\n\tthis.computeFaceNormals();\n\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\n\n};\n\nTHREE.CircleGeometry.prototype = Object.create( THREE.Geometry.prototype );\n\n// File:src/extras/geometries/CubeGeometry.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\n\nTHREE.CubeGeometry = function ( width, height, depth, widthSegments, heightSegments, depthSegments ) {\n\n\tconsole.warn( 'THREE.CubeGeometry has been renamed to THREE.BoxGeometry.' );\n\treturn new THREE.BoxGeometry( width, height, depth, widthSegments, heightSegments, depthSegments );\n\n };\n\n// File:src/extras/geometries/CylinderGeometry.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.CylinderGeometry = function ( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'CylinderGeometry';\n\n\tthis.parameters = {\n\t\tradiusTop: radiusTop,\n\t\tradiusBottom: radiusBottom,\n\t\theight: height,\n\t\tradialSegments: radialSegments,\n\t\theightSegments: heightSegments,\n\t\topenEnded: openEnded\n\t};\n\n\tradiusTop = radiusTop !== undefined ? radiusTop : 20;\n\tradiusBottom = radiusBottom !== undefined ? radiusBottom : 20;\n\theight = height !== undefined ? height : 100;\n\n\tradialSegments = radialSegments || 8;\n\theightSegments = heightSegments || 1;\n\n\topenEnded = openEnded !== undefined ? openEnded : false;\n\n\tvar heightHalf = height / 2;\n\n\tvar x, y, vertices = [], uvs = [];\n\n\tfor ( y = 0; y <= heightSegments; y ++ ) {\n\n\t\tvar verticesRow = [];\n\t\tvar uvsRow = [];\n\n\t\tvar v = y / heightSegments;\n\t\tvar radius = v * ( radiusBottom - radiusTop ) + radiusTop;\n\n\t\tfor ( x = 0; x <= radialSegments; x ++ ) {\n\n\t\t\tvar u = x / radialSegments;\n\n\t\t\tvar vertex = new THREE.Vector3();\n\t\t\tvertex.x = radius * Math.sin( u * Math.PI * 2 );\n\t\t\tvertex.y = - v * height + heightHalf;\n\t\t\tvertex.z = radius * Math.cos( u * Math.PI * 2 );\n\n\t\t\tthis.vertices.push( vertex );\n\n\t\t\tverticesRow.push( this.vertices.length - 1 );\n\t\t\tuvsRow.push( new THREE.Vector2( u, 1 - v ) );\n\n\t\t}\n\n\t\tvertices.push( verticesRow );\n\t\tuvs.push( uvsRow );\n\n\t}\n\n\tvar tanTheta = ( radiusBottom - radiusTop ) / height;\n\tvar na, nb;\n\n\tfor ( x = 0; x < radialSegments; x ++ ) {\n\n\t\tif ( radiusTop !== 0 ) {\n\n\t\t\tna = this.vertices[ vertices[ 0 ][ x ] ].clone();\n\t\t\tnb = this.vertices[ vertices[ 0 ][ x + 1 ] ].clone();\n\n\t\t} else {\n\n\t\t\tna = this.vertices[ vertices[ 1 ][ x ] ].clone();\n\t\t\tnb = this.vertices[ vertices[ 1 ][ x + 1 ] ].clone();\n\n\t\t}\n\n\t\tna.setY( Math.sqrt( na.x * na.x + na.z * na.z ) * tanTheta ).normalize();\n\t\tnb.setY( Math.sqrt( nb.x * nb.x + nb.z * nb.z ) * tanTheta ).normalize();\n\n\t\tfor ( y = 0; y < heightSegments; y ++ ) {\n\n\t\t\tvar v1 = vertices[ y ][ x ];\n\t\t\tvar v2 = vertices[ y + 1 ][ x ];\n\t\t\tvar v3 = vertices[ y + 1 ][ x + 1 ];\n\t\t\tvar v4 = vertices[ y ][ x + 1 ];\n\n\t\t\tvar n1 = na.clone();\n\t\t\tvar n2 = na.clone();\n\t\t\tvar n3 = nb.clone();\n\t\t\tvar n4 = nb.clone();\n\n\t\t\tvar uv1 = uvs[ y ][ x ].clone();\n\t\t\tvar uv2 = uvs[ y + 1 ][ x ].clone();\n\t\t\tvar uv3 = uvs[ y + 1 ][ x + 1 ].clone();\n\t\t\tvar uv4 = uvs[ y ][ x + 1 ].clone();\n\n\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v4, [ n1, n2, n4 ] ) );\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv2, uv4 ] );\n\n\t\t\tthis.faces.push( new THREE.Face3( v2, v3, v4, [ n2.clone(), n3, n4.clone() ] ) );\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv2.clone(), uv3, uv4.clone() ] );\n\n\t\t}\n\n\t}\n\n\t// top cap\n\n\tif ( openEnded === false && radiusTop > 0 ) {\n\n\t\tthis.vertices.push( new THREE.Vector3( 0, heightHalf, 0 ) );\n\n\t\tfor ( x = 0; x < radialSegments; x ++ ) {\n\n\t\t\tvar v1 = vertices[ 0 ][ x ];\n\t\t\tvar v2 = vertices[ 0 ][ x + 1 ];\n\t\t\tvar v3 = this.vertices.length - 1;\n\n\t\t\tvar n1 = new THREE.Vector3( 0, 1, 0 );\n\t\t\tvar n2 = new THREE.Vector3( 0, 1, 0 );\n\t\t\tvar n3 = new THREE.Vector3( 0, 1, 0 );\n\n\t\t\tvar uv1 = uvs[ 0 ][ x ].clone();\n\t\t\tvar uv2 = uvs[ 0 ][ x + 1 ].clone();\n\t\t\tvar uv3 = new THREE.Vector2( uv2.x, 0 );\n\n\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n1, n2, n3 ] ) );\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv2, uv3 ] );\n\n\t\t}\n\n\t}\n\n\t// bottom cap\n\n\tif ( openEnded === false && radiusBottom > 0 ) {\n\n\t\tthis.vertices.push( new THREE.Vector3( 0, - heightHalf, 0 ) );\n\n\t\tfor ( x = 0; x < radialSegments; x ++ ) {\n\n\t\t\tvar v1 = vertices[ y ][ x + 1 ];\n\t\t\tvar v2 = vertices[ y ][ x ];\n\t\t\tvar v3 = this.vertices.length - 1;\n\n\t\t\tvar n1 = new THREE.Vector3( 0, - 1, 0 );\n\t\t\tvar n2 = new THREE.Vector3( 0, - 1, 0 );\n\t\t\tvar n3 = new THREE.Vector3( 0, - 1, 0 );\n\n\t\t\tvar uv1 = uvs[ y ][ x + 1 ].clone();\n\t\t\tvar uv2 = uvs[ y ][ x ].clone();\n\t\t\tvar uv3 = new THREE.Vector2( uv2.x, 1 );\n\n\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n1, n2, n3 ] ) );\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv2, uv3 ] );\n\n\t\t}\n\n\t}\n\n\tthis.computeFaceNormals();\n\n}\n\nTHREE.CylinderGeometry.prototype = Object.create( THREE.Geometry.prototype );\n\n// File:src/extras/geometries/ExtrudeGeometry.js\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n *\n * Creates extruded geometry from a path shape.\n *\n * parameters = {\n *\n *  curveSegments: <int>, // number of points on the curves\n *  steps: <int>, // number of points for z-side extrusions / used for subdividing segements of extrude spline too\n *  amount: <int>, // Depth to extrude the shape\n *\n *  bevelEnabled: <bool>, // turn on bevel\n *  bevelThickness: <float>, // how deep into the original shape bevel goes\n *  bevelSize: <float>, // how far from shape outline is bevel\n *  bevelSegments: <int>, // number of bevel layers\n *\n *  extrudePath: <THREE.CurvePath> // 3d spline path to extrude shape along. (creates Frames if .frames aren't defined)\n *  frames: <THREE.TubeGeometry.FrenetFrames> // containing arrays of tangents, normals, binormals\n *\n *  material: <int> // material index for front and back faces\n *  extrudeMaterial: <int> // material index for extrusion and beveled faces\n *  uvGenerator: <Object> // object that provides UV generator functions\n *\n * }\n **/\n\nTHREE.ExtrudeGeometry = function ( shapes, options ) {\n\n\tif ( typeof( shapes ) === \"undefined\" ) {\n\t\tshapes = [];\n\t\treturn;\n\t}\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'ExtrudeGeometry';\n\n\tshapes = shapes instanceof Array ? shapes : [ shapes ];\n\n\tthis.addShapeList( shapes, options );\n\n\tthis.computeFaceNormals();\n\n\t// can't really use automatic vertex normals\n\t// as then front and back sides get smoothed too\n\t// should do separate smoothing just for sides\n\n\t//this.computeVertexNormals();\n\n\t//console.log( \"took\", ( Date.now() - startTime ) );\n\n};\n\nTHREE.ExtrudeGeometry.prototype = Object.create( THREE.Geometry.prototype );\n\nTHREE.ExtrudeGeometry.prototype.addShapeList = function ( shapes, options ) {\n\tvar sl = shapes.length;\n\n\tfor ( var s = 0; s < sl; s ++ ) {\n\t\tvar shape = shapes[ s ];\n\t\tthis.addShape( shape, options );\n\t}\n};\n\nTHREE.ExtrudeGeometry.prototype.addShape = function ( shape, options ) {\n\n\tvar amount = options.amount !== undefined ? options.amount : 100;\n\n\tvar bevelThickness = options.bevelThickness !== undefined ? options.bevelThickness : 6; // 10\n\tvar bevelSize = options.bevelSize !== undefined ? options.bevelSize : bevelThickness - 2; // 8\n\tvar bevelSegments = options.bevelSegments !== undefined ? options.bevelSegments : 3;\n\n\tvar bevelEnabled = options.bevelEnabled !== undefined ? options.bevelEnabled : true; // false\n\n\tvar curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\n\n\tvar steps = options.steps !== undefined ? options.steps : 1;\n\n\tvar extrudePath = options.extrudePath;\n\tvar extrudePts, extrudeByPath = false;\n\n\tvar material = options.material;\n\tvar extrudeMaterial = options.extrudeMaterial;\n\n\t// Use default WorldUVGenerator if no UV generators are specified.\n\tvar uvgen = options.UVGenerator !== undefined ? options.UVGenerator : THREE.ExtrudeGeometry.WorldUVGenerator;\n\n\tvar splineTube, binormal, normal, position2;\n\tif ( extrudePath ) {\n\n\t\textrudePts = extrudePath.getSpacedPoints( steps );\n\n\t\textrudeByPath = true;\n\t\tbevelEnabled = false; // bevels not supported for path extrusion\n\n\t\t// SETUP TNB variables\n\n\t\t// Reuse TNB from TubeGeomtry for now.\n\t\t// TODO1 - have a .isClosed in spline?\n\n\t\tsplineTube = options.frames !== undefined ? options.frames : new THREE.TubeGeometry.FrenetFrames(extrudePath, steps, false);\n\n\t\t// console.log(splineTube, 'splineTube', splineTube.normals.length, 'steps', steps, 'extrudePts', extrudePts.length);\n\n\t\tbinormal = new THREE.Vector3();\n\t\tnormal = new THREE.Vector3();\n\t\tposition2 = new THREE.Vector3();\n\n\t}\n\n\t// Safeguards if bevels are not enabled\n\n\tif ( ! bevelEnabled ) {\n\n\t\tbevelSegments = 0;\n\t\tbevelThickness = 0;\n\t\tbevelSize = 0;\n\n\t}\n\n\t// Variables initalization\n\n\tvar ahole, h, hl; // looping of holes\n\tvar scope = this;\n\tvar bevelPoints = [];\n\n\tvar shapesOffset = this.vertices.length;\n\n\tvar shapePoints = shape.extractPoints( curveSegments );\n\n\tvar vertices = shapePoints.shape;\n\tvar holes = shapePoints.holes;\n\n\tvar reverse = ! THREE.Shape.Utils.isClockWise( vertices ) ;\n\n\tif ( reverse ) {\n\n\t\tvertices = vertices.reverse();\n\n\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe ...\n\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\tahole = holes[ h ];\n\n\t\t\tif ( THREE.Shape.Utils.isClockWise( ahole ) ) {\n\n\t\t\t\tholes[ h ] = ahole.reverse();\n\n\t\t\t}\n\n\t\t}\n\n\t\treverse = false; // If vertices are in order now, we shouldn't need to worry about them again (hopefully)!\n\n\t}\n\n\n\tvar faces = THREE.Shape.Utils.triangulateShape ( vertices, holes );\n\n\t/* Vertices */\n\n\tvar contour = vertices; // vertices has all points but contour has only points of circumference\n\n\tfor ( h = 0, hl = holes.length;  h < hl; h ++ ) {\n\n\t\tahole = holes[ h ];\n\n\t\tvertices = vertices.concat( ahole );\n\n\t}\n\n\n\tfunction scalePt2 ( pt, vec, size ) {\n\n\t\tif ( ! vec ) console.log( \"die\" );\n\n\t\treturn vec.clone().multiplyScalar( size ).add( pt );\n\n\t}\n\n\tvar b, bs, t, z,\n\t\tvert, vlen = vertices.length,\n\t\tface, flen = faces.length,\n\t\tcont, clen = contour.length;\n\n\n\t// Find directions for point movement\n\n\tvar RAD_TO_DEGREES = 180 / Math.PI;\n\n\n\tfunction getBevelVec( inPt, inPrev, inNext ) {\n\n\t\tvar EPSILON = 0.0000000001;\n\t\t\n\t\t// computes for inPt the corresponding point inPt' on a new contour\n\t\t//   shiftet by 1 unit (length of normalized vector) to the left\n\t\t// if we walk along contour clockwise, this new contour is outside the old one\n\t\t//\n\t\t// inPt' is the intersection of the two lines parallel to the two\n\t\t//  adjacent edges of inPt at a distance of 1 unit on the left side.\n\t\t\n\t\tvar v_trans_x, v_trans_y, shrink_by = 1;\t\t// resulting translation vector for inPt\n\n\t\t// good reading for geometry algorithms (here: line-line intersection)\n\t\t// http://geomalgorithms.com/a05-_intersect-1.html\n\n\t\tvar v_prev_x = inPt.x - inPrev.x, v_prev_y = inPt.y - inPrev.y;\n\t\tvar v_next_x = inNext.x - inPt.x, v_next_y = inNext.y - inPt.y;\n\t\t\n\t\tvar v_prev_lensq = ( v_prev_x * v_prev_x + v_prev_y * v_prev_y );\n\t\t\n\t\t// check for colinear edges\n\t\tvar colinear0 = ( v_prev_x * v_next_y - v_prev_y * v_next_x );\n\t\t\n\t\tif ( Math.abs( colinear0 ) > EPSILON ) {\t\t// not colinear\n\t\t\t\n\t\t\t// length of vectors for normalizing\n\t\n\t\t\tvar v_prev_len = Math.sqrt( v_prev_lensq );\n\t\t\tvar v_next_len = Math.sqrt( v_next_x * v_next_x + v_next_y * v_next_y );\n\t\t\t\n\t\t\t// shift adjacent points by unit vectors to the left\n\t\n\t\t\tvar ptPrevShift_x = ( inPrev.x - v_prev_y / v_prev_len );\n\t\t\tvar ptPrevShift_y = ( inPrev.y + v_prev_x / v_prev_len );\n\t\t\t\n\t\t\tvar ptNextShift_x = ( inNext.x - v_next_y / v_next_len );\n\t\t\tvar ptNextShift_y = ( inNext.y + v_next_x / v_next_len );\n\t\n\t\t\t// scaling factor for v_prev to intersection point\n\t\n\t\t\tvar sf = (  ( ptNextShift_x - ptPrevShift_x ) * v_next_y -\n\t\t\t\t\t\t( ptNextShift_y - ptPrevShift_y ) * v_next_x    ) /\n\t\t\t\t\t  ( v_prev_x * v_next_y - v_prev_y * v_next_x );\n\t\n\t\t\t// vector from inPt to intersection point\n\t\n\t\t\tv_trans_x = ( ptPrevShift_x + v_prev_x * sf - inPt.x );\n\t\t\tv_trans_y = ( ptPrevShift_y + v_prev_y * sf - inPt.y );\n\t\n\t\t\t// Don't normalize!, otherwise sharp corners become ugly\n\t\t\t//  but prevent crazy spikes\n\t\t\tvar v_trans_lensq = ( v_trans_x * v_trans_x + v_trans_y * v_trans_y )\n\t\t\tif ( v_trans_lensq <= 2 ) {\n\t\t\t\treturn\tnew THREE.Vector2( v_trans_x, v_trans_y );\n\t\t\t} else {\n\t\t\t\tshrink_by = Math.sqrt( v_trans_lensq / 2 );\n\t\t\t}\n\t\t\t\n\t\t} else {\t\t// handle special case of colinear edges\n\n\t\t\tvar direction_eq = false;\t\t// assumes: opposite\n\t\t\tif ( v_prev_x > EPSILON ) {\n\t\t\t\tif ( v_next_x > EPSILON ) { direction_eq = true; }\n\t\t\t} else {\n\t\t\t\tif ( v_prev_x < - EPSILON ) {\n\t\t\t\t\tif ( v_next_x < - EPSILON ) { direction_eq = true; }\n\t\t\t\t} else {\n\t\t\t\t\tif ( Math.sign(v_prev_y) == Math.sign(v_next_y) ) { direction_eq = true; }\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( direction_eq ) {\n\t\t\t\t// console.log(\"Warning: lines are a straight sequence\");\n\t\t\t\tv_trans_x = - v_prev_y;\n\t\t\t\tv_trans_y =  v_prev_x;\n\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq );\n\t\t\t} else {\n\t\t\t\t// console.log(\"Warning: lines are a straight spike\");\n\t\t\t\tv_trans_x = v_prev_x;\n\t\t\t\tv_trans_y = v_prev_y;\n\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq / 2 );\n\t\t\t}\n\n\t\t}\n\n\t\treturn\tnew THREE.Vector2( v_trans_x / shrink_by, v_trans_y / shrink_by );\n\n\t}\n\n\n\tvar contourMovements = [];\n\n\tfor ( var i = 0, il = contour.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\n\n\t\tif ( j === il ) j = 0;\n\t\tif ( k === il ) k = 0;\n\n\t\t//  (j)---(i)---(k)\n\t\t// console.log('i,j,k', i, j , k)\n\n\t\tvar pt_i = contour[ i ];\n\t\tvar pt_j = contour[ j ];\n\t\tvar pt_k = contour[ k ];\n\n\t\tcontourMovements[ i ]= getBevelVec( contour[ i ], contour[ j ], contour[ k ] );\n\n\t}\n\n\tvar holesMovements = [], oneHoleMovements, verticesMovements = contourMovements.concat();\n\n\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\tahole = holes[ h ];\n\n\t\toneHoleMovements = [];\n\n\t\tfor ( i = 0, il = ahole.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\n\n\t\t\tif ( j === il ) j = 0;\n\t\t\tif ( k === il ) k = 0;\n\n\t\t\t//  (j)---(i)---(k)\n\t\t\toneHoleMovements[ i ]= getBevelVec( ahole[ i ], ahole[ j ], ahole[ k ] );\n\n\t\t}\n\n\t\tholesMovements.push( oneHoleMovements );\n\t\tverticesMovements = verticesMovements.concat( oneHoleMovements );\n\n\t}\n\n\n\t// Loop bevelSegments, 1 for the front, 1 for the back\n\n\tfor ( b = 0; b < bevelSegments; b ++ ) {\n\t//for ( b = bevelSegments; b > 0; b -- ) {\n\n\t\tt = b / bevelSegments;\n\t\tz = bevelThickness * ( 1 - t );\n\n\t\t//z = bevelThickness * t;\n\t\tbs = bevelSize * ( Math.sin ( t * Math.PI/2 ) ) ; // curved\n\t\t//bs = bevelSize * t ; // linear\n\n\t\t// contract shape\n\n\t\tfor ( i = 0, il = contour.length; i < il; i ++ ) {\n\n\t\t\tvert = scalePt2( contour[ i ], contourMovements[ i ], bs );\n\n\t\t\tv( vert.x, vert.y,  - z );\n\n\t\t}\n\n\t\t// expand holes\n\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\tahole = holes[ h ];\n\t\t\toneHoleMovements = holesMovements[ h ];\n\n\t\t\tfor ( i = 0, il = ahole.length; i < il; i ++ ) {\n\n\t\t\t\tvert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\n\n\t\t\t\tv( vert.x, vert.y,  - z );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tbs = bevelSize;\n\n\t// Back facing vertices\n\n\tfor ( i = 0; i < vlen; i ++ ) {\n\n\t\tvert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\n\n\t\tif ( ! extrudeByPath ) {\n\n\t\t\tv( vert.x, vert.y, 0 );\n\n\t\t} else {\n\n\t\t\t// v( vert.x, vert.y + extrudePts[ 0 ].y, extrudePts[ 0 ].x );\n\n\t\t\tnormal.copy( splineTube.normals[0] ).multiplyScalar(vert.x);\n\t\t\tbinormal.copy( splineTube.binormals[0] ).multiplyScalar(vert.y);\n\n\t\t\tposition2.copy( extrudePts[0] ).add(normal).add(binormal);\n\n\t\t\tv( position2.x, position2.y, position2.z );\n\n\t\t}\n\n\t}\n\n\t// Add stepped vertices...\n\t// Including front facing vertices\n\n\tvar s;\n\n\tfor ( s = 1; s <= steps; s ++ ) {\n\n\t\tfor ( i = 0; i < vlen; i ++ ) {\n\n\t\t\tvert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\n\n\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\tv( vert.x, vert.y, amount / steps * s );\n\n\t\t\t} else {\n\n\t\t\t\t// v( vert.x, vert.y + extrudePts[ s - 1 ].y, extrudePts[ s - 1 ].x );\n\n\t\t\t\tnormal.copy( splineTube.normals[s] ).multiplyScalar( vert.x );\n\t\t\t\tbinormal.copy( splineTube.binormals[s] ).multiplyScalar( vert.y );\n\n\t\t\t\tposition2.copy( extrudePts[s] ).add( normal ).add( binormal );\n\n\t\t\t\tv( position2.x, position2.y, position2.z );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\n\t// Add bevel segments planes\n\n\t//for ( b = 1; b <= bevelSegments; b ++ ) {\n\tfor ( b = bevelSegments - 1; b >= 0; b -- ) {\n\n\t\tt = b / bevelSegments;\n\t\tz = bevelThickness * ( 1 - t );\n\t\t//bs = bevelSize * ( 1-Math.sin ( ( 1 - t ) * Math.PI/2 ) );\n\t\tbs = bevelSize * Math.sin ( t * Math.PI/2 ) ;\n\n\t\t// contract shape\n\n\t\tfor ( i = 0, il = contour.length; i < il; i ++ ) {\n\n\t\t\tvert = scalePt2( contour[ i ], contourMovements[ i ], bs );\n\t\t\tv( vert.x, vert.y,  amount + z );\n\n\t\t}\n\n\t\t// expand holes\n\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\tahole = holes[ h ];\n\t\t\toneHoleMovements = holesMovements[ h ];\n\n\t\t\tfor ( i = 0, il = ahole.length; i < il; i ++ ) {\n\n\t\t\t\tvert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\n\n\t\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\t\tv( vert.x, vert.y,  amount + z );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tv( vert.x, vert.y + extrudePts[ steps - 1 ].y, extrudePts[ steps - 1 ].x + z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/* Faces */\n\n\t// Top and bottom faces\n\n\tbuildLidFaces();\n\n\t// Sides faces\n\n\tbuildSideFaces();\n\n\n\t/////  Internal functions\n\n\tfunction buildLidFaces() {\n\n\t\tif ( bevelEnabled ) {\n\n\t\t\tvar layer = 0 ; // steps + 1\n\t\t\tvar offset = vlen * layer;\n\n\t\t\t// Bottom faces\n\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\t\t\tface = faces[ i ];\n\t\t\t\tf3( face[ 2 ]+ offset, face[ 1 ]+ offset, face[ 0 ] + offset );\n\n\t\t\t}\n\n\t\t\tlayer = steps + bevelSegments * 2;\n\t\t\toffset = vlen * layer;\n\n\t\t\t// Top faces\n\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\t\t\tface = faces[ i ];\n\t\t\t\tf3( face[ 0 ] + offset, face[ 1 ] + offset, face[ 2 ] + offset );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// Bottom faces\n\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\t\t\tface = faces[ i ];\n\t\t\t\tf3( face[ 2 ], face[ 1 ], face[ 0 ] );\n\n\t\t\t}\n\n\t\t\t// Top faces\n\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\t\t\tface = faces[ i ];\n\t\t\t\tf3( face[ 0 ] + vlen * steps, face[ 1 ] + vlen * steps, face[ 2 ] + vlen * steps );\n\n\t\t\t}\n\t\t}\n\n\t}\n\n\t// Create faces for the z-sides of the shape\n\n\tfunction buildSideFaces() {\n\n\t\tvar layeroffset = 0;\n\t\tsidewalls( contour, layeroffset );\n\t\tlayeroffset += contour.length;\n\n\t\tfor ( h = 0, hl = holes.length;  h < hl; h ++ ) {\n\n\t\t\tahole = holes[ h ];\n\t\t\tsidewalls( ahole, layeroffset );\n\n\t\t\t//, true\n\t\t\tlayeroffset += ahole.length;\n\n\t\t}\n\n\t}\n\n\tfunction sidewalls( contour, layeroffset ) {\n\n\t\tvar j, k;\n\t\ti = contour.length;\n\n\t\twhile ( --i >= 0 ) {\n\n\t\t\tj = i;\n\t\t\tk = i - 1;\n\t\t\tif ( k < 0 ) k = contour.length - 1;\n\n\t\t\t//console.log('b', i,j, i-1, k,vertices.length);\n\n\t\t\tvar s = 0, sl = steps  + bevelSegments * 2;\n\n\t\t\tfor ( s = 0; s < sl; s ++ ) {\n\n\t\t\t\tvar slen1 = vlen * s;\n\t\t\t\tvar slen2 = vlen * ( s + 1 );\n\n\t\t\t\tvar a = layeroffset + j + slen1,\n\t\t\t\t\tb = layeroffset + k + slen1,\n\t\t\t\t\tc = layeroffset + k + slen2,\n\t\t\t\t\td = layeroffset + j + slen2;\n\n\t\t\t\tf4( a, b, c, d, contour, s, sl, j, k );\n\n\t\t\t}\n\t\t}\n\n\t}\n\n\n\tfunction v( x, y, z ) {\n\n\t\tscope.vertices.push( new THREE.Vector3( x, y, z ) );\n\n\t}\n\n\tfunction f3( a, b, c ) {\n\n\t\ta += shapesOffset;\n\t\tb += shapesOffset;\n\t\tc += shapesOffset;\n\n\t\t// normal, color, material\n\t\tscope.faces.push( new THREE.Face3( a, b, c, null, null, material ) );\n\n\t\tvar uvs = uvgen.generateTopUV( scope, a, b, c );\n\n \t\tscope.faceVertexUvs[ 0 ].push( uvs );\n\n\t}\n\n\tfunction f4( a, b, c, d, wallContour, stepIndex, stepsLength, contourIndex1, contourIndex2 ) {\n\n\t\ta += shapesOffset;\n\t\tb += shapesOffset;\n\t\tc += shapesOffset;\n\t\td += shapesOffset;\n\n \t\tscope.faces.push( new THREE.Face3( a, b, d, null, null, extrudeMaterial ) );\n \t\tscope.faces.push( new THREE.Face3( b, c, d, null, null, extrudeMaterial ) );\n\n \t\tvar uvs = uvgen.generateSideWallUV( scope, a, b, c, d );\n\n \t\tscope.faceVertexUvs[ 0 ].push( [ uvs[ 0 ], uvs[ 1 ], uvs[ 3 ] ] );\n \t\tscope.faceVertexUvs[ 0 ].push( [ uvs[ 1 ], uvs[ 2 ], uvs[ 3 ] ] );\n\n\t}\n\n};\n\nTHREE.ExtrudeGeometry.WorldUVGenerator = {\n\n\tgenerateTopUV: function ( geometry, indexA, indexB, indexC ) {\n\n\t\tvar vertices = geometry.vertices;\n\n\t\tvar a = vertices[ indexA ];\n\t\tvar b = vertices[ indexB ];\n\t\tvar c = vertices[ indexC ];\n\n\t\treturn [\n\t\t\tnew THREE.Vector2( a.x, a.y ),\n\t\t\tnew THREE.Vector2( b.x, b.y ),\n\t\t\tnew THREE.Vector2( c.x, c.y )\n\t\t];\n\n\t},\n\n\tgenerateSideWallUV: function ( geometry, indexA, indexB, indexC, indexD ) {\n\n\t\tvar vertices = geometry.vertices;\n\n\t\tvar a = vertices[ indexA ];\n\t\tvar b = vertices[ indexB ];\n\t\tvar c = vertices[ indexC ];\n\t\tvar d = vertices[ indexD ];\n\n\t\tif ( Math.abs( a.y - b.y ) < 0.01 ) {\n\t\t\treturn [\n\t\t\t\tnew THREE.Vector2( a.x, 1 - a.z ),\n\t\t\t\tnew THREE.Vector2( b.x, 1 - b.z ),\n\t\t\t\tnew THREE.Vector2( c.x, 1 - c.z ),\n\t\t\t\tnew THREE.Vector2( d.x, 1 - d.z )\n\t\t\t];\n\t\t} else {\n\t\t\treturn [\n\t\t\t\tnew THREE.Vector2( a.y, 1 - a.z ),\n\t\t\t\tnew THREE.Vector2( b.y, 1 - b.z ),\n\t\t\t\tnew THREE.Vector2( c.y, 1 - c.z ),\n\t\t\t\tnew THREE.Vector2( d.y, 1 - d.z )\n\t\t\t];\n\t\t}\n\t}\n};\n\n// File:src/extras/geometries/ShapeGeometry.js\n\n/**\n * @author jonobr1 / http://jonobr1.com\n *\n * Creates a one-sided polygonal geometry from a path shape. Similar to\n * ExtrudeGeometry.\n *\n * parameters = {\n *\n *\tcurveSegments: <int>, // number of points on the curves. NOT USED AT THE MOMENT.\n *\n *\tmaterial: <int> // material index for front and back faces\n *\tuvGenerator: <Object> // object that provides UV generator functions\n *\n * }\n **/\n\nTHREE.ShapeGeometry = function ( shapes, options ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'ShapeGeometry';\n\n\tif ( shapes instanceof Array === false ) shapes = [ shapes ];\n\n\tthis.addShapeList( shapes, options );\n\n\tthis.computeFaceNormals();\n\n};\n\nTHREE.ShapeGeometry.prototype = Object.create( THREE.Geometry.prototype );\n\n/**\n * Add an array of shapes to THREE.ShapeGeometry.\n */\nTHREE.ShapeGeometry.prototype.addShapeList = function ( shapes, options ) {\n\n\tfor ( var i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\tthis.addShape( shapes[ i ], options );\n\n\t}\n\n\treturn this;\n\n};\n\n/**\n * Adds a shape to THREE.ShapeGeometry, based on THREE.ExtrudeGeometry.\n */\nTHREE.ShapeGeometry.prototype.addShape = function ( shape, options ) {\n\n\tif ( options === undefined ) options = {};\n\tvar curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\n\n\tvar material = options.material;\n\tvar uvgen = options.UVGenerator === undefined ? THREE.ExtrudeGeometry.WorldUVGenerator : options.UVGenerator;\n\n\t//\n\n\tvar i, l, hole, s;\n\n\tvar shapesOffset = this.vertices.length;\n\tvar shapePoints = shape.extractPoints( curveSegments );\n\n\tvar vertices = shapePoints.shape;\n\tvar holes = shapePoints.holes;\n\n\tvar reverse = ! THREE.Shape.Utils.isClockWise( vertices );\n\n\tif ( reverse ) {\n\n\t\tvertices = vertices.reverse();\n\n\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe...\n\n\t\tfor ( i = 0, l = holes.length; i < l; i ++ ) {\n\n\t\t\thole = holes[ i ];\n\n\t\t\tif ( THREE.Shape.Utils.isClockWise( hole ) ) {\n\n\t\t\t\tholes[ i ] = hole.reverse();\n\n\t\t\t}\n\n\t\t}\n\n\t\treverse = false;\n\n\t}\n\n\tvar faces = THREE.Shape.Utils.triangulateShape( vertices, holes );\n\n\t// Vertices\n\n\tvar contour = vertices;\n\n\tfor ( i = 0, l = holes.length; i < l; i ++ ) {\n\n\t\thole = holes[ i ];\n\t\tvertices = vertices.concat( hole );\n\n\t}\n\n\t//\n\n\tvar vert, vlen = vertices.length;\n\tvar face, flen = faces.length;\n\tvar cont, clen = contour.length;\n\n\tfor ( i = 0; i < vlen; i ++ ) {\n\n\t\tvert = vertices[ i ];\n\n\t\tthis.vertices.push( new THREE.Vector3( vert.x, vert.y, 0 ) );\n\n\t}\n\n\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\tface = faces[ i ];\n\n\t\tvar a = face[ 0 ] + shapesOffset;\n\t\tvar b = face[ 1 ] + shapesOffset;\n\t\tvar c = face[ 2 ] + shapesOffset;\n\n\t\tthis.faces.push( new THREE.Face3( a, b, c, null, null, material ) );\n\t\tthis.faceVertexUvs[ 0 ].push( uvgen.generateTopUV( this, a, b, c ) );\n\n\t}\n\n};\n\n// File:src/extras/geometries/LatheGeometry.js\n\n/**\n * @author astrodud / http://astrodud.isgreat.org/\n * @author zz85 / https://github.com/zz85\n * @author bhouston / http://exocortex.com\n */\n\n// points - to create a closed torus, one must use a set of points \n//    like so: [ a, b, c, d, a ], see first is the same as last.\n// segments - the number of circumference segments to create\n// phiStart - the starting radian\n// phiLength - the radian (0 to 2*PI) range of the lathed section\n//    2*pi is a closed lathe, less than 2PI is a portion.\n\nTHREE.LatheGeometry = function ( points, segments, phiStart, phiLength ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'LatheGeometry';\n\n\tthis.parameters = {\n\t\tpoints: points,\n\t\tsegments: segments,\n\t\tphiStart: phiStart,\n\t\tphiLength: phiLength\n\t};\n\n\tsegments = segments || 12;\n\tphiStart = phiStart || 0;\n\tphiLength = phiLength || 2 * Math.PI;\n\n\tvar inversePointLength = 1.0 / ( points.length - 1 );\n\tvar inverseSegments = 1.0 / segments;\n\n\tfor ( var i = 0, il = segments; i <= il; i ++ ) {\n\n\t\tvar phi = phiStart + i * inverseSegments * phiLength;\n\n\t\tvar c = Math.cos( phi ),\n\t\t\ts = Math.sin( phi );\n\n\t\tfor ( var j = 0, jl = points.length; j < jl; j ++ ) {\n\n\t\t\tvar pt = points[ j ];\n\n\t\t\tvar vertex = new THREE.Vector3();\n\n\t\t\tvertex.x = c * pt.x - s * pt.y;\n\t\t\tvertex.y = s * pt.x + c * pt.y;\n\t\t\tvertex.z = pt.z;\n\n\t\t\tthis.vertices.push( vertex );\n\n\t\t}\n\n\t}\n\n\tvar np = points.length;\n\n\tfor ( var i = 0, il = segments; i < il; i ++ ) {\n\n\t\tfor ( var j = 0, jl = points.length - 1; j < jl; j ++ ) {\n\n\t\t\tvar base = j + np * i;\n\t\t\tvar a = base;\n\t\t\tvar b = base + np;\n\t\t\tvar c = base + 1 + np;\n\t\t\tvar d = base + 1;\n\n\t\t\tvar u0 = i * inverseSegments;\n\t\t\tvar v0 = j * inversePointLength;\n\t\t\tvar u1 = u0 + inverseSegments;\n\t\t\tvar v1 = v0 + inversePointLength;\n\n\t\t\tthis.faces.push( new THREE.Face3( a, b, d ) );\n\n\t\t\tthis.faceVertexUvs[ 0 ].push( [\n\n\t\t\t\tnew THREE.Vector2( u0, v0 ),\n\t\t\t\tnew THREE.Vector2( u1, v0 ),\n\t\t\t\tnew THREE.Vector2( u0, v1 )\n\n\t\t\t] );\n\n\t\t\tthis.faces.push( new THREE.Face3( b, c, d ) );\n\n\t\t\tthis.faceVertexUvs[ 0 ].push( [\n\n\t\t\t\tnew THREE.Vector2( u1, v0 ),\n\t\t\t\tnew THREE.Vector2( u1, v1 ),\n\t\t\t\tnew THREE.Vector2( u0, v1 )\n\n\t\t\t] );\n\n\n\t\t}\n\n\t}\n\n\tthis.mergeVertices();\n\tthis.computeFaceNormals();\n\tthis.computeVertexNormals();\n\n};\n\nTHREE.LatheGeometry.prototype = Object.create( THREE.Geometry.prototype );\n\n// File:src/extras/geometries/PlaneGeometry.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Plane.as\n */\n\nTHREE.PlaneGeometry = function ( width, height, widthSegments, heightSegments ) {\n\n\tconsole.info( 'THREE.PlaneGeometry: Consider using THREE.PlaneBufferGeometry for lower memory footprint.' );\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'PlaneGeometry';\n\n\tthis.parameters = {\n\t\twidth: width,\n\t\theight: height,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments\n\t};\n\n\tthis.fromBufferGeometry( new THREE.PlaneBufferGeometry( width, height, widthSegments, heightSegments ) );\n\n};\n\nTHREE.PlaneGeometry.prototype = Object.create( THREE.Geometry.prototype );\n\n// File:src/extras/geometries/PlaneBufferGeometry.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Plane.as\n */\n\nTHREE.PlaneBufferGeometry = function ( width, height, widthSegments, heightSegments ) {\n\n\tTHREE.BufferGeometry.call( this );\n\n\tthis.type = 'PlaneBufferGeometry';\n\n\tthis.parameters = {\n\t\twidth: width,\n\t\theight: height,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments\n\t};\n\n\tvar width_half = width / 2;\n\tvar height_half = height / 2;\n\n\tvar gridX = widthSegments || 1;\n\tvar gridY = heightSegments || 1;\n\n\tvar gridX1 = gridX + 1;\n\tvar gridY1 = gridY + 1;\n\n\tvar segment_width = width / gridX;\n\tvar segment_height = height / gridY;\n\n\tvar vertices = new Float32Array( gridX1 * gridY1 * 3 );\n\tvar normals = new Float32Array( gridX1 * gridY1 * 3 );\n\tvar uvs = new Float32Array( gridX1 * gridY1 * 2 );\n\n\tvar offset = 0;\n\tvar offset2 = 0;\n\n\tfor ( var iy = 0; iy < gridY1; iy ++ ) {\n\n\t\tvar y = iy * segment_height - height_half;\n\n\t\tfor ( var ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\tvar x = ix * segment_width - width_half;\n\n\t\t\tvertices[ offset     ] = x;\n\t\t\tvertices[ offset + 1 ] = - y;\n\n\t\t\tnormals[ offset + 2 ] = 1;\n\n\t\t\tuvs[ offset2     ] = ix / gridX;\n\t\t\tuvs[ offset2 + 1 ] = 1 - ( iy / gridY );\n\n\t\t\toffset += 3;\n\t\t\toffset2 += 2;\n\n\t\t}\n\n\t}\n\n\toffset = 0;\n\n\tvar indices = new ( ( vertices.length / 3 ) > 65535 ? Uint32Array : Uint16Array )( gridX * gridY * 6 );\n\n\tfor ( var iy = 0; iy < gridY; iy ++ ) {\n\n\t\tfor ( var ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\tvar a = ix + gridX1 * iy;\n\t\t\tvar b = ix + gridX1 * ( iy + 1 );\n\t\t\tvar c = ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\tvar d = ( ix + 1 ) + gridX1 * iy;\n\n\t\t\tindices[ offset     ] = a;\n\t\t\tindices[ offset + 1 ] = b;\n\t\t\tindices[ offset + 2 ] = d;\n\n\t\t\tindices[ offset + 3 ] = b;\n\t\t\tindices[ offset + 4 ] = c;\n\t\t\tindices[ offset + 5 ] = d;\n\n\t\t\toffset += 6;\n\n\t\t}\n\n\t}\n\n\tthis.addAttribute( 'index', new THREE.BufferAttribute( indices, 1 ) );\n\tthis.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\n\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ) );\n\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\n\n};\n\nTHREE.PlaneBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\n\n// File:src/extras/geometries/RingGeometry.js\n\n/**\n * @author Kaleb Murphy\n */\n\nTHREE.RingGeometry = function ( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'RingGeometry';\n\n\tthis.parameters = {\n\t\tinnerRadius: innerRadius,\n\t\touterRadius: outerRadius,\n\t\tthetaSegments: thetaSegments,\n\t\tphiSegments: phiSegments,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tinnerRadius = innerRadius || 0;\n\touterRadius = outerRadius || 50;\n\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\n\n\tthetaSegments = thetaSegments !== undefined ? Math.max( 3, thetaSegments ) : 8;\n\tphiSegments = phiSegments !== undefined ? Math.max( 1, phiSegments ) : 8;\n\n\tvar i, o, uvs = [], radius = innerRadius, radiusStep = ( ( outerRadius - innerRadius ) / phiSegments );\n\n\tfor ( i = 0; i < phiSegments + 1; i ++ ) { // concentric circles inside ring\n\n\t\tfor ( o = 0; o < thetaSegments + 1; o ++ ) { // number of segments per circle\n\n\t\t\tvar vertex = new THREE.Vector3();\n\t\t\tvar segment = thetaStart + o / thetaSegments * thetaLength;\n\t\t\tvertex.x = radius * Math.cos( segment );\n\t\t\tvertex.y = radius * Math.sin( segment );\n\n\t\t\tthis.vertices.push( vertex );\n\t\t\tuvs.push( new THREE.Vector2( ( vertex.x / outerRadius + 1 ) / 2, ( vertex.y / outerRadius + 1 ) / 2 ) );\n\t\t}\n\n\t\tradius += radiusStep;\n\n\t}\n\n\tvar n = new THREE.Vector3( 0, 0, 1 );\n\n\tfor ( i = 0; i < phiSegments; i ++ ) { // concentric circles inside ring\n\n\t\tvar thetaSegment = i * (thetaSegments + 1);\n\n\t\tfor ( o = 0; o < thetaSegments ; o ++ ) { // number of segments per circle\n\n\t\t\tvar segment = o + thetaSegment;\n\n\t\t\tvar v1 = segment;\n\t\t\tvar v2 = segment + thetaSegments + 1;\n\t\t\tvar v3 = segment + thetaSegments + 2;\n\n\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n.clone(), n.clone(), n.clone() ] ) );\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ v1 ].clone(), uvs[ v2 ].clone(), uvs[ v3 ].clone() ]);\n\n\t\t\tv1 = segment;\n\t\t\tv2 = segment + thetaSegments + 2;\n\t\t\tv3 = segment + 1;\n\n\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n.clone(), n.clone(), n.clone() ] ) );\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ v1 ].clone(), uvs[ v2 ].clone(), uvs[ v3 ].clone() ]);\n\n\t\t}\n\t}\n\n\tthis.computeFaceNormals();\n\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\n\n};\n\nTHREE.RingGeometry.prototype = Object.create( THREE.Geometry.prototype );\n\n\n// File:src/extras/geometries/SphereGeometry.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.SphereGeometry = function ( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'SphereGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments,\n\t\tphiStart: phiStart,\n\t\tphiLength: phiLength,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength \n\t};\n\n\tradius = radius || 50;\n\n\twidthSegments = Math.max( 3, Math.floor( widthSegments ) || 8 );\n\theightSegments = Math.max( 2, Math.floor( heightSegments ) || 6 );\n\n\tphiStart = phiStart !== undefined ? phiStart : 0;\n\tphiLength = phiLength !== undefined ? phiLength : Math.PI * 2;\n\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI;\n\n\tvar x, y, vertices = [], uvs = [];\n\n\tfor ( y = 0; y <= heightSegments; y ++ ) {\n\n\t\tvar verticesRow = [];\n\t\tvar uvsRow = [];\n\n\t\tfor ( x = 0; x <= widthSegments; x ++ ) {\n\n\t\t\tvar u = x / widthSegments;\n\t\t\tvar v = y / heightSegments;\n\n\t\t\tvar vertex = new THREE.Vector3();\n\t\t\tvertex.x = - radius * Math.cos( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\n\t\t\tvertex.y = radius * Math.cos( thetaStart + v * thetaLength );\n\t\t\tvertex.z = radius * Math.sin( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\n\n\t\t\tthis.vertices.push( vertex );\n\n\t\t\tverticesRow.push( this.vertices.length - 1 );\n\t\t\tuvsRow.push( new THREE.Vector2( u, 1 - v ) );\n\n\t\t}\n\n\t\tvertices.push( verticesRow );\n\t\tuvs.push( uvsRow );\n\n\t}\n\n\tfor ( y = 0; y < heightSegments; y ++ ) {\n\n\t\tfor ( x = 0; x < widthSegments; x ++ ) {\n\n\t\t\tvar v1 = vertices[ y ][ x + 1 ];\n\t\t\tvar v2 = vertices[ y ][ x ];\n\t\t\tvar v3 = vertices[ y + 1 ][ x ];\n\t\t\tvar v4 = vertices[ y + 1 ][ x + 1 ];\n\n\t\t\tvar n1 = this.vertices[ v1 ].clone().normalize();\n\t\t\tvar n2 = this.vertices[ v2 ].clone().normalize();\n\t\t\tvar n3 = this.vertices[ v3 ].clone().normalize();\n\t\t\tvar n4 = this.vertices[ v4 ].clone().normalize();\n\n\t\t\tvar uv1 = uvs[ y ][ x + 1 ].clone();\n\t\t\tvar uv2 = uvs[ y ][ x ].clone();\n\t\t\tvar uv3 = uvs[ y + 1 ][ x ].clone();\n\t\t\tvar uv4 = uvs[ y + 1 ][ x + 1 ].clone();\n\n\t\t\tif ( Math.abs( this.vertices[ v1 ].y ) === radius ) {\n\n\t\t\t\tuv1.x = ( uv1.x + uv2.x ) / 2;\n\t\t\t\tthis.faces.push( new THREE.Face3( v1, v3, v4, [ n1, n3, n4 ] ) );\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv3, uv4 ] );\n\n\t\t\t} else if ( Math.abs( this.vertices[ v3 ].y ) === radius ) {\n\n\t\t\t\tuv3.x = ( uv3.x + uv4.x ) / 2;\n\t\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n1, n2, n3 ] ) );\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv2, uv3 ] );\n\n\t\t\t} else {\n\n\t\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v4, [ n1, n2, n4 ] ) );\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv2, uv4 ] );\n\n\t\t\t\tthis.faces.push( new THREE.Face3( v2, v3, v4, [ n2.clone(), n3, n4.clone() ] ) );\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv2.clone(), uv3, uv4.clone() ] );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tthis.computeFaceNormals();\n\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\n\n};\n\nTHREE.SphereGeometry.prototype = Object.create( THREE.Geometry.prototype );\n\n// File:src/extras/geometries/TextGeometry.js\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author alteredq / http://alteredqualia.com/\n *\n * For creating 3D text geometry in three.js\n *\n * Text = 3D Text\n *\n * parameters = {\n *  size: \t\t\t<float>, \t// size of the text\n *  height: \t\t<float>, \t// thickness to extrude text\n *  curveSegments: \t<int>,\t\t// number of points on the curves\n *\n *  font: \t\t\t<string>,\t\t// font name\n *  weight: \t\t<string>,\t\t// font weight (normal, bold)\n *  style: \t\t\t<string>,\t\t// font style  (normal, italics)\n *\n *  bevelEnabled:\t<bool>,\t\t\t// turn on bevel\n *  bevelThickness: <float>, \t\t// how deep into text bevel goes\n *  bevelSize:\t\t<float>, \t\t// how far from text outline is bevel\n *  }\n *\n */\n\n/*\tUsage Examples\n\n\t// TextGeometry wrapper\n\n\tvar text3d = new TextGeometry( text, options );\n\n\t// Complete manner\n\n\tvar textShapes = THREE.FontUtils.generateShapes( text, options );\n\tvar text3d = new ExtrudeGeometry( textShapes, options );\n\n*/\n\n\nTHREE.TextGeometry = function ( text, parameters ) {\n\n\tparameters = parameters || {};\n\n\tvar textShapes = THREE.FontUtils.generateShapes( text, parameters );\n\n\t// translate parameters to ExtrudeGeometry API\n\n\tparameters.amount = parameters.height !== undefined ? parameters.height : 50;\n\n\t// defaults\n\n\tif ( parameters.bevelThickness === undefined ) parameters.bevelThickness = 10;\n\tif ( parameters.bevelSize === undefined ) parameters.bevelSize = 8;\n\tif ( parameters.bevelEnabled === undefined ) parameters.bevelEnabled = false;\n\n\tTHREE.ExtrudeGeometry.call( this, textShapes, parameters );\n\n\tthis.type = 'TextGeometry';\n\n};\n\nTHREE.TextGeometry.prototype = Object.create( THREE.ExtrudeGeometry.prototype );\n\n// File:src/extras/geometries/TorusGeometry.js\n\n/**\n * @author oosmoxiecode\n * @author mrdoob / http://mrdoob.com/\n * based on http://code.google.com/p/away3d/source/browse/trunk/fp10/Away3DLite/src/away3dlite/primitives/Torus.as?r=2888\n */\n\nTHREE.TorusGeometry = function ( radius, tube, radialSegments, tubularSegments, arc ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'TorusGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\ttube: tube,\n\t\tradialSegments: radialSegments,\n\t\ttubularSegments: tubularSegments,\n\t\tarc: arc\n\t};\n\n\tradius = radius || 100;\n\ttube = tube || 40;\n\tradialSegments = radialSegments || 8;\n\ttubularSegments = tubularSegments || 6;\n\tarc = arc || Math.PI * 2;\n\n\tvar center = new THREE.Vector3(), uvs = [], normals = [];\n\n\tfor ( var j = 0; j <= radialSegments; j ++ ) {\n\n\t\tfor ( var i = 0; i <= tubularSegments; i ++ ) {\n\n\t\t\tvar u = i / tubularSegments * arc;\n\t\t\tvar v = j / radialSegments * Math.PI * 2;\n\n\t\t\tcenter.x = radius * Math.cos( u );\n\t\t\tcenter.y = radius * Math.sin( u );\n\n\t\t\tvar vertex = new THREE.Vector3();\n\t\t\tvertex.x = ( radius + tube * Math.cos( v ) ) * Math.cos( u );\n\t\t\tvertex.y = ( radius + tube * Math.cos( v ) ) * Math.sin( u );\n\t\t\tvertex.z = tube * Math.sin( v );\n\n\t\t\tthis.vertices.push( vertex );\n\n\t\t\tuvs.push( new THREE.Vector2( i / tubularSegments, j / radialSegments ) );\n\t\t\tnormals.push( vertex.clone().sub( center ).normalize() );\n\n\t\t}\n\n\t}\n\n\tfor ( var j = 1; j <= radialSegments; j ++ ) {\n\n\t\tfor ( var i = 1; i <= tubularSegments; i ++ ) {\n\n\t\t\tvar a = ( tubularSegments + 1 ) * j + i - 1;\n\t\t\tvar b = ( tubularSegments + 1 ) * ( j - 1 ) + i - 1;\n\t\t\tvar c = ( tubularSegments + 1 ) * ( j - 1 ) + i;\n\t\t\tvar d = ( tubularSegments + 1 ) * j + i;\n\n\t\t\tvar face = new THREE.Face3( a, b, d, [ normals[ a ].clone(), normals[ b ].clone(), normals[ d ].clone() ] );\n\t\t\tthis.faces.push( face );\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ a ].clone(), uvs[ b ].clone(), uvs[ d ].clone() ] );\n\n\t\t\tface = new THREE.Face3( b, c, d, [ normals[ b ].clone(), normals[ c ].clone(), normals[ d ].clone() ] );\n\t\t\tthis.faces.push( face );\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ b ].clone(), uvs[ c ].clone(), uvs[ d ].clone() ] );\n\n\t\t}\n\n\t}\n\n\tthis.computeFaceNormals();\n\n};\n\nTHREE.TorusGeometry.prototype = Object.create( THREE.Geometry.prototype );\n\n// File:src/extras/geometries/TorusKnotGeometry.js\n\n/**\n * @author oosmoxiecode\n * based on http://code.google.com/p/away3d/source/browse/trunk/fp10/Away3D/src/away3d/primitives/TorusKnot.as?spec=svn2473&r=2473\n */\n\nTHREE.TorusKnotGeometry = function ( radius, tube, radialSegments, tubularSegments, p, q, heightScale ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'TorusKnotGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\ttube: tube,\n\t\tradialSegments: radialSegments,\n\t\ttubularSegments: tubularSegments,\n\t\tp: p,\n\t\tq: q,\n\t\theightScale: heightScale\n\t};\n\n\tradius = radius || 100;\n\ttube = tube || 40;\n\tradialSegments = radialSegments || 64;\n\ttubularSegments = tubularSegments || 8;\n\tp = p || 2;\n\tq = q || 3;\n\theightScale = heightScale || 1;\n\t\n\tvar grid = new Array( radialSegments );\n\tvar tang = new THREE.Vector3();\n\tvar n = new THREE.Vector3();\n\tvar bitan = new THREE.Vector3();\n\n\tfor ( var i = 0; i < radialSegments; ++ i ) {\n\n\t\tgrid[ i ] = new Array( tubularSegments );\n\t\tvar u = i / radialSegments * 2 * p * Math.PI;\n\t\tvar p1 = getPos( u, q, p, radius, heightScale );\n\t\tvar p2 = getPos( u + 0.01, q, p, radius, heightScale );\n\t\ttang.subVectors( p2, p1 );\n\t\tn.addVectors( p2, p1 );\n\n\t\tbitan.crossVectors( tang, n );\n\t\tn.crossVectors( bitan, tang );\n\t\tbitan.normalize();\n\t\tn.normalize();\n\n\t\tfor ( var j = 0; j < tubularSegments; ++ j ) {\n\n\t\t\tvar v = j / tubularSegments * 2 * Math.PI;\n\t\t\tvar cx = - tube * Math.cos( v ); // TODO: Hack: Negating it so it faces outside.\n\t\t\tvar cy = tube * Math.sin( v );\n\n\t\t\tvar pos = new THREE.Vector3();\n\t\t\tpos.x = p1.x + cx * n.x + cy * bitan.x;\n\t\t\tpos.y = p1.y + cx * n.y + cy * bitan.y;\n\t\t\tpos.z = p1.z + cx * n.z + cy * bitan.z;\n\n\t\t\tgrid[ i ][ j ] = this.vertices.push( pos ) - 1;\n\n\t\t}\n\n\t}\n\n\tfor ( var i = 0; i < radialSegments; ++ i ) {\n\n\t\tfor ( var j = 0; j < tubularSegments; ++ j ) {\n\n\t\t\tvar ip = ( i + 1 ) % radialSegments;\n\t\t\tvar jp = ( j + 1 ) % tubularSegments;\n\n\t\t\tvar a = grid[ i ][ j ];\n\t\t\tvar b = grid[ ip ][ j ];\n\t\t\tvar c = grid[ ip ][ jp ];\n\t\t\tvar d = grid[ i ][ jp ];\n\n\t\t\tvar uva = new THREE.Vector2( i / radialSegments, j / tubularSegments );\n\t\t\tvar uvb = new THREE.Vector2( ( i + 1 ) / radialSegments, j / tubularSegments );\n\t\t\tvar uvc = new THREE.Vector2( ( i + 1 ) / radialSegments, ( j + 1 ) / tubularSegments );\n\t\t\tvar uvd = new THREE.Vector2( i / radialSegments, ( j + 1 ) / tubularSegments );\n\n\t\t\tthis.faces.push( new THREE.Face3( a, b, d ) );\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uva, uvb, uvd ] );\n\n\t\t\tthis.faces.push( new THREE.Face3( b, c, d ) );\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvb.clone(), uvc, uvd.clone() ] );\n\n\t\t}\n\t}\n\n\tthis.computeFaceNormals();\n\tthis.computeVertexNormals();\n\n\tfunction getPos( u, in_q, in_p, radius, heightScale ) {\n\n\t\tvar cu = Math.cos( u );\n\t\tvar su = Math.sin( u );\n\t\tvar quOverP = in_q / in_p * u;\n\t\tvar cs = Math.cos( quOverP );\n\n\t\tvar tx = radius * ( 2 + cs ) * 0.5 * cu;\n\t\tvar ty = radius * ( 2 + cs ) * su * 0.5;\n\t\tvar tz = heightScale * radius * Math.sin( quOverP ) * 0.5;\n\n\t\treturn new THREE.Vector3( tx, ty, tz );\n\n\t}\n\n};\n\nTHREE.TorusKnotGeometry.prototype = Object.create( THREE.Geometry.prototype );\n\n// File:src/extras/geometries/TubeGeometry.js\n\n/**\n * @author WestLangley / https://github.com/WestLangley\n * @author zz85 / https://github.com/zz85\n * @author miningold / https://github.com/miningold\n *\n * Modified from the TorusKnotGeometry by @oosmoxiecode\n *\n * Creates a tube which extrudes along a 3d spline\n *\n * Uses parallel transport frames as described in\n * http://www.cs.indiana.edu/pub/techreports/TR425.pdf\n */\n\nTHREE.TubeGeometry = function ( path, segments, radius, radialSegments, closed ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'TubeGeometry';\n\n\tthis.parameters = {\n\t\tpath: path,\n\t\tsegments: segments,\n\t\tradius: radius,\n\t\tradialSegments: radialSegments,\n\t\tclosed: closed\n\t};\n\n\tsegments = segments || 64;\n\tradius = radius || 1;\n\tradialSegments = radialSegments || 8;\n\tclosed = closed || false;\n\n\tvar grid = [];\n\n\tvar scope = this,\n\n\t\ttangent,\n\t\tnormal,\n\t\tbinormal,\n\n\t\tnumpoints = segments + 1,\n\n\t\tx, y, z,\n\t\ttx, ty, tz,\n\t\tu, v,\n\n\t\tcx, cy,\n\t\tpos, pos2 = new THREE.Vector3(),\n\t\ti, j,\n\t\tip, jp,\n\t\ta, b, c, d,\n\t\tuva, uvb, uvc, uvd;\n\n\tvar frames = new THREE.TubeGeometry.FrenetFrames( path, segments, closed ),\n\t\ttangents = frames.tangents,\n\t\tnormals = frames.normals,\n\t\tbinormals = frames.binormals;\n\n\t// proxy internals\n\tthis.tangents = tangents;\n\tthis.normals = normals;\n\tthis.binormals = binormals;\n\n\tfunction vert( x, y, z ) {\n\n\t\treturn scope.vertices.push( new THREE.Vector3( x, y, z ) ) - 1;\n\n\t}\n\n\t// consruct the grid\n\n\tfor ( i = 0; i < numpoints; i ++ ) {\n\n\t\tgrid[ i ] = [];\n\n\t\tu = i / ( numpoints - 1 );\n\n\t\tpos = path.getPointAt( u );\n\n\t\ttangent = tangents[ i ];\n\t\tnormal = normals[ i ];\n\t\tbinormal = binormals[ i ];\n\n\t\tfor ( j = 0; j < radialSegments; j ++ ) {\n\n\t\t\tv = j / radialSegments * 2 * Math.PI;\n\n\t\t\tcx = - radius * Math.cos( v ); // TODO: Hack: Negating it so it faces outside.\n\t\t\tcy = radius * Math.sin( v );\n\n\t\t\tpos2.copy( pos );\n\t\t\tpos2.x += cx * normal.x + cy * binormal.x;\n\t\t\tpos2.y += cx * normal.y + cy * binormal.y;\n\t\t\tpos2.z += cx * normal.z + cy * binormal.z;\n\n\t\t\tgrid[ i ][ j ] = vert( pos2.x, pos2.y, pos2.z );\n\n\t\t}\n\t}\n\n\n\t// construct the mesh\n\n\tfor ( i = 0; i < segments; i ++ ) {\n\n\t\tfor ( j = 0; j < radialSegments; j ++ ) {\n\n\t\t\tip = ( closed ) ? (i + 1) % segments : i + 1;\n\t\t\tjp = (j + 1) % radialSegments;\n\n\t\t\ta = grid[ i ][ j ];\t\t// *** NOT NECESSARILY PLANAR ! ***\n\t\t\tb = grid[ ip ][ j ];\n\t\t\tc = grid[ ip ][ jp ];\n\t\t\td = grid[ i ][ jp ];\n\n\t\t\tuva = new THREE.Vector2( i / segments, j / radialSegments );\n\t\t\tuvb = new THREE.Vector2( ( i + 1 ) / segments, j / radialSegments );\n\t\t\tuvc = new THREE.Vector2( ( i + 1 ) / segments, ( j + 1 ) / radialSegments );\n\t\t\tuvd = new THREE.Vector2( i / segments, ( j + 1 ) / radialSegments );\n\n\t\t\tthis.faces.push( new THREE.Face3( a, b, d ) );\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uva, uvb, uvd ] );\n\n\t\t\tthis.faces.push( new THREE.Face3( b, c, d ) );\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvb.clone(), uvc, uvd.clone() ] );\n\n\t\t}\n\t}\n\n\tthis.computeFaceNormals();\n\tthis.computeVertexNormals();\n\n};\n\nTHREE.TubeGeometry.prototype = Object.create( THREE.Geometry.prototype );\n\n\n// For computing of Frenet frames, exposing the tangents, normals and binormals the spline\nTHREE.TubeGeometry.FrenetFrames = function ( path, segments, closed ) {\n\n\tvar\ttangent = new THREE.Vector3(),\n\t\tnormal = new THREE.Vector3(),\n\t\tbinormal = new THREE.Vector3(),\n\n\t\ttangents = [],\n\t\tnormals = [],\n\t\tbinormals = [],\n\n\t\tvec = new THREE.Vector3(),\n\t\tmat = new THREE.Matrix4(),\n\n\t\tnumpoints = segments + 1,\n\t\ttheta,\n\t\tepsilon = 0.0001,\n\t\tsmallest,\n\n\t\ttx, ty, tz,\n\t\ti, u, v;\n\n\n\t// expose internals\n\tthis.tangents = tangents;\n\tthis.normals = normals;\n\tthis.binormals = binormals;\n\n\t// compute the tangent vectors for each segment on the path\n\n\tfor ( i = 0; i < numpoints; i ++ ) {\n\n\t\tu = i / ( numpoints - 1 );\n\n\t\ttangents[ i ] = path.getTangentAt( u );\n\t\ttangents[ i ].normalize();\n\n\t}\n\n\tinitialNormal3();\n\n\t/*\n\tfunction initialNormal1(lastBinormal) {\n\t\t// fixed start binormal. Has dangers of 0 vectors\n\t\tnormals[ 0 ] = new THREE.Vector3();\n\t\tbinormals[ 0 ] = new THREE.Vector3();\n\t\tif (lastBinormal===undefined) lastBinormal = new THREE.Vector3( 0, 0, 1 );\n\t\tnormals[ 0 ].crossVectors( lastBinormal, tangents[ 0 ] ).normalize();\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] ).normalize();\n\t}\n\n\tfunction initialNormal2() {\n\n\t\t// This uses the Frenet-Serret formula for deriving binormal\n\t\tvar t2 = path.getTangentAt( epsilon );\n\n\t\tnormals[ 0 ] = new THREE.Vector3().subVectors( t2, tangents[ 0 ] ).normalize();\n\t\tbinormals[ 0 ] = new THREE.Vector3().crossVectors( tangents[ 0 ], normals[ 0 ] );\n\n\t\tnormals[ 0 ].crossVectors( binormals[ 0 ], tangents[ 0 ] ).normalize(); // last binormal x tangent\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] ).normalize();\n\n\t}\n\t*/\n\n\tfunction initialNormal3() {\n\t\t// select an initial normal vector perpenicular to the first tangent vector,\n\t\t// and in the direction of the smallest tangent xyz component\n\n\t\tnormals[ 0 ] = new THREE.Vector3();\n\t\tbinormals[ 0 ] = new THREE.Vector3();\n\t\tsmallest = Number.MAX_VALUE;\n\t\ttx = Math.abs( tangents[ 0 ].x );\n\t\tty = Math.abs( tangents[ 0 ].y );\n\t\ttz = Math.abs( tangents[ 0 ].z );\n\n\t\tif ( tx <= smallest ) {\n\t\t\tsmallest = tx;\n\t\t\tnormal.set( 1, 0, 0 );\n\t\t}\n\n\t\tif ( ty <= smallest ) {\n\t\t\tsmallest = ty;\n\t\t\tnormal.set( 0, 1, 0 );\n\t\t}\n\n\t\tif ( tz <= smallest ) {\n\t\t\tnormal.set( 0, 0, 1 );\n\t\t}\n\n\t\tvec.crossVectors( tangents[ 0 ], normal ).normalize();\n\n\t\tnormals[ 0 ].crossVectors( tangents[ 0 ], vec );\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] );\n\t}\n\n\n\t// compute the slowly-varying normal and binormal vectors for each segment on the path\n\n\tfor ( i = 1; i < numpoints; i ++ ) {\n\n\t\tnormals[ i ] = normals[ i-1 ].clone();\n\n\t\tbinormals[ i ] = binormals[ i-1 ].clone();\n\n\t\tvec.crossVectors( tangents[ i-1 ], tangents[ i ] );\n\n\t\tif ( vec.length() > epsilon ) {\n\n\t\t\tvec.normalize();\n\n\t\t\ttheta = Math.acos( THREE.Math.clamp( tangents[ i-1 ].dot( tangents[ i ] ), - 1, 1 ) ); // clamp for floating pt errors\n\n\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( vec, theta ) );\n\n\t\t}\n\n\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t}\n\n\n\t// if the curve is closed, postprocess the vectors so the first and last normal vectors are the same\n\n\tif ( closed ) {\n\n\t\ttheta = Math.acos( THREE.Math.clamp( normals[ 0 ].dot( normals[ numpoints-1 ] ), - 1, 1 ) );\n\t\ttheta /= ( numpoints - 1 );\n\n\t\tif ( tangents[ 0 ].dot( vec.crossVectors( normals[ 0 ], normals[ numpoints-1 ] ) ) > 0 ) {\n\n\t\t\ttheta = - theta;\n\n\t\t}\n\n\t\tfor ( i = 1; i < numpoints; i ++ ) {\n\n\t\t\t// twist a little...\n\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( tangents[ i ], theta * i ) );\n\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t\t}\n\n\t}\n};\n\n// File:src/extras/geometries/PolyhedronGeometry.js\n\n/**\n * @author clockworkgeek / https://github.com/clockworkgeek\n * @author timothypratley / https://github.com/timothypratley\n * @author WestLangley / http://github.com/WestLangley\n*/\n\nTHREE.PolyhedronGeometry = function ( vertices, indices, radius, detail ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'PolyhedronGeometry';\n\n\tthis.parameters = {\n\t\tvertices: vertices,\n\t\tindices: indices,\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n\tradius = radius || 1;\n\tdetail = detail || 0;\n\n\tvar that = this;\n\n\tfor ( var i = 0, l = vertices.length; i < l; i += 3 ) {\n\n\t\tprepare( new THREE.Vector3( vertices[ i ], vertices[ i + 1 ], vertices[ i + 2 ] ) );\n\n\t}\n\n\tvar midpoints = [], p = this.vertices;\n\n\tvar faces = [];\n\n\tfor ( var i = 0, j = 0, l = indices.length; i < l; i += 3, j ++ ) {\n\n\t\tvar v1 = p[ indices[ i     ] ];\n\t\tvar v2 = p[ indices[ i + 1 ] ];\n\t\tvar v3 = p[ indices[ i + 2 ] ];\n\n\t\tfaces[ j ] = new THREE.Face3( v1.index, v2.index, v3.index, [ v1.clone(), v2.clone(), v3.clone() ] );\n\n\t}\n\n\tvar centroid = new THREE.Vector3();\n\n\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\tsubdivide( faces[ i ], detail );\n\n\t}\n\n\n\t// Handle case when face straddles the seam\n\n\tfor ( var i = 0, l = this.faceVertexUvs[ 0 ].length; i < l; i ++ ) {\n\n\t\tvar uvs = this.faceVertexUvs[ 0 ][ i ];\n\n\t\tvar x0 = uvs[ 0 ].x;\n\t\tvar x1 = uvs[ 1 ].x;\n\t\tvar x2 = uvs[ 2 ].x;\n\n\t\tvar max = Math.max( x0, Math.max( x1, x2 ) );\n\t\tvar min = Math.min( x0, Math.min( x1, x2 ) );\n\n\t\tif ( max > 0.9 && min < 0.1 ) { // 0.9 is somewhat arbitrary\n\n\t\t\tif ( x0 < 0.2 ) uvs[ 0 ].x += 1;\n\t\t\tif ( x1 < 0.2 ) uvs[ 1 ].x += 1;\n\t\t\tif ( x2 < 0.2 ) uvs[ 2 ].x += 1;\n\n\t\t}\n\n\t}\n\n\n\t// Apply radius\n\n\tfor ( var i = 0, l = this.vertices.length; i < l; i ++ ) {\n\n\t\tthis.vertices[ i ].multiplyScalar( radius );\n\n\t}\n\n\n\t// Merge vertices\n\n\tthis.mergeVertices();\n\n\tthis.computeFaceNormals();\n\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\n\n\n\t// Project vector onto sphere's surface\n\n\tfunction prepare( vector ) {\n\n\t\tvar vertex = vector.normalize().clone();\n\t\tvertex.index = that.vertices.push( vertex ) - 1;\n\n\t\t// Texture coords are equivalent to map coords, calculate angle and convert to fraction of a circle.\n\n\t\tvar u = azimuth( vector ) / 2 / Math.PI + 0.5;\n\t\tvar v = inclination( vector ) / Math.PI + 0.5;\n\t\tvertex.uv = new THREE.Vector2( u, 1 - v );\n\n\t\treturn vertex;\n\n\t}\n\n\n\t// Approximate a curved face with recursively sub-divided triangles.\n\n\tfunction make( v1, v2, v3 ) {\n\n\t\tvar face = new THREE.Face3( v1.index, v2.index, v3.index, [ v1.clone(), v2.clone(), v3.clone() ] );\n\t\tthat.faces.push( face );\n\n\t\tcentroid.copy( v1 ).add( v2 ).add( v3 ).divideScalar( 3 );\n\n\t\tvar azi = azimuth( centroid );\n\n\t\tthat.faceVertexUvs[ 0 ].push( [\n\t\t\tcorrectUV( v1.uv, v1, azi ),\n\t\t\tcorrectUV( v2.uv, v2, azi ),\n\t\t\tcorrectUV( v3.uv, v3, azi )\n\t\t] );\n\n\t}\n\n\n\t// Analytically subdivide a face to the required detail level.\n\n\tfunction subdivide( face, detail ) {\n\n\t\tvar cols = Math.pow(2, detail);\n\t\tvar cells = Math.pow(4, detail);\n\t\tvar a = prepare( that.vertices[ face.a ] );\n\t\tvar b = prepare( that.vertices[ face.b ] );\n\t\tvar c = prepare( that.vertices[ face.c ] );\n\t\tvar v = [];\n\n\t\t// Construct all of the vertices for this subdivision.\n\n\t\tfor ( var i = 0 ; i <= cols; i ++ ) {\n\n\t\t\tv[ i ] = [];\n\n\t\t\tvar aj = prepare( a.clone().lerp( c, i / cols ) );\n\t\t\tvar bj = prepare( b.clone().lerp( c, i / cols ) );\n\t\t\tvar rows = cols - i;\n\n\t\t\tfor ( var j = 0; j <= rows; j ++) {\n\n\t\t\t\tif ( j == 0 && i == cols ) {\n\n\t\t\t\t\tv[ i ][ j ] = aj;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tv[ i ][ j ] = prepare( aj.clone().lerp( bj, j / rows ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Construct all of the faces.\n\n\t\tfor ( var i = 0; i < cols ; i ++ ) {\n\n\t\t\tfor ( var j = 0; j < 2 * (cols - i) - 1; j ++ ) {\n\n\t\t\t\tvar k = Math.floor( j / 2 );\n\n\t\t\t\tif ( j % 2 == 0 ) {\n\n\t\t\t\t\tmake(\n\t\t\t\t\t\tv[ i ][ k + 1],\n\t\t\t\t\t\tv[ i + 1 ][ k ],\n\t\t\t\t\t\tv[ i ][ k ]\n\t\t\t\t\t);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tmake(\n\t\t\t\t\t\tv[ i ][ k + 1 ],\n\t\t\t\t\t\tv[ i + 1][ k + 1],\n\t\t\t\t\t\tv[ i + 1 ][ k ]\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\n\t// Angle around the Y axis, counter-clockwise when looking from above.\n\n\tfunction azimuth( vector ) {\n\n\t\treturn Math.atan2( vector.z, - vector.x );\n\n\t}\n\n\n\t// Angle above the XZ plane.\n\n\tfunction inclination( vector ) {\n\n\t\treturn Math.atan2( - vector.y, Math.sqrt( ( vector.x * vector.x ) + ( vector.z * vector.z ) ) );\n\n\t}\n\n\n\t// Texture fixing helper. Spheres have some odd behaviours.\n\n\tfunction correctUV( uv, vector, azimuth ) {\n\n\t\tif ( ( azimuth < 0 ) && ( uv.x === 1 ) ) uv = new THREE.Vector2( uv.x - 1, uv.y );\n\t\tif ( ( vector.x === 0 ) && ( vector.z === 0 ) ) uv = new THREE.Vector2( azimuth / 2 / Math.PI + 0.5, uv.y );\n\t\treturn uv.clone();\n\n\t}\n\n\n};\n\nTHREE.PolyhedronGeometry.prototype = Object.create( THREE.Geometry.prototype );\n\n// File:src/extras/geometries/DodecahedronGeometry.js\n\n/**\n * @author Abe Pazos / https://hamoid.com\n */\n\nTHREE.DodecahedronGeometry = function ( radius, detail ) {\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n\tvar t = ( 1 + Math.sqrt( 5 ) ) / 2;\n\tvar r = 1 / t;\n\n\tvar vertices = [\n\n\t\t// (±1, ±1, ±1)\n\t\t-1, -1, -1,    -1, -1,  1,\n\t\t-1,  1, -1,    -1,  1,  1,\n\t\t 1, -1, -1,     1, -1,  1,\n\t\t 1,  1, -1,     1,  1,  1,\n\n\t\t// (0, ±1/φ, ±φ)\n\t\t 0, -r, -t,     0, -r,  t,\n\t\t 0,  r, -t,     0,  r,  t,\n\n\t\t// (±1/φ, ±φ, 0)\n\t\t-r, -t,  0,    -r,  t,  0,\n\t\t r, -t,  0,     r,  t,  0,\n\n\t\t// (±φ, 0, ±1/φ)\n\t\t-t,  0, -r,     t,  0, -r,\n\t\t-t,  0,  r,     t,  0,  r\n\t];\n\n\tvar indices = [\n\t\t 3, 11,  7,      3,  7, 15,      3, 15, 13,\n\t\t 7, 19, 17,      7, 17,  6,      7,  6, 15,\n\t\t17,  4,  8,     17,  8, 10,     17, 10,  6,\n\t\t 8,  0, 16,      8, 16,  2,      8,  2, 10,\n\t\t 0, 12,  1,      0,  1, 18,      0, 18, 16,\n\t\t 6, 10,  2,      6,  2, 13,      6, 13, 15,\n\t\t 2, 16, 18,      2, 18,  3,      2,  3, 13,\n\t\t18,  1,  9,     18,  9, 11,     18, 11,  3,\n\t\t 4, 14, 12,      4, 12,  0,      4,  0,  8,\n\t\t11,  9,  5,     11,  5, 19,     11, 19,  7,\n\t\t19,  5, 14,     19, 14,  4,     19,  4, 17,\n\t\t 1, 12, 14,      1, 14,  5,      1,  5,  9\n\t];\n\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\n\n};\n\nTHREE.DodecahedronGeometry.prototype = Object.create( THREE.Geometry.prototype );\n\n// File:src/extras/geometries/IcosahedronGeometry.js\n\n/**\n * @author timothypratley / https://github.com/timothypratley\n */\n\nTHREE.IcosahedronGeometry = function ( radius, detail ) {\n\n\tvar t = ( 1 + Math.sqrt( 5 ) ) / 2;\n\n\tvar vertices = [\n\t\t- 1,  t,  0,    1,  t,  0,   - 1, - t,  0,    1, - t,  0,\n\t\t 0, - 1,  t,    0,  1,  t,    0, - 1, - t,    0,  1, - t,\n\t\t t,  0, - 1,    t,  0,  1,   - t,  0, - 1,   - t,  0,  1\n\t];\n\n\tvar indices = [\n\t\t 0, 11,  5,    0,  5,  1,    0,  1,  7,    0,  7, 10,    0, 10, 11,\n\t\t 1,  5,  9,    5, 11,  4,   11, 10,  2,   10,  7,  6,    7,  1,  8,\n\t\t 3,  9,  4,    3,  4,  2,    3,  2,  6,    3,  6,  8,    3,  8,  9,\n\t\t 4,  9,  5,    2,  4, 11,    6,  2, 10,    8,  6,  7,    9,  8,  1\n\t];\n\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\n\n\tthis.type = 'IcosahedronGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n};\n\nTHREE.IcosahedronGeometry.prototype = Object.create( THREE.Geometry.prototype );\n\n// File:src/extras/geometries/OctahedronGeometry.js\n\n/**\n * @author timothypratley / https://github.com/timothypratley\n */\n\nTHREE.OctahedronGeometry = function ( radius, detail ) {\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n\tvar vertices = [\n\t\t1, 0, 0,   - 1, 0, 0,    0, 1, 0,    0,- 1, 0,    0, 0, 1,    0, 0,- 1\n\t];\n\n\tvar indices = [\n\t\t0, 2, 4,    0, 4, 3,    0, 3, 5,    0, 5, 2,    1, 2, 5,    1, 5, 3,    1, 3, 4,    1, 4, 2\n\t];\n\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\n\n\tthis.type = 'OctahedronGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n};\n\nTHREE.OctahedronGeometry.prototype = Object.create( THREE.Geometry.prototype );\n\n// File:src/extras/geometries/TetrahedronGeometry.js\n\n/**\n * @author timothypratley / https://github.com/timothypratley\n */\n\nTHREE.TetrahedronGeometry = function ( radius, detail ) {\n\n\tvar vertices = [\n\t\t 1,  1,  1,   - 1, - 1,  1,   - 1,  1, - 1,    1, - 1, - 1\n\t];\n\n\tvar indices = [\n\t\t 2,  1,  0,    0,  3,  2,    1,  3,  0,    2,  3,  1\n\t];\n\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\n\n\tthis.type = 'TetrahedronGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n};\n\nTHREE.TetrahedronGeometry.prototype = Object.create( THREE.Geometry.prototype );\n\n// File:src/extras/geometries/ParametricGeometry.js\n\n/**\n * @author zz85 / https://github.com/zz85\n * Parametric Surfaces Geometry\n * based on the brilliant article by @prideout http://prideout.net/blog/?p=44\n *\n * new THREE.ParametricGeometry( parametricFunction, uSegments, ySegements );\n *\n */\n\nTHREE.ParametricGeometry = function ( func, slices, stacks ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'ParametricGeometry';\n\n\tthis.parameters = {\n\t\tfunc: func,\n\t\tslices: slices,\n\t\tstacks: stacks\n\t};\n\n\tvar verts = this.vertices;\n\tvar faces = this.faces;\n\tvar uvs = this.faceVertexUvs[ 0 ];\n\n\tvar i, il, j, p;\n\tvar u, v;\n\n\tvar stackCount = stacks + 1;\n\tvar sliceCount = slices + 1;\n\n\tfor ( i = 0; i <= stacks; i ++ ) {\n\n\t\tv = i / stacks;\n\n\t\tfor ( j = 0; j <= slices; j ++ ) {\n\n\t\t\tu = j / slices;\n\n\t\t\tp = func( u, v );\n\t\t\tverts.push( p );\n\n\t\t}\n\t}\n\n\tvar a, b, c, d;\n\tvar uva, uvb, uvc, uvd;\n\n\tfor ( i = 0; i < stacks; i ++ ) {\n\n\t\tfor ( j = 0; j < slices; j ++ ) {\n\n\t\t\ta = i * sliceCount + j;\n\t\t\tb = i * sliceCount + j + 1;\n\t\t\tc = (i + 1) * sliceCount + j + 1;\n\t\t\td = (i + 1) * sliceCount + j;\n\n\t\t\tuva = new THREE.Vector2( j / slices, i / stacks );\n\t\t\tuvb = new THREE.Vector2( ( j + 1 ) / slices, i / stacks );\n\t\t\tuvc = new THREE.Vector2( ( j + 1 ) / slices, ( i + 1 ) / stacks );\n\t\t\tuvd = new THREE.Vector2( j / slices, ( i + 1 ) / stacks );\n\n\t\t\tfaces.push( new THREE.Face3( a, b, d ) );\n\t\t\tuvs.push( [ uva, uvb, uvd ] );\n\n\t\t\tfaces.push( new THREE.Face3( b, c, d ) );\n\t\t\tuvs.push( [ uvb.clone(), uvc, uvd.clone() ] );\n\n\t\t}\n\n\t}\n\n\t// console.log(this);\n\n\t// magic bullet\n\t// var diff = this.mergeVertices();\n\t// console.log('removed ', diff, ' vertices by merging');\n\n\tthis.computeFaceNormals();\n\tthis.computeVertexNormals();\n\n};\n\nTHREE.ParametricGeometry.prototype = Object.create( THREE.Geometry.prototype );\n\n// File:src/extras/helpers/AxisHelper.js\n\n/**\n * @author sroucheray / http://sroucheray.org/\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.AxisHelper = function ( size ) {\n\n\tsize = size || 1;\n\n\tvar vertices = new Float32Array( [\n\t\t0, 0, 0,  size, 0, 0,\n\t\t0, 0, 0,  0, size, 0,\n\t\t0, 0, 0,  0, 0, size\n\t] );\n\n\tvar colors = new Float32Array( [\n\t\t1, 0, 0,  1, 0.6, 0,\n\t\t0, 1, 0,  0.6, 1, 0,\n\t\t0, 0, 1,  0, 0.6, 1\n\t] );\n\n\tvar geometry = new THREE.BufferGeometry();\n\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\n\tgeometry.addAttribute( 'color', new THREE.BufferAttribute( colors, 3 ) );\n\n\tvar material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors } );\n\n\tTHREE.Line.call( this, geometry, material, THREE.LinePieces );\n\n};\n\nTHREE.AxisHelper.prototype = Object.create( THREE.Line.prototype );\n\n// File:src/extras/helpers/ArrowHelper.js\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n * @author zz85 / http://github.com/zz85\n * @author bhouston / http://exocortex.com\n *\n * Creates an arrow for visualizing directions\n *\n * Parameters:\n *  dir - Vector3\n *  origin - Vector3\n *  length - Number\n *  color - color in hex value\n *  headLength - Number\n *  headWidth - Number\n */\n\nTHREE.ArrowHelper = ( function () {\n\n\tvar lineGeometry = new THREE.Geometry();\n\tlineGeometry.vertices.push( new THREE.Vector3( 0, 0, 0 ), new THREE.Vector3( 0, 1, 0 ) );\n\n\tvar coneGeometry = new THREE.CylinderGeometry( 0, 0.5, 1, 5, 1 );\n\tconeGeometry.applyMatrix( new THREE.Matrix4().makeTranslation( 0, - 0.5, 0 ) );\n\n\treturn function ( dir, origin, length, color, headLength, headWidth ) {\n\n\t\t// dir is assumed to be normalized\n\n\t\tTHREE.Object3D.call( this );\n\n\t\tif ( color === undefined ) color = 0xffff00;\n\t\tif ( length === undefined ) length = 1;\n\t\tif ( headLength === undefined ) headLength = 0.2 * length;\n\t\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\n\n\t\tthis.position.copy( origin );\n\n\t\tthis.line = new THREE.Line( lineGeometry, new THREE.LineBasicMaterial( { color: color } ) );\n\t\tthis.line.matrixAutoUpdate = false;\n\t\tthis.add( this.line );\n\n\t\tthis.cone = new THREE.Mesh( coneGeometry, new THREE.MeshBasicMaterial( { color: color } ) );\n\t\tthis.cone.matrixAutoUpdate = false;\n\t\tthis.add( this.cone );\n\n\t\tthis.setDirection( dir );\n\t\tthis.setLength( length, headLength, headWidth );\n\n\t}\n\n}() );\n\nTHREE.ArrowHelper.prototype = Object.create( THREE.Object3D.prototype );\n\nTHREE.ArrowHelper.prototype.setDirection = ( function () {\n\n\tvar axis = new THREE.Vector3();\n\tvar radians;\n\n\treturn function ( dir ) {\n\n\t\t// dir is assumed to be normalized\n\n\t\tif ( dir.y > 0.99999 ) {\n\n\t\t\tthis.quaternion.set( 0, 0, 0, 1 );\n\n\t\t} else if ( dir.y < - 0.99999 ) {\n\n\t\t\tthis.quaternion.set( 1, 0, 0, 0 );\n\n\t\t} else {\n\n\t\t\taxis.set( dir.z, 0, - dir.x ).normalize();\n\n\t\t\tradians = Math.acos( dir.y );\n\n\t\t\tthis.quaternion.setFromAxisAngle( axis, radians );\n\n\t\t}\n\n\t};\n\n}() );\n\nTHREE.ArrowHelper.prototype.setLength = function ( length, headLength, headWidth ) {\n\n\tif ( headLength === undefined ) headLength = 0.2 * length;\n\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\n\n\tthis.line.scale.set( 1, length, 1 );\n\tthis.line.updateMatrix();\n\n\tthis.cone.scale.set( headWidth, headLength, headWidth );\n\tthis.cone.position.y = length;\n\tthis.cone.updateMatrix();\n\n};\n\nTHREE.ArrowHelper.prototype.setColor = function ( color ) {\n\n\tthis.line.material.color.set( color );\n\tthis.cone.material.color.set( color );\n\n};\n\n// File:src/extras/helpers/BoxHelper.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.BoxHelper = function ( object ) {\n\n\tvar geometry = new THREE.BufferGeometry();\n\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( new Float32Array( 72 ), 3 ) );\n\n\tTHREE.Line.call( this, geometry, new THREE.LineBasicMaterial( { color: 0xffff00 } ), THREE.LinePieces );\n\n\tif ( object !== undefined ) {\n\n\t\tthis.update( object );\n\n\t}\n\n};\n\nTHREE.BoxHelper.prototype = Object.create( THREE.Line.prototype );\n\nTHREE.BoxHelper.prototype.update = function ( object ) {\n\n\tvar geometry = object.geometry;\n\n\tif ( geometry.boundingBox === null ) {\n\n\t\tgeometry.computeBoundingBox();\n\n\t}\n\n\tvar min = geometry.boundingBox.min;\n\tvar max = geometry.boundingBox.max;\n\n\t/*\n\t  5____4\n\t1/___0/|\n\t| 6__|_7\n\t2/___3/\n\n\t0: max.x, max.y, max.z\n\t1: min.x, max.y, max.z\n\t2: min.x, min.y, max.z\n\t3: max.x, min.y, max.z\n\t4: max.x, max.y, min.z\n\t5: min.x, max.y, min.z\n\t6: min.x, min.y, min.z\n\t7: max.x, min.y, min.z\n\t*/\n\n\tvar vertices = this.geometry.attributes.position.array;\n\n\tvertices[  0 ] = max.x; vertices[  1 ] = max.y; vertices[  2 ] = max.z;\n\tvertices[  3 ] = min.x; vertices[  4 ] = max.y; vertices[  5 ] = max.z;\n\n\tvertices[  6 ] = min.x; vertices[  7 ] = max.y; vertices[  8 ] = max.z;\n\tvertices[  9 ] = min.x; vertices[ 10 ] = min.y; vertices[ 11 ] = max.z;\n\n\tvertices[ 12 ] = min.x; vertices[ 13 ] = min.y; vertices[ 14 ] = max.z;\n\tvertices[ 15 ] = max.x; vertices[ 16 ] = min.y; vertices[ 17 ] = max.z;\n\n\tvertices[ 18 ] = max.x; vertices[ 19 ] = min.y; vertices[ 20 ] = max.z;\n\tvertices[ 21 ] = max.x; vertices[ 22 ] = max.y; vertices[ 23 ] = max.z;\n\n\t//\n\n\tvertices[ 24 ] = max.x; vertices[ 25 ] = max.y; vertices[ 26 ] = min.z;\n\tvertices[ 27 ] = min.x; vertices[ 28 ] = max.y; vertices[ 29 ] = min.z;\n\n\tvertices[ 30 ] = min.x; vertices[ 31 ] = max.y; vertices[ 32 ] = min.z;\n\tvertices[ 33 ] = min.x; vertices[ 34 ] = min.y; vertices[ 35 ] = min.z;\n\n\tvertices[ 36 ] = min.x; vertices[ 37 ] = min.y; vertices[ 38 ] = min.z;\n\tvertices[ 39 ] = max.x; vertices[ 40 ] = min.y; vertices[ 41 ] = min.z;\n\n\tvertices[ 42 ] = max.x; vertices[ 43 ] = min.y; vertices[ 44 ] = min.z;\n\tvertices[ 45 ] = max.x; vertices[ 46 ] = max.y; vertices[ 47 ] = min.z;\n\n\t//\n\n\tvertices[ 48 ] = max.x; vertices[ 49 ] = max.y; vertices[ 50 ] = max.z;\n\tvertices[ 51 ] = max.x; vertices[ 52 ] = max.y; vertices[ 53 ] = min.z;\n\n\tvertices[ 54 ] = min.x; vertices[ 55 ] = max.y; vertices[ 56 ] = max.z;\n\tvertices[ 57 ] = min.x; vertices[ 58 ] = max.y; vertices[ 59 ] = min.z;\n\n\tvertices[ 60 ] = min.x; vertices[ 61 ] = min.y; vertices[ 62 ] = max.z;\n\tvertices[ 63 ] = min.x; vertices[ 64 ] = min.y; vertices[ 65 ] = min.z;\n\n\tvertices[ 66 ] = max.x; vertices[ 67 ] = min.y; vertices[ 68 ] = max.z;\n\tvertices[ 69 ] = max.x; vertices[ 70 ] = min.y; vertices[ 71 ] = min.z;\n\n\tthis.geometry.attributes.position.needsUpdate = true;\n\n\tthis.geometry.computeBoundingSphere();\n\n\tthis.matrix = object.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n};\n\n// File:src/extras/helpers/BoundingBoxHelper.js\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n */\n\n// a helper to show the world-axis-aligned bounding box for an object\n\nTHREE.BoundingBoxHelper = function ( object, hex ) {\n\n\tvar color = ( hex !== undefined ) ? hex : 0x888888;\n\n\tthis.object = object;\n\n\tthis.box = new THREE.Box3();\n\n\tTHREE.Mesh.call( this, new THREE.BoxGeometry( 1, 1, 1 ), new THREE.MeshBasicMaterial( { color: color, wireframe: true } ) );\n\n};\n\nTHREE.BoundingBoxHelper.prototype = Object.create( THREE.Mesh.prototype );\n\nTHREE.BoundingBoxHelper.prototype.update = function () {\n\n\tthis.box.setFromObject( this.object );\n\n\tthis.box.size( this.scale );\n\n\tthis.box.center( this.position );\n\n};\n\n// File:src/extras/helpers/CameraHelper.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n *\n *\t- shows frustum, line of sight and up of the camera\n *\t- suitable for fast updates\n * \t- based on frustum visualization in lightgl.js shadowmap example\n *\t\thttp://evanw.github.com/lightgl.js/tests/shadowmap.html\n */\n\nTHREE.CameraHelper = function ( camera ) {\n\n\tvar geometry = new THREE.Geometry();\n\tvar material = new THREE.LineBasicMaterial( { color: 0xffffff, vertexColors: THREE.FaceColors } );\n\n\tvar pointMap = {};\n\n\t// colors\n\n\tvar hexFrustum = 0xffaa00;\n\tvar hexCone = 0xff0000;\n\tvar hexUp = 0x00aaff;\n\tvar hexTarget = 0xffffff;\n\tvar hexCross = 0x333333;\n\n\t// near\n\n\taddLine( \"n1\", \"n2\", hexFrustum );\n\taddLine( \"n2\", \"n4\", hexFrustum );\n\taddLine( \"n4\", \"n3\", hexFrustum );\n\taddLine( \"n3\", \"n1\", hexFrustum );\n\n\t// far\n\n\taddLine( \"f1\", \"f2\", hexFrustum );\n\taddLine( \"f2\", \"f4\", hexFrustum );\n\taddLine( \"f4\", \"f3\", hexFrustum );\n\taddLine( \"f3\", \"f1\", hexFrustum );\n\n\t// sides\n\n\taddLine( \"n1\", \"f1\", hexFrustum );\n\taddLine( \"n2\", \"f2\", hexFrustum );\n\taddLine( \"n3\", \"f3\", hexFrustum );\n\taddLine( \"n4\", \"f4\", hexFrustum );\n\n\t// cone\n\n\taddLine( \"p\", \"n1\", hexCone );\n\taddLine( \"p\", \"n2\", hexCone );\n\taddLine( \"p\", \"n3\", hexCone );\n\taddLine( \"p\", \"n4\", hexCone );\n\n\t// up\n\n\taddLine( \"u1\", \"u2\", hexUp );\n\taddLine( \"u2\", \"u3\", hexUp );\n\taddLine( \"u3\", \"u1\", hexUp );\n\n\t// target\n\n\taddLine( \"c\", \"t\", hexTarget );\n\taddLine( \"p\", \"c\", hexCross );\n\n\t// cross\n\n\taddLine( \"cn1\", \"cn2\", hexCross );\n\taddLine( \"cn3\", \"cn4\", hexCross );\n\n\taddLine( \"cf1\", \"cf2\", hexCross );\n\taddLine( \"cf3\", \"cf4\", hexCross );\n\n\tfunction addLine( a, b, hex ) {\n\n\t\taddPoint( a, hex );\n\t\taddPoint( b, hex );\n\n\t}\n\n\tfunction addPoint( id, hex ) {\n\n\t\tgeometry.vertices.push( new THREE.Vector3() );\n\t\tgeometry.colors.push( new THREE.Color( hex ) );\n\n\t\tif ( pointMap[ id ] === undefined ) {\n\n\t\t\tpointMap[ id ] = [];\n\n\t\t}\n\n\t\tpointMap[ id ].push( geometry.vertices.length - 1 );\n\n\t}\n\n\tTHREE.Line.call( this, geometry, material, THREE.LinePieces );\n\n\tthis.camera = camera;\n\tthis.matrix = camera.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n\tthis.pointMap = pointMap;\n\n\tthis.update();\n\n};\n\nTHREE.CameraHelper.prototype = Object.create( THREE.Line.prototype );\n\nTHREE.CameraHelper.prototype.update = function () {\n\n\tvar geometry, pointMap;\n\t\n\tvar vector = new THREE.Vector3();\n\tvar camera = new THREE.Camera();\n\n\tvar setPoint = function ( point, x, y, z ) {\n\n\t\tvector.set( x, y, z ).unproject( camera );\n\n\t\tvar points = pointMap[ point ];\n\n\t\tif ( points !== undefined ) {\n\n\t\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\t\tgeometry.vertices[ points[ i ] ].copy( vector );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\treturn function () {\n\n\t\tgeometry = this.geometry;\n\t\tpointMap = this.pointMap;\n\n\t\tvar w = 1, h = 1;\n\n\t\t// we need just camera projection matrix\n\t\t// world matrix must be identity\n\n\t\tcamera.projectionMatrix.copy( this.camera.projectionMatrix );\n\n\t\t// center / target\n\n\t\tsetPoint( \"c\", 0, 0, - 1 );\n\t\tsetPoint( \"t\", 0, 0,  1 );\n\n\t\t// near\n\n\t\tsetPoint( \"n1\", - w, - h, - 1 );\n\t\tsetPoint( \"n2\",   w, - h, - 1 );\n\t\tsetPoint( \"n3\", - w,   h, - 1 );\n\t\tsetPoint( \"n4\",   w,   h, - 1 );\n\n\t\t// far\n\n\t\tsetPoint( \"f1\", - w, - h, 1 );\n\t\tsetPoint( \"f2\",   w, - h, 1 );\n\t\tsetPoint( \"f3\", - w,   h, 1 );\n\t\tsetPoint( \"f4\",   w,   h, 1 );\n\n\t\t// up\n\n\t\tsetPoint( \"u1\",   w * 0.7, h * 1.1, - 1 );\n\t\tsetPoint( \"u2\", - w * 0.7, h * 1.1, - 1 );\n\t\tsetPoint( \"u3\",         0, h * 2,   - 1 );\n\n\t\t// cross\n\n\t\tsetPoint( \"cf1\", - w,   0, 1 );\n\t\tsetPoint( \"cf2\",   w,   0, 1 );\n\t\tsetPoint( \"cf3\",   0, - h, 1 );\n\t\tsetPoint( \"cf4\",   0,   h, 1 );\n\n\t\tsetPoint( \"cn1\", - w,   0, - 1 );\n\t\tsetPoint( \"cn2\",   w,   0, - 1 );\n\t\tsetPoint( \"cn3\",   0, - h, - 1 );\n\t\tsetPoint( \"cn4\",   0,   h, - 1 );\n\n\t\tgeometry.verticesNeedUpdate = true;\n\n\t};\n\n}();\n\n// File:src/extras/helpers/DirectionalLightHelper.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nTHREE.DirectionalLightHelper = function ( light, size ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.light = light;\n\tthis.light.updateMatrixWorld();\n\n\tthis.matrix = light.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n\tsize = size || 1;\n\n\tvar geometry = new THREE.Geometry();\n\tgeometry.vertices.push(\n\t\tnew THREE.Vector3( - size,   size, 0 ),\n\t\tnew THREE.Vector3(   size,   size, 0 ),\n\t\tnew THREE.Vector3(   size, - size, 0 ),\n\t\tnew THREE.Vector3( - size, - size, 0 ),\n\t\tnew THREE.Vector3( - size,   size, 0 )\n\t);\n\n\tvar material = new THREE.LineBasicMaterial( { fog: false } );\n\tmaterial.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\n\n\tthis.lightPlane = new THREE.Line( geometry, material );\n\tthis.add( this.lightPlane );\n\n\tgeometry = new THREE.Geometry();\n\tgeometry.vertices.push(\n\t\tnew THREE.Vector3(),\n\t\tnew THREE.Vector3()\n\t);\n\n\tmaterial = new THREE.LineBasicMaterial( { fog: false } );\n\tmaterial.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\n\n\tthis.targetLine = new THREE.Line( geometry, material );\n\tthis.add( this.targetLine );\n\n\tthis.update();\n\n};\n\nTHREE.DirectionalLightHelper.prototype = Object.create( THREE.Object3D.prototype );\n\nTHREE.DirectionalLightHelper.prototype.dispose = function () {\n\n\tthis.lightPlane.geometry.dispose();\n\tthis.lightPlane.material.dispose();\n\tthis.targetLine.geometry.dispose();\n\tthis.targetLine.material.dispose();\n};\n\nTHREE.DirectionalLightHelper.prototype.update = function () {\n\n\tvar v1 = new THREE.Vector3();\n\tvar v2 = new THREE.Vector3();\n\tvar v3 = new THREE.Vector3();\n\n\treturn function () {\n\n\t\tv1.setFromMatrixPosition( this.light.matrixWorld );\n\t\tv2.setFromMatrixPosition( this.light.target.matrixWorld );\n\t\tv3.subVectors( v2, v1 );\n\n\t\tthis.lightPlane.lookAt( v3 );\n\t\tthis.lightPlane.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\n\n\t\tthis.targetLine.geometry.vertices[ 1 ].copy( v3 );\n\t\tthis.targetLine.geometry.verticesNeedUpdate = true;\n\t\tthis.targetLine.material.color.copy( this.lightPlane.material.color );\n\n\t};\n\n}();\n\n// File:src/extras/helpers/EdgesHelper.js\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n */\n\nTHREE.EdgesHelper = function ( object, hex ) {\n\n\tvar color = ( hex !== undefined ) ? hex : 0xffffff;\n\n\tvar edge = [ 0, 0 ], hash = {};\n\tvar sortFunction = function ( a, b ) { return a - b };\n\n\tvar keys = [ 'a', 'b', 'c' ];\n\tvar geometry = new THREE.BufferGeometry();\n\n\tvar geometry2 = object.geometry.clone();\n\n\tgeometry2.mergeVertices();\n\tgeometry2.computeFaceNormals();\n\n\tvar vertices = geometry2.vertices;\n\tvar faces = geometry2.faces;\n\tvar numEdges = 0;\n\n\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\tvar face = faces[ i ];\n\n\t\tfor ( var j = 0; j < 3; j ++ ) {\n\n\t\t\tedge[ 0 ] = face[ keys[ j ] ];\n\t\t\tedge[ 1 ] = face[ keys[ ( j + 1 ) % 3 ] ];\n\t\t\tedge.sort( sortFunction );\n\n\t\t\tvar key = edge.toString();\n\n\t\t\tif ( hash[ key ] === undefined ) {\n\n\t\t\t\thash[ key ] = { vert1: edge[ 0 ], vert2: edge[ 1 ], face1: i, face2: undefined };\n\t\t\t\tnumEdges ++;\n\n\t\t\t} else {\n\n\t\t\t\thash[ key ].face2 = i;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tvar coords = new Float32Array( numEdges * 2 * 3 );\n\n\tvar index = 0;\n\n\tfor ( var key in hash ) {\n\n\t\tvar h = hash[ key ];\n\n\t\tif ( h.face2 === undefined || faces[ h.face1 ].normal.dot( faces[ h.face2 ].normal ) < 0.9999 ) { // hardwired const OK\n\n\t\t\tvar vertex = vertices[ h.vert1 ];\n\t\t\tcoords[ index ++ ] = vertex.x;\n\t\t\tcoords[ index ++ ] = vertex.y;\n\t\t\tcoords[ index ++ ] = vertex.z;\n\n\t\t\tvertex = vertices[ h.vert2 ];\n\t\t\tcoords[ index ++ ] = vertex.x;\n\t\t\tcoords[ index ++ ] = vertex.y;\n\t\t\tcoords[ index ++ ] = vertex.z;\n\n\t\t}\n\n\t}\n\n\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\n\n\tTHREE.Line.call( this, geometry, new THREE.LineBasicMaterial( { color: color } ), THREE.LinePieces );\n\n\tthis.matrix = object.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n};\n\nTHREE.EdgesHelper.prototype = Object.create( THREE.Line.prototype );\n\n// File:src/extras/helpers/FaceNormalsHelper.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n*/\n\nTHREE.FaceNormalsHelper = function ( object, size, hex, linewidth ) {\n\n\tthis.object = object;\n\n\tthis.size = ( size !== undefined ) ? size : 1;\n\n\tvar color = ( hex !== undefined ) ? hex : 0xffff00;\n\n\tvar width = ( linewidth !== undefined ) ? linewidth : 1;\n\n\tvar geometry = new THREE.Geometry();\n\n\tvar faces = this.object.geometry.faces;\n\n\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\tgeometry.vertices.push( new THREE.Vector3(), new THREE.Vector3() );\n\n\t}\n\n\tTHREE.Line.call( this, geometry, new THREE.LineBasicMaterial( { color: color, linewidth: width } ), THREE.LinePieces );\n\n\tthis.matrixAutoUpdate = false;\n\n\tthis.normalMatrix = new THREE.Matrix3();\n\n\tthis.update();\n\n};\n\nTHREE.FaceNormalsHelper.prototype = Object.create( THREE.Line.prototype );\n\nTHREE.FaceNormalsHelper.prototype.update = function () {\n\n\tvar vertices = this.geometry.vertices;\n\n\tvar object = this.object;\n\tvar objectVertices = object.geometry.vertices;\n\tvar objectFaces = object.geometry.faces;\n\tvar objectWorldMatrix = object.matrixWorld;\n\n\tobject.updateMatrixWorld( true );\n\n\tthis.normalMatrix.getNormalMatrix( objectWorldMatrix );\n\n\tfor ( var i = 0, i2 = 0, l = objectFaces.length; i < l; i ++, i2 += 2 ) {\n\n\t\tvar face = objectFaces[ i ];\n\n\t\tvertices[ i2 ].copy( objectVertices[ face.a ] )\n\t\t\t.add( objectVertices[ face.b ] )\n\t\t\t.add( objectVertices[ face.c ] )\n\t\t\t.divideScalar( 3 )\n\t\t\t.applyMatrix4( objectWorldMatrix );\n\n\t\tvertices[ i2 + 1 ].copy( face.normal )\n\t\t\t.applyMatrix3( this.normalMatrix )\n\t\t\t.normalize()\n\t\t\t.multiplyScalar( this.size )\n\t\t\t.add( vertices[ i2 ] );\n\n\t}\n\n\tthis.geometry.verticesNeedUpdate = true;\n\n\treturn this;\n\n};\n\n\n// File:src/extras/helpers/GridHelper.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.GridHelper = function ( size, step ) {\n\n\tvar geometry = new THREE.Geometry();\n\tvar material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors } );\n\n\tthis.color1 = new THREE.Color( 0x444444 );\n\tthis.color2 = new THREE.Color( 0x888888 );\n\n\tfor ( var i = - size; i <= size; i += step ) {\n\n\t\tgeometry.vertices.push(\n\t\t\tnew THREE.Vector3( - size, 0, i ), new THREE.Vector3( size, 0, i ),\n\t\t\tnew THREE.Vector3( i, 0, - size ), new THREE.Vector3( i, 0, size )\n\t\t);\n\n\t\tvar color = i === 0 ? this.color1 : this.color2;\n\n\t\tgeometry.colors.push( color, color, color, color );\n\n\t}\n\n\tTHREE.Line.call( this, geometry, material, THREE.LinePieces );\n\n};\n\nTHREE.GridHelper.prototype = Object.create( THREE.Line.prototype );\n\nTHREE.GridHelper.prototype.setColors = function( colorCenterLine, colorGrid ) {\n\n\tthis.color1.set( colorCenterLine );\n\tthis.color2.set( colorGrid );\n\n\tthis.geometry.colorsNeedUpdate = true;\n\n}\n\n// File:src/extras/helpers/HemisphereLightHelper.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.HemisphereLightHelper = function ( light, sphereSize, arrowLength, domeSize ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.light = light;\n\tthis.light.updateMatrixWorld();\n\n\tthis.matrix = light.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n\tthis.colors = [ new THREE.Color(), new THREE.Color() ];\n\n\tvar geometry = new THREE.SphereGeometry( sphereSize, 4, 2 );\n\tgeometry.applyMatrix( new THREE.Matrix4().makeRotationX( - Math.PI / 2 ) );\n\n\tfor ( var i = 0, il = 8; i < il; i ++ ) {\n\n\t\tgeometry.faces[ i ].color = this.colors[ i < 4 ? 0 : 1 ];\n\n\t}\n\n\tvar material = new THREE.MeshBasicMaterial( { vertexColors: THREE.FaceColors, wireframe: true } );\n\n\tthis.lightSphere = new THREE.Mesh( geometry, material );\n\tthis.add( this.lightSphere );\n\n\tthis.update();\n\n};\n\nTHREE.HemisphereLightHelper.prototype = Object.create( THREE.Object3D.prototype );\n\nTHREE.HemisphereLightHelper.prototype.dispose = function () {\n\tthis.lightSphere.geometry.dispose();\n\tthis.lightSphere.material.dispose();\n};\n\nTHREE.HemisphereLightHelper.prototype.update = function () {\n\n\tvar vector = new THREE.Vector3();\n\n\treturn function () {\n\n\t\tthis.colors[ 0 ].copy( this.light.color ).multiplyScalar( this.light.intensity );\n\t\tthis.colors[ 1 ].copy( this.light.groundColor ).multiplyScalar( this.light.intensity );\n\n\t\tthis.lightSphere.lookAt( vector.setFromMatrixPosition( this.light.matrixWorld ).negate() );\n\t\tthis.lightSphere.geometry.colorsNeedUpdate = true;\n\n\t}\n\n}();\n\n// File:src/extras/helpers/PointLightHelper.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.PointLightHelper = function ( light, sphereSize ) {\n\n\tthis.light = light;\n\tthis.light.updateMatrixWorld();\n\n\tvar geometry = new THREE.SphereGeometry( sphereSize, 4, 2 );\n\tvar material = new THREE.MeshBasicMaterial( { wireframe: true, fog: false } );\n\tmaterial.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\n\n\tTHREE.Mesh.call( this, geometry, material );\n\n\tthis.matrix = this.light.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n\t/*\n\tvar distanceGeometry = new THREE.IcosahedronGeometry( 1, 2 );\n\tvar distanceMaterial = new THREE.MeshBasicMaterial( { color: hexColor, fog: false, wireframe: true, opacity: 0.1, transparent: true } );\n\n\tthis.lightSphere = new THREE.Mesh( bulbGeometry, bulbMaterial );\n\tthis.lightDistance = new THREE.Mesh( distanceGeometry, distanceMaterial );\n\n\tvar d = light.distance;\n\n\tif ( d === 0.0 ) {\n\n\t\tthis.lightDistance.visible = false;\n\n\t} else {\n\n\t\tthis.lightDistance.scale.set( d, d, d );\n\n\t}\n\n\tthis.add( this.lightDistance );\n\t*/\n\n};\n\nTHREE.PointLightHelper.prototype = Object.create( THREE.Mesh.prototype );\n\nTHREE.PointLightHelper.prototype.dispose = function () {\n\n\tthis.geometry.dispose();\n\tthis.material.dispose();\n};\n\nTHREE.PointLightHelper.prototype.update = function () {\n\n\tthis.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\n\n\t/*\n\tvar d = this.light.distance;\n\n\tif ( d === 0.0 ) {\n\n\t\tthis.lightDistance.visible = false;\n\n\t} else {\n\n\t\tthis.lightDistance.visible = true;\n\t\tthis.lightDistance.scale.set( d, d, d );\n\n\t}\n\t*/\n\n};\n\n// File:src/extras/helpers/SkeletonHelper.js\n\n/**\n * @author Sean Griffin / http://twitter.com/sgrif\n * @author Michael Guerrero / http://realitymeltdown.com\n * @author mrdoob / http://mrdoob.com/\n * @author ikerr / http://verold.com\n */\n\nTHREE.SkeletonHelper = function ( object ) {\n\n\tthis.bones = this.getBoneList( object );\n\n\tvar geometry = new THREE.Geometry();\n\n\tfor ( var i = 0; i < this.bones.length; i ++ ) {\n\n\t\tvar bone = this.bones[ i ];\n\n\t\tif ( bone.parent instanceof THREE.Bone ) {\n\n\t\t\tgeometry.vertices.push( new THREE.Vector3() );\n\t\t\tgeometry.vertices.push( new THREE.Vector3() );\n\t\t\tgeometry.colors.push( new THREE.Color( 0, 0, 1 ) );\n\t\t\tgeometry.colors.push( new THREE.Color( 0, 1, 0 ) );\n\n\t\t}\n\n\t}\n\n\tvar material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors, depthTest: false, depthWrite: false, transparent: true } );\n\n\tTHREE.Line.call( this, geometry, material, THREE.LinePieces );\n\n\tthis.root = object;\n\n\tthis.matrix = object.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n\tthis.update();\n\n};\n\n\nTHREE.SkeletonHelper.prototype = Object.create( THREE.Line.prototype );\n\nTHREE.SkeletonHelper.prototype.getBoneList = function( object ) {\n\n\tvar boneList = [];\n\n\tif ( object instanceof THREE.Bone ) {\n\n\t\tboneList.push( object );\n\n\t}\n\n\tfor ( var i = 0; i < object.children.length; i ++ ) {\n\n\t\tboneList.push.apply( boneList, this.getBoneList( object.children[ i ] ) );\n\n\t}\n\n\treturn boneList;\n\n};\n\nTHREE.SkeletonHelper.prototype.update = function () {\n\n\tvar geometry = this.geometry;\n\n\tvar matrixWorldInv = new THREE.Matrix4().getInverse( this.root.matrixWorld );\n\n\tvar boneMatrix = new THREE.Matrix4();\n\n\tvar j = 0;\n\n\tfor ( var i = 0; i < this.bones.length; i ++ ) {\n\n\t\tvar bone = this.bones[ i ];\n\n\t\tif ( bone.parent instanceof THREE.Bone ) {\n\n\t\t\tboneMatrix.multiplyMatrices( matrixWorldInv, bone.matrixWorld );\n\t\t\tgeometry.vertices[ j ].setFromMatrixPosition( boneMatrix );\n\n\t\t\tboneMatrix.multiplyMatrices( matrixWorldInv, bone.parent.matrixWorld );\n\t\t\tgeometry.vertices[ j + 1 ].setFromMatrixPosition( boneMatrix );\n\n\t\t\tj += 2;\n\n\t\t}\n\n\t}\n\n\tgeometry.verticesNeedUpdate = true;\n\n\tgeometry.computeBoundingSphere();\n\n};\n\n// File:src/extras/helpers/SpotLightHelper.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n*/\n\nTHREE.SpotLightHelper = function ( light ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.light = light;\n\tthis.light.updateMatrixWorld();\n\n\tthis.matrix = light.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n\tvar geometry = new THREE.CylinderGeometry( 0, 1, 1, 8, 1, true );\n\n\tgeometry.applyMatrix( new THREE.Matrix4().makeTranslation( 0, - 0.5, 0 ) );\n\tgeometry.applyMatrix( new THREE.Matrix4().makeRotationX( - Math.PI / 2 ) );\n\n\tvar material = new THREE.MeshBasicMaterial( { wireframe: true, fog: false } );\n\n\tthis.cone = new THREE.Mesh( geometry, material );\n\tthis.add( this.cone );\n\n\tthis.update();\n\n};\n\nTHREE.SpotLightHelper.prototype = Object.create( THREE.Object3D.prototype );\n\nTHREE.SpotLightHelper.prototype.dispose = function () {\n\tthis.cone.geometry.dispose();\n\tthis.cone.material.dispose();\n};\n\nTHREE.SpotLightHelper.prototype.update = function () {\n\n\tvar vector = new THREE.Vector3();\n\tvar vector2 = new THREE.Vector3();\n\n\treturn function () {\n\n\t\tvar coneLength = this.light.distance ? this.light.distance : 10000;\n\t\tvar coneWidth = coneLength * Math.tan( this.light.angle );\n\n\t\tthis.cone.scale.set( coneWidth, coneWidth, coneLength );\n\n\t\tvector.setFromMatrixPosition( this.light.matrixWorld );\n\t\tvector2.setFromMatrixPosition( this.light.target.matrixWorld );\n\n\t\tthis.cone.lookAt( vector2.sub( vector ) );\n\n\t\tthis.cone.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\n\n\t};\n\n}();\n\n// File:src/extras/helpers/VertexNormalsHelper.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n*/\n\nTHREE.VertexNormalsHelper = function ( object, size, hex, linewidth ) {\n\n\tthis.object = object;\n\n\tthis.size = ( size !== undefined ) ? size : 1;\n\n\tvar color = ( hex !== undefined ) ? hex : 0xff0000;\n\n\tvar width = ( linewidth !== undefined ) ? linewidth : 1;\n\n\tvar geometry = new THREE.Geometry();\n\n\tvar vertices = object.geometry.vertices;\n\n\tvar faces = object.geometry.faces;\n\n\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\tvar face = faces[ i ];\n\n\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\n\n\t\t\tgeometry.vertices.push( new THREE.Vector3(), new THREE.Vector3() );\n\n\t\t}\n\n\t}\n\n\tTHREE.Line.call( this, geometry, new THREE.LineBasicMaterial( { color: color, linewidth: width } ), THREE.LinePieces );\n\n\tthis.matrixAutoUpdate = false;\n\n\tthis.normalMatrix = new THREE.Matrix3();\n\n\tthis.update();\n\n};\n\nTHREE.VertexNormalsHelper.prototype = Object.create( THREE.Line.prototype );\n\nTHREE.VertexNormalsHelper.prototype.update = ( function ( object ) {\n\n\tvar v1 = new THREE.Vector3();\n\n\treturn function( object ) {\n\n\t\tvar keys = [ 'a', 'b', 'c', 'd' ];\n\n\t\tthis.object.updateMatrixWorld( true );\n\n\t\tthis.normalMatrix.getNormalMatrix( this.object.matrixWorld );\n\n\t\tvar vertices = this.geometry.vertices;\n\n\t\tvar verts = this.object.geometry.vertices;\n\n\t\tvar faces = this.object.geometry.faces;\n\n\t\tvar worldMatrix = this.object.matrixWorld;\n\n\t\tvar idx = 0;\n\n\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\tvar face = faces[ i ];\n\n\t\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\tvar vertexId = face[ keys[ j ] ];\n\t\t\t\tvar vertex = verts[ vertexId ];\n\n\t\t\t\tvar normal = face.vertexNormals[ j ];\n\n\t\t\t\tvertices[ idx ].copy( vertex ).applyMatrix4( worldMatrix );\n\n\t\t\t\tv1.copy( normal ).applyMatrix3( this.normalMatrix ).normalize().multiplyScalar( this.size );\n\n\t\t\t\tv1.add( vertices[ idx ] );\n\t\t\t\tidx = idx + 1;\n\n\t\t\t\tvertices[ idx ].copy( v1 );\n\t\t\t\tidx = idx + 1;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.geometry.verticesNeedUpdate = true;\n\n\t\treturn this;\n\n\t}\n\n}());\n\n// File:src/extras/helpers/VertexTangentsHelper.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n*/\n\nTHREE.VertexTangentsHelper = function ( object, size, hex, linewidth ) {\n\n\tthis.object = object;\n\n\tthis.size = ( size !== undefined ) ? size : 1;\n\n\tvar color = ( hex !== undefined ) ? hex : 0x0000ff;\n\n\tvar width = ( linewidth !== undefined ) ? linewidth : 1;\n\n\tvar geometry = new THREE.Geometry();\n\n\tvar vertices = object.geometry.vertices;\n\n\tvar faces = object.geometry.faces;\n\n\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\tvar face = faces[ i ];\n\n\t\tfor ( var j = 0, jl = face.vertexTangents.length; j < jl; j ++ ) {\n\n\t\t\tgeometry.vertices.push( new THREE.Vector3() );\n\t\t\tgeometry.vertices.push( new THREE.Vector3() );\n\n\t\t}\n\n\t}\n\n\tTHREE.Line.call( this, geometry, new THREE.LineBasicMaterial( { color: color, linewidth: width } ), THREE.LinePieces );\n\n\tthis.matrixAutoUpdate = false;\n\n\tthis.update();\n\n};\n\nTHREE.VertexTangentsHelper.prototype = Object.create( THREE.Line.prototype );\n\nTHREE.VertexTangentsHelper.prototype.update = ( function ( object ) {\n\n\tvar v1 = new THREE.Vector3();\n\n\treturn function( object ) {\n\n\t\tvar keys = [ 'a', 'b', 'c', 'd' ];\n\n\t\tthis.object.updateMatrixWorld( true );\n\n\t\tvar vertices = this.geometry.vertices;\n\n\t\tvar verts = this.object.geometry.vertices;\n\n\t\tvar faces = this.object.geometry.faces;\n\n\t\tvar worldMatrix = this.object.matrixWorld;\n\n\t\tvar idx = 0;\n\n\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\tvar face = faces[ i ];\n\n\t\t\tfor ( var j = 0, jl = face.vertexTangents.length; j < jl; j ++ ) {\n\n\t\t\t\tvar vertexId = face[ keys[ j ] ];\n\t\t\t\tvar vertex = verts[ vertexId ];\n\n\t\t\t\tvar tangent = face.vertexTangents[ j ];\n\n\t\t\t\tvertices[ idx ].copy( vertex ).applyMatrix4( worldMatrix );\n\n\t\t\t\tv1.copy( tangent ).transformDirection( worldMatrix ).multiplyScalar( this.size );\n\n\t\t\t\tv1.add( vertices[ idx ] );\n\t\t\t\tidx = idx + 1;\n\n\t\t\t\tvertices[ idx ].copy( v1 );\n\t\t\t\tidx = idx + 1;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.geometry.verticesNeedUpdate = true;\n\n\t\treturn this;\n\n\t}\n\n}());\n\n// File:src/extras/helpers/WireframeHelper.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.WireframeHelper = function ( object, hex ) {\n\n\tvar color = ( hex !== undefined ) ? hex : 0xffffff;\n\n\tvar edge = [ 0, 0 ], hash = {};\n\tvar sortFunction = function ( a, b ) { return a - b };\n\n\tvar keys = [ 'a', 'b', 'c' ];\n\tvar geometry = new THREE.BufferGeometry();\n\n\tif ( object.geometry instanceof THREE.Geometry ) {\n\n\t\tvar vertices = object.geometry.vertices;\n\t\tvar faces = object.geometry.faces;\n\t\tvar numEdges = 0;\n\n\t\t// allocate maximal size\n\t\tvar edges = new Uint32Array( 6 * faces.length );\n\n\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\tvar face = faces[ i ];\n\n\t\t\tfor ( var j = 0; j < 3; j ++ ) {\n\n\t\t\t\tedge[ 0 ] = face[ keys[ j ] ];\n\t\t\t\tedge[ 1 ] = face[ keys[ ( j + 1 ) % 3 ] ];\n\t\t\t\tedge.sort( sortFunction );\n\n\t\t\t\tvar key = edge.toString();\n\n\t\t\t\tif ( hash[ key ] === undefined ) {\n\n\t\t\t\t\tedges[ 2 * numEdges ] = edge[ 0 ];\n\t\t\t\t\tedges[ 2 * numEdges + 1 ] = edge[ 1 ];\n\t\t\t\t\thash[ key ] = true;\n\t\t\t\t\tnumEdges ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar coords = new Float32Array( numEdges * 2 * 3 );\n\n\t\tfor ( var i = 0, l = numEdges; i < l; i ++ ) {\n\n\t\t\tfor ( var j = 0; j < 2; j ++ ) {\n\n\t\t\t\tvar vertex = vertices[ edges [ 2 * i + j] ];\n\n\t\t\t\tvar index = 6 * i + 3 * j;\n\t\t\t\tcoords[ index + 0 ] = vertex.x;\n\t\t\t\tcoords[ index + 1 ] = vertex.y;\n\t\t\t\tcoords[ index + 2 ] = vertex.z;\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\n\n\t} else if ( object.geometry instanceof THREE.BufferGeometry ) {\n\n\t\tif ( object.geometry.attributes.index !== undefined ) { // Indexed BufferGeometry\n\n\t\t\tvar vertices = object.geometry.attributes.position.array;\n\t\t\tvar indices = object.geometry.attributes.index.array;\n\t\t\tvar drawcalls = object.geometry.drawcalls;\n\t\t\tvar numEdges = 0;\n\n\t\t\tif ( drawcalls.length === 0 ) {\n\n\t\t\t\tdrawcalls = [ { count : indices.length, index : 0, start : 0 } ];\n\n\t\t\t}\n\n\t\t\t// allocate maximal size\n\t\t\tvar edges = new Uint32Array( 2 * indices.length );\n\n\t\t\tfor ( var o = 0, ol = drawcalls.length; o < ol; ++ o ) {\n\n\t\t\t\tvar start = drawcalls[ o ].start;\n\t\t\t\tvar count = drawcalls[ o ].count;\n\t\t\t\tvar index = drawcalls[ o ].index;\n\n\t\t\t\tfor ( var i = start, il = start + count; i < il; i += 3 ) {\n\n\t\t\t\t\tfor ( var j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\t\tedge[ 0 ] = index + indices[ i + j ];\n\t\t\t\t\t\tedge[ 1 ] = index + indices[ i + ( j + 1 ) % 3 ];\n\t\t\t\t\t\tedge.sort( sortFunction );\n\n\t\t\t\t\t\tvar key = edge.toString();\n\n\t\t\t\t\t\tif ( hash[ key ] === undefined ) {\n\n\t\t\t\t\t\t\tedges[ 2 * numEdges ] = edge[ 0 ];\n\t\t\t\t\t\t\tedges[ 2 * numEdges + 1 ] = edge[ 1 ];\n\t\t\t\t\t\t\thash[ key ] = true;\n\t\t\t\t\t\t\tnumEdges ++;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar coords = new Float32Array( numEdges * 2 * 3 );\n\n\t\t\tfor ( var i = 0, l = numEdges; i < l; i ++ ) {\n\n\t\t\t\tfor ( var j = 0; j < 2; j ++ ) {\n\n\t\t\t\t\tvar index = 6 * i + 3 * j;\n\t\t\t\t\tvar index2 = 3 * edges[ 2 * i + j];\n\t\t\t\t\tcoords[ index + 0 ] = vertices[ index2 ];\n\t\t\t\t\tcoords[ index + 1 ] = vertices[ index2 + 1 ];\n\t\t\t\t\tcoords[ index + 2 ] = vertices[ index2 + 2 ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\n\n\t\t} else { // non-indexed BufferGeometry\n\n\t\t\tvar vertices = object.geometry.attributes.position.array;\n\t\t\tvar numEdges = vertices.length / 3;\n\t\t\tvar numTris = numEdges / 3;\n\n\t\t\tvar coords = new Float32Array( numEdges * 2 * 3 );\n\n\t\t\tfor ( var i = 0, l = numTris; i < l; i ++ ) {\n\n\t\t\t\tfor ( var j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\tvar index = 18 * i + 6 * j;\n\n\t\t\t\t\tvar index1 = 9 * i + 3 * j;\n\t\t\t\t\tcoords[ index + 0 ] = vertices[ index1 ];\n\t\t\t\t\tcoords[ index + 1 ] = vertices[ index1 + 1 ];\n\t\t\t\t\tcoords[ index + 2 ] = vertices[ index1 + 2 ];\n\n\t\t\t\t\tvar index2 = 9 * i + 3 * ( ( j + 1 ) % 3 );\n\t\t\t\t\tcoords[ index + 3 ] = vertices[ index2 ];\n\t\t\t\t\tcoords[ index + 4 ] = vertices[ index2 + 1 ];\n\t\t\t\t\tcoords[ index + 5 ] = vertices[ index2 + 2 ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\n\n\t\t}\n\n\t}\n\n\tTHREE.Line.call( this, geometry, new THREE.LineBasicMaterial( { color: color } ), THREE.LinePieces );\n\n\tthis.matrix = object.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n};\n\nTHREE.WireframeHelper.prototype = Object.create( THREE.Line.prototype );\n\n// File:src/extras/objects/ImmediateRenderObject.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.ImmediateRenderObject = function () {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.render = function ( renderCallback ) {};\n\n};\n\nTHREE.ImmediateRenderObject.prototype = Object.create( THREE.Object3D.prototype );\n\n// File:src/extras/objects/MorphBlendMesh.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.MorphBlendMesh = function( geometry, material ) {\n\n\tTHREE.Mesh.call( this, geometry, material );\n\n\tthis.animationsMap = {};\n\tthis.animationsList = [];\n\n\t// prepare default animation\n\t// (all frames played together in 1 second)\n\n\tvar numFrames = this.geometry.morphTargets.length;\n\n\tvar name = \"__default\";\n\n\tvar startFrame = 0;\n\tvar endFrame = numFrames - 1;\n\n\tvar fps = numFrames / 1;\n\n\tthis.createAnimation( name, startFrame, endFrame, fps );\n\tthis.setAnimationWeight( name, 1 );\n\n};\n\nTHREE.MorphBlendMesh.prototype = Object.create( THREE.Mesh.prototype );\n\nTHREE.MorphBlendMesh.prototype.createAnimation = function ( name, start, end, fps ) {\n\n\tvar animation = {\n\n\t\tstartFrame: start,\n\t\tendFrame: end,\n\n\t\tlength: end - start + 1,\n\n\t\tfps: fps,\n\t\tduration: ( end - start ) / fps,\n\n\t\tlastFrame: 0,\n\t\tcurrentFrame: 0,\n\n\t\tactive: false,\n\n\t\ttime: 0,\n\t\tdirection: 1,\n\t\tweight: 1,\n\n\t\tdirectionBackwards: false,\n\t\tmirroredLoop: false\n\n\t};\n\n\tthis.animationsMap[ name ] = animation;\n\tthis.animationsList.push( animation );\n\n};\n\nTHREE.MorphBlendMesh.prototype.autoCreateAnimations = function ( fps ) {\n\n\tvar pattern = /([a-z]+)_?(\\d+)/;\n\n\tvar firstAnimation, frameRanges = {};\n\n\tvar geometry = this.geometry;\n\n\tfor ( var i = 0, il = geometry.morphTargets.length; i < il; i ++ ) {\n\n\t\tvar morph = geometry.morphTargets[ i ];\n\t\tvar chunks = morph.name.match( pattern );\n\n\t\tif ( chunks && chunks.length > 1 ) {\n\n\t\t\tvar name = chunks[ 1 ];\n\t\t\tvar num = chunks[ 2 ];\n\n\t\t\tif ( ! frameRanges[ name ] ) frameRanges[ name ] = { start: Infinity, end: - Infinity };\n\n\t\t\tvar range = frameRanges[ name ];\n\n\t\t\tif ( i < range.start ) range.start = i;\n\t\t\tif ( i > range.end ) range.end = i;\n\n\t\t\tif ( ! firstAnimation ) firstAnimation = name;\n\n\t\t}\n\n\t}\n\n\tfor ( var name in frameRanges ) {\n\n\t\tvar range = frameRanges[ name ];\n\t\tthis.createAnimation( name, range.start, range.end, fps );\n\n\t}\n\n\tthis.firstAnimation = firstAnimation;\n\n};\n\nTHREE.MorphBlendMesh.prototype.setAnimationDirectionForward = function ( name ) {\n\n\tvar animation = this.animationsMap[ name ];\n\n\tif ( animation ) {\n\n\t\tanimation.direction = 1;\n\t\tanimation.directionBackwards = false;\n\n\t}\n\n};\n\nTHREE.MorphBlendMesh.prototype.setAnimationDirectionBackward = function ( name ) {\n\n\tvar animation = this.animationsMap[ name ];\n\n\tif ( animation ) {\n\n\t\tanimation.direction = - 1;\n\t\tanimation.directionBackwards = true;\n\n\t}\n\n};\n\nTHREE.MorphBlendMesh.prototype.setAnimationFPS = function ( name, fps ) {\n\n\tvar animation = this.animationsMap[ name ];\n\n\tif ( animation ) {\n\n\t\tanimation.fps = fps;\n\t\tanimation.duration = ( animation.end - animation.start ) / animation.fps;\n\n\t}\n\n};\n\nTHREE.MorphBlendMesh.prototype.setAnimationDuration = function ( name, duration ) {\n\n\tvar animation = this.animationsMap[ name ];\n\n\tif ( animation ) {\n\n\t\tanimation.duration = duration;\n\t\tanimation.fps = ( animation.end - animation.start ) / animation.duration;\n\n\t}\n\n};\n\nTHREE.MorphBlendMesh.prototype.setAnimationWeight = function ( name, weight ) {\n\n\tvar animation = this.animationsMap[ name ];\n\n\tif ( animation ) {\n\n\t\tanimation.weight = weight;\n\n\t}\n\n};\n\nTHREE.MorphBlendMesh.prototype.setAnimationTime = function ( name, time ) {\n\n\tvar animation = this.animationsMap[ name ];\n\n\tif ( animation ) {\n\n\t\tanimation.time = time;\n\n\t}\n\n};\n\nTHREE.MorphBlendMesh.prototype.getAnimationTime = function ( name ) {\n\n\tvar time = 0;\n\n\tvar animation = this.animationsMap[ name ];\n\n\tif ( animation ) {\n\n\t\ttime = animation.time;\n\n\t}\n\n\treturn time;\n\n};\n\nTHREE.MorphBlendMesh.prototype.getAnimationDuration = function ( name ) {\n\n\tvar duration = - 1;\n\n\tvar animation = this.animationsMap[ name ];\n\n\tif ( animation ) {\n\n\t\tduration = animation.duration;\n\n\t}\n\n\treturn duration;\n\n};\n\nTHREE.MorphBlendMesh.prototype.playAnimation = function ( name ) {\n\n\tvar animation = this.animationsMap[ name ];\n\n\tif ( animation ) {\n\n\t\tanimation.time = 0;\n\t\tanimation.active = true;\n\n\t} else {\n\n\t\tconsole.warn( \"animation[\" + name + \"] undefined\" );\n\n\t}\n\n};\n\nTHREE.MorphBlendMesh.prototype.stopAnimation = function ( name ) {\n\n\tvar animation = this.animationsMap[ name ];\n\n\tif ( animation ) {\n\n\t\tanimation.active = false;\n\n\t}\n\n};\n\nTHREE.MorphBlendMesh.prototype.update = function ( delta ) {\n\n\tfor ( var i = 0, il = this.animationsList.length; i < il; i ++ ) {\n\n\t\tvar animation = this.animationsList[ i ];\n\n\t\tif ( ! animation.active ) continue;\n\n\t\tvar frameTime = animation.duration / animation.length;\n\n\t\tanimation.time += animation.direction * delta;\n\n\t\tif ( animation.mirroredLoop ) {\n\n\t\t\tif ( animation.time > animation.duration || animation.time < 0 ) {\n\n\t\t\t\tanimation.direction *= - 1;\n\n\t\t\t\tif ( animation.time > animation.duration ) {\n\n\t\t\t\t\tanimation.time = animation.duration;\n\t\t\t\t\tanimation.directionBackwards = true;\n\n\t\t\t\t}\n\n\t\t\t\tif ( animation.time < 0 ) {\n\n\t\t\t\t\tanimation.time = 0;\n\t\t\t\t\tanimation.directionBackwards = false;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tanimation.time = animation.time % animation.duration;\n\n\t\t\tif ( animation.time < 0 ) animation.time += animation.duration;\n\n\t\t}\n\n\t\tvar keyframe = animation.startFrame + THREE.Math.clamp( Math.floor( animation.time / frameTime ), 0, animation.length - 1 );\n\t\tvar weight = animation.weight;\n\n\t\tif ( keyframe !== animation.currentFrame ) {\n\n\t\t\tthis.morphTargetInfluences[ animation.lastFrame ] = 0;\n\t\t\tthis.morphTargetInfluences[ animation.currentFrame ] = 1 * weight;\n\n\t\t\tthis.morphTargetInfluences[ keyframe ] = 0;\n\n\t\t\tanimation.lastFrame = animation.currentFrame;\n\t\t\tanimation.currentFrame = keyframe;\n\n\t\t}\n\n\t\tvar mix = ( animation.time % frameTime ) / frameTime;\n\n\t\tif ( animation.directionBackwards ) mix = 1 - mix;\n\n\t\tthis.morphTargetInfluences[ animation.currentFrame ] = mix * weight;\n\t\tthis.morphTargetInfluences[ animation.lastFrame ] = ( 1 - mix ) * weight;\n\n\t}\n\n};\n// export default THREE;\nmodule.exports=THREE;\n\n","module.exports = function(module) {\r\n\tif (!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif (!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n"],"sourceRoot":""}